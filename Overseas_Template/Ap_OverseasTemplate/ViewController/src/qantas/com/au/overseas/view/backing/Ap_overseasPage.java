package qantas.com.au.overseas.view.backing;

//import ap.quantas.com.ebs_inv_process_new.js.InputParameters;
//import ap.quantas.com.ebs_inv_process_new.js.ObjectFactory;
import ap.qantas.com.eQApprovalDetailsService.APPSQFEQIFAPINVAPPROVERREC;
import ap.qantas.com.eQApprovalDetailsService.APPSQFEQIFAPINVINVDISTINFO;
import ap.qantas.com.eQApprovalDetailsService.ApproverDetails_pttBindingQSPortClient;
import ap.qantas.com.eQApprovalDetailsService.ObjectFactory;

import ap.quantas.com.ebs_inv_process_new.db.QFEQ_AP_INV_IMG_PROCESS_ptt;
import ap.quantas.com.ebs_inv_process_new.db.QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService;
import ap.quantas.com.ebs_inv_process_new.js.APPSJSEQINVOICEHEADERREC;
import ap.quantas.com.ebs_inv_process_new.js.APPSJSEQINVOICEINTBLTYPE;
import ap.quantas.com.ebs_inv_process_new.js.APPSJSEQINVOICELINEREC;
import ap.quantas.com.ebs_inv_process_new.js.APPSJSEQOUTRESULTREC;
import ap.quantas.com.ebs_inv_process_new.js.APPSJSEQOUTRESULTTBLTYPE;
import ap.quantas.com.ebs_inv_process_new.js.JSEQINVIMGPROCESSPtt;
import ap.quantas.com.ebs_inv_process_new.js.JSEQINVIMGPROCESSPttBindingQSService;
import ap.quantas.com.ebs_inv_process_new.sp.APPSINVOICEHEADERREC;
import ap.quantas.com.ebs_inv_process_new.sp.APPSINVOICEINTBLTYPE;
import ap.quantas.com.ebs_inv_process_new.sp.APPSINVOICELINEREC;
import ap.quantas.com.ebs_inv_process_new.sp.APPSOUTRESULTREC;
import ap.quantas.com.ebs_inv_process_new.sp.APPSOUTRESULTTBLTYPE;
import ap.quantas.com.ebs_inv_process_new.sp.InputParameters;

import com.itextpdf.text.DocumentException;
import com.itextpdf.text.pdf.PdfCopy;
import com.itextpdf.text.pdf.PdfReader;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.StringWriter;

import java.math.BigDecimal;
import java.math.BigInteger;
import java.math.RoundingMode;

import java.net.MalformedURLException;

import java.sql.SQLException;

import java.text.DateFormat;
import java.text.DecimalFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;

import javax.faces.application.Application;
import javax.faces.application.FacesMessage;
import javax.faces.application.ViewHandler;
import javax.faces.component.UIComponent;
import javax.faces.component.UIViewRoot;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;
import javax.faces.validator.ValidatorException;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.PropertyException;
import javax.xml.datatype.DatatypeConfigurationException;
import javax.xml.datatype.DatatypeFactory;
import javax.xml.datatype.XMLGregorianCalendar;

import oracle.adf.controller.binding.BindingUtils;
import oracle.adf.model.BindingContext;
import oracle.adf.model.binding.DCBindingContainer;
import oracle.adf.model.binding.DCIteratorBinding;
import oracle.adf.share.ADFContext;
import oracle.adf.view.rich.component.rich.RichForm;
import oracle.adf.view.rich.component.rich.RichPopup;
import oracle.adf.view.rich.component.rich.data.RichColumn;
import oracle.adf.view.rich.component.rich.data.RichTable;
import oracle.adf.view.rich.component.rich.input.RichInputDate;
import oracle.adf.view.rich.component.rich.input.RichInputFile;
import oracle.adf.view.rich.component.rich.input.RichInputText;
import oracle.adf.view.rich.component.rich.input.RichSelectBooleanCheckbox;
import oracle.adf.view.rich.component.rich.input.RichSelectOneChoice;
import oracle.adf.view.rich.component.rich.input.RichSelectOneRadio;
import oracle.adf.view.rich.component.rich.layout.RichPanelFormLayout;
import oracle.adf.view.rich.component.rich.layout.RichPanelGroupLayout;
import oracle.adf.view.rich.component.rich.layout.RichPanelLabelAndMessage;
import oracle.adf.view.rich.component.rich.nav.RichCommandButton;
import oracle.adf.view.rich.component.rich.nav.RichCommandImageLink;
import oracle.adf.view.rich.component.rich.output.RichInlineFrame;
import oracle.adf.view.rich.component.rich.output.RichMessages;
import oracle.adf.view.rich.component.rich.output.RichOutputFormatted;
import oracle.adf.view.rich.component.rich.output.RichOutputText;
import oracle.adf.view.rich.context.AdfFacesContext;
import oracle.adf.view.rich.render.ClientEvent;

import oracle.binding.BindingContainer;
import oracle.binding.OperationBinding;

import oracle.jbo.Key;
import oracle.jbo.Row;
import oracle.jbo.RowSetIterator;
import oracle.jbo.ViewCriteria;
import oracle.jbo.ViewObject;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;

import org.apache.commons.io.FilenameUtils;
import org.apache.myfaces.trinidad.component.UIXGroup;
import org.apache.myfaces.trinidad.model.RowKeySet;
import org.apache.myfaces.trinidad.model.UploadedFile;
import org.apache.myfaces.trinidad.render.ExtendedRenderKitService;
import org.apache.myfaces.trinidad.util.ComponentUtils;
import org.apache.myfaces.trinidad.util.Service;

import org.invoicerouter.InvoiceImport;

import qantas.com.au.PropertyLoader;
import qantas.com.router.RouterProcess;
import qantas.com.router.RouterProcess_EP_ep;

public class Ap_overseasPage {
    private RichPanelFormLayout pfl1;
    private RichInputText it1;
    private RichInputText it2;
    private RichInputDate id1;
    private RichInputText it3;
    private RichInputText it4;
    private RichInputText it5;
    private RichInputText it6;
    private RichInputText it7;
    private RichInputText it8;
    private RichInputText it9;
    private RichInputText it10;
    private RichInputDate id2;
    private RichInputDate id3;
    private RichInputText it11;
    private RichInputText it12;
    private RichInputText it13;
    private RichInputText it14;
    private RichInputDate id4;
    private RichInputText it15;
    private RichInputText it16;
    private RichInputText it17;
    private RichInputText it18;
    private RichInputText it19;
    private RichInputText it20;
    private RichInputText it21;
    private RichInputText it22;
    private RichInputText it23;
    private RichInputText it24;
    private RichInputText it25;
    private RichInputText it26;
    private RichInputText it27;
    private RichInputText it28;
    private RichInputText it29;
    private RichInputText it30;
    private RichInputText it31;
    private RichInputText it32;
    private RichInputText it33;
    private RichInputText it34;
    private RichInputText it35;
    private RichInputText it36;
    private RichInputText it37;
    private RichInputText it38;
    private RichInputText it39;
    private RichInputText it40;
    private RichInputText it41;
    private RichInputText it42;
    private RichInputText it43;
    private RichInputText it44;
    private RichInputText it45;
    private RichInputText it46;
    private RichInputText it47;
    private RichInputText it48;
    private RichInputText it49;
    private RichInputText it50;
    private RichInputText it51;
    private RichInputText it52;
    private RichInputText it53;
    private RichInputText it54;
    private RichInputText alternateApproverIt;
    private RichMessages m1;
    private RichTable t1;
    private RichForm f1;
    private RichSelectOneChoice docTypeSoc;
    private RichInputText supNameIt;
    private RichInputText invoiceidIT;
    private RichInputText siteIdIt;
    private RichInputText poNumIt;
    private RichInputText taxRegIt;
    private RichInputText invNumIt;
    private RichInputText currencyIt;
    private RichInputText certNameIt;
    private RichInputText certEmailIt;
    private RichSelectOneChoice invoiceTypeSoc;
    private RichInputText suppNumIt;
    private RichInputText supplierID;
    private RichInputText siteNameIt;
    private RichInputText operatingUnitIt;
    private RichInputText lineIdIt;
    private RichInputText taxTotIt;
    private RichInputText headerTotIt;
    private RichInputText employeeNoIt;
    private RichInputDate invDateId;
    RichPanelGroupLayout lineTableOuterPgl;
    private RichPanelGroupLayout pgFileUploader;

    private RichPanelGroupLayout pgFileIFrame;
     private RichPanelGroupLayout iframePGLayout;
    private RichInputFile inputFile;
    private UploadedFile file;
    private String fileContent;
    private String fileName;
    private String urlOrg;
    private InputStream inputstream;
    private String filePath;
    private RichInlineFrame if1;
    private RichCommandButton cb1;
    private RichPopup p9;
     private RichPopup popUpTemplate;
    private RichInputText taxRateCodePopupIt;
    private RichTable t2;
    private RichTable taxRateCodeDetailsTable;
    private RichInputText clientID;
    private RichOutputText validationErrorMessage;
    private RichPopup validationErrorPopup;
    private RichPanelGroupLayout pgInvoiceDets;

    private RichPanelGroupLayout certifierPG;
    private RichInputText taxAmountLine;
    private RichInputText lineTotal;
    private RichOutputText sumOfTaxTotal;
    private RichOutputText sumOfLineTotal;
    private UIXGroup g2;

    private RichOutputText ot1;
    private UIXGroup g3;
    private RichOutputText ot4;
    private RichPanelFormLayout pfl2;
    private RichInputText itTemplateName;
    private RichInputText itTemplateDocNAme;
    private RichInputText  itTemplateInvType;
    private RichInputText  itTemplateSuppName;
    private RichInputText itTemplateSuppNo;
    private RichInputText itTemplateSiteId;
    private RichInputText itTemplateOpUnit;
    private RichInputText  itTemplateTaxRegNo;
    private RichInputText  itTemplateSiteName ;
    private RichOutputFormatted ofTemplate;
    private RichInputText chooseTemplateIt;
    private RichPopup popUpChooseTemplate;
    private RichTable templateTable;
    private RichPanelGroupLayout subpaymentPg;
    private RichPanelGroupLayout paymentPg;
    //private RichSelectBooleanCheckbox pc1;
    private RichSelectBooleanCheckbox pc2;
    private RichSelectBooleanCheckbox pc3;
    private RichSelectBooleanCheckbox mpaC;
    private RichPopup pop_SupplierName;
    private RichInputText supNamePopupIt;
    private RichTable supDetailsTable;
    private RichPanelGroupLayout headerOuterPgl;
    private RichTable siteDetailsTable;
    private RichInputText siteNamePopupIt;
    private RichPopup popup_SiteID;
    private RichSelectOneChoice siteLOVSoc;
    private RichPopup poNumpopUp_Header;
    private RichInputText isLineItemPopup;
    private RichTable poDetailsTable;
    private RichInputText poNumPopupIt;
    private RichInputText currencyCodePopupIT;
    private RichPopup currencyPopUp;
    private RichTable currencyCodeDetailsTable;
    private RichPopup popUpCertifier;
    private RichOutputText certifierNameErrorOT;
    private RichTable certifierNameDetailsTable;
    private RichInputText certifierNamePopupIT;
    private String chosenEmployeeId;
    private int certifierFlag=0;
    private String chosenCertifierName;
    private RichSelectOneChoice searchByCertifiername;
    private RichOutputText outputTemplateErrorMsg;
    private RichPanelGroupLayout templatePgLAyout;
    private RichPopup glcode_popup;
    private RichPanelGroupLayout pg148;
    private RichOutputText glCodeErrorOt;
     private RichPanelGroupLayout pg147;
    private RichPanelFormLayout glCodePgl;
    private RichTable companyDetailsTable;
    private RichTable accountDetailsTable;
    private RichTable analysisCodeDetailsTable;
    private RichTable counterPartyDetailsTable;
    private RichTable costCentreDetailsTable;
    private RichInputText companyNameIt;
    private RichInputText costCentreIT;
    private RichInputText accountNameIt;
    private RichInputText analysisCodeIt;
    private RichInputText counterPartyIt;
    private RichOutputText companyNameOt;
    private RichOutputText costCentreOt;
    private RichOutputText accountNameOt;
    private RichOutputText analysisCodeOt;
    private RichOutputText counterPartyOt;
    private RichSelectOneChoice companySoc;
    private RichInputText companyNamePopupIt;
    private RichInputText orgIdIt;
    private RichPopup p10;
    private RichPopup p12;
    private RichPopup p11;
    private RichPopup p13;
    private RichSelectOneChoice costcenterSoc;
    private RichInputText costCentrePopupIt;
     private RichInputText accountNamePopupIt;
    private RichSelectOneChoice accountSoc;
    private RichSelectOneChoice analysisCodeSoc;
    private RichInputText analysisCodePopupIt;
    private RichSelectOneChoice counterPartySoc;
    private RichInputText counterPartyPopupIt;
    private RichPopup p3;
    private RichPanelFormLayout pfl3;
    private RichPanelLabelAndMessage plam1;
    private RichOutputText ot7;

    private RichPopup taxrate_popup;
    private RichPopup projectNo_pop;
    private RichTable t4;
    private RichTable projDtlTable;
    private RichInputText projNoPopupIt;
    private RichInputText projectNoIT;
    private RichInputText projectIdIt;
    private RichPopup p4;
    private RichInputText taskNoIT;
    private RichTable taskDtlTable;
    private RichInputText taskNoPopupIt;
    private RichInputText taskIdIt;
    private RichInputDate expDateIT;
    private RichTable expOrgTable;
    private RichPopup p5;
    private RichInputText expOrgIT;
    private RichInputText expOrgPopUpIt;
    private RichTable t13;
    private RichSelectBooleanCheckbox certDecSC;
    private RichPanelGroupLayout certDecPg;
    private RichCommandButton submit_cb;
    private RichCommandButton validate_cb;
    private RichPanelGroupLayout pgOperations;
    private RichInputText paymentAllocNo;
    private RichColumn projectColumn;
    private RichColumn glcode_column;
    private RichColumn taskNo_column;
    private RichColumn expOrg_column;
    private RichColumn expDate_column;
    private RichColumn expType_column;
    private RichSelectBooleanCheckbox certifier_sbc;
    private RichSelectBooleanCheckbox natureOfEXpSOC;
    private RichInputText certifierApproveComments;
    private RichPopup certifierApproverListPopUp;
    private RichSelectOneChoice lineTypeSOC;
    private RichPopup p14;
    private RichTable alternateApproverDetailsTable;
    private RichInputText alternateAppoverPopupIT;
    private RichSelectBooleanCheckbox deleteTemplateCheckBox;
    private RichPanelLabelAndMessage certifier_plm;
    private RichPanelLabelAndMessage noteToApprv_plm;
    private RichTable eqApproverDetailsTable;
    private RichPanelLabelAndMessage alternateApprover_plm;

    private RichColumn linePoNum_column;
    private RichColumn poLineNum_column;

    private RichInputText linePONum_it;
    private RichInputText poLineNum_it;
    private RichCommandImageLink poNum_plm;
    private RichInputText descPopupIt;
    private RichPopup descPopup;
    private RichTable t14;
    private RichPopup p4_po;
    private RichPopup p8;
    private RichTable poLineNumberTable;
    private RichCommandButton selectPOLineNumPopup;
    private RichInputText poLineNumPopupIt;
    private RichSelectOneRadio radio_paymentTypes;
    private RichPopup suspenseAcc_Popup;
    private RichOutputText suspense_message_OP;
    private RichInputText GLCodeIT;
    private RichInputText recCode;
    private RichColumn reccode_column;
    private RichInputText vendorIdIt;
    private RichOutputText ebsErrorMessage;
    private RichPopup certifierApprovePopup;
    private RichInputText certifierApprovePopupIt;
    private RichPanelGroupLayout pgParent;
    private RichPopup p18;
    private RichInputText expTypePopUpIt;
    private RichTable expTypeDetailsTable;
    private RichInputText expTypeIt;
     private RichInputText alternateapprovNoIt;
  private  RichCommandImageLink certifier_commandImageLink;
   private  RichCommandImageLink  searchAltApproverLink;
    private  RichCommandImageLink certifierApproveLink;
    private RichOutputText suspense_message_code;
     private RichPanelGroupLayout ebsPanelGroupLaylout;
    private PropertyLoader propertyLoader = PropertyLoader.getInstance();
    //923018 Start UI Change for New Field start
    private RichInputText it100;
    private RichInputText electRemittence;
    private  RichCommandImageLink electRemittenceLink;
    private RichPopup electRemittencePopup;
    private RichInputText electRemittencePopUpIt;
    private RichCommandButton cb5;
    private RichOutputText ot76;
    private RichPanelGroupLayout pgl1;
    private String imagePath;
    private boolean lineTypeColumnStatus,bankAccountColumnStatus = true;
    List<SelectItem> customList;
    private String stars=new String("Site Id");
    //private RichInputText it26;
    // private RichTable t14;
    //923018 Start UI Change for New Field end
    // private RichInputText commentsIt;
    // private RichInputText taxAmountLine;


    public static FacesContext getFacesContext() {
        return FacesContext.getCurrentInstance();
    }

    public static Object resolveExpression(String expression) {
        FacesContext facesContext = getFacesContext();
        Application app = facesContext.getApplication();
        ExpressionFactory elFactory = app.getExpressionFactory();
        ELContext elContext = facesContext.getELContext();
        ValueExpression valueExp =
            elFactory.createValueExpression(elContext, expression,
                                            Object.class);
        return valueExp.getValue(elContext);
    }

    public void setImagePath(String imagePath) {
    this.imagePath = imagePath;
    }

    public String getImagePath() {
    return imagePath;
    }

    public void setPfl1(RichPanelFormLayout pfl1) {
        this.pfl1 = pfl1;
    }

    public RichPanelFormLayout getPfl1() {
        return pfl1;
    }

    public void setIt1(RichInputText it1) {
        this.it1 = it1;
    }

    public RichInputText getIt1() {
        return it1;
    }

    public void setIt2(RichInputText it2) {
        this.it2 = it2;
    }

    public RichInputText getIt2() {
        return it2;
    }

    public void setId1(RichInputDate id1) {
        this.id1 = id1;
    }

    public RichInputDate getId1() {
        return id1;
    }

    public void setIt3(RichInputText it3) {
        this.it3 = it3;
    }

    public RichInputText getIt3() {
        return it3;
    }

    public void setIt4(RichInputText it4) {
        this.it4 = it4;
    }

    public RichInputText getIt4() {
        return it4;
    }

    public void setIt5(RichInputText it5) {
        this.it5 = it5;
    }

    public RichInputText getIt5() {
        return it5;
    }

    public void setIt6(RichInputText it6) {
        this.it6 = it6;
    }

    public RichInputText getIt6() {
        return it6;
    }

    public void setIt7(RichInputText it7) {
        this.it7 = it7;
    }

    public RichInputText getIt7() {
        return it7;
    }

    public void setIt8(RichInputText it8) {
        this.it8 = it8;
    }

    public RichInputText getIt8() {
        return it8;
    }

    public void setIt9(RichInputText it9) {
        this.it9 = it9;
    }

    public RichInputText getIt9() {
        return it9;
    }

    public void setIt10(RichInputText it10) {
        this.it10 = it10;
    }

    public RichInputText getIt10() {
        return it10;
    }

    public void setId2(RichInputDate id2) {
        this.id2 = id2;
    }

    public RichInputDate getId2() {
        return id2;
    }

    public void setId3(RichInputDate id3) {
        this.id3 = id3;
    }

    public RichInputDate getId3() {
        return id3;
    }

    public void setIt11(RichInputText it11) {
        this.it11 = it11;
    }

    public RichInputText getIt11() {
        return it11;
    }

    public void setIt12(RichInputText it12) {
        this.it12 = it12;
    }

    public RichInputText getIt12() {
        return it12;
    }

    public void setIt13(RichInputText it13) {
        this.it13 = it13;
    }

    public RichInputText getIt13() {
        return it13;
    }

    public void setIt14(RichInputText it14) {
        this.it14 = it14;
    }

    public RichInputText getIt14() {
        return it14;
    }

    public void setId4(RichInputDate id4) {
        this.id4 = id4;
    }

    public RichInputDate getId4() {
        return id4;
    }

    public void setIt15(RichInputText it15) {
        this.it15 = it15;
    }

    public RichInputText getIt15() {
        return it15;
    }

    public void setIt16(RichInputText it16) {
        this.it16 = it16;
    }

    public RichInputText getIt16() {
        return it16;
    }

    public void setIt17(RichInputText it17) {
        this.it17 = it17;
    }

    public RichInputText getIt17() {
        return it17;
    }

    public void setIt18(RichInputText it18) {
        this.it18 = it18;
    }

    public RichInputText getIt18() {
        return it18;
    }

    public void setIt19(RichInputText it19) {
        this.it19 = it19;
    }

    public RichInputText getIt19() {
        return it19;
    }

    public void setIt20(RichInputText it20) {
        this.it20 = it20;
    }

    public RichInputText getIt20() {
        return it20;
    }

    public void setIt21(RichInputText it21) {
        this.it21 = it21;
    }

    public RichInputText getIt21() {
        return it21;
    }

    public void setIt22(RichInputText it22) {
        this.it22 = it22;
    }

    public RichInputText getIt22() {
        return it22;
    }

    public void setIt23(RichInputText it23) {
        this.it23 = it23;
    }

    public RichInputText getIt23() {
        return it23;
    }

    public void setIt24(RichInputText it24) {
        this.it24 = it24;
    }

    public RichInputText getIt24() {
        return it24;
    }

    public void setIt25(RichInputText it25) {
        this.it25 = it25;
    }

    public RichInputText getIt25() {
        return it25;
    }

    public void setIt26(RichInputText it26) {
        this.it26 = it26;
    }

    public RichInputText getIt26() {
        return it26;
    }

    public void setIt27(RichInputText it27) {
        this.it27 = it27;
    }

    public RichInputText getIt27() {
        return it27;
    }

    public void setIt28(RichInputText it28) {
        this.it28 = it28;
    }

    public RichInputText getIt28() {
        return it28;
    }

    public void setIt29(RichInputText it29) {
        this.it29 = it29;
    }

    public RichInputText getIt29() {
        return it29;
    }

    public void setIt30(RichInputText it30) {
        this.it30 = it30;
    }

    public RichInputText getIt30() {
        return it30;
    }

    public void setIt31(RichInputText it31) {
        this.it31 = it31;
    }

    public RichInputText getIt31() {
        return it31;
    }

    public void setIt32(RichInputText it32) {
        this.it32 = it32;
    }

    public RichInputText getIt32() {
        return it32;
    }

    public void setIt33(RichInputText it33) {
        this.it33 = it33;
    }

    public RichInputText getIt33() {
        return it33;
    }

    public void setIt34(RichInputText it34) {
        this.it34 = it34;
    }

    public RichInputText getIt34() {
        return it34;
    }

    public void setIt35(RichInputText it35) {
        this.it35 = it35;
    }

    public RichInputText getIt35() {
        return it35;
    }

    public void setIt36(RichInputText it36) {
        this.it36 = it36;
    }

    public RichInputText getIt36() {
        return it36;
    }

    public void setIt37(RichInputText it37) {
        this.it37 = it37;
    }

    public RichInputText getIt37() {
        return it37;
    }

    public void setIt38(RichInputText it38) {
        this.it38 = it38;
    }

    public RichInputText getIt38() {
        return it38;
    }

    public void setIt39(RichInputText it39) {
        this.it39 = it39;
    }

    public RichInputText getIt39() {
        return it39;
    }

    public void setIt40(RichInputText it40) {
        this.it40 = it40;
    }

    public RichInputText getIt40() {
        return it40;
    }

    public void setIt41(RichInputText it41) {
        this.it41 = it41;
    }

    public RichInputText getIt41() {
        return it41;
    }

    public void setIt42(RichInputText it42) {
        this.it42 = it42;
    }

    public RichInputText getIt42() {
        return it42;
    }

    public void setIt43(RichInputText it43) {
        this.it43 = it43;
    }

    public RichInputText getIt43() {
        return it43;
    }

    public void setIt44(RichInputText it44) {
        this.it44 = it44;
    }

    public RichInputText getIt44() {
        return it44;
    }

    public void setIt45(RichInputText it45) {
        this.it45 = it45;
    }

    public RichInputText getIt45() {
        return it45;
    }

    public void setIt46(RichInputText it46) {
        this.it46 = it46;
    }

    public RichInputText getIt46() {
        return it46;
    }

    public void setIt47(RichInputText it47) {
        this.it47 = it47;
    }

    public RichInputText getIt47() {
        return it47;
    }

    public void setIt48(RichInputText it48) {
        this.it48 = it48;
    }

    public RichInputText getIt48() {
        return it48;
    }

    public void setIt49(RichInputText it49) {
        this.it49 = it49;
    }

    public RichInputText getIt49() {
        return it49;
    }

    public void setIt50(RichInputText it50) {
        this.it50 = it50;
    }

    public RichInputText getIt50() {
        return it50;
    }

    public void setIt51(RichInputText it51) {
        this.it51 = it51;
    }

    public RichInputText getIt51() {
        return it51;
    }

    public void setIt52(RichInputText it52) {
        this.it52 = it52;
    }

    public RichInputText getIt52() {
        return it52;
    }

    public void setIt53(RichInputText it53) {
        this.it53 = it53;
    }

    public RichInputText getIt53() {
        return it53;
    }

    public void setIt54(RichInputText it54) {
        this.it54 = it54;
    }

    public RichInputText getIt54() {
        return it54;
    }

    public void setM1(RichMessages m1) {
        this.m1 = m1;
    }

    public RichMessages getM1() {
        return m1;
    }

    public void setT1(RichTable t1) {
        this.t1 = t1;
    }

    public RichTable getT1() {
        return t1;
    }
    // Adding for JetStar
    public void setUrlOrg(String urlOrg) {
    this.urlOrg = urlOrg;
    }

    public String getUrlOrg() {
    // return urlOrg;
    return (String) ADFContext.getCurrent().getPageFlowScope().get("ORG");
    }

    public void setStars(String stars) {
        this.stars = stars;
    }

    public String getStars() {
        return stars;
    }

    public void setCustomList(List<SelectItem> customList) {
        this.customList = customList;
    }

    public List<SelectItem> getCustomList() {
        if(customList==null){
                    customList=new ArrayList<SelectItem>();
//                    System.out.println("Enter loop :"+customList.size());
                        if (getUrlOrg().equalsIgnoreCase("QF")){
                            customList.add(new SelectItem("SiteName","Site Name"));
                            customList.add(new SelectItem("SiteId","Site Id"));

                        }else{
                        customList.add(new SelectItem("SiteName","Site Name"));
                        customList.add(new SelectItem("SiteId","Site Id"));
                        customList.add(new SelectItem("BankAccountNo","Bank Account Number"));
                        }
                }
//                System.out.println("End loop :"+customList.size());
        return customList;
    }



    public void onPageLoad(ClientEvent clientEvent) {
        System.out.println("Start:psp1111--------------------------------------------------------");
        System.out.println("Start:psp onPageLoad11 get iframeRendered ::" + ADFContext.getCurrent().getPageFlowScope().get("iframeRendered"));

        setUrlOrg((String) ADFContext.getCurrent()
                                             .getPageFlowScope()
                                             .get("ORG"));
                System.out.println("GetUrlOrg : " + getUrlOrg());
                System.out.println("ADF URL :" + (String) ADFContext.getCurrent()
                                                                    .getPageFlowScope()
                                                                    .get("ORG"));
        System.out.println( "OrgIDT value ::"+ orgIdIt.getValue()+"Setting orgId::"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID"));
        if (getUrlOrg().equalsIgnoreCase("JS")) {
                    System.out.println("Js Lable Block");
                    mpaC.setText("Manual payment Allocation (Pay Method WIRE)");
        //            lineTypeColumnStatus=false;
                } else {
                    mpaC.setText("Manual payment Allocation");
        //            getLineTypeColumnStatus(true);
        //            lineTypeColumnStatus=true;
                }
                getLineTypeColumnStatus();
        getBankAccountColumnStatus();
        getCustomList();
        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID")!=null){
            orgIdIt.setValue(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID").toString());

        }


        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("orginal_fileName")!=null){
         System.out.println("orginal_fileName is not null and is ===="+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("orginal_fileName").toString());
        }

        /*******Added on 20th DEC ************/
        /*String supplierName = ADFContext.getCurrent().getPageFlowScope().get("SupplierPresent")!=null ? ADFContext.getCurrent().getPageFlowScope().get("SupplierPresent").toString() : null;
        if(supplierName!=null && !supplierName.equals("") && ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID")==null
                                                               ||(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID").toString().equals("") ) ){

         System.out.println("Inside org id coming null from page load");

            try {

                           DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                           DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesVO1Iterator");
                           ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                           ViewCriteria vc = suppNameVO.getViewCriteria("SitesVOCriteria");
                           suppNameVO.applyViewCriteria(vc);
                           suppNameVO.setNamedWhereClauseParam("bindVendorName", supplierName);
                           System.out.println("-----------Dynamic Query-----------");
                           System.out.println(suppNameVO.getQuery());
                           suppNameVO.executeQuery();
                           AdfFacesContext.getCurrentInstance().addPartialTarget(supDetailsTable);

                   }
                   catch(Exception e) {
                       e.printStackTrace();
                   }
        }*/


        /*******Added on 20th DEC ************/
        String iframeRendered = ADFContext.getCurrent().getPageFlowScope().get("iframeRendered").toString();
        if(iframeRendered!=null && iframeRendered.equals("true")  && ADFContext.getCurrent().getPageFlowScope().get("file_name")!=null){
          //  System.out.println("Setting file source");
           // if1.setSource("/showpdfservlet?name=/u02_sa_soadev/Oracle/Middleware/Upload/194901_Invoice_INPROGRESS.pdf");
            System.out.println("Displaying iframe visible as true");
            if1.setVisible(true);
            if1.setRendered(true);
            AdfFacesContext.getCurrentInstance().addPartialTarget(f1);

        }


        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("natureofEXP_flag")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("natureofEXP_flag").toString().equals("true")){
            natureOfEXpSOC.setValue("true");
        }
        System.out.println(" :::::: AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pc2\")"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc2"));
        System.out.println(" :::: AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pc3\")"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc3"));
        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("mpa_flag")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("mpa_flag").toString().equals("true")){
           mpaC.setValue("true");
        }

        /*if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc1") !=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc1").toString().equals("true")){
            pc1.setValue("true");
        }*/
        //923018
       /* if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc2")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc2").toString().equals("true")){

            radio_paymentTypes.setValue("WIRE");
        }
        else if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc3")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc3").toString().equals("true")){
            radio_paymentTypes.setValue("CHEQUE");
        }*/

        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){
            System.out.println("Setting certifier_sbc as true");

            certifier_sbc.setValue("true");
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_sbc);
        }
        System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pc2\")"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc2"));
        System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pc3\")"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc3"));
        if (getUrlOrg().equalsIgnoreCase("JS")) {
            System.out.println("Js Page Load");
            subpaymentPg.setVisible(true);
            subpaymentPg.setRendered(true);
            getRadio_paymentTypes().setDisabled(true);
            getRadio_paymentTypes().setVisible(false);
        }
        if(mpaC.getValue().toString().equals("true")){
            System.out.println("mpac 1234567890----->");
            if (getUrlOrg().equalsIgnoreCase("JS")) {
                System.out.println("JS Block radio_paymentTypes.setValue(\"WIRE\")---->");
                radio_paymentTypes.setValue("WIRE");

                subpaymentPg.setVisible(true);
                subpaymentPg.setRendered(true);
                //pc1.setVisible(true);
                //pc1.setRendered(true);
                radio_paymentTypes.setVisible(false);
                radio_paymentTypes.setRendered(false);

                //923018- Payment_cheque No- Start
                /* if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
                System.out.println("pc3.getValue().toString().equals(\"true\") ::");

                if( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum")!=null){
                    System.out.println("setting paymentAllocNum::"+ AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum"));
                    paymentAllocNo.setValue(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum").toString());
                    paymentAllocNo.setDisabled(false);
                } if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE") )
                    paymentAllocNo.setDisabled(false);

                }

                else{
                    paymentAllocNo.setValue("");
                    paymentAllocNo.setDisabled(true);

                }*/
                if (AdfFacesContext.getCurrentInstance()
                                   .getPageFlowScope()
                                   .get("paymentAllocNum") != null) {
                    System.out.println("JS Block setting paymentAllocNum::" + AdfFacesContext.getCurrentInstance()
                                                                                             .getPageFlowScope()
                                                                                             .get("paymentAllocNum"));
                    paymentAllocNo.setValue(AdfFacesContext.getCurrentInstance()
                                                           .getPageFlowScope()
                                                           .get("paymentAllocNum")
                                                           .toString());

                }
                paymentAllocNo.setDisabled(false);
                radio_paymentTypes.setDisabled(true);
                //923018- Payment_cheque No- End


                System.out.println("JS Block Partial trigger adding1 visible");
                AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
                AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
            } else {
            if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc2")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc2").toString().equals("true")){
               System.out.println(" radio_paymentTypes.setValue(\"WIRE\")---->");
                        radio_paymentTypes.setValue("WIRE");
           }
           else if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc3")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pc3").toString().equals("true")){
                System.out.println(" radio_paymentTypes.setValue(\"CHEQUE\")---->");
                        radio_paymentTypes.setValue("CHEQUE");
            }
            subpaymentPg.setVisible(true);
            subpaymentPg.setRendered(true);
            //pc1.setVisible(true);
            //pc1.setRendered(true);
            radio_paymentTypes.setVisible(true);
            radio_paymentTypes.setRendered(true);

            //923018- Payment_cheque No- Start
           /* if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
            System.out.println("pc3.getValue().toString().equals(\"true\") ::");

            if( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum")!=null){
                System.out.println("setting paymentAllocNum::"+ AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum"));
                paymentAllocNo.setValue(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum").toString());
                paymentAllocNo.setDisabled(false);
            } if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE") )
                paymentAllocNo.setDisabled(false);

            }

            else{
                paymentAllocNo.setValue("");
                paymentAllocNo.setDisabled(true);

            }*/
           if( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum")!=null){
               System.out.println("setting paymentAllocNum::"+ AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum"));
               paymentAllocNo.setValue(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("paymentAllocNum").toString());

           }
            paymentAllocNo.setDisabled(false);
            radio_paymentTypes.setDisabled(false);
            //923018- Payment_cheque No- End



            System.out.println("Partial trigger adding1 visible");
            AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
            AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);


            }
        }

        if(mpaC.getValue().toString().equals("false") /* 923018- Payment_cheque No -Changes -Start|| (mpaC.getValue().toString().equals("true") && (radio_paymentTypes.getValue() == null  ||


                                                          (radio_paymentTypes.getValue()!=null && !radio_paymentTypes.getValue().toString().equals("CHEQUE"))))923018- Payment_cheque No -Changes -End*/){

            System.out.println("inside mpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaCmpaC");
            //923018
            radio_paymentTypes.setDisabled(true);
            paymentAllocNo.setDisabled(true);


            System.out.println("Partial trigger adding1 visible 1112222222222");
            AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
            AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
        }






        String certifier_flag = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
        BindingContext context = BindingUtils.getBindingContext();
        DCBindingContainer bindings =
                    (DCBindingContainer)context.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
         rowSetIterator= iterator.getViewObject().createRowSetIterator(null);

            if(certifier_flag== null ||(certifier_flag!=null && certifier_flag.equals("false"))  ){
               // certNameIt.setValue("");
               // certNameIt.setVisible(false);
                //certNameIt.setRendered(false);
                //certEmailIt.setValue("");
                //certEmailIt.setVisible(false);
                //certEmailIt.setRendered(false);

                certifierApproveComments.setValue("");
               /* certifierApproveComments.setVisible(false);
                certifierApproveComments.setRendered(false);*/
                //certifier_plm.setVisible(false);
                //certifier_plm.setRendered(false);
                //noteToApprv_plm.setRendered(false);
                //noteToApprv_plm.setVisible(false);
                alternateApproverIt.setValue("");
                //alternateApprover_plm.setVisible(false);
                //alternateApprover_plm.setRendered(false);

                searchAltApproverLink.setDisabled(true);
                alternateApproverIt.setDisabled(true);


               certifierApproveComments.setDisabled(true);
                certifierApproveLink.setDisabled(true);

                System.out.println("On pageload Disabling certifier realted all kinds of header fields");


            }else{

                invoiceTypeSoc.setValue("Non PO Invoice");
               certNameIt.setVisible(true);
               certNameIt.setRendered(true);

               certEmailIt.setVisible(true);
               certEmailIt.setRendered(true);

               certifierApproveComments.setVisible(true);
               certifierApproveComments.setRendered(true);
               certifier_plm.setVisible(true);
               certifier_plm.setRendered(true);
               noteToApprv_plm.setRendered(true);
               noteToApprv_plm.setVisible(true);
               //employeeNoIt.setDisabled(false);
               certEmailIt.setDisabled(false);
               certNameIt.setDisabled(false);
                certifier_commandImageLink.setDisabled(false);
                alternateApprover_plm.setVisible(true);
                alternateApprover_plm.setRendered(true);
               System.out.println("On pageload enabling certifier realted all kinds of header fields");
                poNumIt.setDisabled(true);
                poNum_plm.setDisabled(true);

                searchAltApproverLink.setDisabled(false);
                //alternateApproverIt.setDisabled(false);


                certifierApproveComments.setDisabled(false);
                certifierApproveLink.setDisabled(false);


            }




        int i = 0;
        int recDeleted = 0;
        while (rowSetIterator.hasNext())
              {
                   Row r = rowSetIterator.next();

                   //attr8 is used for certification flag
                 // r.getAttribute(arg0)

            /************starts :Rec code related addition*****************/
            System.out.println("LineNumber : "+r.getAttribute("LineNumber"));
            System.out.println("GlNo : "+r.getAttribute("GlNo"));
            System.out.println("REC Code : "+r.getAttribute("RecCode"));
            if((certifier_flag!=null && certifier_flag.equals("true") )&& r.getAttribute("GlNo")!=null && !r.getAttribute("GlNo").equals(""))
            {
                System.out.println("Org id "+ADFContext.getCurrent().getPageFlowScope().get("OrgID"));

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ValidateGLCodeVO1Iterator");
                ViewObjectImpl validateGLCodeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();

                validateGLCodeVO.setNamedWhereClauseParam("bindGLCode",r.getAttribute("GlNo"));
                validateGLCodeVO.setNamedWhereClauseParam("bindOrgID",ADFContext.getCurrent().getPageFlowScope().get("OrgID"));
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(validateGLCodeVO.getQuery());
                validateGLCodeVO.executeQuery();
                while (validateGLCodeVO.hasNext()) {
                  Row row = validateGLCodeVO.next(); // Get the next row in the result set.
                  System.out.println("Validglcode ."+ row.getAttribute("Validglcode")+".");
                if(row.getAttribute("Validglcode")!=null && !row.getAttribute("Validglcode").equals("") && row.getAttribute("Validglcode").equals("Y"))
                    r.setAttribute("RecCodeFlag", "Y");
               else
                 r.setAttribute("RecCodeFlag", null);
                }
                System.out.println("REC Code flag is set as "+r.getAttribute("RecCodeFlag"));
            }

                  /************ends :Rec code related addition*****************/



            if(certifier_flag== null ||(certifier_flag!=null && certifier_flag.equals("false"))  ){
                   System.out.println("Setting certifier related fields as disabled");
                    /*r.setAttribute("GlNo", null);
                    r.setAttribute("TaskNo", null);
                    r.setAttribute("ExpinditureOrg", null);
                    r.setAttribute("ProjectNo", null);
                    r.setAttribute("ExpenditureDate", null);*/
                  /* projectNoIT.setDisabled(true);
                   GLCodeIT.setDisabled(true);
                   taskNoIT.setDisabled(true);
                   expOrgIT.setDisabled(true);
                   expDateIT.setDisabled(true);*/
                   projectColumn.setVisible(false);
                   projectColumn.setRendered(false);
                    glcode_column.setVisible(false);
                    glcode_column.setRendered(false);
                    taskNo_column.setVisible(false);;
                    expOrg_column.setVisible(false);;
                    expDate_column.setVisible(false);
                    taskNo_column.setRendered(false);
                    expOrg_column.setRendered(false);
                    expDate_column.setRendered(false);
                    glcode_column.setVisible(false);
                    glcode_column.setRendered(false);
                expType_column.setVisible(false);
                expType_column.setRendered(false);


                reccode_column.setVisible(false);
                reccode_column.setRendered(false);



                poLineNum_column.setVisible(true);
                poLineNum_column.setRendered(true);

                linePoNum_column.setVisible(true);
                linePoNum_column.setRendered(true);




            }else{


                projectColumn.setVisible(true);
                projectColumn.setRendered(true);

                 taskNo_column.setVisible(true);;
                 expOrg_column.setVisible(true);;
                 expDate_column.setVisible(true);
                 taskNo_column.setRendered(true);
                 expOrg_column.setRendered(true);
                 expDate_column.setRendered(true);
                glcode_column.setVisible(true);
                glcode_column.setRendered(true);
                glcode_column.setVisible(true);
                glcode_column.setRendered(true);

                expType_column.setVisible(true);
                expType_column.setRendered(true);

                reccode_column.setVisible(true);
                reccode_column.setRendered(true);

                poLineNum_column.setVisible(false);
                poLineNum_column.setRendered(false);

                linePoNum_column.setVisible(false);
                linePoNum_column.setRendered(false);


            }
                  AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
              }
        }catch(Exception e){
            e.printStackTrace();

        } finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifierFlagInScope",0);
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",true);

        if(certNameIt.getValue() == null ||(certNameIt.getValue()!=null && certNameIt.getValue().toString().trim().equals("")) ){

            employeeNoIt.setValue("");
        }

        //getIterateLineVO();
        System.out.println("before ending on page load pc3 value ::"+pc3.getValue());
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload_pc3",pc3.getValue());







        /*******************On 27thDEc ***********************/

        String value = invoiceTypeSoc.getValue()!=null ? invoiceTypeSoc.getValue().toString() : null ;
               if(value!=null && value.equals("PO Invoice")){

                   certNameIt.setValue("");
                   certEmailIt.setValue("");
                   employeeNoIt.setValue("");
                   poNumIt.setDisabled(false);
                   poNum_plm.setDisabled(false);
                   System.out.println("Setting value  of certifier_sbc as false1111 ");
                   certifier_sbc.setValue(false);
                   System.out.println("enablinggggg po");
                   if(ADFContext.getCurrent().getPageFlowScope().get("po_header_no")!=null){
                     System.out.println("Setting PO number on p[age load for po invoce"+ADFContext.getCurrent().getPageFlowScope().get("po_header_no"));
                     poNumIt.setValue(ADFContext.getCurrent().getPageFlowScope().get("po_header_no").toString());
                   }

                  // alternateApprover_plm.setVisible(false);
                   //alternateApprover_plm.setRendered(false);

                   //noteToApprv_plm.setVisible(false);
                  // noteToApprv_plm.setRendered(false);

                  searchAltApproverLink.setDisabled(true);
                  alternateApproverIt.setDisabled(true);


                  certifierApproveComments.setDisabled(true);
                  certifierApproveLink.setDisabled(true);


                  // certifier_plm.setVisible(false);
                  // certifier_plm.setRendered(false);

                  // certEmailIt.setVisible(false);
                   //certEmailIt.setRendered(false);

                   //employeeNoIt.setVisible(false);
                   //employeeNoIt.setRendered(false);
                   employeeNoIt.setDisabled(true);
                   certEmailIt.setDisabled(true);
                   certNameIt.setDisabled(true);
                    certifier_commandImageLink.setDisabled(true);

                   AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);

                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_sbc);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

               }else if(value!=null && value.equals("Non PO Invoice")){
                   poNumIt.setValue("");
                   poNumIt.setDisabled(true);
                   poNum_plm.setDisabled(true);
                   System.out.println("diablinggggg poqqqq1111");
                   alternateApprover_plm.setVisible(true);
                   alternateApprover_plm.setRendered(true);

                   noteToApprv_plm.setVisible(true);
                   noteToApprv_plm.setRendered(true);

                   certNameIt.setVisible(true);
                   certNameIt.setRendered(true);

                   /*certEmailIt.setVisible(true);
                   certEmailIt.setRendered(true);*/
                   employeeNoIt.setVisible(true);
                   employeeNoIt.setRendered(true);
                   certifier_plm.setVisible(true);
                   certifier_plm.setRendered(true);
                   //employeeNoIt.setDisabled(false);
                   certEmailIt.setDisabled(false);
                   certNameIt.setDisabled(false);
                    certifier_commandImageLink.setDisabled(false);

                   searchAltApproverLink.setDisabled(false);
                   //alternateApproverIt.setDisabled(false);


                   certifierApproveComments.setDisabled(false);
                   certifierApproveLink.setDisabled(false);

                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);

                   AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
               }

               BindingContext context1 = BindingUtils.getBindingContext();
               DCBindingContainer bindings1 =
                    (DCBindingContainer)context1.getCurrentBindingsEntry();
               DCIteratorBinding iterator1;
               RowSetIterator rowSetIterator1= null;
               try{
               iterator1 = (DCIteratorBinding)bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
               rowSetIterator1= iterator1.getViewObject().createRowSetIterator(null);

               while (rowSetIterator1.hasNext())
                  {
                       Row r = rowSetIterator1.next();

                     if(value!=null &&  value.equals("PO Invoice")){



                         //linePONum_it.setValue("");
                         poLineNum_column.setVisible(true);
                         poLineNum_column.setRendered(true);
                         //poLineNum_it.setValue("");
                         linePoNum_column.setVisible(true);
                         linePoNum_column.setRendered(true);

                         glcode_column.setVisible(false);
                         glcode_column.setRendered(false);
                         reccode_column.setVisible(false);
                         reccode_column.setRendered(false);
                         projectColumn.setVisible(false);
                         projectColumn.setRendered(false);
                         taskNo_column.setVisible(false);
                         taskNo_column.setRendered(false);
                         expOrg_column.setVisible(false);
                         expOrg_column.setRendered(false);
                         expDate_column.setVisible(false);
                         expDate_column.setRendered(false);
                         expType_column.setVisible(false);
                         expType_column.setRendered(false);



                         AdfFacesContext.getCurrentInstance().addPartialTarget(glcode_column);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(reccode_column);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(projectColumn);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(taskNo_column);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(expOrg_column);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(expDate_column);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(expType_column);
                         System.out.println("visible flase certifier related fields on PO choosing") ;





                     }else if(value!=null &&  value.equals("Non PO Invoice")){







                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(false);
                         poLineNum_column.setRendered(false);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(false);
                         linePoNum_column.setRendered(false);






                     }



                  }




               AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);
               AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                      AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                             }catch(Exception e){
                                 e.printStackTrace();

                             } finally{
                                 if(rowSetIterator1
                                    !=null){
                                        rowSetIterator1.closeRowSetIterator();;
                                    }

                             }










               /*******************On 27thDEc ***********************/


               if( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){



             certNameIt.setValue(ADFContext.getCurrent().getPageFlowScope().get("CertifierName")!=null ?ADFContext.getCurrent().getPageFlowScope().get("CertifierName").toString() : null );
              certEmailIt.setValue( ADFContext.getCurrent().getPageFlowScope().get("CertifierEmailAdd")!=null ?ADFContext.getCurrent().getPageFlowScope().get("CertifierEmailAdd").toString() : null);
              alternateapprovNoIt.setValue(ADFContext.getCurrent().getPageFlowScope().get("AlternateApprover")!=null ?ADFContext.getCurrent().getPageFlowScope().get("AlternateApprover").toString() : null);
              certifierApproveComments.setValue(ADFContext.getCurrent().getPageFlowScope().get("CertifierApproveComments")!=null ?ADFContext.getCurrent().getPageFlowScope().get("CertifierApproveComments").toString() : null);
               employeeNoIt.setValue( ADFContext.getCurrent().getPageFlowScope().get("CertifierEmployeeNumber")!=null ?ADFContext.getCurrent().getPageFlowScope().get("CertifierEmployeeNumber").toString() : null);
                   searchAltApproverLink.setDisabled(false);
                   //alternateApproverIt.setDisabled(false);


                   certifierApproveComments.setDisabled(false);
                   certifierApproveLink.setDisabled(false);

                  System.out.println( "At last setttingggggggggggggggggggggggggggg----------------") ;
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(alternateapprovNoIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);

               }












        if((orgIdIt.getValue()==null || (orgIdIt.getValue()!=null && orgIdIt.getValue().toString().equals("")  ))

            && supNameIt.getValue()!=null    &&siteIdIt.getValue()!=null){
                   System.out.println("on page load Setting orgId value on submit click as it is coming null ::: ");

                   String orgId = getOrgIdFinal();
                   orgIdIt.setValue(orgId);
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
                   System.out.println("Value setted in org Id i/p :::"+orgIdIt.getValue());
               }


        if( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null
            && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){

            if(ADFContext.getCurrent().getPageFlowScope().get("AlternateApprover")!=null &&
               ADFContext.getCurrent().getPageFlowScope().get("approverID_pageLoad") !=null ){


                System.out.println("approverID_pageLoad ---------------------"+ADFContext.getCurrent().getPageFlowScope().get("approverID_pageLoad"));
                alternateapprovNoIt.setValue(ADFContext.getCurrent().getPageFlowScope().get("approverID_pageLoad").toString());
                alternateApproverIt.setValue(ADFContext.getCurrent().getPageFlowScope().get("AlternateApprover").toString()) ;
                AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(alternateapprovNoIt);

            }

        }
        //923018- Alice Yin -Start
        if(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equals("true")){
            certEmailIt.setDisabled(true);
            certNameIt.setDisabled(true);
             certifier_commandImageLink.setDisabled(true);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);

        }
        //923018- Alice Yin -End
     /*   if(supNameIt.getValue()!=null &&   siteIdIt.getValue()!=null &&   operatingUnitIt.getValue()!=null){

            String orgId = getOrgIdFinal();
            System.out.println("orgId------------->"+orgId);

        }*/
        //ot76
     if(supNameIt.getValue() != null && siteIdIt.getValue()!=null)
     {
     System.out.println("Onloading for ot76");
     DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
     DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesVO1Iterator");
     ViewObjectImpl PoNonPoVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
     ViewCriteria vc2 = PoNonPoVO.getViewCriteria("SitesVOCriteriaSupNameSiteID");
     PoNonPoVO.applyViewCriteria(vc2);
     System.out.println("Supplier Name" + supNameIt.getValue().toString());
     PoNonPoVO.setNamedWhereClauseParam("bindVendorName", supNameIt.getValue().toString());
     PoNonPoVO.setNamedWhereClauseParam("bvSiteID", siteIdIt.getValue().toString());
     PoNonPoVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//     System.out.println("Query :" + PoNonPoVO.getQuery());
     PoNonPoVO.executeQuery();


   System.out.println("--- Match found for Supplier Name : " +
                                                         PoNonPoVO.getEstimatedRowCount() + " records.");
   if(PoNonPoVO.getEstimatedRowCount()>0){


     PoNonPoVO.next();
     String selectedSupplierName= PoNonPoVO.getCurrentRow().getAttribute("NoPoNoPayFlag")!= null ? PoNonPoVO.getCurrentRow().getAttribute("NoPoNoPayFlag").toString(): "N";

     System.out.println("Y or N "+ selectedSupplierName);
     ADFContext.getCurrent().getPageFlowScope().put("PoNonPo", selectedSupplierName);
     if(invoiceTypeSoc.getValue() != null)
     {
        System.out.println("invoiceTypeSoc"+ invoiceTypeSoc.getValue().toString());
        if("Y".equalsIgnoreCase(selectedSupplierName) && ("Non PO Invoice").equalsIgnoreCase(invoiceTypeSoc.getValue().toString()) )
            {
            System.out.println("Inside loop");
                ot76.setVisible(true);
            }
     }


         AdfFacesContext.getCurrentInstance().addPartialTarget(pgl1);
     }
    }


        System.out.println("end: onPageLoad");
    }
    public void resetValue() {
            if (fileName != null)
                fileName = null;
            if (fileContent != null)
                fileContent = null;
            if (inputstream != null)
                inputstream = null;
        }




    public void onLineTypeChange(ValueChangeEvent valueChangeEvent){
     //submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }

    public void onProjectNoChange(ValueChangeEvent valueChangeEvent){

        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

    }

    public void onLinePONOChange(ValueChangeEvent valueChangeEvent){
    // submit_cb.setDisabled(true);
     //   validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    public void onPoLineNumChange(ValueChangeEvent valueChangeEvent){
     //submit_cb.setDisabled(true);
     //   validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    public void onLineDescChange(ValueChangeEvent valueChangeEvent){
    // submit_cb.setDisabled(true);
    //    validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    public void onUOMchange(ValueChangeEvent valueChangeEvent){
    // submit_cb.setDisabled(true);
    //    validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    public void onTaxRateChange(ValueChangeEvent valueChangeEvent){
    // submit_cb.setDisabled(true);
    //    validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }



    public void calculateTaxAmountFromTaxRateCode_keypress(ClientEvent clientEvent){
        System.out.println("Within calculateTaxAmountFromTaxRateCode keypress**");

        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();

        DCBindingContainer bindings = getBinding();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject empVO = lineItemIter.getViewObject();
        Row selectedRow=empVO.getCurrentRow();
        String lineTotal = selectedRow.getAttribute("LineTotalAmount")!=null ? selectedRow.getAttribute("LineTotalAmount").toString() :null;
        double taxRatecal=0;
        oracle.jbo.domain.Number taxRateLineItem=null;
        System.out.println("lineTotal:::::::::::::::"+lineTotal);
        Double lineTot =lineTotal!=null ? Double.parseDouble(lineTotal) :null;

        String taxRateCode=parameters.get("submittedValue")!=null ?parameters.get("submittedValue").toString() : null;
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", taxRateCode);
        taxRateCode=parameters.get("submittedValue")!=null ?parameters.get("submittedValue").toString() : null;
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", taxRateCode);

        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaxRateCodeLookupVO1Iterator");
        ViewObjectImpl taxRateCodeLookupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        ViewCriteria vc = null;
        String siteId = null;
        BigDecimal taxRate =null;
        try{
            if(siteIdIt.getValue()!=null) {
               siteId = ""+((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue();
            }
            taxRateCode = taxRateCode==null ? "" : taxRateCode.trim();
            siteId = siteId==null ? "" : siteId.trim();

            System.out.println("siteIdIt.getValue(): "+siteId);
            System.out.println("TaxRateCode ="+ taxRateCode);

            //If Site id is present

            if(siteId!=null && !siteId.trim().equals("")) {
                vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupBySiteId");
                taxRateCodeLookupVO.applyViewCriteria(vc);
                taxRateCodeLookupVO.setNamedWhereClauseParam("bind_siteId",siteId);
                taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                taxRateCodeLookupVO.executeQuery();
                System.out.println("taxRateCodeLookupVO:::::::::::::::::::::::" +taxRateCodeLookupVO.getEstimatedRowCount());
            }
            RowKeySet rowKeySet = t1.getSelectedRowKeys();
            Iterator rowKeySetIt = rowKeySet.iterator();
            DCIteratorBinding lineItemIter1 = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            RowSetIterator lineItemRSIter1=null;
            try{
                lineItemRSIter1 = lineItemIter1.getRowSetIterator();
            while(rowKeySetIt.hasNext()){
              Key key = (Key)((List)rowKeySetIt.next()).get(0);
              Row currentRow = lineItemRSIter1.getRow(key);
              System.out.println("current row :: "+ currentRow);
              if(currentRow!=null) {
                System.out.println("current row not null ............................");
                try {
                  if(taxRateCodeLookupVO.getEstimatedRowCount() == 1){
                    Row row = taxRateCodeLookupVO.first();
                    taxRate = row.getAttribute("TaxRate") == null ? null : (java.math.BigDecimal)row.getAttribute("TaxRate");
                    currentRow.setAttribute("TaxRate", taxRate == null ? null : new oracle.jbo.domain.Number(taxRate.doubleValue()));
                    System.out.println("taxRate:::::::::::::::::"+taxRate);
                  }
                  else{
                    currentRow.setAttribute("TaxRate", null);
                  }
                }
                catch(Exception ex) {
                ex.printStackTrace();
                }
              }
            }
            }catch(Exception e)
            {
                e.printStackTrace();
                }
            /*finally{
                        if(lineItemRSIter!=null) {
                            try {
                                lineItemRSIter.closeRowSetIterator();
                            } catch(Exception ex) {
                                ex.printStackTrace();

                        }
                        }
                    }*/

        }
        catch(Exception e) {
        e.printStackTrace();
        }
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("taxRate",taxRate);
        if(selectedRow!=null && lineTotal!=null){


            System.out.println("in search tax rate**"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"));
            if((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"))!=null){
            try{
                taxRatecal=Double.parseDouble((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate")).toString());
                taxRatecal=(lineTot*taxRatecal)/100;
                System.out.println("taxRatecal*******"+taxRatecal);
                taxRateLineItem=new oracle.jbo.domain.Number(taxRatecal);
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println("taxRateLineItem**************"+taxRateLineItem);
            if(taxRateLineItem!=null) {

                BigDecimal decimalValue = new BigDecimal(taxRateLineItem.doubleValue());
                decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                try {
                    selectedRow.setAttribute("TaxAmountLineitem",new oracle.jbo.domain.Number(decimalValue.doubleValue()));
                } catch(Exception ex) {
                    ex.printStackTrace();
                }
                //selectedRow.setAttribute("Attr1",taxRateLineItem);
                AdfFacesContext.getCurrentInstance().addPartialTarget(taxAmountLine);
            }
        }

    }   System.out.println("sumOfTaxTotal !!!!");
        AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
    }

    // 21-11-22 JS Change same with APException
    public void getCalculatedTaxAmountFromEBS(String newValue_of_changedField,String fieldName){
       System.out.println(" JS getCalculatedTaxAmountFromEBS line total new value :: "+ newValue_of_changedField);
       DCBindingContainer bindings = getBinding();
       DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
       ViewObject empVO = lineItemIter.getViewObject();
    //        Row selectedRow=empVO.getCurrentRow();
           Row selectedRow=null;
           String lineTotalNew=null;
           String taxRate=null;
           try{
                   RowSetIterator rsi = empVO.createRowSetIterator(null);

                   while(rsi.hasNext()){
                        selectedRow = rsi.next();
                       System.out.println("Demo row :"+selectedRow.getAttribute("LineTotalAmount"));
    //                        lineTotalNew=selectedRow.getAttribute("LineTotalAmount").toString();
    //                        taxRate=selectedRow.getAttribute("TaxRateCode").toString();
                       System.out.println("Line Total : "+lineTotalNew);
                       System.out.println("Tax Amount : "+taxRate);
                       }
           }catch(Exception e){
                           System.out.println("Exception : "+e.getMessage());
                           taxRate=null;

                       }

           //        String lineTotal = selectedRow.getAttribute("LineTotalAmount")!=null ? selectedRow.getAttribute("LineTotalAmount").toString() :null;
           String lineTotal=lineTotalNew;
       String  orgId =null;
       String  currency = null;
       String  tax_code = null;
       String amount = null;

       if(orgIdIt.getValue().toString() != null){
            orgId = orgIdIt.getValue().toString();
           }

       if (selectedRow!=null){
           System.out.println("SelectedRow found!!");
           //orgId =orgIdIt.getValue()!=null ? orgIdIt.getValue().toString() : null;
           currency =currencyIt.getValue()!=null ? currencyIt.getValue().toString() : null;

           if(fieldName.equals("LineTotal")){
           amount = newValue_of_changedField!=null ?newValue_of_changedField:null;
           tax_code =selectedRow.getAttribute("TaxRateCode")!=null ? selectedRow.getAttribute("TaxRateCode").toString():null;
    //            tax_code=taxRate!=null ? taxRate : null;
           }
           else{
           amount = selectedRow.getAttribute("LineTotalAmount")!=null ? selectedRow.getAttribute("LineTotalAmount").toString():null;
    //                amount=lineTotalNew!=null ? lineTotalNew:null;
           tax_code =newValue_of_changedField!=null ?newValue_of_changedField:null;
           }


           /*System.out.println("orgId :: "+orgId!=null ?orgId : "orgId is coming null");
           System.out.println("currency :: "+currency!=null?currency : "currency is coming blank");
           System.out.println("tax_code :: "+ tax_code!=null ? tax_code : "tax_code is coming blank");
           System.out.println("amount :: " + amount!=null ? amount : "amount is coming blank");*/

           if(orgId!=null && currency!=null && tax_code!=null &&  amount!=null ){
           //Calling ValidateTaxCalcRounding func if all in params are non-empty
               DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
               DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ValidateTaxCalcRounding1Iterator");
               ViewObjectImpl validateTaxAmountRoundingVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
               validateTaxAmountRoundingVO.setNamedWhereClauseParam("bv_orgId", orgId);
               validateTaxAmountRoundingVO.setNamedWhereClauseParam("bv_currency",currency);
               validateTaxAmountRoundingVO.setNamedWhereClauseParam("bv_tax_code",tax_code);
               validateTaxAmountRoundingVO.setNamedWhereClauseParam("bv_amount",amount);
               validateTaxAmountRoundingVO.executeQuery();
               String taxRoundAmount=null;
               while (validateTaxAmountRoundingVO.hasNext()) {
                   Row row = validateTaxAmountRoundingVO.next();
                   int attributeCount = row.getAttributeCount();
                   //System.out.println("AtrributeCount :: "+attributeCount + "Atrribute Name is :: "+row.getAttribute(row.getAttributeNames()[0]));
                   String [] attributeNames =row.getAttributeNames();
                   if(row.getAttribute(row.getAttributeNames()[0])!=null){
                    taxRoundAmount = row.getAttribute(attributeNames[0]).toString();
                    System.out.println("taxRoundAmount :: "+ taxRoundAmount);
                   }
               }

              selectedRow.setAttribute("TaxAmountLineitem", taxRoundAmount);
              AdfFacesContext.getCurrentInstance().addPartialTarget(taxAmountLine);
          }

       }

    }

    public void calculateTaxAmountFromTaxRateCode(ValueChangeEvent valueChangeEvent){
        System.out.println("Within calculateTaxAmountFromTaxRateCode valueChangeEvent");
        System.out.println("ValueChange taxRateCode New : "+valueChangeEvent.getNewValue().toString());
        System.out.println("ValueChange taxRateCode Old : "+valueChangeEvent.getNewValue().toString());
        String newValue_of_changedField=valueChangeEvent.getNewValue().toString();

        // 21-11-22 JS changes same as APException
        if (getUrlOrg().equalsIgnoreCase("JS")){
            System.out.println("Js CalculateTaxAmountFromTaxRateCode");
            if(newValue_of_changedField!=null)
              getCalculatedTaxAmountFromEBS(valueChangeEvent.getNewValue().toString(),"Tax");
        }else{
            DCBindingContainer bindings = getBinding();
            DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            ViewObject empVO = lineItemIter.getViewObject();
            System.out.println("calculateTaxAmountFromTaxRateCode row count : "+empVO.getEstimatedRowCount());
            //        Row selectedRow=empVO.getCurrentRow();
            Row selectedRow=null;
            String lineTotalNew=null;
            try{
                    RowSetIterator rsi = empVO.createRowSetIterator(null);

                    while(rsi.hasNext()){
                         selectedRow = rsi.next();
                        System.out.println("Demo row :"+selectedRow.getAttribute("LineTotalAmount"));
                        lineTotalNew=selectedRow.getAttribute("LineTotalAmount").toString();
                        }
            }catch(Exception e){
                            System.out.println("Exception : "+e.getMessage());
                        }

            //        String lineTotal = selectedRow.getAttribute("LineTotalAmount")!=null ? selectedRow.getAttribute("LineTotalAmount").toString() :null;
            String lineTotal=lineTotalNew;
            double taxRatecal=0;
            oracle.jbo.domain.Number taxRateLineItem=null;
            System.out.println("lineTotal:::::::::::::::"+lineTotal);
            Double lineTot =lineTotal!=null ? Double.parseDouble(lineTotal) :null;

            String taxRateCode=newValue_of_changedField;
            System.out.println("TaxRateCode-1 : "+taxRateCode);
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", taxRateCode);
            //        taxRateCode=valueChangeEvent.getNewValue().toString();
            //        System.out.println("TaxRateCode-2 : "+taxRateCode);
            //        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", taxRateCode);

            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaxRateCodeLookupVO1Iterator");
            ViewObjectImpl taxRateCodeLookupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
            ViewCriteria vc = null;
            String siteId = null;
            BigDecimal taxRate =null;
            try{
                if(siteIdIt.getValue()!=null) {
                   siteId = ""+((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue();
                }
                taxRateCode = taxRateCode==null ? "" : taxRateCode.trim();
                siteId = siteId==null ? "" : siteId.trim();

                System.out.println("siteIdIt.getValue(): "+siteId);
                System.out.println("TaxRateCode ="+ taxRateCode);

                //If Site id is present

                if(siteId!=null && !siteId.trim().equals("")) {
                    vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupBySiteId");
                    taxRateCodeLookupVO.applyViewCriteria(vc);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_siteId",siteId);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                    System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                    taxRateCodeLookupVO.executeQuery();
                    System.out.println("taxRateCodeLookupVO:::::::::::::::::::::::" +taxRateCodeLookupVO.getEstimatedRowCount());
                }
                RowKeySet rowKeySet = t1.getSelectedRowKeys();
                Iterator rowKeySetIt = rowKeySet.iterator();
                DCIteratorBinding lineItemIter1 = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                RowSetIterator lineItemRSIter1=null;
                try{
                    lineItemRSIter1 = lineItemIter1.getRowSetIterator();
                while(rowKeySetIt.hasNext()){
                  Key key = (Key)((List)rowKeySetIt.next()).get(0);
                  Row currentRow = lineItemRSIter1.getRow(key);
                  System.out.println("current row :: "+ currentRow);
                  if(currentRow!=null) {
                    System.out.println("current row not null ............................");
                    try {
                      if(taxRateCodeLookupVO.getEstimatedRowCount() == 1){
                        Row row = taxRateCodeLookupVO.first();
                        taxRate = row.getAttribute("TaxRate") == null ? null : (java.math.BigDecimal)row.getAttribute("TaxRate");
                        currentRow.setAttribute("TaxRate", taxRate == null ? null : new oracle.jbo.domain.Number(taxRate.doubleValue()));
                        System.out.println("taxRate:::::::::::::::::"+taxRate);
                      }
                      else{
                        currentRow.setAttribute("TaxRate", null);
                      }
                    }
                    catch(Exception ex) {
                    ex.printStackTrace();
                    }
                  }
                }
                }catch(Exception e)
                {
                    e.printStackTrace();
                    }
            //            finally{
            //                        if(lineItemRSIter1!=null) {
            //                            try {
            //                                lineItemRSIter1.closeRowSetIterator();
            //                            } catch(Exception ex) {
            //                                ex.printStackTrace();
            //
            //                        }
            //                        }
            //                    }

            }
            catch(Exception e) {
            e.printStackTrace();
            }
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("taxRate",taxRate);
            if(selectedRow!=null && lineTotal!=null){

                System.out.println("calculate tax amount line total : "+lineTot);
                System.out.println("in search tax rate**"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"));
                if((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"))!=null){
                try{
                    taxRatecal=Double.parseDouble((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate")).toString());
                    taxRatecal=(lineTot*taxRatecal)/100;
                    System.out.println("taxRatecal*******"+taxRatecal);
                    taxRateLineItem=new oracle.jbo.domain.Number(taxRatecal);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                System.out.println("taxRateLineItem**************"+taxRateLineItem);
                if(taxRateLineItem!=null) {

                    BigDecimal decimalValue = new BigDecimal(taxRateLineItem.doubleValue());
                    decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                    try {
                        selectedRow.setAttribute("TaxAmountLineitem",new oracle.jbo.domain.Number(decimalValue.doubleValue()));
                    } catch(Exception ex) {
                        ex.printStackTrace();
                    }
                    //selectedRow.setAttribute("Attr1",taxRateLineItem);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(taxAmountLine);
                }
            }

            }
        }
            System.out.println("sumOfTaxTotal !!!!");
            AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
            System.out.println("End CalculateTaxAmountFromTaxRateCode");
    }

    public void calculateTaxAmountFromTaxRateCode_1oth(ValueChangeEvent valueChangeEvent) {

        System.out.println("Within calculateTaxAmountFromTaxRateCode**");
          String taxRateCode =null;
          BigDecimal taxRate = null;
          if(valueChangeEvent.getNewValue()!=null){
          taxRateCode=valueChangeEvent.getNewValue().toString();
          AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", taxRateCode);

          DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaxRateCodeLookupVO1Iterator");
          ViewObjectImpl taxRateCodeLookupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
          ViewCriteria vc = null;
          String siteId = null;
          try{
              if(siteIdIt.getValue()!=null) {
                 siteId = ""+((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue();
              }
              taxRateCode = taxRateCode==null ? "" : taxRateCode.trim();
              siteId = siteId==null ? "" : siteId.trim();

              System.out.println("siteIdIt.getValue(): "+siteId);
              System.out.println("TaxRateCode ="+ taxRateCode);

              //If Site id is present

              if(siteId!=null && !siteId.trim().equals("")) {
                  vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupBySiteId");
                  taxRateCodeLookupVO.applyViewCriteria(vc);
                  taxRateCodeLookupVO.setNamedWhereClauseParam("bind_siteId",siteId);
                  taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                  taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                  System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                  taxRateCodeLookupVO.executeQuery();
              }
              RowKeySet rowKeySet = t1.getSelectedRowKeys();
              Iterator rowKeySetIt = rowKeySet.iterator();
              DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
              RowSetIterator lineItemRSIter=null;
              try{
                  lineItemRSIter = lineItemIter.getRowSetIterator();
              while(rowKeySetIt.hasNext()){
                Key key = (Key)((List)rowKeySetIt.next()).get(0);
                Row currentRow = lineItemRSIter.getRow(key);
                System.out.println("current row :: "+ currentRow);
                if(currentRow!=null) {
                  System.out.println("current row not null ............................");
                  try {
                    if(taxRateCodeLookupVO.getEstimatedRowCount() == 1){
                      Row row = taxRateCodeLookupVO.first();
                      taxRate = row.getAttribute("TaxRate") == null ? null : (java.math.BigDecimal)row.getAttribute("TaxRate");
                      currentRow.setAttribute("TaxRate", taxRate == null ? null : new oracle.jbo.domain.Number(taxRate.doubleValue()));

                    }
                    else{
                      currentRow.setAttribute("TaxRate", null);
                    }
                  }
                  catch(Exception ex) {
                  ex.printStackTrace();
                  }
                }
              }
              }catch(Exception e)
              {
                  e.printStackTrace();
                  }
              /*finally{
                          if(lineItemRSIter!=null) {
                              try {
                                  lineItemRSIter.closeRowSetIterator();
                              } catch(Exception ex) {
                                  ex.printStackTrace();

                          }
                          }
                      }*/

          }
          catch(Exception e) {
          e.printStackTrace();
          }
          }
          else{
          AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", null);
          }
          //recalculateLineAndTaxTotal_onTabout();


          AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
          System.out.println("TaxRateCodePS calculateTaxAmountFromTaxRateCode"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("TaxRateCodePS"));
        //  submit_cb.setDisabled(true);
        //  validate_cb.setDisabled(false);
          AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
      }




    public void calculateTaxAmountFromTaxRateCode_old(ValueChangeEvent valueChangeEvent){
       // submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }

    public void ondocTypeChange(ValueChangeEvent valueChangeEvent){
    // submit_cb.setDisabled(true);
   //     validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    public void onSupplierNameChange(ValueChangeEvent valueChangeEvent){

    //    submit_cb.setDisabled(true);
   //     validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }

    public void onSiteIdChange(ValueChangeEvent valueChangeEvent){
       System.out.println("inside onSiteIdChange");
       System.out.println("onSiteIdChange valueChangeEvent: "+valueChangeEvent);
      //  submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void ontaxRegNoChange(ValueChangeEvent valueChangeEvent){

     //   submit_cb.setDisabled(true);
     //   validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void oninvNoChange(ValueChangeEvent valueChangeEvent){

       // submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }



    public void onPONOChange(ValueChangeEvent valueChangeEvent){

        //submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }


    public void onCurrencyChange(ValueChangeEvent valueChangeEvent){

        //submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }

    public void oncertifierNameChange(ValueChangeEvent valueChangeEvent){

        //submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }

    public void oncertNameChange(ValueChangeEvent valueChangeEvent){

        //submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }

    public void oninvoiceTypeChange(ValueChangeEvent valueChangeEvent){

            String value =valueChangeEvent.getNewValue().toString();
                   if(value!=null && value.equals("PO Invoice")){

                       certNameIt.setValue("");
                       certEmailIt.setValue("");
                       employeeNoIt.setValue("");
                      // employeeNoIt.setVisible(false);
                       //employeeNoIt.setRendered(false);
                       employeeNoIt.setDisabled(true);
                       poNumIt.setDisabled(false);
                       poNum_plm.setDisabled(false);
                       System.out.println("Setting value  of certifier_sbc as false ");
                       certifier_sbc.setValue(false);
                       System.out.println("enablinggggg po1");
                       System.out.println("visble not approver false");
                     //  alternateApprover_plm.setVisible(false);
                     ///  alternateApprover_plm.setRendered(false);

                     //  noteToApprv_plm.setVisible(false);
                      // noteToApprv_plm.setRendered(false);


                      searchAltApproverLink.setDisabled(true);
                      alternateApproverIt.setDisabled(true);


                      certifierApproveComments.setDisabled(true);
                      certifierApproveLink.setDisabled(true);

                       alternateapprovNoIt.setValue("");
                       alternateApproverIt.setValue("");
                       certifierApproveComments.setValue("");


                      // certifier_plm.setVisible(false);
                      // certifier_plm.setRendered(false);
                      certEmailIt.setDisabled(true);
                      certNameIt.setDisabled(true);
                      certifier_commandImageLink.setDisabled(true);
                      System.out.println("ultimately ----------------------");
                      AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
                      AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                      AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_sbc);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);

                       AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);

                       AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);







                   }else if(value!=null && value.equals("Non PO Invoice")){
                       poNumIt.setValue("");
                       poNumIt.setDisabled(true);
                       poNum_plm.setDisabled(true);
                       System.out.println("diablinggggg po1");
                       System.out.println("visble not approver true");

                    //   alternateApprover_plm.setVisible(true);
                     //  alternateApprover_plm.setRendered(true);

                      // noteToApprv_plm.setVisible(true);
                      // noteToApprv_plm.setRendered(true);
                       //employeeNoIt.setVisible(true);
                       //employeeNoIt.setRendered(true);

                      // certifier_plm.setVisible(true);
                      // certifier_plm.setRendered(true);


                      searchAltApproverLink.setDisabled(false);
                     // alternateApproverIt.setDisabled(false);


                      certifierApproveComments.setDisabled(false);
                      certifierApproveLink.setDisabled(false);
                       alternateapprovNoIt.setValue("");
                       certifierApproveComments.setValue("");
                       alternateApproverIt.setValue("");
                       //employeeNoIt.setDisabled(false);
                       certEmailIt.setDisabled(false);
                       certNameIt.setDisabled(false);
                       certifier_commandImageLink.setDisabled(false);
                       System.out.println("ultimately ----------------------");
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                       AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);



                       AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);

                       AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);

                   }

            BindingContext context = BindingUtils.getBindingContext();
            DCBindingContainer bindings =
                        (DCBindingContainer)context.getCurrentBindingsEntry();
            DCIteratorBinding iterator;
            RowSetIterator rowSetIterator= null;
            try{
            iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
             rowSetIterator= iterator.getViewObject().createRowSetIterator(null);

            while (rowSetIterator.hasNext())
                      {
                           Row r = rowSetIterator.next();

                         if(value!=null &&  value.equals("PO Invoice")){



                             //linePONum_it.setValue("");
                             poLineNum_column.setVisible(true);
                             poLineNum_column.setRendered(true);
                             //poLineNum_it.setValue("");
                             linePoNum_column.setVisible(true);
                             linePoNum_column.setRendered(true);

                             glcode_column.setVisible(false);
                             glcode_column.setRendered(false);
                             reccode_column.setVisible(false);
                             reccode_column.setRendered(false);
                             projectColumn.setVisible(false);
                             projectColumn.setRendered(false);
                             taskNo_column.setVisible(false);
                             taskNo_column.setRendered(false);
                             expOrg_column.setVisible(false);
                             expOrg_column.setRendered(false);
                             expDate_column.setVisible(false);
                             expDate_column.setRendered(false);
                             expType_column.setVisible(false);
                             expType_column.setRendered(false);



                             AdfFacesContext.getCurrentInstance().addPartialTarget(glcode_column);
                             AdfFacesContext.getCurrentInstance().addPartialTarget(reccode_column);
                             AdfFacesContext.getCurrentInstance().addPartialTarget(projectColumn);
                             AdfFacesContext.getCurrentInstance().addPartialTarget(taskNo_column);
                             AdfFacesContext.getCurrentInstance().addPartialTarget(expOrg_column);
                             AdfFacesContext.getCurrentInstance().addPartialTarget(expDate_column);
                             AdfFacesContext.getCurrentInstance().addPartialTarget(expType_column);
                             System.out.println("visible flase certifier related fields on PO choosing") ;





                         }else if(value!=null &&  value.equals("Non PO Invoice")){







                             linePONum_it.setValue("");
                             poLineNum_column.setVisible(false);
                             poLineNum_column.setRendered(false);
                             poLineNum_it.setValue("");
                             linePoNum_column.setVisible(false);
                             linePoNum_column.setRendered(false);
                            /* glcode_column.setVisible(true);
                             glcode_column.setRendered(true);
                             reccode_column.setVisible(true);
                             reccode_column.setRendered(true);
                             projectColumn.setVisible(true);
                             projectColumn.setRendered(true);
                             taskNo_column.setVisible(true);
                             taskNo_column.setRendered(true);
                             expOrg_column.setVisible(true);
                             expOrg_column.setRendered(true);
                             expDate_column.setVisible(true);
                             expDate_column.setRendered(true);
                             expType_column.setVisible(true);
                             expType_column.setRendered(true);*/






                         }



                      }


                                     AdfFacesContext.getCurrentInstance().addPartialTarget(glcode_column);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(reccode_column);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(projectColumn);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(taskNo_column);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(expOrg_column);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(expDate_column);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(expType_column);

                AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);
                AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

                                     AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                                     AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                                     AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
                                 }catch(Exception e){
                                     e.printStackTrace();

                                 } finally{
                                     if(rowSetIterator
                                        !=null){
                                            rowSetIterator.closeRowSetIterator();;
                                        }

                                 }



            submit_cb.setDisabled(true);
            validate_cb.setDisabled(false);


            if(value!=null && value.equals("PO Invoice")){
                /*alternateApproverIt.setVisible(false);
                alternateApproverIt.setRendered(false);*/

               // alternateApprover_plm.setVisible(false);
               // alternateApprover_plm.setRendered(false);
                //certifierApproveComments.setVisible(false);
                //certifierApproveComments.setRendered(false);
                //certifier_plm.setVisible(false);
                //certifier_plm.setRendered(false);

               //certEmailIt.setVisible(false);
               //certEmailIt.setRendered(false);
               employeeNoIt.setDisabled(true);
               certEmailIt.setDisabled(true);
               certNameIt.setDisabled(true);
               certifier_commandImageLink.setDisabled(true);
               System.out.println("ultimately ----------------------");
               AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
               AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);



               //noteToApprv_plm.setVisible(false);
                //noteToApprv_plm.setRendered(false);

                 searchAltApproverLink.setDisabled(true);
                 alternateApproverIt.setDisabled(true);


                  certifierApproveComments.setDisabled(true);
                  certifierApproveLink.setDisabled(true);
                alternateapprovNoIt.setValue("");
                certifierApproveComments.setValue("");
                alternateApproverIt.setValue("");
                 AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                 AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                 AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                 AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);




            }else if(value!=null && value.equals("Non PO Invoice")){
                    alternateApprover_plm.setVisible(true);
                    alternateApprover_plm.setRendered(true);
                    certifierApproveComments.setVisible(true);
                    certifierApproveComments.setRendered(true);
                    noteToApprv_plm.setVisible(true);
                    noteToApprv_plm.setRendered(true);

                    //certifier_plm.setVisible(true);
                    //certifier_plm.setRendered(true);

                   //certEmailIt.setVisible(true);
                   //certEmailIt.setRendered(true);
                   alternateapprovNoIt.setValue("");
                   certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");

                   //employeeNoIt.setDisabled(false);
                   certEmailIt.setDisabled(false);
                   certNameIt.setDisabled(false);
                   certifier_commandImageLink.setDisabled(false);
                   System.out.println("ultimately ----------------------");
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                    searchAltApproverLink.setDisabled(false);
                    //alternateApproverIt.setDisabled(false);


                     certifierApproveComments.setDisabled(false);
                     certifierApproveLink.setDisabled(false);

                    AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);


                }

            System.out.println("noteToApprv_plm.setRendered1------------------------------------------------------"+noteToApprv_plm.isRendered());
           // AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
           AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
            AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);
            AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
            //AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);





          /* certNameIt.setDisabled(true);
           certifier_commandImageLink.setDisabled(true);
           System.out.println("ultimately ----------------------");
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);*/

            AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
        }
    public void onsuppNumChange(ValueChangeEvent valueChangeEvent){

        //submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onsiteNameChange(ValueChangeEvent valueChangeEvent){

        //submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void oninvDateChange(ValueChangeEvent valueChangeEvent){

        System.out.println("inside oninvDateChange");
        System.out.println("oninvDateChange valueChangeEvent: "+valueChangeEvent);
       // submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onoperatingUnitChange(ValueChangeEvent valueChangeEvent){
        //submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    public void onlineTotalChange(ValueChangeEvent valueChangeEvent){
   System.out.println("Inside the onlineTotalChange listnerrrr");
        //submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);


        FacesContext fctx = FacesContext.getCurrentInstance();
        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
        String myJavaScriptCode5 = "document.getElementById('pt1:hiddenButtonID').click()";
        erks.addScript(fctx, myJavaScriptCode5 );
        System.out.println("Done");
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);







    }
    public void ontaxTotalChange(ValueChangeEvent valueChangeEvent){

       // submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);


        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onheaderTotalChange(ValueChangeEvent valueChangeEvent){
       // submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }
    /*public void ontaxRegNoChange(ValueChangeEvent valueChangeEvent){


    }
    public void ontaxRegNoChange(ValueChangeEvent valueChangeEvent){


    }
    public void ontaxRegNoChange(ValueChangeEvent valueChangeEvent){


    }
    public void ontaxRegNoChange(ValueChangeEvent valueChangeEvent){


    }
    public void ontaxRegNoChange(ValueChangeEvent valueChangeEvent){


    }*/

    public Date getUserDOBMax() {
            Calendar now = Calendar.getInstance();
            now = Calendar.getInstance();
            now.add(Calendar.YEAR, 10);
            return now.getTime();
        }

    public Date getuserDOBMin() {
            Calendar now = Calendar.getInstance();
            now = Calendar.getInstance();
            now.add(Calendar.YEAR, -100);
            return now.getTime();
        }




    public void FileUploadVcListener(ValueChangeEvent valueChangeEvent) throws MalformedURLException {
        System.out.println("Inside FileUploadVcListener newww");
        String orginal_fileName = null;

            RichInputFile inputFileComponent = (RichInputFile)valueChangeEvent.getComponent();
                    UploadedFile newFile = (UploadedFile)valueChangeEvent.getNewValue();
                    System.out.println("newFile ::::::::::"+newFile.getLength());

            System.out.println("fileNAme FileUploadVcListener  ::::::::::"+newFile.getFilename());
           // String extn =  FilenameUtils.getExtension(newFile.getFilename());
                      orginal_fileName = newFile.getFilename();

//                    if (!newFile.getFilename().endsWith(".pdf") ) {
                    // 13-07-23 2292543 Allow all PDF files
                    if (!newFile.getFilename().toLowerCase().endsWith(".pdf") ) {
                      FacesContext.getCurrentInstance().addMessage( inputFileComponent.getClientId(FacesContext.getCurrentInstance())
                                                                  , new FacesMessage(FacesMessage.SEVERITY_ERROR
                                                                                     , "Only file with Pdf extension is allowed"
                                                                                     , "This file ("+ newFile.getFilename()+") is not allowed"
                                                                                     )
                                                                  );
                     System.out.println("Resetting the valuess");

                      inputFileComponent.resetValue();
                      inputFileComponent.setValid(false);
                        AdfFacesContext.getCurrentInstance().addPartialTarget(inputFile);
                        System.out.println("Done partial refresh");
                      return;
                    }


            resetValue(); //reset af input file on every file upload event chnage
            file = (UploadedFile)valueChangeEvent.getNewValue();
            try {
                inputstream = file.getInputStream();

                System.out.println("Length of the file :: "+file.getLength());
                String extn =  FilenameUtils.getExtension(file.getFilename());
                if(file.getLength() >5120000 ){
                    FacesMessage Message = new FacesMessage("File size is too large.Maxium limit is 5 MB!");
                    Message.setSeverity(FacesMessage.SEVERITY_INFO);
                    FacesContext fc = FacesContext.getCurrentInstance();
                    fc.addMessage(null, Message);
                    return ;
                }

                System.out.println("extn :: "+extn);
                if(!extn.equalsIgnoreCase("pdf")){
                    FacesMessage Message = new FacesMessage("File extension is invalid.Please upload file in PDF format only!");
                    Message.setSeverity(FacesMessage.SEVERITY_INFO);
                    FacesContext fc = FacesContext.getCurrentInstance();
                    fc.addMessage(null, Message);
                    return ;
                }


                if(orginal_fileName!=null){
                    System.out.println("setting original file name on pageflowscope----"+orginal_fileName);
                    ADFContext.getCurrent().getPageFlowScope().put("orginal_fileName",orginal_fileName);

                             AdfFacesContext.getCurrentInstance().getPageFlowScope().put("natureofEXP_flag" ,natureOfEXpSOC.getValue());
                            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("mpa_flag",mpaC.getValue());

                    if (getUrlOrg().equalsIgnoreCase("JS")) {
                                        if (radio_paymentTypes.getValue() != null && radio_paymentTypes.getValue()
                                                                                                       .toString()
                                                                                                       .equals("WIRE")) {
                                            AdfFacesContext.getCurrentInstance()
                                                           .getPageFlowScope()
                                                           .put("pc2", true);
                                            AdfFacesContext.getCurrentInstance()
                                                           .getPageFlowScope()
                                                           .put("pc3", false);

                                        }
                                    } else {
                            if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("WIRE")){
                                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",true);
                                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);

                            }else  if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
                                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",true);
                                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
                            }
                                    }
                            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",certifier_sbc.getValue());
                            ADFContext.getCurrent().getPageFlowScope().put("Submit","false");
                            BindingContext bctx = BindingContext.getCurrent();
                            BindingContainer bindings = bctx.getCurrentBindingsEntry();
                            OperationBinding operationBinding =  bindings.getOperationBinding("saveAllFormDetails");
                            System.out.println("On saving from cert name ::"+certNameIt.getValue() +"-----supplier name  and currency -----"+supNameIt.getValue()
                                               +"---curr----"+
                                               currencyIt.getValue()  +"org id ::"+orgIdIt.getValue());

                            operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
                            operationBinding.getParamsMap().put("supName",supNameIt.getValue());
                            operationBinding.getParamsMap().put("currency", certifier_sbc.getValue());
                            operationBinding.getParamsMap().put("employeeNo", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                            operationBinding.getParamsMap().put("siteId",orgIdIt.getValue());
                            operationBinding.execute();



                }


              // setFilePath("194901_"+file.getFilename()+"In"); //setting file path as Filename for pdf download
                String filename_tobeSet = ADFContext.getCurrent().getPageFlowScope().get("userId").toString()+"_Invoice_INPROGRESS."+extn;
                setFilePath(filename_tobeSet);
                ADFContext.getCurrent().getPageFlowScope().put("file_name",filename_tobeSet);
                String path = uploadFile(file,filename_tobeSet);
                System.out.println("path of the uploaded pdf:: "+getFilePath());

                //923018 Pdf Encryption Fix Start

            try {


                com.itextpdf.text.Document document =
                    new com.itextpdf.text.Document();
                PdfReader.unethicalreading = true;
                PdfReader reader = new PdfReader(path);

                if (reader.isEncrypted()) {
                    System.out.println("FileUploadVcListener ::: Encrypted Document Encountered");
                    int n = reader.getNumberOfPages();
                    System.out.println("FileUploadVcListener ::: Number of Pages" +
                                       n);
                    String cpFlNm =
                        resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString() +
                        ADFContext.getCurrent().getPageFlowScope().get("userId").toString() +
                        "_Invoice_INPROGRESS_Copy." + extn;
                    File copyFile = new File(cpFlNm);
                    PdfCopy pCopy =
                        new PdfCopy(document, new FileOutputStream(copyFile));
                    document.open();
                    for (int page = 0; page < n; ) {
                        pCopy.addPage(pCopy.getImportedPage(reader, ++page));
                    }
                    document.close();
                    reader.close();
                    File origFile = new File(path);
                    // boolean isFileDel=origFile.delete();
                    // System.out.println("FileUploadVcListener :::origFile deleted "+isFileDel);
                    boolean isFileReName = copyFile.renameTo(origFile);
                    System.out.println("FileUploadVcListener :::Copy File renamemed " +
                                       isFileReName);

                } else {
                    System.out.println("FileUploadVcListener ::: Non Encrypted Document Encountered");
                    reader.close();
                }

            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (DocumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //923018 Pdf Encryption Fix End

                if1.setVisible(true);
                if1.setRendered(true);




                //AdfFacesContext.getCurrentInstance().addPartialTarget(f1);


                AdfFacesContext.getCurrentInstance().addPartialTarget(if1);

                AdfFacesContext.getCurrentInstance().addPartialTarget(pgFileUploader);
                AdfFacesContext.getCurrentInstance().addPartialTarget( pgFileIFrame);


                //pgFileUploader



            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    private String uploadFile(UploadedFile file,String file_name) {


        /*System.out.println("UploadFile  file.getLength()!!!!!!!!!!!!!!!!!"+file.getLength());


           FacesMessage Message = new FacesMessage("Not an excel file!");
            Message.setSeverity(FacesMessage.SEVERITY_ERROR);
            FacesContext.getCurrentInstance().addMessage(null, Message);*/



           UploadedFile myfile = file;
           String path = null;
           if (myfile == null) {

           } else {
               // All uploaded files will be stored in below path
               //path = "/home/soacrp2app/QFEQSOAOUT/" + myfile.getFilename();
               //path = "/home/soacrp2app/QFEQSOAOUT/" + myfile.getFilename();
             //  path = "/home/soacrp2app/QFEQSOAOUT/" + myfile.getFilename();
            // path = "/u02_sa_soadev/Oracle/Middleware/Upload/" +"194901_"+myfile.getFilename(); //194901_Invoice_INPROGRESS.

               //path = "/u02_sa_soadev/Oracle/Middleware/Upload/" +file_name;
               //path = "/u03/PSP/SOA/" +file_name;
               System.out.println("getttinggg path " +
                                              resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}"));
                           System.out.println("getttinggg file name" + file_name);
               path = resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString() +file_name;


               System.out.println("getttinggg"+path);
               InputStream inputStream = null;
               try {
                   FileOutputStream out = new FileOutputStream(path);
                   inputStream = myfile.getInputStream();
                   byte[] buffer = new byte[8192];
                   int bytesRead = 0;
                   while ((bytesRead = inputStream.read(buffer, 0, 8192)) != -1) {
                       out.write(buffer, 0, bytesRead);
                   }
                   out.flush();
                   out.close();
               } catch (Exception ex) {
                   // handle exception
                   ex.printStackTrace();
               } finally {
                   try {
                       inputStream.close();
                   } catch (IOException e) {
                   }
               }

           }
           //Returns the path where file is stored
           return path;
       }


    public void onaddLineItems(ActionEvent actionEvent) {
        // Add event code here...
        String certifier_flag  = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
        System.out.println("---------getInvoiceId() from onAddLineItemRow: "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId"));
        //getIterateLineVO();
        BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings = bctx.getCurrentBindingsEntry();
        OperationBinding operationBinding =  bindings.getOperationBinding("addLineItemRow");

        operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
        operationBinding.execute();







        BindingContext context1 = BindingUtils.getBindingContext();
        DCBindingContainer bindings1 =
                    (DCBindingContainer)context1.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
         rowSetIterator= iterator.getViewObject().createRowSetIterator(null);



        int i = 0;
        int recDeleted = 0;
        while (rowSetIterator.hasNext())
              {
                   Row r = rowSetIterator.next();

                   //attr8 is used for certification flag
                 // r.getAttribute(arg0)
                 System.out.println("Inside lineitem iteratror ::"+certifier_sbc.getValue());


                  if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){

                      System.out.println("PO Invoice");

                      poLineNum_column.setVisible(true);
                      poLineNum_column.setRendered(true);
                      linePoNum_column.setVisible(true);
                      linePoNum_column.setRendered(true);

                      AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

                  }else if(invoiceTypeSoc!=null && invoiceTypeSoc.getValue().toString().equals("Non PO Invoice")){

                      poLineNum_column.setVisible(false);
                      poLineNum_column.setRendered(false);
                      linePoNum_column.setVisible(false);
                      linePoNum_column.setRendered(false);
                      System.out.println("NO PO Invoice");

                      AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                  }


            if(certifier_sbc.getValue()== null ||(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equals("false"))  ){
                   System.out.println("Setting certifier related fields as disabled");
                    /*r.setAttribute("GlNo", null);
                    r.setAttribute("TaskNo", null);
                    r.setAttribute("ExpinditureOrg", null);
                    r.setAttribute("ProjectNo", null);
                    r.setAttribute("ExpenditureDate", null);*/
                   /* projectNoIT.setDisabled(true);
                    GLCodeIT.setDisabled(true);
                    taskNoIT.setDisabled(true);
                    expOrgIT.setDisabled(true);
                    expDateIT.setDisabled(true);*/

                    projectColumn.setVisible(false);
                    projectColumn.setRendered(false);

                     taskNo_column.setVisible(false);;
                     expOrg_column.setVisible(false);;
                     expDate_column.setVisible(false);
                     taskNo_column.setRendered(false);
                     expOrg_column.setRendered(false);
                     expDate_column.setRendered(false);
                    glcode_column.setVisible(false);
                    glcode_column.setRendered(false);

                expType_column.setVisible(false);
                expType_column.setRendered(false);


                reccode_column.setVisible(false);
                reccode_column.setRendered(false);



                if(invoiceTypeSoc!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){
                poLineNum_column.setVisible(true);
                poLineNum_column.setRendered(true);

                linePoNum_column.setVisible(true);
                linePoNum_column.setRendered(true);
                }else if(invoiceTypeSoc!=null && invoiceTypeSoc.getValue().toString().equals("Non PO Invoice")){
                    poLineNum_column.setVisible(false);
                    poLineNum_column.setRendered(false);

                    linePoNum_column.setVisible(false);
                    linePoNum_column.setRendered(false);



                }


            }else{
                projectColumn.setVisible(true);
                projectColumn.setRendered(true);

                 taskNo_column.setVisible(true);;
                 expOrg_column.setVisible(true);;
                 expDate_column.setVisible(true);
                 taskNo_column.setRendered(true);
                 expOrg_column.setRendered(true);
                 expDate_column.setRendered(true);
                glcode_column.setVisible(true);
                glcode_column.setRendered(true);

                expType_column.setVisible(true);
                expType_column.setRendered(true);

                poLineNum_column.setVisible(false);
                poLineNum_column.setRendered(false);

                reccode_column.setVisible(true);
                reccode_column.setRendered(true);

                linePoNum_column.setVisible(false);
                linePoNum_column.setRendered(false);

            }



            System.out.println("linePoNum_column linePoNum_column :: "+linePoNum_column.isRendered());

                  AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
              }
        }catch(Exception e){
            e.printStackTrace();

        } finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }

        FacesContext fctx = FacesContext.getCurrentInstance();
        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

        String myJavaScriptCode5 = "document.getElementById('pt1:hiddenButtonID').click()";
        System.out.println("On hiddenButtonID button manual click");
        erks.addScript(fctx, myJavaScriptCode5 );


    }


    //added by raha for addition of autofill button 05*11*2019
       public void onCopyClick(ActionEvent actionEvent) {
           // Add event code here...
           BindingContainer bindings = BindingContext.getCurrent().getCurrentBindingsEntry();
           DCIteratorBinding dciter = (DCIteratorBinding) bindings.get("ApOverseasLineitemTableEOView1Iterator");
           RowSetIterator rsi=null;
           try{
               rsi = dciter.getRowSetIterator();
           Row firstRow = rsi.first();
           /*System.out.println("first row attribute ::: "+ firstRow.getAttribute("LineDescription"));

           System.out.println("first row line NO :::"+firstRow.getAttribute("LineNumber"));
           System.out.println("first row tax rate :::"+firstRow.getAttribute("TaxRate"));*/


           String GlNo = firstRow.getAttribute("GlNo")==null ? null : (String)firstRow.getAttribute("GlNo");
           String ProjectNo = firstRow.getAttribute("ProjectNo")==null ? null : (String)firstRow.getAttribute("ProjectNo");
           String TaskNo = firstRow.getAttribute("TaskNo")==null ? null : (String)firstRow.getAttribute("TaskNo");
           String ExpinditureOrg = firstRow.getAttribute("ExpinditureOrg")==null ? null : (String)firstRow.getAttribute("ExpinditureOrg");
           oracle.jbo.domain.Date ExpenditureDate = firstRow.getAttribute("ExpenditureDate")==null ? null : (oracle.jbo.domain.Date)firstRow.getAttribute("ExpenditureDate");
           String Attr10 = firstRow.getAttribute("Attr10")==null ? null : (String)firstRow.getAttribute("Attr10"); //ExpinditureType
           String taxRateCode = firstRow.getAttribute("TaxRateCode")==null ? null : (String)firstRow.getAttribute("TaxRateCode");
           oracle.jbo.domain.Number taxRate = firstRow.getAttribute("TaxRate")==null ? null : (oracle.jbo.domain.Number)firstRow.getAttribute("TaxRate");



           System.out.println("tax rate from first row :: "+ taxRate);
           double lineTotalAmount = 0;
           double taxRateAmount = 0;
           double taxAmount = 0;
           double taxAmountTotal = firstRow.getAttribute("TaxAmountLineitem")==null ? 0 : Double.parseDouble(firstRow.getAttribute("TaxAmountLineitem").toString()); // first row tax amount
           System.out.println("certifier_sbcvalue:"+certifier_sbc.getValue().toString());
           if(
               (GlNo==null||(GlNo!=null&&GlNo.trim().equals("")))
               &&
               (ProjectNo==null||(ProjectNo!=null&&ProjectNo.trim().equals("")))
               &&
               (certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equals("true")))
              {
               callFacesMessage("Before copying, please Enter valid GL Account Code Combination or Project Details (Project No, Task No, Expenditure Org, Expenditure Date, and Expenditure Type) on Line No : 1");
               return;
           }
           while(rsi.hasNext()){
               Row nextRow = rsi.next();
               nextRow.setAttribute("GlNo",            GlNo);
               nextRow.setAttribute("ProjectNo",       ProjectNo);
               nextRow.setAttribute("TaskNo",          TaskNo);
               nextRow.setAttribute("ExpinditureOrg",  ExpinditureOrg);
               nextRow.setAttribute("ExpenditureDate", ExpenditureDate);
               nextRow.setAttribute("Attr10",          Attr10);
               if(nextRow.getAttribute("LineType") == null || (nextRow.getAttribute("LineType") != null && nextRow.getAttribute("LineType").toString().trim().equalsIgnoreCase("TAXABLE LINE"))){
                  if(nextRow.getAttribute("LineDescription") == null
                  ||
                  (nextRow.getAttribute("LineDescription") != null && !nextRow.getAttribute("LineDescription").toString().trim().equalsIgnoreCase("adjustment line"))){
                       nextRow.setAttribute("TaxRateCode", taxRateCode);
                       nextRow.setAttribute("TaxRate", taxRate);

                       if(taxRateCode != null && !taxRateCode.equals("")){
                           oracle.jbo.domain.Number lineTotal = nextRow.getAttribute("LineTotalAmount")==null ? null : (oracle.jbo.domain.Number)nextRow.getAttribute("LineTotalAmount");
                           if(lineTotal != null){
                               lineTotalAmount = lineTotal.doubleValue();
                               taxRateAmount = taxRate.doubleValue();
                               taxAmount = lineTotalAmount * taxRateAmount/100;
                               taxAmountTotal += taxAmount;
                               DecimalFormat df = new DecimalFormat("#0.00");
                               nextRow.setAttribute("TaxAmountLineitem", df.format(taxAmount).toString());

                           }
                       }
                   }

               }

           }
               //taxAmountSum.setValue(taxAmountTotal);
           }catch(Exception e)
           {
               e.printStackTrace();
               }
           finally{
                       if(rsi!=null) {
                           try {
                               rsi.closeRowSetIterator();
                           } catch(Exception ex) {
                               ex.printStackTrace();

                       }
                       }
                   }

           //recalculateLineAndTaxTotal();
           AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
       }
       //ended by raha

       // Alternate Approver issue adding operating unit (10-Nov-22)
              public String getCertifierFilterByOUBinding(String operatingUnit){
              DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
              DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("JS_OuMapping1Iterator");
              ViewObjectImpl voimpl = (ViewObjectImpl)dcIteratorBinding.getViewObject();
              ViewCriteria vc = voimpl.getViewCriteria("JS_OuMappingCriteria_byOUNAME");
              voimpl.applyViewCriteria(vc);
              voimpl.setNamedWhereClauseParam("ou_name", operatingUnit);
              voimpl.executeQuery();
              String jba=null;
              RowSetIterator rsIterator = voimpl.createRowSetIterator(null);
              rsIterator.reset();
              System.out.println("Get jba name against operation unit >>"+ operatingUnit);
                 while (rsIterator.hasNext()) {
                 Row row = rsIterator.next();
                       if(row.getAttribute("Jba") != null){
                          //System.out.println("getCertifierFilterByOUBinding JBA:: "+row.getAttribute("Jba"));
                          jba=row.getAttribute("Jba").toString();

                      }
                  break;

               }
                rsIterator.closeRowSetIterator();



              ViewCriteria vc1 = voimpl.getViewCriteria("JS_OuMappingCriteria");
              voimpl.applyViewCriteria(vc1);
              voimpl.setNamedWhereClauseParam("jba_ofOU",jba);
              voimpl.executeQuery();

               RowSetIterator rsIterator1 = voimpl.createRowSetIterator(null);
               rsIterator1.reset();

               ArrayList<String> ou_list=new ArrayList<String>();
               StringBuilder ou_names = new StringBuilder();
                  while (rsIterator1.hasNext()) {
                   Row row = rsIterator1.next();
                       if(row.getAttribute("OuName") != null){
                          //System.out.println("getCertifierFilterByOUBinding JBA:: "+row.getAttribute("OuName"));
                          String ou=row.getAttribute("OuName").toString();
                          //ou_list.add(ou)
                          ou_names.append(ou);
                          ou_names.append(",");

                      }


               }
              ou_names.deleteCharAt(ou_names.length()-1);
              System.out.println("ou_names against JBA:: "+ou_names.toString());
              rsIterator1.closeRowSetIterator();
              ADFContext.getCurrent().getViewScope().put("ou_names_ViewParam", ou_names.toString());


              return   ou_names.toString();




              }

    public void saveFormDetails(ActionEvent actionEvent) {
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("natureofEXP_flag" ,natureOfEXpSOC.getValue());
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("mpa_flag",mpaC.getValue());
        // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc1",pc1.getValue());
       // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",pc2.getValue());

        //System.out.println("pc3.getValue() 3 ::"+pc3.getValue());
       // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",pc3.getValue());

       if (getUrlOrg().equalsIgnoreCase("JS")) {
                   if (radio_paymentTypes.getValue() != null && radio_paymentTypes.getValue()
                                                                                  .toString()
                                                                                  .equals("WIRE")) {
                       AdfFacesContext.getCurrentInstance()
                                      .getPageFlowScope()
                                      .put("pc2", true);
                       AdfFacesContext.getCurrentInstance()
                                      .getPageFlowScope()
                                      .put("pc3", false);

                   }
               } else {
        if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("WIRE")){
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",true);
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);

        }else  if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",true);
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
        }
               }
        if(mpaC.getValue()!=null && mpaC.getValue().toString().equals("false")){
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
        }

        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",certifier_sbc.getValue());
        ADFContext.getCurrent().getPageFlowScope().put("Submit","false");
        BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings = bctx.getCurrentBindingsEntry();
        OperationBinding operationBinding =  bindings.getOperationBinding("saveAllFormDetails");
        System.out.println("invoiceId :"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+" On saving from cert name ::"+certNameIt.getValue() +"-----supplier name  and currency -----"+supNameIt.getValue()
                           +"---curr----"+
                           currencyIt.getValue()  +"org id ::"+orgIdIt.getValue());

        operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
        operationBinding.getParamsMap().put("supName",supNameIt.getValue());
        operationBinding.getParamsMap().put("currency", certifier_sbc.getValue());
        operationBinding.getParamsMap().put("employeeNo", ADFContext.getCurrent().getPageFlowScope().get("userId"));
        operationBinding.getParamsMap().put("siteId",orgIdIt.getValue());


        System.out.println("Iterating over ApOverseasLineitemTableEOView1Iterator");
        BindingContext context1 = BindingUtils.getBindingContext();
                DCBindingContainer bindings1 =
                            (DCBindingContainer)context1.getCurrentBindingsEntry();
                DCIteratorBinding iterator;
                RowSetIterator rowSetIterator= null;
                try{
                iterator = (DCIteratorBinding)bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                 rowSetIterator= iterator.getViewObject().createRowSetIterator(null);




                while (rowSetIterator.hasNext())
                      {
                           Row r = rowSetIterator.next();
                    System.out.println("Roe line item LineNumber:: "+ r.getAttribute("LineNumber"));
                    System.out.println("Roe line item ProjectidLine:: "+ r.getAttribute("ProjectidLine"));
                    System.out.println("Roe line item TaskidLine:: "+ r.getAttribute("TaskidLine"));
                      }
                }catch(Exception e){

                    }finally{
                    if(rowSetIterator!=null){

                        rowSetIterator.closeRowSetIterator();;
                    }
                    }


        operationBinding.execute();

       String validationErrorMessage = "Form details saved successfully.";
       RichPopup.PopupHints hints = new RichPopup.PopupHints();
       validationErrorPopup.show(hints);
       this.validationErrorMessage.setValue(validationErrorMessage);

        System.out.println(" END of saveFormDetails invoiceId :"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());

    }

    public void onrefreshPage(ActionEvent actionEvent) {
    System.out.println("Action listnerrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr");
        refreshPage();
    }

    protected void refreshPage() {
        System.out.println("refreshPage");
          FacesContext fc = FacesContext.getCurrentInstance();
          String refreshpage = fc.getViewRoot().getViewId();
     ViewHandler ViewH =
     fc.getApplication().getViewHandler();
          UIViewRoot UIV = ViewH.createView(fc, refreshpage);
          UIV.setViewId(refreshpage);
          fc.setViewRoot(UIV);
        System.out.println("refreshPage done");
    }



    public void onClearFormClick(ActionEvent actionEvent) {

        alternateapprovNoIt.setValue("");
        //ADFContext.getCurrent().getPageFlowScope().put("approverID_pageLoad",null);
        ADFContext.getCurrent().getPageFlowScope().put("approverID",null);
        System.out.println("Inside onClearFormClick ");
        chooseTemplateIt.setValue("");
        supNameIt.setValue("");
        siteIdIt.setValue("");
        invNumIt.setValue("");
        taxRegIt.setValue("");
        poNumIt.setValue("");
        currencyIt.setValue("");
        certNameIt.setValue("");
        certEmailIt.setValue("");
        alternateApproverIt.setValue("");
        invoiceTypeSoc.setValue("");
        suppNumIt.setValue("");
        siteNameIt.setValue("");
        invDateId.setValue("");
        operatingUnitIt.setValue("");
        lineIdIt.setValue("");
        taxTotIt.setValue("");
        headerTotIt.setValue("");
        employeeNoIt.setValue("");
        //923018 Start UI Change for New Field
        electRemittence.setValue("");
        //923018 End UI Change for New Field
        certifier_sbc.setValue(false);
        mpaC.setValue(false);
        alternateapprovNoIt.setValue("");
        certifierApproveComments.setValue("");
        natureOfEXpSOC.setValue(false);
        paymentAllocNo.setValue("");
        radio_paymentTypes.setValue("");
        invoiceTypeSoc.setValue("Non PO Invoice");
        docTypeSoc.setValue("Invoice");
        System.out.println("Clearingg ebsErrorMessage");
        ebsErrorMessage.setValue("");
        ebsErrorMessage.setVisible(false);
        ebsErrorMessage.setRendered(false);
        if1.setVisible(false);
        if1.setRendered(false);




        if(ADFContext.getCurrent().getPageFlowScope().get("file_name")!=null){
            System.out.println("File to be deleted location---"+resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope().get("file_name"));
            File file = new File(resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope().get("file_name").toString());
            if(file.delete()){
                    System.out.println(file.getName() + " is deleted!");
            }else{
                    System.out.println("Delete operation is failed.");
            }
        }

     /*   System.out.println(" AdfFacesContext.getCurrentInstance().addPartialTarget ebsPanelGroupLaylout");
        AdfFacesContext.getCurrentInstance().addPartialTarget(ebsPanelGroupLaylout);
        AdfFacesContext.getCurrentInstance().addPartialTarget(chooseTemplateIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
        AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
        AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
        AdfFacesContext.getCurrentInstance().addPartialTarget(if1);
        AdfFacesContext.getCurrentInstance().addPartialTarget( pgFileIFrame);*/



       /* BindingContext context1 = BindingUtils.getBindingContext();
                DCBindingContainer bindings1 =
                            (DCBindingContainer)context1.getCurrentBindingsEntry();
                DCIteratorBinding iterator1;
                RowSetIterator rowSetIterator1= null;
                try{
                iterator1 = (DCIteratorBinding)bindings1.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator");
                 rowSetIterator1= iterator1.getViewObject().createRowSetIterator(null);

                int i = 0;
                int recDeleted = 0;
                while (rowSetIterator1.hasNext())
                      {  Row r = rowSetIterator1.next();
                          r.setAttribute("InvoiceId", "");

                          r.setAttribute("LinePoNum", "");
                          r.setAttribute("PoLineNum", "");
                          r.setAttribute("LineDescription", "");
                          r.setAttribute("Quantity", "");
                          r.setAttribute("Uom", "");
                          r.setAttribute("UnitPrice", "");
                          r.setAttribute("LineTotalAmount", "");
                          r.setAttribute("TaxRate", "");
                          r.setAttribute("TaxRateCode", "");
                          r.setAttribute("UserId", "");
                          r.setAttribute("LineType", "");
                          r.setAttribute("LinePoNum", "");
                          r.setAttribute("TaxAmountLineitem", "");
                          r.setAttribute("PoLineNum", "");
                          r.setAttribute("ProjectNo", "");
                          r.setAttribute("TaskNo", "");
                          r.setAttribute("ExpinditureOrg", "");
                          r.setAttribute("ExpenditureDate", "");
                          r.setAttribute("GlNo", "");
                          r.setAttribute("Attr10", "");
                          r.setAttribute("TaskidLine", "");
                          r.setAttribute("RecCode", "");
                          r.setAttribute("Attr11", "");
                          r.setAttribute("RecCodeFlag", "");
                      }

                    AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                }catch(Exception e){
                    e.printStackTrace();

                } finally{
                    if(rowSetIterator1
                       !=null){
                           rowSetIterator1.closeRowSetIterator();;
                       }

                }*/







        BindingContext context = BindingUtils.getBindingContext();
                DCBindingContainer bindings =
                            (DCBindingContainer)context.getCurrentBindingsEntry();
                DCIteratorBinding iterator;
                RowSetIterator rowSetIterator= null;
                try{
                iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                 rowSetIterator= iterator.getViewObject().createRowSetIterator(null);





                int i = 0;
                int recDeleted = 0;
                while (rowSetIterator.hasNext())
                      {
                           Row r = rowSetIterator.next();

                           //attr8 is used for certification flag


                        //r.setAttribute("InvoiceId", "");

                        r.setAttribute("LinePoNum", "");
                        r.setAttribute("PoLineNum", "");
                        r.setAttribute("LineDescription", "");
                        r.setAttribute("Quantity", "");
                        r.setAttribute("Uom", "");
                        r.setAttribute("UnitPrice", "");
                        r.setAttribute("LineTotalAmount", "");
                        r.setAttribute("TaxRate", "");
                        r.setAttribute("TaxRateCode", "");
                        r.setAttribute("UserId", "");
                        r.setAttribute("LineType", "");
                        r.setAttribute("LinePoNum", "");
                        r.setAttribute("TaxAmountLineitem", "");
                        r.setAttribute("PoLineNum", "");
                        r.setAttribute("ProjectNo", "");
                        r.setAttribute("TaskNo", "");
                        r.setAttribute("ExpinditureOrg", "");
                        r.setAttribute("ExpenditureDate", "");
                        r.setAttribute("GlNo", "");
                        r.setAttribute("Attr10", "");
                        r.setAttribute("TaskidLine", "");
                        r.setAttribute("RecCode", "");
                        r.setAttribute("Attr11", "");
                        r.setAttribute("RecCodeFlag", "");
                        //r.setAttribute("sumOfLineTotal", "");
                        //r.setAttribute("Attr9", "");
                        r.setAttribute("RecCodeFlag", "");
                       // r.setAttribute("sumOfTaxTotal", "");
                        r.setAttribute("Attr8", "");
                        r.setAttribute("Attr7", "");
                        r.setAttribute("Attr6", "");
                        r.setAttribute("Attr5", "");
                       r.setAttribute("Attr4", "");
                        r.setAttribute("Attr3", "");
                        r.setAttribute("Attr2", "");
                       // r.setAttribute("Attr1", "");

                        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);


                    }


                }catch(Exception e){
                    e.printStackTrace();

                } finally{
                    if(rowSetIterator
                       !=null){
                           rowSetIterator.closeRowSetIterator();;
                       }

                }


        RowSetIterator haederItr1 = null;


                   try{
                       DCBindingContainer dcBindingContainer_1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                       DCIteratorBinding dcIteratorBinding_1 = dcBindingContainer_1.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator");
                       ViewObjectImpl headerVO = (ViewObjectImpl)dcIteratorBinding_1.getViewObject();


                       haederItr1 = headerVO.createRowSetIterator(null);
                       while(haederItr1.hasNext()) {

                           Row r = haederItr1.next();
                           r.setAttribute("AlternateApprover", "");
                                                r.setAttribute("SupplierName", "");
                                                r.setAttribute("SiteId", "");
                                                r.setAttribute("InvoiceNumber", "");
                                                r.setAttribute("TaxRegNumber", "");
                                                r.setAttribute("PoNumber", "");
                                                r.setAttribute("CurrencyCode", "");
                                                r.setAttribute("CertifierName", "");
                                                r.setAttribute("CertifierEmailAdd", "");
                                                r.setAttribute("AlternateApprover", "");
                                                r.setAttribute("InvoiceType", "Non PO Invoice");
                                                r.setAttribute("SupplierNumber", "");
                                                r.setAttribute("SiteName", "");
                                                r.setAttribute("InvoiceDate", "");
                                                r.setAttribute("Attr2", "");
                                                r.setAttribute("Attr1", "");
                                                r.setAttribute("TaxAmount", "");
                                                r.setAttribute("InvoiceTotAmount", "");
                                                r.setAttribute("EmployeeNumber", "");
                                                r.setAttribute("Attr16", "");
                                            r.setAttribute("CertifierApproveComments", "");
                                            r.setAttribute("CertifierApproveComments", "");
                                            //923018 Start UI Change for New Field
                                             r.setAttribute("ElectRemittance", "");
                                            //923018 End UI Change for New Field
                                          AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",false);
                                          ADFContext.getCurrent().getPageFlowScope().put("natureofEXP_flag",false );
                                          ADFContext.getCurrent().getPageFlowScope().put("mpa_flag",false);
                                          ADFContext.getCurrent().getPageFlowScope().put("pc1", false);
                                          ADFContext.getCurrent().getPageFlowScope().put("pc2",false);
                                          ADFContext.getCurrent().getPageFlowScope().put("pc3",false);
                                          ADFContext.getCurrent().getPageFlowScope().put("certifier_flag_DB",false);
                                          ADFContext.getCurrent().getPageFlowScope().put("supplier_id_value",false);

                       }
                   }catch(Exception e){
                    e.printStackTrace();

                        } finally{
                            if(haederItr1 !=null){
                                   haederItr1.closeRowSetIterator();;
                               }

                        }





      AdfFacesContext.getCurrentInstance().getPageFlowScope().put("natureofEXP_flag" ,natureOfEXpSOC.getValue());
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("mpa_flag",mpaC.getValue());
        // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc1",pc1.getValue());
        //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",pc2.getValue());
        //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",pc3.getValue());
        if (getUrlOrg().equalsIgnoreCase("JS")) {
                    if (radio_paymentTypes.getValue() != null && radio_paymentTypes.getValue()
                                                                                   .toString()
                                                                                   .equals("WIRE")) {
                        AdfFacesContext.getCurrentInstance()
                                       .getPageFlowScope()
                                       .put("pc2", true);
                        AdfFacesContext.getCurrentInstance()
                                       .getPageFlowScope()
                                       .put("pc3", false);

                    }
                } else {
        if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("WIRE")){
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",true);
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);

               }else  if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",true);
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
               }}
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",certifier_sbc.getValue());
         System.out.println("pc3.getValue() 1 ::"+pc3.getValue());

        BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings1 = bctx.getCurrentBindingsEntry();
        OperationBinding operationBinding =  bindings1.getOperationBinding("saveAllFormDetails");
        System.out.println("On saving from cert name ::"+certNameIt.getValue() +"-----supplier name  and currency -----"+supNameIt.getValue()
                           +"---curr----"+
                           currencyIt.getValue()  +"org id ::"+orgIdIt.getValue());

        operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
        operationBinding.getParamsMap().put("supName",supNameIt.getValue());
        operationBinding.getParamsMap().put("currency",certifier_sbc.getValue());
        operationBinding.getParamsMap().put("employeeNo", ADFContext.getCurrent().getPageFlowScope().get("userId"));
        operationBinding.getParamsMap().put("siteId",orgIdIt.getValue());



        operationBinding.execute();

         System.out.println("End doSaveOperation");

      //System.out.println(" SaveOperation from claer");
      //dbCommit();

      System.out.println(" AdfFacesContext.getCurrentInstance().addPartialTarget ebsPanelGroupLaylout");
      AdfFacesContext.getCurrentInstance().addPartialTarget(ebsPanelGroupLaylout);
      AdfFacesContext.getCurrentInstance().addPartialTarget(chooseTemplateIt);
      AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
      AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
      AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
      AdfFacesContext.getCurrentInstance().addPartialTarget(if1);
      AdfFacesContext.getCurrentInstance().addPartialTarget( pgFileIFrame);

        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);


    }
    public void onAddTemplateClick(ActionEvent actionEvent) {

      /* BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings = bctx.getCurrentBindingsEntry();
        OperationBinding operationBinding =  bindings.getOperationBinding("onAddTemplateRow_new");


        operationBinding.getParamsMap().put("userId","194901");

       //itTemplateName.setValue(getDocTypeSoc().getValue().toString());*/

        /*Clear the template before showing the popup*/
        itTemplateName.setValue("");
        itTemplateDocNAme.setValue(docTypeSoc.getValue());
        itTemplateInvType.setValue(invoiceTypeSoc.getValue());
        itTemplateSuppName.setValue(supNameIt.getValue());
        itTemplateSuppNo.setValue(suppNumIt.getValue());
        itTemplateSiteId.setValue(siteIdIt.getValue());
        itTemplateOpUnit.setValue(operatingUnitIt.getValue());
        itTemplateTaxRegNo.setValue(taxRegIt.getValue());
        itTemplateSiteName.setValue(siteNameIt.getValue());



    ofTemplate.setVisible(false);
    ofTemplate.setRendered(false);
    AdfFacesContext.getCurrentInstance().addPartialTarget(pfl2);
    popUpTemplate.show(new RichPopup.PopupHints());

    }



    public void onValiadteClick(ActionEvent actionEvent) {
        ADFContext.getCurrent().getPageFlowScope().put("Submit","false");
        System.out.println("Start: on validate Click1");
        ot76.setVisible(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgl1);
        String validationErrorMessage1=null;
        if(validationErrorMessage1==null && ((docTypeSoc.getValue()==null || (docTypeSoc.getValue()!=null && docTypeSoc.getValue().toString().trim().equals(""))))) {
                            System.out.println("Document Type cannot be Blank");
                            validationErrorMessage1 = "Document Type cannot be Blank";
        }
        if(validationErrorMessage1==null && ( (invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))))) {
            System.out.println("Invoice Type cannot be Blank");
            validationErrorMessage1 = "Invoice Type cannot be Blank";
        }

                if(validationErrorMessage1!=null) {
                        RichPopup.PopupHints hints = new RichPopup.PopupHints();
                        validationErrorPopup.show(hints);
                        this.validationErrorMessage.setValue(validationErrorMessage1);
                        return;
                      }
        System.out.println("Start: on validate Click2222222222222222222222222");
               int executeSubmit=0;
               try {
                   /* ****************** */
                   String description = null;
                   String commentsDate = null;
                  /* if(!(commentsIt.getValue()== null || (commentsIt.getValue()!=null && commentsIt.getValue().equals(""))))
                   {
                       description = commentsIt.getValue().toString() ;
                   }   27thAug*/

                   String invNum = null;
                   if(invNumIt.getValue()!=null){
                       invNum = (String)invNumIt.getValue();
                   }
                   String enteredSiteId=null;
                   if(siteIdIt.getValue()!=null){
                   enteredSiteId = siteIdIt.getValue().toString();
                   }
                   String enteredSupName=null;
                   if(supNameIt.getValue()!=null){
                   enteredSupName = supNameIt.getValue().toString();
                   }



                   oracle.jbo.domain.Date invDate = null;
                   if(invDateId.getValue()!=null){
                   invDate = ((oracle.jbo.domain.Date)invDateId.getValue());
                   }


                   String enteredTotalAmount=null;
                   if(headerTotIt.getValue()!=null){
                   enteredTotalAmount = headerTotIt.getValue().toString();
                   }
                   //String invoiceId = getInvoiceId();

                   String invoiceId =  ADFContext.getCurrent().getPageFlowScope().get("invoiceId")!=null ?ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString() :null;
                   System.out.println("invoiceId b4 mathod call"+invoiceId+" invNum : "+invNum);
                   String creditInvoiceCheck = validateCreditNote();
                   if(creditInvoiceCheck!=null){
                       if(creditInvoiceCheck.equalsIgnoreCase("credit")){
                           System.out.println("creditInvoiceCheck ==== credit");
                           String validationErrorMessage = "Amount values cannot be in positive for the document type as CREDIT";
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);
                           this.validationErrorMessage.setValue(validationErrorMessage);
                           return;
                       }
                       else if(creditInvoiceCheck.equalsIgnoreCase("invoice")){
                           System.out.println("creditInvoiceCheck ==== invoice");
                           String validationErrorMessage = "Amount values cannot be in negetive for the document type as INVOICE";
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);
                           this.validationErrorMessage.setValue(validationErrorMessage);
                           return;
                       }
                   }

                   //ot76
                   System.out.println("Validation started for PoNonPo");
                   if(ADFContext.getCurrent().getPageFlowScope().get("PoNonPo") != null) {
                       if("Y".equalsIgnoreCase(ADFContext.getCurrent().getPageFlowScope().get("PoNonPo").toString()))
                       {
                       String supplier_id_boolean = ADFContext.getCurrent().getPageFlowScope().get("PoNonPo").toString();
                       System.out.println(supplier_id_boolean);
                       if(invoiceTypeSoc.getValue() != null && !"PO Invoice".equalsIgnoreCase(invoiceTypeSoc.getValue().toString())) {
                           String validationErrorMessage = "This Supplier requires a valid & open Purchase Order (PO).  See Procurement SharePoint page for Qantas Group Purchasing Policy & Guidelines<br><br>\n" +
                           "\n" +
                           "You must enter the valid & approved PO number below and match PO line/s.<br>\n" +
                           "\n" +
                           "Ensure you receipt your PO in iProcurement to process your invoice for payment <br><br>\n" +
                           "\n" +
                           "<a href = \"mailto:procurementhelp@qantas.com.au\">Contact procurementhelp@qantas.com.au for assistance if required</a>";
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);
                           this.validationErrorMessage.setValue(validationErrorMessage);
                           System.out.println("Validation added for PoNonPo");
                           return;
                       }
                       }
                       else {

                       }
                   }
//                   else
//                   {
//                       DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
//                       DCIteratorBinding dcIteratorBinding = bindings.findIteratorBinding("SitesVO1Iterator");
//                       RowSetIterator empRSIter=null;
//                       try{
//
//
//                           ViewObjectImpl PoNonPoVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
//                           ViewCriteria vc = PoNonPoVO.getViewCriteria("SitesVOCriteria");
//                           PoNonPoVO.applyViewCriteria(vc);
//                           System.out.println(supNameIt.getValue().toString());
//                           PoNonPoVO.setNamedWhereClauseParam("bindVendorName", supNameIt.getValue().toString());
//                           PoNonPoVO.executeQuery();
//                           PoNonPoVO.next();
//                           System.out.println(PoNonPoVO.getCurrentRow().getAttribute("VendorName").toString());
//                           String selectedSupplierName= PoNonPoVO.getCurrentRow().getAttribute("VendorName").toString();
//
//                           if(selectedSupplierName != null) {
//                               String validationErrorMessage = "The Invoice Type should be PO type for this supplier id";
//                               RichPopup.PopupHints hints = new RichPopup.PopupHints();
//                               validationErrorPopup.show(hints);
//                               this.validationErrorMessage.setValue(validationErrorMessage);
//                               System.out.println("Validation added for PoNonPo");
//                               return;
//                           }
//                       }
//                       catch(Exception e) {
//                           e.printStackTrace();
//                       }
//                   }
                //923018-Duplicate change- start

                String supplier_Id=null;

                if(ADFContext.getCurrent().getPageFlowScope().get("supplier_id_value")!=null){
                 supplier_Id = ADFContext.getCurrent().getPageFlowScope().get("supplier_id_value").toString();
                    System.out.println(invNum+" onValiadteClick method :: supplierId :: "+supplier_Id);
                }
                String inDate=null;
                if(invDateId.getValue()!=null){
                    inDate=invDateId.getValue().toString();
                }
                System.out.println(invNum+" onValiadteClick method :: Before Check Duplicate SP Call");
                //boolean flag = checkDuplicateRecordSP(invNum, enteredSiteId, supplier_Id, inDate, enteredTotalAmount, ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
                if(!checkDuplicateRecordSP(invNum, enteredSiteId, supplier_Id, inDate, enteredTotalAmount, ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString())) {
                //923018-Duplicate change- End
            //if(!checkDuplicateRecord(invNum,enteredSiteId,enteredSupName,invDate,enteredTotalAmount,invoiceId, "SUBMIT")) {
                  // System.out.println("invoiceTypeSoc.getValue() "+invoiceTypeSoc.getValue());
                   //System.out.println("reasonSoc.getValue() "+reasonSoc.getValue()+".");
                 // String invalidReason =
                  //     (String)resolveExpression("#{bindings.InvalidReasonId.selectedValue ne ' ' ? bindings.InvalidReasonId.selectedValue.attributeValues[1] : ''}");
                   // String invalidReason = (String)AdfFacesContext.getCurrentInstance().getPageFlowScope().get("invalidReason");
                   //System.out.println("Invalid reason type"+invalidReason);

                  // if(invoiceTypeSoc.getValue().equals("Non PO Invoice") && !invalidReason.equals("REJECT")){

                  if(invoiceTypeSoc.getValue().equals("Non PO Invoice") ){
                  System.out.println(invoiceId+" :invNum: "+invNum+"Yes this is non po invoice and reason is other than reject");
                  // if(reasonSoc.getSubmittedValue()!="REJECT")
                       System.out.println(invoiceId+" :invNum: "+invNum+"certNameIt.getValue():::::"+certNameIt.getValue());
                       System.out.println(invoiceId+" :invNum: "+invNum+"employeeNoIt.getValue()::::"+employeeNoIt.getValue());
                       System.out.println(invoiceId+" :invNum: "+invNum+"certifier_sbc.getValue() ::::"+certifier_sbc.getValue());
                       System.out.println(invoiceId+" :invNum: "+invNum+"ADFContext.getCurrent().getPageFlowScope().get(\"userId\").toString()::::::: "+ADFContext.getCurrent().getPageFlowScope().get("userId").toString());


                   if(certNameIt.getValue()!=null &&  !((String)certNameIt.getValue()).trim().equals("")){
                       System.out.println(invoiceId+" :invNum: "+invNum+" before Certifier flag is "+certifierFlag);
                      // 29th certifierFlag=Integer.parseInt(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope").toString());
                      //29th oct certifierFlag =(Integer)AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope");;
                       if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope")!=null){
                      certifierFlag =(Integer)AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope");
                     System.out.println("Inside validate AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"certifierFlagInScope\")::::"+
                                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope"));
                      }
                      System.out.println(invoiceId+" :invNum: "+invNum+" new certifier flag is "+certifierFlag);

                       String enteredCertifierName =(String)certNameIt.getValue();
                       DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                       DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                       ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                       ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria1");
                       certifierNameVO.applyViewCriteria(vc);
                       // certifierNameVO.clearCache();
                       certifierNameVO.setNamedWhereClauseParam("bindName", enteredCertifierName);
                       certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                       System.out.println("-----------Dynamic Query-----------");
//                       System.out.println(certifierNameVO.getQuery());
                       certifierNameVO.executeQuery();
                       int noOfRows=certifierNameVO.getRowCount();
                       System.out.println(invoiceId+" :invNum: "+invNum+" No of rows fetched by certifiernamevo is outside certifierFlag==0 "+noOfRows);
                     if(noOfRows==0)
                     {
                                                           System.out.println(invoiceId+" :invNum: "+invNum+" inside rows"+noOfRows);
                                                          //  certifierFlag=0;
                                                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifierFlagInScope",0);
                                                           System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope() novalue "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope"));
                                                           String validationErrorMessage = "Invalid Certifier Name. Please select a valid Certifier Name.";
                                                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                                                           validationErrorPopup.show(hints);
                                                           this.validationErrorMessage.setValue(validationErrorMessage);
                                                           return;
                     }
                       //923018- Alice Yin -Start
                     else if(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equals("true")){

                         AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifierFlagInScope",1);
                         System.out.println(invoiceId+" :invNum: "+invNum+" AdfFacesContext.getCurrentInstance().getPageFlowScope() setting"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope"));
                             certifierFlag=1;
                         System.out.println(invoiceId+" :invNum: "+invNum+"Executing I am the Certifier block employeeNoIt ::::"+employeeNoIt.getValue()+" certNameIt :::::"+certNameIt.getValue()+" certEmailIt :: "+certEmailIt.getValue());
                     }
                       //923018- Alice Yin -End
                     else if(certifierFlag==0){
                          /* String enteredCertifierName =(String)certNameIt.getValue();
                           DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                           DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                           ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                           ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria1");
                           certifierNameVO.applyViewCriteria(vc);
                           // certifierNameVO.clearCache();
                           certifierNameVO.setNamedWhereClauseParam("bindName", enteredCertifierName);
                           //System.out.println("-----------Dynamic Query-----------");
                           //System.out.println(certifierNameVO.getQuery());
                           certifierNameVO.executeQuery();
                           int noOfRows=certifierNameVO.getRowCount();
                       System.out.println("No of rows fetched by certifiernamevo is "+noOfRows);*/
                           if(noOfRows==1){
                               System.out.println(invoiceId+" :invNum: "+invNum+" Executing No of rows is "+noOfRows);
                                   String selectedEmployeeNo=null;
                                   String  selectedcertifierEmail=null;
                               Row row = certifierNameVO.next();
                               if(row.getAttribute("EmployeeNumber") != null){
                                   System.out.println("Employee no is "+row.getAttribute("EmployeeNumber"));
                                     selectedEmployeeNo=row.getAttribute("EmployeeNumber").toString();
                                     System.out.println("Employe Number "+selectedEmployeeNo);
                                     }
                                     System.out.println("Email address is "+row.getAttribute("EmailAddress"));
                                     if(row.getAttribute("EmailAddress") != null){
                                    selectedcertifierEmail=row.getAttribute("EmailAddress").toString();
                                   }
                                  // certNameIt.setValue(selectedCertifierName);
                                   employeeNoIt.setValue(selectedEmployeeNo);
                                   System.out.println("EmployeeNOIt.getvalue "+employeeNoIt.getValue());
                                   if(selectedcertifierEmail!=null){
                                      certEmailIt.setValue(selectedcertifierEmail);
                                   }
                                   else
                                   {
                                        certEmailIt.setValue("");
                                    }
                               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifierFlagInScope",1);
                               System.out.println(invoiceId+" :invNum: "+invNum+" AdfFacesContext.getCurrentInstance().getPageFlowScope() setting"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope"));
                                   certifierFlag=1;
                               AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);

                           }
                           else if(noOfRows!=1){
                               System.out.println(invoiceId+" :invNum: "+invNum+" Executing No of rows more than one  "+noOfRows);
                          // certifierNameErrorOT.setValue("More than one  CertifierName has matched the entered CertifierName. So please select a valid Certifier Name.");
                          // certifierNameErrorOT.setVisible(true);


                           // AdfFacesContext.getCurrentInstance().addPartialTarget(certifierNameErrorOT);
                           DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                           DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                           ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                           ViewCriteria vc1 = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");
                           certifierNameVO1.applyViewCriteria(vc1);

                           certifierNameVO1.setNamedWhereClauseParam("bindName", enteredCertifierName);
                                   certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                           System.out.println("-----------Dynamic Query-----------");
//                           System.out.println(certifierNameVO1.getQuery());
                           certifierNameVO1.executeQuery();

                         int noOfRows1=certifierNameVO1.getRowCount();
                         if(noOfRows1==1)
                         {
                             System.out.println(invoiceId+" :invNum: "+invNum+" inside rows"+noOfRows1);
                                 String validationErrorMessage = "Please confirm the Certifier Name matched against the name you had entered by selecting it.";
                                 RichPopup.PopupHints hints1 = new RichPopup.PopupHints();
                                  validationErrorPopup.show(hints1);
                                 this.validationErrorMessage.setValue(validationErrorMessage);
                        RichPopup.PopupHints hints = new RichPopup.PopupHints();
                         p10.show(hints);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(certifierNameDetailsTable);
                             }
                        else if(noOfRows1==0)
                       {
                                System.out.println("inside rows"+noOfRows1);
                           //  certifierFlag=0;
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifierFlagInScope",0);
                                System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope() novalue "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope"));
                                String validationErrorMessage = "Invalid Certifier Name. Please select a valid Certifier Name.";
                                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                                validationErrorPopup.show(hints);
                                this.validationErrorMessage.setValue(validationErrorMessage);
                            }
                         else if(noOfRows1>1)
                         {
                                 System.out.println("inside rows"+noOfRows1);
                        RichPopup.PopupHints hints = new RichPopup.PopupHints();
                         // on 25th feb   p10.show(hints);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(certifierNameDetailsTable);
                                 String validationErrorMessage = "More than one record found against the Certifier Name you had entered. Please select a record from the list shown.";
                                 RichPopup.PopupHints hints1 = new RichPopup.PopupHints();
                                  validationErrorPopup.show(hints1);
                                 this.validationErrorMessage.setValue(validationErrorMessage);
                             }

                               }
                           }
                       System.out.println(invoiceId+" :invNum: "+invNum+" At last Certifier flag is "+certifierFlag);
                   if(certifierFlag==1){
                       if(validateAndDoSaveOperation(true))
                       {
                           System.out.println(invoiceId+" :invNum: "+invNum+" non po and non reject");

                           /*approveTask();
                           closeAPWindow();*/
                           String message = ebsValidationCAll();



                           System.out.println(invoiceId+" :invNum: "+invNum+" After ebsvalidationn call 1"+message);


                          /* ebsErrorMessage.setValue("Testingggg");
                           ebsErrorMessage.setVisible(true);
                           ebsErrorMessage.setRendered(true);
                           supNameIt.setValue("test1");
                           AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(supNameIt);
                           System.out.println("ebsErrorMessage partial trigger");*/

                          /*ebsErrorMessage.setValue(message);
                          ebsErrorMessage.setVisible(true);
                          ebsErrorMessage.setRendered(true);

                          AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);*/
                          String validationErrorMessage=null;
                           if(message==null || (message!=null && message.equals(""))){


                               validationErrorMessage = "Form details validated successfully.";

                               //validate_cb.setDisabled(true);
                           }else{

                               validationErrorMessage = "Form details saved.However validation error exists.Please correct the details and revalidate";

                           }
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);
                           this.validationErrorMessage.setValue(validationErrorMessage);

                           if(message==null || (message!=null && message.equals("")) ){
                               System.out.println(invoiceId+" :invNum: "+invNum+" enabling submit_cb ");
                             ebsErrorMessage.setVisible(false);
                             ebsErrorMessage.setRendered(false);
                             submit_cb.setDisabled(false);
                               //validate_cb.setDisabled(true);
                           }
                           AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

                           if(message!=null ){
                               System.out.println(invoiceId+" :invNum: "+invNum+" Message ::::::::: "+message);
                           ebsErrorMessage.setValue(message);
                           ebsErrorMessage.setVisible(true);
                           ebsErrorMessage.setRendered(true);
                           }
                           AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
                           System.out.println(invoiceId+" :invNum: "+invNum+" Refreshing the parent and all header items");
                           AdfFacesContext.getCurrentInstance().addPartialTarget(taxTotIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(headerTotIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(docTypeSoc);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(invNumIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(supNameIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(suppNumIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(siteIdIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(siteNameIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(taxRegIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(currencyIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                           AdfFacesContext.getCurrentInstance().addPartialTarget(pgParent);

                           //}

                          /* updateTask();

                           approveTask();
                           closeAPWindow();*/
                       }
                   }

                   }else{
                          System.out.println(invoiceId+" :invNum: "+invNum+" certifier null");
                           String validationErrorMessage = "Certifier Name is Blank. Certifier Name is mandatory for a Non-PO Invoice.";
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);
                           this.validationErrorMessage.setValue(validationErrorMessage);


                       }
                   }
                  else
                  {
                      System.out.println(invoiceId+" :invNum: "+invNum+" Yes this is  po invoice");
                      System.out.println("Yes this may be  po invoice or reason may be reject");
                      if(validateAndDoSaveOperation(true))
                      {
                          System.out.println(invoiceId+" :invNum: "+invNum+" passed val n dosave1");

                          /*approveTask();
                          closeAPWindow();*/

                          /*Call  BPM EBS validation */
                         /* QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService = new QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService();
                          qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService = new QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService();
                          QFEQ_AP_INV_IMG_PROCESS_ptt qFEQ_AP_INV_IMG_PROCESS_ptt = qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService.getQFEQ_AP_INV_IMG_PROCESS_pttBindingQSPort();

                          ap.quantas.com.ebs_inv_process_new.sp.ObjectFactory objectFactory = new ap.quantas.com.ebs_inv_process_new.sp.ObjectFactory();
                          InputParameters input_params = objectFactory.createInputParameters();

                          input_params.setPCALLEDFROM(objectFactory.createInputParametersPCALLEDFROM("FROM WFR")); // as communicated from BPM's end
                          APPSINVOICEINTBLTYPE appsinvoiceintbltype = objectFactory.createAPPSINVOICEINTBLTYPE();

                          APPSINVOICEHEADERREC appsinvoiceheaderrec = objectFactory.createAPPSINVOICEHEADERREC();

                          //List<APPSINVOICELINEREC> invoicelines_list = new ArrayList<APPSINVOICELINEREC>();*/

                              //



                          String message = ebsValidationCAll();



                          System.out.println(invoiceId+" :invNum: "+invNum+" After ebsvalidationn call"+message);
                          String validationErrorMessage=null;
                          if(message==null || (message!=null && message.equals(""))){
                              validationErrorMessage = "Form details validated successfully.";
                            //  validate_cb.setDisabled(true);
                          }else{

                             validationErrorMessage = "Form details saved.However validation error exists.Please correct the details and revalidate";

                          }
                          //String validationErrorMessage = "Form details validated successfully1";
                          RichPopup.PopupHints hints = new RichPopup.PopupHints();
                          validationErrorPopup.show(hints);
                          this.validationErrorMessage.setValue(validationErrorMessage);

                          if(message==null || (message!=null && message.equals("")) ){
                              ebsErrorMessage.setVisible(false);
                              ebsErrorMessage.setRendered(false);
                            submit_cb.setDisabled(false);
                            //  validate_cb.setDisabled(true);
                          }
                          //submit_cb.setDisabled(false);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
                          if(message!=null ){
                              System.out.println(invoiceId+" :invNum: "+invNum+" Message ::::::::: "+message);
                          ebsErrorMessage.setValue(message);
                          ebsErrorMessage.setVisible(true);
                          ebsErrorMessage.setRendered(true);

                          }
                          AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
                          System.out.println(invoiceId+" :invNum: "+invNum+" Refreshing the parent and all header items");
                          AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
                          System.out.println(invoiceId+" :invNum: "+invNum+" Refreshing the parent and all header items");
                          AdfFacesContext.getCurrentInstance().addPartialTarget(taxTotIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(headerTotIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(docTypeSoc);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(invNumIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(supNameIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(suppNumIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(siteIdIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(siteNameIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(taxRegIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(currencyIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);

                          AdfFacesContext.getCurrentInstance().addPartialTarget(pgParent);

                      }
                  }

               }
            }

               catch(Exception e) {
                   e.printStackTrace();

               }
               System.out.println("End: onValiadteClick");


    }
   public void ebsValidationCAll_old() throws JAXBException {
       System.out.println("New ebsValidationCAll");

      QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService = new QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService();
              qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService = new QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService();
              QFEQ_AP_INV_IMG_PROCESS_ptt qFEQ_AP_INV_IMG_PROCESS_ptt = qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService.getQFEQ_AP_INV_IMG_PROCESS_pttBindingQSPort();

        ap.quantas.com.ebs_inv_process_new.sp.ObjectFactory objectFactory = new ap.quantas.com.ebs_inv_process_new.sp.ObjectFactory();
        InputParameters input_params = objectFactory.createInputParameters();

              //input_params.setPCALLEDFROM(objectFactory.createInputParametersPCALLEDFROM("WFR")); // as communicated from BPM's end


              APPSINVOICEHEADERREC appsinvoiceheaderrec = objectFactory.createAPPSINVOICEHEADERREC();
                                //appsinvoiceheaderrec.setALTERNATEAPPROVEREMPLOYEENO(objectFactory.createAPPSINVOICEHEADERRECALTERNATEAPPROVEREMPLOYEENO(""));

                                appsinvoiceheaderrec.setDOCUMENTTYPE(objectFactory.createAPPSINVOICEHEADERRECDOCUMENTTYPE(""));
                                appsinvoiceheaderrec.setINVOICETYPE(objectFactory.createAPPSINVOICEHEADERRECINVOICETYPE("" ));
                                appsinvoiceheaderrec.setORGID(objectFactory.createAPPSINVOICEHEADERRECORGID(null));
                                appsinvoiceheaderrec.setINVOICENUMBER(objectFactory.createAPPSINVOICEHEADERRECINVOICENUMBER( "123" ));
                                appsinvoiceheaderrec.setINVOICEDATE(null );



                                input_params.setPINVOICEIN(objectFactory.createInputParametersPINVOICEIN(appsinvoiceheaderrec));

        StringWriter writer = new StringWriter();
                                        JAXBContext context = JAXBContext.newInstance(APPSINVOICEHEADERREC.class);
                            Marshaller m = context.createMarshaller();
                            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
                            m.marshal(
                                input_params.getPINVOICEIN(),
                                writer
                            );


        System.out.println("PAyload :: "+writer.toString());



        ap.quantas.com.ebs_inv_process_new.sp.OutputParameters outputparams  = qFEQ_AP_INV_IMG_PROCESS_ptt.qfeqAPINVIMGPROCESS(input_params);;
        //System.out.println("Get supplier name from ebs package :: "+outputparams.getPINVOICEIN().getValue().getINVOICENUMBER().getValue());
        System.out.println("value :: "+outputparams.getOUTRESULT().getValue());
        System.out.println("value1 :: "+outputparams.getOUTRESULT().getValue().getOUTRESULTITEM().get(0).getERRORMESSAGE().getValue());



    }
    public String ebsValidationCAllQF(){

        System.out.println("Inside ebsValidationCAll QF");
        /*Call  BPM EBS validation */
        QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService = new QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService();
        qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService = new QFEQ_AP_INV_IMG_PROCESS_pttBindingQSService();
        QFEQ_AP_INV_IMG_PROCESS_ptt qFEQ_AP_INV_IMG_PROCESS_ptt = qFEQ_AP_INV_IMG_PROCESS_pttBindingQSService.getQFEQ_AP_INV_IMG_PROCESS_pttBindingQSPort();

       ap.quantas.com.ebs_inv_process_new.sp.ObjectFactory objectFactory = new ap.quantas.com.ebs_inv_process_new.sp.ObjectFactory();
        InputParameters input_params = objectFactory.createInputParameters();

        input_params.setPCALLEDFROM(objectFactory.createInputParametersPCALLEDFROM("WFR")); // as communicated from BPM's end




        //List<APPSINVOICELINEREC> invoicelines_list = new ArrayList<APPSINVOICELINEREC>();

            //



        RowSetIterator haederItr = null;

            String invoiceType=null;
           try{
               DCBindingContainer dcBindingContainer_1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
               DCIteratorBinding dcIteratorBinding_1 = dcBindingContainer_1.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator");
               ViewObjectImpl headerVO = (ViewObjectImpl)dcIteratorBinding_1.getViewObject();

               ArrayList<HashMap<String, Object>> headerItem = new ArrayList<HashMap<String,Object>>();
               System.out.println("------------headerItem vo Count: "+headerVO.getEstimatedRowCount());


               haederItr = headerVO.createRowSetIterator(null);
               while(haederItr.hasNext()) {
                   Row row = haederItr.next();
                   APPSINVOICEHEADERREC appsinvoiceheaderrec = objectFactory.createAPPSINVOICEHEADERREC();
                   //appsinvoiceheaderrec.setALTERNATEAPPROVEREMPLOYEENO(objectFactory.createAPPSINVOICEHEADERRECALTERNATEAPPROVEREMPLOYEENO(""));
                   invoiceType=row.getAttribute("InvoiceType")!=null ? row.getAttribute("InvoiceType").toString():null;
                   appsinvoiceheaderrec.setDOCUMENTTYPE(objectFactory.createAPPSINVOICEHEADERRECDOCUMENTTYPE(row.getAttribute("DocumentType")!=null ? row.getAttribute("DocumentType").toString() : null));
                   appsinvoiceheaderrec.setINVOICETYPE(objectFactory.createAPPSINVOICEHEADERRECINVOICETYPE(row.getAttribute("InvoiceType")!=null ? row.getAttribute("InvoiceType").toString() : null ));
                   appsinvoiceheaderrec.setORGID(objectFactory.createAPPSINVOICEHEADERRECORGID(row.getAttribute("OrgId")!=null ? new BigDecimal(row.getAttribute("OrgId").toString()) : null ));
                   appsinvoiceheaderrec.setINVOICENUMBER(objectFactory.createAPPSINVOICEHEADERRECINVOICENUMBER(row.getAttribute("InvoiceNumber")!=null ? row.getAttribute("InvoiceNumber").toString(): null ));
                   appsinvoiceheaderrec.setINVOICEDATE(objectFactory.createAPPSINVOICEHEADERRECINVOICEDATE(invDateId.getValue()!=null ?convertStrintToCalender( invDateId.getValue().toString()): null ) );


                   appsinvoiceheaderrec.setSUPPLIERNAME(objectFactory.createAPPSINVOICEHEADERRECSUPPLIERNAME(row.getAttribute("SupplierName")!=null ? row.getAttribute("SupplierName").toString(): null) );
                   appsinvoiceheaderrec.setSUPPLIERID(objectFactory.createAPPSINVOICEHEADERRECSUPPLIERID( ADFContext.getCurrent().getPageFlowScope().get("supplier_id_value")!=null ?new BigDecimal(ADFContext.getCurrent().getPageFlowScope().get("supplier_id_value").toString()) : null) );
                   appsinvoiceheaderrec.setSUPPLIERNUMBER(objectFactory.createAPPSINVOICEHEADERRECSUPPLIERNUMBER(row.getAttribute("SupplierNumber")!=null ? row.getAttribute("SupplierNumber").toString(): null ));
                   appsinvoiceheaderrec.setSITEID(objectFactory.createAPPSINVOICEHEADERRECSITEID(row.getAttribute("SiteId")!=null ? new BigDecimal(row.getAttribute("SiteId").toString()): null));
                   appsinvoiceheaderrec.setSITENAME(objectFactory.createAPPSINVOICEHEADERRECSITENAME(row.getAttribute("SiteName")!=null ? row.getAttribute("SiteName").toString(): null ));

                   appsinvoiceheaderrec.setPONUMBER(objectFactory.createAPPSINVOICEHEADERRECPONUMBER(row.getAttribute("PoNumber")!=null ? row.getAttribute("PoNumber").toString(): null));
                   appsinvoiceheaderrec.setTAXREGISTRATIONNUMBER(objectFactory.createAPPSINVOICEHEADERRECTAXREGISTRATIONNUMBER(row.getAttribute("TaxRegNumber")!=null ? row.getAttribute("TaxRegNumber").toString(): null   ));
                   appsinvoiceheaderrec.setHEADERTAXTOTAL(objectFactory.createAPPSINVOICEHEADERRECHEADERTAXTOTAL(row.getAttribute("TaxAmount")!=null ? new BigDecimal(row.getAttribute("TaxAmount").toString()): null ));
                   //appsinvoiceheaderrec.setWITHOLDINGTAX(objectFactory.createAPPSINVOICEHEADERRECWITHOLDINGTAX(row.getAttribute("WithholdingTax")!=null ? new BigDecimal(row.getAttribute("WithholdingTax").toString()) : null));
                   appsinvoiceheaderrec.setINVOICETOTALAMOUNT(objectFactory.createAPPSINVOICEHEADERRECINVOICETOTALAMOUNT(row.getAttribute("InvoiceTotAmount")!=null ? new BigDecimal(row.getAttribute("InvoiceTotAmount").toString()) : null ));
                   appsinvoiceheaderrec.setCURRENCYCODE(objectFactory.createAPPSINVOICEHEADERRECCURRENCYCODE(row.getAttribute("CurrencyCode")!=null ? row.getAttribute("CurrencyCode").toString() : null));
                   appsinvoiceheaderrec.setCERTIFIERNAME(objectFactory.createAPPSINVOICEHEADERRECCERTIFIERNAME(row.getAttribute("CertifierName")!=null ? row.getAttribute("CertifierName").toString() : null));
                   appsinvoiceheaderrec.setCERTIFIEREMPLOYEENO(objectFactory.createAPPSINVOICEHEADERRECCERTIFIEREMPLOYEENO(employeeNoIt.getValue()!=null ?employeeNoIt.getValue().toString() : null));
                   appsinvoiceheaderrec.setCERTIFIEREMAILADD(objectFactory.createAPPSINVOICEHEADERRECCERTIFIEREMAILADD(row.getAttribute("CertifierEmailAdd")!=null ? row.getAttribute("CertifierEmailAdd").toString() : null ));
                   appsinvoiceheaderrec.setINVALIDREASON(objectFactory.createAPPSINVOICEHEADERRECINVALIDREASON(row.getAttribute("InvalidReason")!=null ? row.getAttribute("InvalidReason").toString() : null ));
                   appsinvoiceheaderrec.setINVALIDCODE(objectFactory.createAPPSINVOICEHEADERRECINVALIDCODE(row.getAttribute("InvalidCode")!=null ? row.getAttribute("InvalidCode").toString() : null ));
                   appsinvoiceheaderrec.setPOTYPE(objectFactory.createAPPSINVOICEHEADERRECPOTYPE(row.getAttribute("PoType")!=null ? row.getAttribute("PoType").toString() : null )) ;
                   //appsinvoiceheaderrec.setALTERNATEAPPROVEREMPLOYEENO(objectFactory.createAPPSINVOICEHEADERRECALTERNATEAPPROVEREMPLOYEENO());
                   //appsinvoiceheaderrec.setCERTIFIERCOMMENTS(objectFactory.createAPPSINVOICEHEADERRECCERTIFIERCOMMENTS());
                   appsinvoiceheaderrec.setINVOICEIMAGEURL(objectFactory.createAPPSINVOICEHEADERRECINVOICEIMAGEURL(row.getAttribute("ImageUrl")!=null ? row.getAttribute("ImageUrl").toString() : null  ));
                   appsinvoiceheaderrec.setHEADERATT4(objectFactory.createAPPSINVOICEHEADERRECHEADERATT4(row.getAttribute("Attr4")!=null ? row.getAttribute("Attr4").toString() : null ));
                   appsinvoiceheaderrec.setHEADERATT5(objectFactory.createAPPSINVOICEHEADERRECHEADERATT5(row.getAttribute("Attr5")!=null ? row.getAttribute("Attr5").toString() : null ));
                   appsinvoiceheaderrec.setHEADERATT6(objectFactory.createAPPSINVOICEHEADERRECHEADERATT6(row.getAttribute("Attr6")!=null ? row.getAttribute("Attr6").toString() : null ));
                   appsinvoiceheaderrec.setHEADERATT7(objectFactory.createAPPSINVOICEHEADERRECHEADERATT7(row.getAttribute("Attr7")!=null ? row.getAttribute("Attr7").toString() : null  ));
                   appsinvoiceheaderrec.setHEADERATT8(objectFactory.createAPPSINVOICEHEADERRECHEADERATT8(row.getAttribute("Attr8")!=null ? row.getAttribute("Attr8").toString() : null ));
                   appsinvoiceheaderrec.setHEADERATT9(objectFactory.createAPPSINVOICEHEADERRECHEADERATT9(row.getAttribute("Attr9")!=null ? row.getAttribute("Attr9").toString() : null ));
                   appsinvoiceheaderrec.setHEADERATT10(objectFactory.createAPPSINVOICEHEADERRECHEADERATT10(row.getAttribute("Attr10")!=null ? row.getAttribute("Attr10").toString() : null  ));
                   appsinvoiceheaderrec.setIMAGEURL(objectFactory.createAPPSINVOICEHEADERRECIMAGEURL(row.getAttribute("ImageUrl")!=null ? row.getAttribute("ImageUrl").toString() : null ));
                   appsinvoiceheaderrec.setPRIORITY(objectFactory.createAPPSINVOICEHEADERRECPRIORITY(row.getAttribute("Priority")!=null ? row.getAttribute("Priority").toString() : null ));
                   appsinvoiceheaderrec.setREASONTYPE(objectFactory.createAPPSINVOICEHEADERRECREASONTYPE("NONE"));
                   appsinvoiceheaderrec.setSTATUS(objectFactory.createAPPSINVOICEHEADERRECSTATUS(row.getAttribute("Status")!=null ? row.getAttribute("Status").toString() : null  )) ;
                   //appsinvoiceheaderrec.setREJECTIONREASON(objectFactory.createAPPSINVOICEHEADERRECREJECTIONREASON());
                   //appsinvoiceheaderrec.setPAYGROUP(objectFactory.createAPPSINVOICEHEADERRECPAYGROUP());
                   //appsinvoiceheaderrec.setPAYMENTMETHOD(objectFactory.createAPPSINVOICEHEADERRECPAYMENTMETHOD());
                   //appsinvoiceheaderrec.setCHECKNUMBER(objectFactory.createAPPSINVOICEHEADERRECCHECKNUMBER());
                   appsinvoiceheaderrec.setINVALIDREASON(objectFactory.createAPPSINVOICEHEADERRECINVALIDREASON("NONE"));
                   input_params.setPINVOICEIN(objectFactory.createInputParametersPINVOICEIN(appsinvoiceheaderrec));

               }


              }catch(Exception e){
                    e.printStackTrace();
                }
                finally{
                        if(haederItr!=null) {
                            try {
                                //lineItemItr.closeRowSetIterator();
                            } catch(Exception ex) {
                                ex.printStackTrace();
                        }
                        }
                            if(haederItr!=null) {
                                try {
                                    //rs.closeRowSetIterator();
                                } catch(Exception ex) {
                                    ex.printStackTrace();
                            }
                            }
                        }






        APPSINVOICEINTBLTYPE appsinvoiceintbltype = objectFactory.createAPPSINVOICEINTBLTYPE();
         RowSetIterator lineItemItr = null;
            RowSetIterator rs = null;

            try{
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                    ViewObjectImpl lineVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();

                    ArrayList<HashMap<String, Object>> lineItems = new ArrayList<HashMap<String,Object>>();
                    System.out.println("------------lineVO Count: "+lineVO.getEstimatedRowCount());


                    lineItemItr = lineVO.createRowSetIterator(null);
                    while(lineItemItr.hasNext()) {
                    Row row = lineItemItr.next();
                    //row.getAttribute("LineNumber")
               APPSINVOICELINEREC appsinvoicelinerec = objectFactory.createAPPSINVOICELINEREC();
               appsinvoicelinerec.setLINENO( objectFactory.createAPPSINVOICELINERECLINENO(row.getAttribute("LineNumber")!=null?row.getAttribute("LineNumber").toString():null));
               appsinvoicelinerec.setTAXRATECODE(objectFactory.createAPPSINVOICELINERECTAXRATECODE(row.getAttribute("TaxRateCode")!=null ? row.getAttribute("TaxRateCode").toString() : null));
               appsinvoicelinerec.setLINEPONUMBER(objectFactory.createAPPSINVOICELINERECLINEPONUMBER(row.getAttribute("LinePoNum")!=null ? row.getAttribute("LinePoNum").toString() : null));
                    //objectFactory.createAPPSINVOICELINERECSUSPENSEACCOUNTFLAG(row.getAttribute("LineNumber")!=null ? row.getAttribute("LineNumber").toString() : null);
                    System.out.println("------------LineNumber------------------");
                    System.out.println(row.getAttribute("LineNumber")!=null ? row.getAttribute("LineNumber").toString() : " ");
                        System.out.println("------------ PO LiN Number------------------");
                        System.out.println(invoiceType);
                        System.out.println(row.getAttribute("PoLineNum")!=null ? "Found" : " Not Found ");
                        //System.out.println(row.getAttribute("PoLineNum")!=null);
                       // System.out.println(row.getAttribute("PoLineNum")!=null ? row.getAttribute("PoLineNum").toString() : " Not Found ");
                        if("Non PO Invoice".equalsIgnoreCase(invoiceType)){
                            appsinvoicelinerec.setPOLINENUMBER(objectFactory.createAPPSINVOICELINERECPOLINENUMBER(row.getAttribute("PoLineNum")!=null ? new BigDecimal(row.getAttribute("LineNumber").toString()) : null));
                        }else{
                            appsinvoicelinerec.setPOLINENUMBER(objectFactory.createAPPSINVOICELINERECPOLINENUMBER(row.getAttribute("PoLineNum")!=null ? new BigDecimal(row.getAttribute("PoLineNum").toString()) : null));
                        }
               // appsinvoicelinerec.setPOLINENUMBER(objectFactory.createAPPSINVOICELINERECPOLINENUMBER(row.getAttribute("PoLineNum")!=null ? new BigDecimal(row.getAttribute("LineNumber").toString()) : null));

                appsinvoicelinerec.setLINEAATT9( objectFactory.createAPPSINVOICELINERECLINEAATT9(row.getAttribute("Attr9")!=null ? row.getAttribute("Attr9").toString() : null));
                appsinvoicelinerec.setLINEAATT8(objectFactory.createAPPSINVOICELINERECLINEAATT8(row.getAttribute("Attr8")!=null ? row.getAttribute("Attr8").toString() : null));
                appsinvoicelinerec.setQUANTITY(objectFactory.createAPPSINVOICELINERECQUANTITY(row.getAttribute("Quantity")!=null ? new BigDecimal(row.getAttribute("Quantity").toString()) : null));
                appsinvoicelinerec.setPROJECTNO(objectFactory.createAPPSINVOICELINERECPROJECTNO(row.getAttribute("ProjectNo")!=null ? row.getAttribute("ProjectNo").toString() : null));
                appsinvoicelinerec.setLINEAATT7(objectFactory.createAPPSINVOICELINERECLINEAATT7(row.getAttribute("Attr7")!=null ? row.getAttribute("Attr7").toString() : null));
                appsinvoicelinerec.setLINEAATT6(objectFactory.createAPPSINVOICELINERECLINEAATT6(row.getAttribute("Attr6")!=null ? row.getAttribute("Attr6").toString() : null));
                appsinvoicelinerec.setLINEAATT5( objectFactory.createAPPSINVOICELINERECLINEAATT5(row.getAttribute("Attr5")!=null ? row.getAttribute("Attr5").toString() : null));
                appsinvoicelinerec.setLINETAXAMOUNT(objectFactory.createAPPSINVOICELINERECLINETAXAMOUNT(row.getAttribute("TaxAmountLineitem")!=null ? new BigDecimal(row.getAttribute("TaxAmountLineitem").toString() ): null));
                appsinvoicelinerec.setLINEAATT4(objectFactory.createAPPSINVOICELINERECLINEAATT4(row.getAttribute("Attr4")!=null ? row.getAttribute("Attr4").toString() : null));
                ///appsinvoicelinerec.setLINEAATT1(objectFactory.createAPPSINVOICELINERECLINEAATT1(row.getAttribute("Attr1")!=null ? row.getAttribute("Attr1").toString() : null));
                 //923018--TAX Rate setting Null for muliple taxrate validation issue - Start
                //appsinvoicelinerec.setTAXRATE(objectFactory.createAPPSINVOICELINERECTAXRATE(row.getAttribute("TaxRate")!=null ? new BigDecimal(row.getAttribute("TaxRate").toString() ): null));
                appsinvoicelinerec.setTAXRATE(objectFactory.createAPPSINVOICELINERECTAXRATE(null));
                //923018--TAX Rate setting Null for muliple taxrate validation issue - End
                appsinvoicelinerec.setLINEAATT2(objectFactory.createAPPSINVOICELINERECLINEAATT2(row.getAttribute("Attr2")!=null ? row.getAttribute("Attr2").toString() : null));
                appsinvoicelinerec.setLINEAATT3( objectFactory.createAPPSINVOICELINERECLINEAATT3(row.getAttribute("Attr3")!=null ? row.getAttribute("Attr3").toString() : null));
                appsinvoicelinerec.setTASKNO(objectFactory.createAPPSINVOICELINERECTASKNO(row.getAttribute("TaskNo")!=null ? row.getAttribute("TaskNo").toString() : null));
                appsinvoicelinerec.setLINEDESCRIPTION(objectFactory.createAPPSINVOICELINERECLINEDESCRIPTION(row.getAttribute("LineDescription")!=null ? row.getAttribute("LineDescription").toString() : null));
                appsinvoicelinerec.setGLCODE(objectFactory.createAPPSINVOICELINERECGLCODE(row.getAttribute("GlNo")!=null ? row.getAttribute("GlNo").toString() : null));
                appsinvoicelinerec.setLINETYPE(objectFactory.createAPPSINVOICELINERECLINETYPE(row.getAttribute("LineType")!=null ? row.getAttribute("LineNumber").toString() : null));
               objectFactory.createAPPSINVOICELINERECEXPENDITURETYPE(row.getAttribute("LineNumber")!=null ? row.getAttribute("LineNumber").toString() : null);

                  try{

                 appsinvoicelinerec.setEXPENDITUREDATE(objectFactory.createAPPSINVOICELINERECEXPENDITUREDATE(row.getAttribute("ExpenditureDate")!=null ? convertStrintToCalender(row.getAttribute("ExpenditureDate").toString()) : null));
                 appsinvoicelinerec.setEXPENDITUREORG(objectFactory.createAPPSINVOICELINERECEXPENDITUREORG(row.getAttribute("ExpinditureOrg")!=null ? row.getAttribute("ExpinditureOrg").toString() : null));
                 appsinvoicelinerec.setLINEAATT10(  objectFactory.createAPPSINVOICELINERECLINEAATT10(row.getAttribute("Attr10")!=null ? row.getAttribute("Attr10").toString() : null));
                 appsinvoicelinerec.setLINETOTALAMOUNT(objectFactory.createAPPSINVOICELINERECLINETOTALAMOUNT(row.getAttribute("LineTotalAmount")!=null ? new BigDecimal(row.getAttribute("LineTotalAmount").toString() ): null));
                 appsinvoicelinerec.setUNITPRICE(objectFactory.createAPPSINVOICELINERECUNITPRICE(row.getAttribute("UnitPrice")!=null ?  new BigDecimal(row.getAttribute("UnitPrice").toString()) : null));
                 appsinvoicelinerec.setUOM(objectFactory.createAPPSINVOICELINERECUOM(row.getAttribute("Uom")!=null ? row.getAttribute("Uom").toString() : null));
                        }catch(Exception e){


                        }


                        appsinvoiceintbltype.getPINVLINEITEM().add(appsinvoicelinerec);
                    }


                input_params.setPINVLINE(objectFactory.createInputParametersPINVLINE(appsinvoiceintbltype));


                //Create header i/p param :  Header fields



            }catch(Exception e){
        e.printStackTrace();
        }
        finally{
            if(lineItemItr!=null) {
                try {
                    //lineItemItr.closeRowSetIterator();
                } catch(Exception ex) {
                    ex.printStackTrace();
            }
            }
                if(rs!=null) {
                    try {
                        //rs.closeRowSetIterator();
                    } catch(Exception ex) {
                        ex.printStackTrace();
                }
                }
            }

        /*Call  BPM EBS validation */
        APPSINVOICEINTBLTYPE APPSINVOICEINTBLTYPE =input_params.getPINVLINE().getValue();
             List<APPSINVOICELINEREC> eITEM = APPSINVOICEINTBLTYPE.getPINVLINEITEM();
             for(APPSINVOICELINEREC rec : eITEM){

                 System.out.println("rec.getLINENO().getValue() "+rec.getLINENO().getValue());
                 System.out.println("rec.getTAXRATECODE().getValue() "+rec.getTAXRATECODE().getValue());

             }
        System.out.println("eITEM "+eITEM.size());

             System.out.println("Calling ebs validation package"+input_params.getPINVOICEIN().getValue().getORGID().getValue());
        ap.quantas.com.ebs_inv_process_new.sp.OutputParameters outputparams = qFEQ_AP_INV_IMG_PROCESS_ptt.qfeqAPINVIMGPROCESS(input_params);;

        System.out.println("VAlueeeeeee11111 :: "+outputparams.getOUTRESULT().getValue());

        JAXBElement<APPSOUTRESULTTBLTYPE>  APPSOUTRESULTTBLTYPE= outputparams.getOUTRESULT();


        System.out.println("Result APPSOUTRESULTTBLTYPE :: "+APPSOUTRESULTTBLTYPE );
        //System.out.println("Result APPSOUTRESULTTBLTYPE :: "+APPSOUTRESULTTBLTYPE.getValue() );
        System.out.println("Get supplier name from ebs package :: "+outputparams.getPINVOICEIN().getValue().getORGID().getValue());
        System.out.println("beforeeeeeeee" );
        System.out.println("line list size :: "+outputparams.getPINVLINE().getValue().getPINVLINEITEM().size());
        //System.out.println("Get line no from ebs package :: "+outputparams.getPINVLINE().getValue().getPINVLINEITEM().get(0).getLINENO().getValue());

        String error_message = null;
        String exception_reason = null;
        String exception_type = null;
        if(outputparams.getOUTRESULT()!=null && outputparams.getOUTRESULT().getValue()!=null ){
        List<APPSOUTRESULTREC> approverListheaderObj_list = outputparams.getOUTRESULT().getValue().getOUTRESULTITEM();

        System.out.println("Result APPSOUTRESULTTBLTYPE :: "+approverListheaderObj_list );
            System.out.println("Result APPSOUTRESULTTBLTYPE :: "+approverListheaderObj_list.size() );


        System.out.println("Before looping over ebs validation o/p newwwww ");

            for(APPSOUTRESULTREC out_obj  : approverListheaderObj_list){
                if (out_obj!=null){
                error_message = out_obj.getERRORMESSAGE()!=null ? out_obj.getERRORMESSAGE().getValue(): null;
                exception_reason = out_obj.getEXCEPTIONREASON()!=null ? out_obj.getEXCEPTIONREASON().getValue() : null;
                exception_type = out_obj.getEXCEPTIONTYPE()!=null ? out_obj.getEXCEPTIONTYPE().getValue(): null;
                if((exception_reason!=null && exception_reason.equals("SUCCESS")) && (exception_type!=null && exception_type.equals("SUCCESS"))){
                    return null;
                }

                if((error_message==null ||(error_message!=null && error_message.equals("")))
                         &&(exception_reason!=null && exception_reason.equals("VALIDATED")) && (exception_type!=null && exception_type.equals("VALIDATED"))
                           )
                {

                   error_message= "Invoice line tax amount is not matching with the line tax rate, please correct";
                }

                System.out.println("Exceptions1 ::::::::"+error_message+"======="+exception_reason+"================"+exception_type);
                }


        }


           /* ebsErrorMessage.setValue(exception_reason +" : "+exception_type +"("+error_message+")");
            ebsErrorMessage.setVisible(true);
            ebsErrorMessage.setRendered(true);
            AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
            System.out.println("REfreshinggggggggggggg1");*/

        }

        StringWriter writer = new StringWriter();
                                        JAXBContext context=null;
        try {
            context = JAXBContext.newInstance(APPSINVOICEHEADERREC.class);
        } catch (JAXBException e) {
        }
        Marshaller m=null;
        try {
            m = context.createMarshaller();
        } catch (JAXBException e) {
        }
        try {
            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        } catch (PropertyException e) {
        }

        try {


            m.marshal(objectFactory.createInputParametersPINVLINE(APPSINVOICEINTBLTYPE) ,writer);
            //m.marshal(outputparams.getPINVOICEIN() ,writer);
        } catch (JAXBException e) {
        }

        System.out.println("=======================Payload outputparams.getOUTRESULT()===============================");
        System.out.println(writer.toString());
        System.out.println("=======================Payload===============================");
        System.out.println("Refreshing all header fields ");
        //outputparams.getPINVOICEIN().getValue()
        /*docTypeSoc
        supNameIt
        invoiceTypeSoc
            DocumentType
        supNameIt
        InvoiceType
        OrgId
        InvoiceNumber
        invDateId
        SupplierName
        supplier_id_value
        SupplierNumber
        SiteId
        SiteName
        PoNumber
        TaxRegNumber
        InvoiceTotAmount
        InvoiceTotAmount
        CurrencyCode
        CertifierName
        CertifierEmailAdd
        InvalidReason
        PoType*/

        if(outputparams.getPINVOICEIN().getValue()!=null){
            if(outputparams.getPINVOICEIN().getValue().getHEADERTAXTOTAL()!=null )
                taxTotIt.setValue(outputparams.getPINVOICEIN().getValue().getHEADERTAXTOTAL().getValue());
            if(outputparams.getPINVOICEIN().getValue().getINVOICETOTALAMOUNT()!=null)
                headerTotIt.setValue(outputparams.getPINVOICEIN().getValue().getINVOICETOTALAMOUNT().getValue());
            //if(outputparams.getPINVOICEIN().getValue().getCERTIFIERCOMMENTS()!=null)

            if(outputparams.getPINVOICEIN().getValue().getDOCUMENTTYPE()!=null)
                docTypeSoc.setValue(outputparams.getPINVOICEIN().getValue().getDOCUMENTTYPE().getValue().toString().equalsIgnoreCase("INVOICE")? "Invoice" : "Credit Note");
            if(outputparams.getPINVOICEIN().getValue().getINVOICETYPE()!=null)
                invoiceTypeSoc.setValue(outputparams.getPINVOICEIN().getValue().getINVOICETYPE().getValue());

            if(outputparams.getPINVOICEIN().getValue().getINVOICENUMBER()!=null)
                invNumIt.setValue(outputparams.getPINVOICEIN().getValue().getINVOICENUMBER().getValue().toString());
            /*if(outputparams.getPINVOICEIN().getValue().getINVOICEDATE()!=null)
                invDateId.setValue(outputparams.getPINVOICEIN().getValue().getINVOICEDATE().getValue().);*/
            //if(outputparams.getPINVOICEIN().getValue().getSUPPLIERID()!=null)

            if(outputparams.getPINVOICEIN().getValue().getSUPPLIERNAME()!=null)
                supNameIt.setValue(outputparams.getPINVOICEIN().getValue().getSUPPLIERNAME().getValue());

            if(outputparams.getPINVOICEIN().getValue().getSUPPLIERNUMBER()!=null)
                suppNumIt.setValue(outputparams.getPINVOICEIN().getValue().getSUPPLIERNUMBER().getValue());
            if(outputparams.getPINVOICEIN().getValue().getSITEID()!=null)
                siteIdIt.setValue(outputparams.getPINVOICEIN().getValue().getSITEID().getValue());

            if(outputparams.getPINVOICEIN().getValue().getSITENAME()!=null)
                siteNameIt.setValue(outputparams.getPINVOICEIN().getValue().getSITENAME().getValue());
            if(outputparams.getPINVOICEIN().getValue().getPONUMBER()!=null)
                poNumIt.setValue(outputparams.getPINVOICEIN().getValue().getPONUMBER().getValue());
            if(outputparams.getPINVOICEIN().getValue().getTAXREGISTRATIONNUMBER()!=null)
                taxRegIt.setValue(outputparams.getPINVOICEIN().getValue().getTAXREGISTRATIONNUMBER().getValue());

            if(outputparams.getPINVOICEIN().getValue().getCURRENCYCODE()!=null)
                currencyIt.setValue(outputparams.getPINVOICEIN().getValue().getCURRENCYCODE().getValue());
            if(outputparams.getPINVOICEIN().getValue().getCERTIFIERNAME()!=null)
                certNameIt.setValue(outputparams.getPINVOICEIN().getValue().getCERTIFIERNAME().getValue());
            if(outputparams.getPINVOICEIN().getValue().getCERTIFIEREMPLOYEENO()!=null)
                employeeNoIt.setValue(outputparams.getPINVOICEIN().getValue().getCERTIFIEREMPLOYEENO().getValue());
            if(outputparams.getPINVOICEIN().getValue().getCERTIFIEREMAILADD()!=null)
                certEmailIt.setValue(outputparams.getPINVOICEIN().getValue().getCERTIFIEREMAILADD().getValue());
            //if(outputparams.getPINVOICEIN().getValue().getPOTYPE()!=null)

            //if(outputparams.getPINVOICEIN().getValue().getALTERNATEAPPROVEREMPLOYEENO()!=null)






        }

        //AdfFacesContext.getCurrentInstance().addPartialTarget(supNameIt);
        System.out.println("Returning========="+exception_reason +" : "+exception_type +"("+error_message+")");
        //return exception_reason +" : "+exception_type +"("+error_message+")";
        return error_message;
    }

    public String ebsValidationCAllJS() {
            System.out.println("Inside ebsValidationCAllJS");
            JSEQINVIMGPROCESSPttBindingQSService jSEQINVIMGPROCESSPttBindingQSService =
                new JSEQINVIMGPROCESSPttBindingQSService();
            JSEQINVIMGPROCESSPtt jSEQINVIMGPROCESSPtt =
                jSEQINVIMGPROCESSPttBindingQSService.getJSEQINVIMGPROCESSPttBindingQSPort();

            ap.quantas.com.ebs_inv_process_new.js.ObjectFactory objectFactory =
                new ap.quantas.com.ebs_inv_process_new.js.ObjectFactory();
            ap.quantas.com.ebs_inv_process_new.js.InputParameters input_params = objectFactory.createInputParameters();
            input_params.setPCALLEDFROM(objectFactory.createInputParametersPCALLEDFROM("WFR")); // as communicated from BPM's end
            RowSetIterator haederItr = null;
            String invoiceType = null;
            try {
                DCBindingContainer dcBindingContainer_1 =
                    (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding_1 =
                    dcBindingContainer_1.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator");
                ViewObjectImpl headerVO = (ViewObjectImpl) dcIteratorBinding_1.getViewObject();

                ArrayList<HashMap<String, Object>> headerItem = new ArrayList<HashMap<String, Object>>();
                System.out.println("------------headerItem vo Count: " + headerVO.getEstimatedRowCount());


                haederItr = headerVO.createRowSetIterator(null);
                while (haederItr.hasNext()) {
                    Row row = haederItr.next();
                    APPSJSEQINVOICEHEADERREC appsjseqinvoiceheaderrec = objectFactory.createAPPSJSEQINVOICEHEADERREC();
                    //appsinvoiceheaderrec.setALTERNATEAPPROVEREMPLOYEENO(objectFactory.createAPPSINVOICEHEADERRECALTERNATEAPPROVEREMPLOYEENO(""));
                    invoiceType =
                        row.getAttribute("InvoiceType") != null ? row.getAttribute("InvoiceType").toString() : null;
                    appsjseqinvoiceheaderrec.setDOCUMENTTYPE(objectFactory.createAPPSJSEQINVOICEHEADERRECDOCUMENTTYPE(row.getAttribute("DocumentType") !=
                                                                                                                      null ?
                                                                                                                      row.getAttribute("DocumentType")
                                                                                                                      .toString() :
                                                                                                                      null));
                    appsjseqinvoiceheaderrec.setINVOICETYPE(objectFactory.createAPPSJSEQINVOICEHEADERRECINVOICETYPE(row.getAttribute("InvoiceType") !=
                                                                                                                    null ?
                                                                                                                    row.getAttribute("InvoiceType")
                                                                                                                    .toString() :
                                                                                                                    null));
                    appsjseqinvoiceheaderrec.setORGID(objectFactory.createAPPSJSEQINVOICEHEADERRECORGID(row.getAttribute("OrgId") !=
                                                                                                        null ?
                                                                                                        new BigDecimal(row.getAttribute("OrgId")
                                                                                                                       .toString()) :
                                                                                                        null));
                    appsjseqinvoiceheaderrec.setINVOICENUMBER(objectFactory.createAPPSJSEQINVOICEHEADERRECINVOICENUMBER(row.getAttribute("InvoiceNumber") !=
                                                                                                                        null ?
                                                                                                                        row.getAttribute("InvoiceNumber")
                                                                                                                        .toString() :
                                                                                                                        null));
                    appsjseqinvoiceheaderrec.setINVOICEDATE(objectFactory.createAPPSJSEQINVOICEHEADERRECINVOICEDATE(invDateId.getValue() !=
                                                                                                                    null ?
                                                                                                                    convertStrintToCalender(invDateId.getValue()
                                                                                                                                            .toString()) :
                                                                                                                    null));


                    appsjseqinvoiceheaderrec.setSUPPLIERNAME(objectFactory.createAPPSJSEQINVOICEHEADERRECSUPPLIERNAME(row.getAttribute("SupplierName") !=
                                                                                                                      null ?
                                                                                                                      row.getAttribute("SupplierName")
                                                                                                                      .toString() :
                                                                                                                      null));
                    appsjseqinvoiceheaderrec.setSUPPLIERID(objectFactory.createAPPSJSEQINVOICEHEADERRECSUPPLIERID(ADFContext.getCurrent()
                                                                                                                            .getPageFlowScope()
                                                                                                                            .get("supplier_id_value") !=
                                                                                                                  null ?
                                                                                                                  new BigDecimal(ADFContext.getCurrent()
                                                                                                                                                  .getPageFlowScope()
                                                                                                                                                  .get("supplier_id_value")
                                                                                                                                                  .toString()) :
                                                                                           null));
                    appsjseqinvoiceheaderrec.setSUPPLIERNUMBER(objectFactory.createAPPSJSEQINVOICEHEADERRECSUPPLIERNUMBER(row.getAttribute("SupplierNumber") !=
                                                                                                                          null ?
                                                                                                                          row.getAttribute("SupplierNumber")
                                                                                                                          .toString() :
                                                                                                                          null));
                    appsjseqinvoiceheaderrec.setSITEID(objectFactory.createAPPSJSEQINVOICEHEADERRECSITEID(row.getAttribute("SiteId") !=
                                                                                                          null ?
                                                                                                          new BigDecimal(row.getAttribute("SiteId")
                                                                                                                         .toString()) :
                                                                                                          null));
                    appsjseqinvoiceheaderrec.setSITENAME(objectFactory.createAPPSJSEQINVOICEHEADERRECSITENAME(row.getAttribute("SiteName") !=
                                                                                                              null ?
                                                                                                              row.getAttribute("SiteName")
                                                                                                              .toString() :
                                                                                                              null));

                    appsjseqinvoiceheaderrec.setPONUMBER(objectFactory.createAPPSJSEQINVOICEHEADERRECPONUMBER(row.getAttribute("PoNumber") !=
                                                                                                              null ?
                                                                                                              row.getAttribute("PoNumber")
                                                                                                              .toString() :
                                                                                                              null));
                    appsjseqinvoiceheaderrec.setTAXREGISTRATIONNUMBER(objectFactory.createAPPSJSEQINVOICEHEADERRECTAXREGISTRATIONNUMBER(row.getAttribute("TaxRegNumber") !=
                                                                                                                                        null ?
                                                                                                                                        row.getAttribute("TaxRegNumber")
                                                                                                                                        .toString() :
                                                                                                                                        null));
                    appsjseqinvoiceheaderrec.setHEADERTAXTOTAL(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERTAXTOTAL(row.getAttribute("TaxAmount") !=
                                                                                                                          null ?
                                                                                                                          new BigDecimal(row.getAttribute("TaxAmount")
                                                                                                                                         .toString()) :
                                                                                                                          null));
                    //appsinvoiceheaderrec.setWITHOLDINGTAX(objectFactory.createAPPSINVOICEHEADERRECWITHOLDINGTAX(row.getAttribute("WithholdingTax")!=null ? new BigDecimal(row.getAttribute("WithholdingTax").toString()) : null));
                    appsjseqinvoiceheaderrec.setINVOICETOTALAMOUNT(objectFactory.createAPPSJSEQINVOICEHEADERRECINVOICETOTALAMOUNT(row.getAttribute("InvoiceTotAmount") !=
                                                                                                                                  null ?
                                                                                                                                  new BigDecimal(row.getAttribute("InvoiceTotAmount")
                                                                                                                                                 .toString()) :
                                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setCURRENCYCODE(objectFactory.createAPPSJSEQINVOICEHEADERRECCURRENCYCODE(row.getAttribute("CurrencyCode") !=
                                                                                                                      null ?
                                                                                                                      row.getAttribute("CurrencyCode")
                                                                                                                      .toString() :
                                                                                                                      null));
                    appsjseqinvoiceheaderrec.setCERTIFIERNAME(objectFactory.createAPPSJSEQINVOICEHEADERRECCERTIFIERNAME(row.getAttribute("CertifierName") !=
                                                                                                                        null ?
                                                                                                                        row.getAttribute("CertifierName")
                                                                                                                        .toString() :
                                                                                                                        null));
                    appsjseqinvoiceheaderrec.setCERTIFIEREMPLOYEENO(objectFactory.createAPPSJSEQINVOICEHEADERRECCERTIFIEREMPLOYEENO(employeeNoIt.getValue() !=
                                                                                                                                    null ?
                                                                                                                                    employeeNoIt.getValue()
                                                                                                                                    .toString() :
                                                                                                                                    null));
                    appsjseqinvoiceheaderrec.setCERTIFIEREMAILADD(objectFactory.createAPPSJSEQINVOICEHEADERRECCERTIFIEREMAILADD(row.getAttribute("CertifierEmailAdd") !=
                                                                                                                                null ?
                                                                                                                                row.getAttribute("CertifierEmailAdd")
                                                                                                                                .toString() :
                                                                                                                                null));
                    appsjseqinvoiceheaderrec.setINVALIDREASON(objectFactory.createAPPSJSEQINVOICEHEADERRECINVALIDREASON(row.getAttribute("InvalidReason") !=
                                                                                                                        null ?
                                                                                                                        row.getAttribute("InvalidReason")
                                                                                                                        .toString() :
                                                                                                                        null));
                    appsjseqinvoiceheaderrec.setINVALIDCODE(objectFactory.createAPPSJSEQINVOICEHEADERRECINVALIDCODE(row.getAttribute("InvalidCode") !=
                                                                                                                    null ?
                                                                                                                    row.getAttribute("InvalidCode")
                                                                                                                    .toString() :
                                                                                                                    null));
                    appsjseqinvoiceheaderrec.setPOTYPE(objectFactory.createAPPSJSEQINVOICEHEADERRECPOTYPE(row.getAttribute("PoType") !=
                                                                                                          null ?
                                                                                                          row.getAttribute("PoType")
                                                                                                          .toString() :
                                                                                                          null));
                    //appsinvoiceheaderrec.setALTERNATEAPPROVEREMPLOYEENO(objectFactory.createAPPSINVOICEHEADERRECALTERNATEAPPROVEREMPLOYEENO());
                    //appsinvoiceheaderrec.setCERTIFIERCOMMENTS(objectFactory.createAPPSINVOICEHEADERRECCERTIFIERCOMMENTS());
                    appsjseqinvoiceheaderrec.setINVOICEIMAGEURL(objectFactory.createAPPSJSEQINVOICEHEADERRECINVOICEIMAGEURL(row.getAttribute("ImageUrl") !=
                                                                                                                            null ?
                                                                                                                            row.getAttribute("ImageUrl")
                                                                                                                            .toString() :
                                                                                                                            null));
                    appsjseqinvoiceheaderrec.setHEADERATT4(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT4(row.getAttribute("Attr4") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr4")
                                                                                                                  .toString() :
                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setHEADERATT5(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT5(row.getAttribute("Attr5") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr5")
                                                                                                                  .toString() :
                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setHEADERATT6(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT6(row.getAttribute("Attr6") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr6")
                                                                                                                  .toString() :
                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setHEADERATT7(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT7(row.getAttribute("Attr7") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr7")
                                                                                                                  .toString() :
                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setHEADERATT8(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT8(row.getAttribute("Attr8") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr8")
                                                                                                                  .toString() :
                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setHEADERATT9(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT9(row.getAttribute("Attr9") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr9")
                                                                                                                  .toString() :
                                                                                                                  null));
                    appsjseqinvoiceheaderrec.setHEADERATT10(objectFactory.createAPPSJSEQINVOICEHEADERRECHEADERATT10(row.getAttribute("Attr10") !=
                                                                                                                    null ?
                                                                                                                    row.getAttribute("Attr10")
                                                                                                                    .toString() :
                                                                                                                    null));
                    appsjseqinvoiceheaderrec.setIMAGEURL(objectFactory.createAPPSJSEQINVOICEHEADERRECIMAGEURL(row.getAttribute("ImageUrl") !=
                                                                                                              null ?
                                                                                                              row.getAttribute("ImageUrl")
                                                                                                              .toString() :
                                                                                                              null));
                    appsjseqinvoiceheaderrec.setPRIORITY(objectFactory.createAPPSJSEQINVOICEHEADERRECPRIORITY(row.getAttribute("Priority") !=
                                                                                                              null ?
                                                                                                              row.getAttribute("Priority")
                                                                                                              .toString() :
                                                                                                              null));
                    appsjseqinvoiceheaderrec.setREASONTYPE(objectFactory.createAPPSJSEQINVOICEHEADERRECREASONTYPE("NONE"));
                    appsjseqinvoiceheaderrec.setSTATUS(objectFactory.createAPPSJSEQINVOICEHEADERRECSTATUS(row.getAttribute("Status") !=
                                                                                                          null ?
                                                                                                          row.getAttribute("Status")
                                                                                                          .toString() :
                                                                                                          null));
                    //appsinvoiceheaderrec.setREJECTIONREASON(objectFactory.createAPPSINVOICEHEADERRECREJECTIONREASON());
                    //appsinvoiceheaderrec.setPAYGROUP(objectFactory.createAPPSINVOICEHEADERRECPAYGROUP());
                    //appsinvoiceheaderrec.setPAYMENTMETHOD(objectFactory.createAPPSINVOICEHEADERRECPAYMENTMETHOD());
                    //appsinvoiceheaderrec.setCHECKNUMBER(objectFactory.createAPPSINVOICEHEADERRECCHECKNUMBER());
                    appsjseqinvoiceheaderrec.setINVALIDREASON(objectFactory.createAPPSJSEQINVOICEHEADERRECINVALIDREASON("NONE"));
                    input_params.setPINVOICEIN(objectFactory.createInputParametersPINVOICEIN(appsjseqinvoiceheaderrec));

                }


            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                if (haederItr != null) {
                    try {
                        //lineItemItr.closeRowSetIterator();
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                }
                if (haederItr != null) {
                    try {
                        //rs.closeRowSetIterator();
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                }
            }
            APPSJSEQINVOICEINTBLTYPE appsjseqinvoiceintbltype = objectFactory.createAPPSJSEQINVOICEINTBLTYPE();
            RowSetIterator lineItemItr = null;
            RowSetIterator rs = null;

            try {
                DCBindingContainer dcBindingContainer =
                    (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding =
                    dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                ViewObjectImpl lineVO = (ViewObjectImpl) dcIteratorBinding.getViewObject();

                ArrayList<HashMap<String, Object>> lineItems = new ArrayList<HashMap<String, Object>>();
                System.out.println("------------lineVO Count: " + lineVO.getEstimatedRowCount());


                lineItemItr = lineVO.createRowSetIterator(null);
                while (lineItemItr.hasNext()) {
                    Row row = lineItemItr.next();
                    //row.getAttribute("LineNumber")
                    APPSJSEQINVOICELINEREC appsjseqinvoicelinerec = objectFactory.createAPPSJSEQINVOICELINEREC();
                    appsjseqinvoicelinerec.setLINENO(objectFactory.createAPPSJSEQINVOICELINERECLINENO(row.getAttribute("LineNumber") !=
                                                                                                      null ?
                                                                                                      row.getAttribute("LineNumber")
                                                                                                      .toString() : null));
                    appsjseqinvoicelinerec.setTAXRATECODE(objectFactory.createAPPSJSEQINVOICELINERECTAXRATECODE(row.getAttribute("TaxRateCode") !=
                                                                                                                null ?
                                                                                                                row.getAttribute("TaxRateCode")
                                                                                                                .toString() :
                                                                                                                null));
                    appsjseqinvoicelinerec.setLINEPONUMBER(objectFactory.createAPPSJSEQINVOICELINERECLINEPONUMBER(row.getAttribute("LinePoNum") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("LinePoNum")
                                                                                                                  .toString() :
                                                                                                                  null));
                    //objectFactory.createAPPSINVOICELINERECSUSPENSEACCOUNTFLAG(row.getAttribute("LineNumber")!=null ? row.getAttribute("LineNumber").toString() : null);
                    System.out.println("------------LineNumber------------------");
                    System.out.println(row.getAttribute("LineNumber") != null ? row.getAttribute("LineNumber").toString() :
                                       " ");
                    System.out.println("------------ PO LiN Number------------------");
                    System.out.println(invoiceType);
                    System.out.println(row.getAttribute("PoLineNum") != null ? "Found" : " Not Found ");
                    //System.out.println(row.getAttribute("PoLineNum")!=null);
                    // System.out.println(row.getAttribute("PoLineNum")!=null ? row.getAttribute("PoLineNum").toString() : " Not Found ");
                    if ("Non PO Invoice".equalsIgnoreCase(invoiceType)) {
                        appsjseqinvoicelinerec.setPOLINENUMBER(objectFactory.createAPPSJSEQINVOICELINERECPOLINENUMBER(row.getAttribute("PoLineNum") !=
                                                                                                                      null ?
                                                                                                                      new BigDecimal(row.getAttribute("LineNumber")
                                                                                                                                     .toString()) :
                                                                                                                      null));
                    } else {
                        appsjseqinvoicelinerec.setPOLINENUMBER(objectFactory.createAPPSJSEQINVOICELINERECPOLINENUMBER(row.getAttribute("PoLineNum") !=
                                                                                                                      null ?
                                                                                                                      new BigDecimal(row.getAttribute("PoLineNum")
                                                                                                                                     .toString()) :
                                                                                                                      null));
                    }
                    // appsinvoicelinerec.setPOLINENUMBER(objectFactory.createAPPSINVOICELINERECPOLINENUMBER(row.getAttribute("PoLineNum")!=null ? new BigDecimal(row.getAttribute("LineNumber").toString()) : null));

                    appsjseqinvoicelinerec.setLINEAATT9(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT9(row.getAttribute("Attr9") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr9")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setLINEAATT8(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT8(row.getAttribute("Attr8") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr8")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setQUANTITY(objectFactory.createAPPSJSEQINVOICELINERECQUANTITY(row.getAttribute("Quantity") !=
                                                                                                          null ?
                                                                                                          new BigDecimal(row.getAttribute("Quantity")
                                                                                                                         .toString()) :
                                                                                                          null));
                    appsjseqinvoicelinerec.setPROJECTNO(objectFactory.createAPPSJSEQINVOICELINERECPROJECTNO(row.getAttribute("ProjectNo") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("ProjectNo")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setLINEAATT7(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT7(row.getAttribute("Attr7") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr7")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setLINEAATT6(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT6(row.getAttribute("Attr6") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr6")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setLINEAATT5(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT5(row.getAttribute("Attr5") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr5")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setLINETAXAMOUNT(objectFactory.createAPPSJSEQINVOICELINERECLINETAXAMOUNT(row.getAttribute("TaxAmountLineitem") !=
                                                                                                                    null ?
                                                                                                                    new BigDecimal(row.getAttribute("TaxAmountLineitem")
                                                                                                                                   .toString()) :
                                                                                                                    null));
                    appsjseqinvoicelinerec.setLINEAATT4(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT4(row.getAttribute("Attr4") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr4")
                                                                                                            .toString() :
                                                                                                            null));
                    ///appsinvoicelinerec.setLINEAATT1(objectFactory.createAPPSINVOICELINERECLINEAATT1(row.getAttribute("Attr1")!=null ? row.getAttribute("Attr1").toString() : null));
                    //923018--TAX Rate setting Null for muliple taxrate validation issue - Start
                    //appsinvoicelinerec.setTAXRATE(objectFactory.createAPPSINVOICELINERECTAXRATE(row.getAttribute("TaxRate")!=null ? new BigDecimal(row.getAttribute("TaxRate").toString() ): null));
                    appsjseqinvoicelinerec.setTAXRATE(objectFactory.createAPPSJSEQINVOICELINERECTAXRATE(null));
                    //923018--TAX Rate setting Null for muliple taxrate validation issue - End
                    appsjseqinvoicelinerec.setLINEAATT2(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT2(row.getAttribute("Attr2") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr2")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setLINEAATT3(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT3(row.getAttribute("Attr3") !=
                                                                                                            null ?
                                                                                                            row.getAttribute("Attr3")
                                                                                                            .toString() :
                                                                                                            null));
                    appsjseqinvoicelinerec.setTASKNO(objectFactory.createAPPSJSEQINVOICELINERECTASKNO(row.getAttribute("TaskNo") !=
                                                                                                      null ?
                                                                                                      row.getAttribute("TaskNo")
                                                                                                      .toString() : null));
                    appsjseqinvoicelinerec.setLINEDESCRIPTION(objectFactory.createAPPSJSEQINVOICELINERECLINEDESCRIPTION(row.getAttribute("LineDescription") !=
                                                                                                                        null ?
                                                                                                                        row.getAttribute("LineDescription")
                                                                                                                        .toString() :
                                                                                                                        null));
                    appsjseqinvoicelinerec.setGLCODE(objectFactory.createAPPSJSEQINVOICELINERECGLCODE(row.getAttribute("GlNo") !=
                                                                                                      null ?
                                                                                                      row.getAttribute("GlNo")
                                                                                                      .toString() : null));
                    appsjseqinvoicelinerec.setLINETYPE(objectFactory.createAPPSJSEQINVOICELINERECLINETYPE(row.getAttribute("LineType") !=
                                                                                                          null ?
                                                                                                          row.getAttribute("LineNumber")
                                                                                                          .toString() :
                                                                                                          null));
                    objectFactory.createAPPSJSEQINVOICELINERECEXPENDITURETYPE(row.getAttribute("LineNumber") != null ?
                                                                              row.getAttribute("LineNumber").toString() :
                                                                              null);

                    try {

                        appsjseqinvoicelinerec.setEXPENDITUREDATE(objectFactory.createAPPSJSEQINVOICELINERECEXPENDITUREDATE(row.getAttribute("ExpenditureDate") !=
                                                                                                                            null ?
                                                                                                                            convertStrintToCalender(row.getAttribute("ExpenditureDate")
                                                                                                                                                    .toString()) :
                                                                                                                            null));
                        appsjseqinvoicelinerec.setEXPENDITUREORG(objectFactory.createAPPSJSEQINVOICELINERECEXPENDITUREORG(row.getAttribute("ExpinditureOrg") !=
                                                                                                                          null ?
                                                                                                                          row.getAttribute("ExpinditureOrg")
                                                                                                                          .toString() :
                                                                                                                          null));
                        appsjseqinvoicelinerec.setLINEAATT10(objectFactory.createAPPSJSEQINVOICELINERECLINEAATT10(row.getAttribute("Attr10") !=
                                                                                                                  null ?
                                                                                                                  row.getAttribute("Attr10")
                                                                                                                  .toString() :
                                                                                                                  null));
                        appsjseqinvoicelinerec.setLINETOTALAMOUNT(objectFactory.createAPPSJSEQINVOICELINERECLINETOTALAMOUNT(row.getAttribute("LineTotalAmount") !=
                                                                                                                            null ?
                                                                                                                            new BigDecimal(row.getAttribute("LineTotalAmount")
                                                                                                                                           .toString()) :
                                                                                                                            null));
                        appsjseqinvoicelinerec.setUNITPRICE(objectFactory.createAPPSJSEQINVOICELINERECUNITPRICE(row.getAttribute("UnitPrice") !=
                                                                                                                null ?
                                                                                                                new BigDecimal(row.getAttribute("UnitPrice")
                                                                                                                               .toString()) :
                                                                                                                null));
                        appsjseqinvoicelinerec.setUOM(objectFactory.createAPPSJSEQINVOICELINERECUOM(row.getAttribute("Uom") !=
                                                                                                    null ?
                                                                                                    row.getAttribute("Uom")
                                                                                                    .toString() : null));
                    } catch (Exception e) {


                    }


                    appsjseqinvoiceintbltype.getPINVLINEITEM().add(appsjseqinvoicelinerec);
                }


                input_params.setPINVLINE(objectFactory.createInputParametersPINVLINE(appsjseqinvoiceintbltype));


                //Create header i/p param :  Header fields


            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                if (lineItemItr != null) {
                    try {
                        //lineItemItr.closeRowSetIterator();
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                }
                if (rs != null) {
                    try {
                        //rs.closeRowSetIterator();
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                }
            }

            /*Call  BPM EBS validation */
            APPSJSEQINVOICEINTBLTYPE APPSJSEQINVOICEINTBLTYPE = input_params.getPINVLINE().getValue();
            List<APPSJSEQINVOICELINEREC> eITEM = APPSJSEQINVOICEINTBLTYPE.getPINVLINEITEM();
            for (APPSJSEQINVOICELINEREC rec : eITEM) {

                System.out.println("rec.getLINENO().getValue() " + rec.getLINENO().getValue());
                System.out.println("rec.getTAXRATECODE().getValue() " + rec.getTAXRATECODE().getValue());

            }
            System.out.println("eITEM " + eITEM.size());

            System.out.println("Calling ebs validation package" + input_params.getPINVOICEIN()
                                                                              .getValue()
                                                                              .getORGID()
                                                                              .getValue());
            ap.quantas.com.ebs_inv_process_new.js.OutputParameters outputparams =
                jSEQINVIMGPROCESSPtt.jseqINVIMGPROCESS(input_params);


            System.out.println("VAlueeeeeee11111 :: " + outputparams.getOUTRESULT().getValue());

            JAXBElement<APPSJSEQOUTRESULTTBLTYPE> APPSJSEQOUTRESULTTBLTYPE = outputparams.getOUTRESULT();


            System.out.println("Result APPSJSEQOUTRESULTTBLTYPE :: " + APPSJSEQOUTRESULTTBLTYPE);
            //System.out.println("Result APPSOUTRESULTTBLTYPE :: "+APPSOUTRESULTTBLTYPE.getValue() );
            System.out.println("Get supplier name from ebs package :: " + outputparams.getPINVOICEIN()
                                                                                      .getValue()
                                                                                      .getORGID()
                                                                                      .getValue());
            System.out.println("beforeeeeeeee");
            System.out.println("line list size :: " + outputparams.getPINVLINE()
                                                                  .getValue()
                                                                  .getPINVLINEITEM()
                                                                  .size());
            //System.out.println("Get line no from ebs package :: "+outputparams.getPINVLINE().getValue().getPINVLINEITEM().get(0).getLINENO().getValue());

            String error_message = null;
            String exception_reason = null;
            String exception_type = null;
            if (outputparams.getOUTRESULT() != null && outputparams.getOUTRESULT().getValue() != null) {
                List<APPSJSEQOUTRESULTREC> approverListheaderObj_list = outputparams.getOUTRESULT()
                                                                                    .getValue()
                                                                                    .getOUTRESULTITEM();

                System.out.println("Result APPSJSEQOUTRESULTTBLTYPE :: " + approverListheaderObj_list);
                System.out.println("Result APPSJSEQOUTRESULTTBLTYPE :: " + approverListheaderObj_list.size());


                System.out.println("Before looping over ebs validation o/p newwwww ");

                for (APPSJSEQOUTRESULTREC out_obj : approverListheaderObj_list) {
                    if (out_obj != null) {
                        error_message = out_obj.getERRORMESSAGE() != null ? out_obj.getERRORMESSAGE().getValue() : null;
                        exception_reason =
                            out_obj.getEXCEPTIONREASON() != null ? out_obj.getEXCEPTIONREASON().getValue() : null;
                        exception_type = out_obj.getEXCEPTIONTYPE() != null ? out_obj.getEXCEPTIONTYPE().getValue() : null;
                        if ((exception_reason != null && exception_reason.equals("SUCCESS")) &&
                            (exception_type != null && exception_type.equals("SUCCESS"))) {
                            return null;
                        }

                        if ((error_message == null || (error_message != null && error_message.equals(""))) &&
                            (exception_reason != null && exception_reason.equals("VALIDATED")) &&
                            (exception_type != null && exception_type.equals("VALIDATED"))) {

                            error_message =
                                "Invoice line tax amount is not matching with the line tax rate, please correct";
                        }

                        System.out.println("Exceptions1 ::::::::" + error_message + "=======" + exception_reason +
                                           "================" + exception_type);
                    }


                }


                /* ebsErrorMessage.setValue(exception_reason +" : "+exception_type +"("+error_message+")");
                            ebsErrorMessage.setVisible(true);
                            ebsErrorMessage.setRendered(true);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(ebsErrorMessage);
                            System.out.println("REfreshinggggggggggggg1");*/

            }

            StringWriter writer = new StringWriter();
            JAXBContext context = null;
            try {
                context = JAXBContext.newInstance(APPSJSEQINVOICEHEADERREC.class);
            } catch (JAXBException e) {
            }
            Marshaller m = null;
            try {
                m = context.createMarshaller();
            } catch (JAXBException e) {
            }
            try {
                m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
            } catch (PropertyException e) {
            }

            try {


                m.marshal(objectFactory.createInputParametersPINVLINE(APPSJSEQINVOICEINTBLTYPE), writer);
                //m.marshal(outputparams.getPINVOICEIN() ,writer);
            } catch (JAXBException e) {
            }

            System.out.println("=======================Payload outputparams.getOUTRESULT()===============================");
            System.out.println(writer.toString());
            System.out.println("=======================Payload===============================");
            System.out.println("Refreshing all header fields ");

            if (outputparams.getPINVOICEIN().getValue() != null) {
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getHEADERTAXTOTAL() != null)
                    taxTotIt.setValue(outputparams.getPINVOICEIN()
                                                  .getValue()
                                                  .getHEADERTAXTOTAL()
                                                  .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getINVOICETOTALAMOUNT() != null)
                    headerTotIt.setValue(outputparams.getPINVOICEIN()
                                                     .getValue()
                                                     .getINVOICETOTALAMOUNT()
                                                     .getValue());
                //if(outputparams.getPINVOICEIN().getValue().getCERTIFIERCOMMENTS()!=null)

                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getDOCUMENTTYPE() != null)
                    docTypeSoc.setValue(outputparams.getPINVOICEIN()
                                                    .getValue()
                                                    .getDOCUMENTTYPE()
                                                    .getValue()
                                                    .toString()
                                                    .equalsIgnoreCase("INVOICE") ? "Invoice" : "Credit Note");
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getINVOICETYPE() != null)
                    invoiceTypeSoc.setValue(outputparams.getPINVOICEIN()
                                                        .getValue()
                                                        .getINVOICETYPE()
                                                        .getValue());

                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getINVOICENUMBER() != null)
                    invNumIt.setValue(outputparams.getPINVOICEIN()
                                                  .getValue()
                                                  .getINVOICENUMBER()
                                                  .getValue()
                                                  .toString());
                /*if(outputparams.getPINVOICEIN().getValue().getINVOICEDATE()!=null)
                                invDateId.setValue(outputparams.getPINVOICEIN().getValue().getINVOICEDATE().getValue().);*/
                //if(outputparams.getPINVOICEIN().getValue().getSUPPLIERID()!=null)

                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getSUPPLIERNAME() != null)
                    supNameIt.setValue(outputparams.getPINVOICEIN()
                                                   .getValue()
                                                   .getSUPPLIERNAME()
                                                   .getValue());

                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getSUPPLIERNUMBER() != null)
                    suppNumIt.setValue(outputparams.getPINVOICEIN()
                                                   .getValue()
                                                   .getSUPPLIERNUMBER()
                                                   .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getSITEID() != null)
                    siteIdIt.setValue(outputparams.getPINVOICEIN()
                                                  .getValue()
                                                  .getSITEID()
                                                  .getValue());

                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getSITENAME() != null)
                    siteNameIt.setValue(outputparams.getPINVOICEIN()
                                                    .getValue()
                                                    .getSITENAME()
                                                    .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getPONUMBER() != null)
                    poNumIt.setValue(outputparams.getPINVOICEIN()
                                                 .getValue()
                                                 .getPONUMBER()
                                                 .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getTAXREGISTRATIONNUMBER() != null)
                    taxRegIt.setValue(outputparams.getPINVOICEIN()
                                                  .getValue()
                                                  .getTAXREGISTRATIONNUMBER()
                                                  .getValue());

                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getCURRENCYCODE() != null)
                    currencyIt.setValue(outputparams.getPINVOICEIN()
                                                    .getValue()
                                                    .getCURRENCYCODE()
                                                    .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getCERTIFIERNAME() != null)
                    certNameIt.setValue(outputparams.getPINVOICEIN()
                                                    .getValue()
                                                    .getCERTIFIERNAME()
                                                    .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getCERTIFIEREMPLOYEENO() != null)
                    employeeNoIt.setValue(outputparams.getPINVOICEIN()
                                                      .getValue()
                                                      .getCERTIFIEREMPLOYEENO()
                                                      .getValue());
                if (outputparams.getPINVOICEIN()
                                .getValue()
                                .getCERTIFIEREMAILADD() != null)
                    certEmailIt.setValue(outputparams.getPINVOICEIN()
                                                     .getValue()
                                                     .getCERTIFIEREMAILADD()
                                                     .getValue());
                //if(outputparams.getPINVOICEIN().getValue().getPOTYPE()!=null)

                //if(outputparams.getPINVOICEIN().getValue().getALTERNATEAPPROVEREMPLOYEENO()!=null)


            }

            //AdfFacesContext.getCurrentInstance().addPartialTarget(supNameIt);
            System.out.println("Returning=========" + exception_reason + " : " + exception_type + "(" + error_message +
                               ")");
            //return exception_reason +" : "+exception_type +"("+error_message+")";
            return error_message;

        }

        public String ebsValidationCAll() {

            System.out.println("Inside ebsValidationCAll");
            String msg;
            if (getUrlOrg().equalsIgnoreCase("QF")) {
                msg = ebsValidationCAllQF();
                System.out.println("ebsValidationCAllQF msg :" + msg);
            } else {
                msg = ebsValidationCAllJS();
                System.out.println("ebsValidationCAllJS msg :" + msg);
            }
            return msg;
        }

    public XMLGregorianCalendar convertStrintToCalender(String string_date) throws DatatypeConfigurationException,
                                                                   ParseException {
    DateFormat format = new SimpleDateFormat("yyyy-MM-dd");
    Date date = format.parse(string_date);

    GregorianCalendar cal = new GregorianCalendar();
    cal.setTime(date);

    XMLGregorianCalendar xmlGregCal =  DatatypeFactory.newInstance().newXMLGregorianCalendar(cal);

    System.out.println(xmlGregCal);
    return xmlGregCal;
    }

    public boolean validateAndDoSaveOperation(boolean needValidation) {
        System.out.println("Start: validateAndDoSaveOperation");
        //String reasonId = null;
        //String reasonTypeId = null;
        //String statusStr = null;
       // String rejReason = null;
        //String comments = null; 27th Aug
        //String certComments = null; 27th aug
        String supName = null;
        long siteId = -1;
        RowSetIterator lineItemItr = null;

        String commentsDate = null;

        String description =  null;

      /*  if(!(commentsIt.getValue()== null || (commentsIt.getValue()!=null && commentsIt.getValue().equals(""))))
        {
            description = commentsIt.getValue().toString() ;
        }   27th Aug*/

       // String name = getAPGroupUserName();


//       if(resolveExpression("#{bindings.InvalidReasonId.attributeValue}")!=null) {
//       reasonId = ""+((java.math.BigDecimal)resolveExpression("#{bindings.InvalidReasonId.attributeValue}")).intValue();
//       }
//
//       System.out.println("validateAndDoSaveOperation>>reasonId>>"+ reasonId);
//
//       if(resolveExpression("#{bindings.InvalidReasonTypeId.attributeValue}")!=null) {
//           reasonTypeId = ""+((java.math.BigDecimal)resolveExpression("#{bindings.InvalidReasonTypeId.attributeValue}")).intValue();
//       }
//
//     System.out.println("validateAndDoSaveOperation>>reasonTypeId>>"+ reasonTypeId);
//     System.out.println("reasonId>> "+ reasonId + " <<reasonTypeId>> "+ reasonTypeId);
//    /*   this.setValueToEL("#{bindings.InvalidReasonTypeId.inputValue}",
//                       valueChangeEvent.getNewValue()); */
//     //Updates the model
//     System.out.println("\n******** Selected Value: " +
//                        resolveExpression("#{bindings.InvalidReasonTypeId.attributeValue}"));
//     System.out.println("\n******** Display Value: " +
//                        resolveExpression("#{bindings.InvalidReasonTypeId.selectedValue ne ' ' ? bindings.InvalidReasonTypeId.selectedValue.attributeValues[1] : ''}"));
//     String invalidReasonType =
//         (String)resolveExpression("#{bindings.InvalidReasonTypeId.selectedValue ne ' ' ? bindings.InvalidReasonTypeId.selectedValue.attributeValues[1] : ''}");
//
//    // String invalidReasonType = (String)AdfFacesContext.getCurrentInstance().getPageFlowScope().get("invalidReasonType");
//     System.out.println("Invalid reason type"+invalidReasonType);
//
//     System.out.println("\n******** Selected Value: " +
//                        resolveExpression("#{bindings.InvalidReasonId.attributeValue}"));
//     System.out.println("\n******** Display Value: " +
//                        resolveExpression("#{bindings.InvalidReasonId.selectedValue ne ' ' ? bindings.InvalidReasonId.selectedValue.attributeValues[1] : ''}"));
//     String invalidReason =
//         (String)resolveExpression("#{bindings.InvalidReasonId.selectedValue ne ' ' ? bindings.InvalidReasonId.selectedValue.attributeValues[1] : ''}");
//    // String invalidReason = (String)AdfFacesContext.getCurrentInstance().getPageFlowScope().get("invalidReason");
//     System.out.println("Invalid reason type"+invalidReason);

       /*  if(!needValidation){
             if(statusSOC!= null && statusSOC.getValue() != null){
                 statusStr = (String)statusSOC.getValue();
             }
         }*/

        if(supNameIt!= null && supNameIt.getValue() != null){
             supName = (String)supNameIt.getValue();
        }

        if(siteIdIt.getValue()!=null) {
            siteId = (long)(((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue());
        }

        String invNum = (String)invNumIt.getValue();
        String taxRegNum = null;
        /*if(taxRegIt.getValue()!=null && ( ((oracle.jbo.domain.Number)(taxRegIt.getValue()))!=null)) {
            taxRegNum = ((oracle.jbo.domain.Number)(taxRegIt.getValue())) + "";
        }*/

        if(taxRegIt.getValue()!=null ) {
            taxRegNum = taxRegIt.getValue()!=null ? taxRegIt.getValue().toString() : null;
                }

        String poNum = (String)poNumIt.getValue();
        String certName = (String)certNameIt.getValue();
        String certEmail = (String)certEmailIt.getValue();
        String currency = (String)currencyIt.getValue();
        String invDate = null;
        String certNo=(String)employeeNoIt.getValue();

        if(invDateId.getValue()!=null && ((oracle.jbo.domain.Date)invDateId.getValue()).getValue()!=null) {
            invDate = ((oracle.jbo.domain.Date)invDateId.getValue()).getValue().toString();
        }
        double taxTotal = Double.MIN_VALUE;
        if(taxTotIt.getValue()!=null) {
            taxTotal = ((oracle.jbo.domain.Number)taxTotIt.getValue()).getValue();
            System.out.println("**********taxTotal**********"+taxTotal);
        }
        double headerTotal = Double.MIN_VALUE;
        if(headerTotIt.getValue()!=null) {
            headerTotal = ((oracle.jbo.domain.Number)headerTotIt.getValue()).getValue();
            System.out.println("**********headerTotal**********"+headerTotal);

        }
        double lineTotal = Double.MIN_VALUE;
        if(lineIdIt.getValue()!=null) {
            lineTotal = Double.parseDouble((String)lineIdIt.getValue());
            System.out.println("**********lineTotal**********"+lineTotal);
        }

        System.out.println(" --- lineIdIt.getValue() --- "+lineIdIt.getValue());

        String invoiceType = (String)invoiceTypeSoc.getValue();
        String docType = (String)docTypeSoc.getValue();
        String operatingUnit = (String)operatingUnitIt.getValue();
        try {
            String validationErrorMessage = null;
                /*   if(reasonTypeSoc.getValue() == null  || reasonTypeSoc.equals("")){
                       validationErrorMessage = "Please select a Reason Type";
                   }
                   if(reasonSoc.getValue() == null || reasonSoc.equals("")){
                      validationErrorMessage = "Please select a Reason";
                   }*/

            // Reject id in parent table is 16 // REJECT
            //Image review id in parent table is 20 // IMAGE REVIEW
            if(needValidation) {
                if(validationErrorMessage==null &&(( headerTotal==0.0)||(headerTotal==Double.MIN_VALUE))) {
                    validationErrorMessage = "Header total is 0.0";
               /*     System.out.println("--- validation block --- 0");
                    setExpressionResetValue("#{bindings.InvalidReasonId.inputValue}","4");
                    setExpressionResetValue("#{bindings.InvalidReasonTypeId.inputValue}","4");
                    System.out.println("get"+resolveExpression("#{bindings.InvalidReasonId.attributeValue}")+"<<>>"+ resolveExpression("#{bindings.InvalidReasonTypeId.attributeValue}"));
                    ViewObjectImpl vo = Utility.getAm().getErrorCodeLookupVO1();
                    System.out.println("reasonTypeId:"+reasonTypeId);
                    vo.setNamedWhereClauseParam("bindReasonType", reasonTypeId);
                    vo.executeQuery();
                    RowSetIterator rs=null;
                    try{
                        rs = vo.createRowSetIterator(null);
                    rs.reset();
                    String errorMessageLookup = null;
                    while(rs.hasNext()){
                        Row r = rs.next();
                        errorMessageLookup = (String)r.getAttribute("ErrorMessage");
                     }
                    validationErrorMessage = errorMessageLookup;
                    System.out.println("--- validation block --- 0");
                    }catch(Exception e)
                    {
                        e.printStackTrace();
                        }
                    finally{
                if(rs!=null) {
               try {
               rs.closeRowSetIterator();
              } catch(Exception ex) {
                ex.printStackTrace();

             }
               }
            }    */
                }



                //Iteration Start over line items
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                ViewObjectImpl lineVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                //            vo.executeQuery();
                ArrayList<HashMap<String, Object>> lineItems = new ArrayList<HashMap<String,Object>>();
                System.out.println("------------lineVO Count: "+lineVO.getEstimatedRowCount());

                //            while( lineVO.hasNext() ) {
                //                Row row = lineVO.next();
                lineItemItr = lineVO.createRowSetIterator(null);
                while(lineItemItr.hasNext()) {
                    Row row = lineItemItr.next();
                    System.out.println("----- Line Item ----");

                    long lineItem_LineNumber = -1;
                    if(row.getAttribute("LineNumber")!=null) {
                        lineItem_LineNumber = (long)(((oracle.jbo.domain.Number)row.getAttribute("LineNumber")).getValue());
                    }

                    String lineItem_Description = (String)row.getAttribute("LineDescription");

                    double lineItem_LineTotal = -1.0;
                    double lineItem_Quantity = -1.0;
                    double lineItem_UnitPrice = -1.0;

                    String taxRateCode = (String)row.getAttribute("TaxRateCode");
                    double lineItem_TaxAmount = -1.0;

                    String lineItem_poNumber = (String)row.getAttribute("LinePoNum");
                    String lineItem_poLineNumber = (String)row.getAttribute("PoLineNum");

                    System.out.println("-----------Amount: "+row.getAttribute("LineTotalAmount"));
                    System.out.println(":::: taxRateCode ::: "+taxRateCode);
                    if(row.getAttribute("LineTotalAmount")!=null) {
                        lineItem_LineTotal = ((oracle.jbo.domain.Number)row.getAttribute("LineTotalAmount")).getValue();
                    }
                    if(row.getAttribute("Quantity")!=null) {
                        lineItem_Quantity = ((oracle.jbo.domain.Number)row.getAttribute("Quantity")).getValue();
                    }
                    if(row.getAttribute("UnitPrice")!=null) {
                        lineItem_UnitPrice = ((oracle.jbo.domain.Number)row.getAttribute("UnitPrice")).getValue();
                    }

                    if(row.getAttribute("TaxAmountLineitem")!=null) {
                        try {
                            lineItem_TaxAmount = Double.parseDouble((String)row.getAttribute("TaxAmountLineitem"));
                            System.out.println("lineItem_TaxAmount within TaxAmountLineitem"+lineItem_TaxAmount);

                        } catch(Exception e) {

                            lineItem_TaxAmount = -1.0;
                            e.printStackTrace();
                        }
                    }

                    System.out.println("\tline item tax amount : "+lineItem_TaxAmount);

                    System.out.println("\t Line Total : "+lineItem_LineTotal);
                    System.out.println("\t Line taxRateCode : "+taxRateCode);
                    HashMap<String, Object> lineItem = new HashMap<String, Object>();
                    lineItem.put("LineNumber",lineItem_LineNumber);
                    lineItem.put("LineDescription",lineItem_Description);
                    lineItem.put("LineTotalAmount",lineItem_LineTotal);
                    lineItem.put("Quantity",lineItem_Quantity);
                    lineItem.put("UnitPrice",lineItem_UnitPrice);
                    lineItem.put("TaxRateCode",taxRateCode);
                    lineItem.put("LinePoNum",lineItem_poNumber);
                    lineItem.put("PoLineNum",lineItem_poLineNumber);
                    lineItem.put("TaxAmountLineitem",lineItem_TaxAmount);
                    lineItems.add(lineItem);
                }

                //End of Iteration

                double lineItems_TotalAmount_Sum = 0;
                double lineItems_TaxAmount_Sum = 0;

                for(int i=0; i<lineItems.size(); i++) {

                    lineItems_TotalAmount_Sum += (Double)lineItems.get(i).get("LineTotalAmount");
                    lineItems_TaxAmount_Sum += (Double)lineItems.get(i).get("TaxAmountLineitem");
                }

                System.out.println("Line Total **: "+lineTotal+", Sum of Line Item Line Total** : "+ lineItems_TotalAmount_Sum+", Tax Total **: "+taxTotal+", Sum of Line Item Tax Total **:"+lineItems_TaxAmount_Sum+", Header Total** : "+headerTotal);

                if(ADFContext.getCurrent().getPageFlowScope().get("file_name")==null){

                    validationErrorMessage ="Please upload a invoice of PDF type in order to proceed(Maximum size 1MB)";
                }
                //Certifier Name+Email mandatory for NON-PO Invoice
                if(validationErrorMessage==null && (supName==null || (supName!=null && supName.trim().equals("")))) {


                    validationErrorMessage ="Supplier name is empty";
                 /*   System.out.println("--- validation block --- 3");
                    //validationErrorMessage = "Supplier Name is missing!";
                    setExpressionResetValue("#{bindings.InvalidReasonId.inputValue}","6");
    //                       setExpressionResetValue("#{bindings.ReasonTypeVO2.inputValue}","NO EXACT MATCH");
                     setExpressionResetValue("#{bindings.InvalidReasonTypeId.inputValue}","9");
                    System.out.println("get"+resolveExpression("#{bindings.InvalidReasonId.attributeValue}")+"<<>>"+ resolveExpression("#{bindings.InvalidReasonTypeId.attributeValue}"));
                    ViewObjectImpl vo = Utility.getAm().getErrorCodeLookupVO1();
                    System.out.println("reasonTypeId:"+reasonTypeId);
                    vo.setNamedWhereClauseParam("bindReasonType", 9);
                    vo.executeQuery();
                    RowSetIterator rs=null;
                    try{
                        rs = vo.createRowSetIterator(null);
                    rs.reset();
                    String errorMessageLookup = null;
                    while(rs.hasNext()){
                        Row r = rs.next();
                        errorMessageLookup = (String)r.getAttribute("ErrorMessage");
                    }
                    validationErrorMessage = errorMessageLookup;
                    System.out.println("--- validation block --- 3");
                    }catch(Exception e)
                    {
                        e.printStackTrace();
                        }
                    finally{
                            if(rs!=null) {
                                try {
                                    rs.closeRowSetIterator();
                                } catch(Exception ex) {
                                    ex.printStackTrace();

                            }
                            }
                        }
                }
                if(validationErrorMessage==null && siteId==-1) {

                    System.out.println("--- validation block --- 4");
                    //validationErrorMessage = "Site ID is missing!";
                    setExpressionResetValue("#{bindings.InvalidReasonId.inputValue}","6");
    //                       setExpressionResetValue("#{bindings.ReasonTypeVO2.inputValue}","NO EXACT MATCH");
                    setExpressionResetValue("#{bindings.InvalidReasonTypeId.inputValue}","9");
                    System.out.println("get"+resolveExpression("#{bindings.InvalidReasonId.attributeValue}")+"<<>>"+ resolveExpression("#{bindings.InvalidReasonTypeId.attributeValue}"));
                    ViewObjectImpl vo = Utility.getAm().getErrorCodeLookupVO1();
                    System.out.println("reasonTypeId:"+reasonTypeId);
                    vo.setNamedWhereClauseParam("bindReasonType", 9);
                    vo.executeQuery();
                    RowSetIterator rs=null;
                    try{
                        rs = vo.createRowSetIterator(null);
                    rs.reset();
                    String errorMessageLookup = null;
                    while(rs.hasNext()){
                       Row r = rs.next();
                        errorMessageLookup = (String)r.getAttribute("ErrorMessage");
                        }

                    validationErrorMessage = errorMessageLookup;
                    System.out.println("--- validation block --- 4");
                }catch(Exception e)
                 {
                 e.printStackTrace();
                 }
                    finally{
                  if(rs!=null) {
                  try {
                    rs.closeRowSetIterator();
                 } catch(Exception ex) {
               ex.printStackTrace();

                   }
                }
              }*/
                }
                if(validationErrorMessage==null && ((docTypeSoc.getValue()==null || (docTypeSoc.getValue()!=null && docTypeSoc.getValue().toString().trim().equals(""))))) {
                    System.out.println("Document Type cannot be Blank");
                    validationErrorMessage = "Document Type cannot be Blank";
                }
                if(validationErrorMessage==null && ( (invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))))) {
                    System.out.println("Invoice Type cannot be Blank");
                    validationErrorMessage = "Invoice Type cannot be Blank";
                }
                if(validationErrorMessage==null && (invNum==null || (invNum!=null && invNum.trim().equals("")))) {
                    validationErrorMessage = "Invoice Number cannot be Blank";
                }

                /*if(validationErrorMessage==null && (docTypeSoc.getValue()==null || (docTypeSoc.getValue()!=null &&( !docTypeSoc.getValue().toString().equals("Invoice") || !docTypeSoc.getValue().toString().equals("Credit Note"))))) {
                    validationErrorMessage = "Document Type cannot be blank";
                }*/
                /*if(validationErrorMessage==null && (invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null &&( !invoiceTypeSoc.getValue().toString().equals("Non PO Invoice") || !invoiceTypeSoc.getValue().toString().equals("PO Invoice"))))) {
                    validationErrorMessage = "Invoice Type cannot be blank";
                }*/
                if(validationErrorMessage==null && (invDate==null || (invDate!=null && invDate.trim().equals("")))) {
                    validationErrorMessage = "Invoice Date cannot be Blank";
                }

                if(validationErrorMessage==null && invDate!=null && !invDate.trim().equals("") ){
                   String result = futuredatevalidation();
                   if(result!=null && result.equals("Not allowed")){
                       validationErrorMessage ="Invoice date cannot be beyond one day from the current date";

                   }
                }

                if(validationErrorMessage==null && (currencyIt.getValue()==null || (currencyIt.getValue()!=null && currencyIt.getValue().toString().equals("")))) {
                    validationErrorMessage = "Currency cannot be Blank";
                }
                if(validationErrorMessage==null && taxTotal==Double.MIN_VALUE) {
                    validationErrorMessage = "Tax Total Amount cannot be Blank";
                }
                if(validationErrorMessage==null && lineTotal==Double.MIN_VALUE) {
                    validationErrorMessage = "Header linetotal Amount cannot be Blank";
                }


                /*if(validationErrorMessage==null && headerTotal==Double.MIN_VALUE) {
             validationErrorMessage = "Header Toal Amount is missing!";
                }*/
    //

                if(validationErrorMessage==null && invoiceType.equalsIgnoreCase("non po invoice")) {
                    if(certName==null || (certName!=null && certName.trim().equals(""))) {
                        validationErrorMessage = "Certifier Name is Blank. Certifier Name is mandatory for a Non-PO Invoice.";
                    } else if(certEmail==null || (certEmail!=null && certEmail.trim().equals(""))) {
                        validationErrorMessage = "Certifier Email is Blank. Certifier Email is mandatory for a Non-PO Invoice.";
                    }
                }
                if(validationErrorMessage==null && invoiceType.equalsIgnoreCase("po invoice")) {
                    if(poNum==null || (poNum!=null && poNum.trim().equals(""))) {
                        validationErrorMessage = "PO Number is Blank. PO Number is mandatory for a PO Invoice.";
                    }
                }

             if(validationErrorMessage==null && mpaC.getValue().toString().equals("true")
                && (radio_paymentTypes.getValue()== null ||( radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals(""))) ){
                    System.out.println("radio_paymentTypes value :::::::::::::::"+radio_paymentTypes.getValue());
                    String value="(WIRE/CHEQUE)";
                    if (getUrlOrg().equalsIgnoreCase("JS")){
                        value="(WIRE)";
                    }
                    validationErrorMessage = "Please select the manual payment allocation type "+value;

                }
                //923018- Payment_cheque No- Start
             /* if(validationErrorMessage==null && mpaC.getValue().toString().equals("true")
                 && radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE") &&
                 (paymentAllocNo.getValue()==null ||
                  (paymentAllocNo.getValue()!=null  && paymentAllocNo.getValue().toString().trim().equals("") )))*/
             if(validationErrorMessage==null && mpaC.getValue().toString().equals("true")
                                          &&  (paymentAllocNo.getValue()==null ||
                                           (paymentAllocNo.getValue()!=null  && paymentAllocNo.getValue().toString().trim().equals("") )))
                 {

                      validationErrorMessage = "Please enter the  Payment No";
                  }

                //923018- Payment_cheque No- End

                  System.out.println("----- After all payment related validations -----");
                System.out.println("----- End of Line Items -----");

                //double lineItems_TaxAmount_Sum = 0;

                for(int i=0; i<lineItems.size(); i++) {

                    //lineItems_TaxAmount_Sum += (Double)lineItems.get(i).get("LineTotalAmount");

                    if(validationErrorMessage==null && invoiceType.equalsIgnoreCase("po invoice")) {

                        if(validationErrorMessage==null && (lineItems.get(i).get("LinePoNum")==null || (lineItems.get(i).get("LinePoNum")!=null && ((String)lineItems.get(i).get("LinePoNum")).trim().equals("")))) {
                            validationErrorMessage = "PO Number is missing for the following Line Item :<br/>"
                                                     + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+", Description : "+lineItems.get(i).get("LineDescription");
                            break;
                        } else if(validationErrorMessage==null && (lineItems.get(i).get("PoLineNum")==null || (lineItems.get(i).get("PoLineNum")!=null && ((String)lineItems.get(i).get("PoLineNum")).trim().equals("")))) {
                            validationErrorMessage = "PO Line Number is missing for the following Line Item :<br/>"
                                                     + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+", Description : "+lineItems.get(i).get("LineDescription");
                            break;
                        }

                    }

                    if(validationErrorMessage==null && (Double)lineItems.get(i).get("Quantity")==-1.0 && invoiceType.equalsIgnoreCase("po invoice") && docType.equalsIgnoreCase("Invoice")) {
                        validationErrorMessage = "Quantity is missing for the following Line Item :<br/>"
                                                 + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+", Description : "+lineItems.get(i).get("LineDescription");
                        break;
                    }
                    if(validationErrorMessage==null && (Double)lineItems.get(i).get("UnitPrice")==-1.0 && invoiceType.equalsIgnoreCase("po invoice") && docType.equalsIgnoreCase("Invoice")) {
                        validationErrorMessage = "Unit Price Amount is missing for the following Line Item :<br/>"
                                                 + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+", Description : "+lineItems.get(i).get("LineDescription");
                        break;
                    }
                    ///////////////////////////////////////////////////////////////////////
                    if(validationErrorMessage==null && (lineItems.get(i).get("LineDescription")==null || (lineItems.get(i).get("LineDescription")!=null && lineItems.get(i).get("LineDescription").toString().trim().equals(""))) ) {
                        validationErrorMessage = "Line description is missing for the following Line Item :<br/>"
                                                 + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+")";
                        break;
                    }

                    if(validationErrorMessage==null && (lineItems.get(i).get("TaxAmountLineitem")==null || (lineItems.get(i).get("TaxAmountLineitem")!=null && lineItems.get(i).get("TaxAmountLineitem").toString().trim().equals(""))) ) {
                        validationErrorMessage = "Tax amount is missing for the following Line Item :<br/>"
                                                 + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+")";
                        break;
                    }
                    //923018-New validation message on quantity ,unit price and line Total
                    if(validationErrorMessage==null && !((lineItems.get(i).get("UnitPrice")==null  && ((String)lineItems.get(i).get("UnitPrice")).trim().equals("") ) && (lineItems.get(i).get("Quantity")==null && ((String)lineItems.get(i).get("Quantity")).trim().equals("")  ) && (lineItems.get(i).get("LineTotalAmount")==null && ((String)lineItems.get(i).get("LineTotalAmount")).trim().equals("")  )) ) {

                        double lineItems_TotalAmount = (Double)lineItems.get(i).get("LineTotalAmount");
                        double lineItems_Quantity = (Double)lineItems.get(i).get("Quantity");
                        double lineItems_Unit = (Double)lineItems.get(i).get("UnitPrice");
//                        double match_Total=lineItems_Quantity*lineItems_Unit;
                        double match_Total=customMultiply(lineItems_Quantity, lineItems_Unit);
                        System.out.println("match_Total ::: "+match_Total+"  Line Total **: "+lineItems_TotalAmount+", lineItems_Quantity ** : "+ lineItems_Quantity+", lineItems_Unit **: "+lineItems_Unit);
                        if(match_Total != lineItems_TotalAmount){
                        validationErrorMessage = "Line Total should match to Unit Price*Quantity in "
                                                 + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"));
                                                     break;
                                                 }

                    }
                    //923018-New validation message on quantity ,unit price and line Total
                    //////////////////////////////////////////

                    if(validationErrorMessage==null && (lineItems.get(i).get("TaxRateCode")==null || (lineItems.get(i).get("TaxRateCode")!=null && ((String)lineItems.get(i).get("TaxRateCode")).trim().equals("")))) {
                        if(validationErrorMessage==null && invoiceType.equalsIgnoreCase("non po invoice")) {
                            validationErrorMessage = "Tax Rate Code is missing for the following Line Item :<br/>"
                                                     + "Line Number : "+(Long)(lineItems.get(i).get("LineNumber"))+", Description : "+lineItems.get(i).get("LineDescription");
                            break;
                        }

                    }
                }
            }

            if(validationErrorMessage!=null) {
                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                validationErrorPopup.show(hints);
                this.validationErrorMessage.setValue(validationErrorMessage);
                return false;

            }else{
              /*  if(resolveExpression("#{bindings.CertifierRejReason.inputValue}") != null)
                    rejReason = resolveExpression("#{bindings.CertifierRejReason.inputValue}").toString();
                if(resolveExpression("#{bindings.ApOperationComments.inputValue}") != null)
                    comments = resolveExpression("#{bindings.ApOperationComments.inputValue}").toString();
                if(resolveExpression("#{bindings.CertifierRejComments.inputValue}") != null)
                    certComments = resolveExpression("#{bindings.CertifierRejComments.inputValue}").toString();  */
               /* if((needValidation) && (reasonId!= null && (!reasonId.equals("16") && !reasonId.equals("20")) ))  {
                        System.out.println("setting the reason code and type for NONE");
                        reasonId ="14";
                        reasonTypeId ="29";

                 } */
               //System.out.println("Cerfier name tosave is"+certName);
               System.out.println("Certifier no tosave is"+certNo);

                /***********************Do save operation ******************************/


             /* 27th Aug  doSaveOperation(supName, (siteId==-1?"":(""+siteId)), invNum,taxRegNum,poNum,(lineTotal==Double.MIN_VALUE?"":formattedDecimalNumber(lineTotal)), certName,currency,invDate,
                               (taxTotal==Double.MIN_VALUE?"":formattedDecimalNumber(taxTotal)), (headerTotal==Double.MIN_VALUE?"":formattedDecimalNumber(headerTotal)), certEmail,rejReason,comments,certComments, reasonId, reasonTypeId,
                               statusStr, docType, invoiceType, operatingUnit,invalidReasonType,invalidReason, needValidation,certNo);*/

                /* Saving to comments table on submit button from AP Operations page*/

                /*if(description!= null && needValidation)
                {
                     saveAPComments(getInvoiceId(),commentsDate,description,name);


                }*/

                /*Checkbox changes*/

                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("natureofEXP_flag" ,natureOfEXpSOC.getValue());
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("mpa_flag",mpaC.getValue());
               // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc1",pc1.getValue());
                //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",pc2.getValue());
                //System.out.println("pc3.getValue() 1 ::"+pc3.getValue());
                //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",pc3.getValue());
                System.out.println("mpaC.getValue() ::"+mpaC.getValue());

//                System.out.println("radio_paymentTypes.getValue() ::"+ radio_paymentTypes.getValue()!=null?radio_paymentTypes.getValue().toString():" Null");

                if (getUrlOrg().equalsIgnoreCase("JS")) {
                                    if (radio_paymentTypes.getValue() != null && radio_paymentTypes.getValue()
                                                                                                   .toString()
                                                                                                   .equals("WIRE")) {
                                        AdfFacesContext.getCurrentInstance()
                                                       .getPageFlowScope()
                                                       .put("pc2", true);
                                        AdfFacesContext.getCurrentInstance()
                                                       .getPageFlowScope()
                                                       .put("pc3", false);

                                    }
                                } else {
                if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("WIRE")){
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",true);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);

                }else  if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",true);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
                }
                                }
                if(mpaC.getValue()!=null && mpaC.getValue().toString().equals("false")){
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
                }
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",certifier_sbc.getValue());



                       BindingContext bctx = BindingContext.getCurrent();
                       BindingContainer bindings = bctx.getCurrentBindingsEntry();
                       OperationBinding operationBinding =  bindings.getOperationBinding("saveAllFormDetails");
                       System.out.println("saveAllFormDetails invoiceid : "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+"On saving from cert name ::"+certNameIt.getValue() +"-----supplier name  and currency -----"+supNameIt.getValue()
                                          +"---curr----"+
                                          currencyIt.getValue()  +"org id ::"+orgIdIt.getValue() +" AdfFacesContext.getCurrentInstance().getPageFlowScope().put(\"certifier_flag_DB\")"+ AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB"));

                       operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
                       operationBinding.getParamsMap().put("supName",supNameIt.getValue());
                       //operationBinding.getParamsMap().put("currency", currencyIt.getValue());
                       operationBinding.getParamsMap().put("currency",certifier_sbc.getValue());
                       operationBinding.getParamsMap().put("employeeNo", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                       operationBinding.getParamsMap().put("siteId",orgIdIt.getValue());



                       operationBinding.execute();



                if(description!= null)
                                   {
                                     //   saveAPComments(getInvoiceId(),commentsDate,description,name);
                                   }







                dbCommit();
               //needValidation=false;
                if(!needValidation) {
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    validationErrorPopup.show(hints);
                    this.validationErrorMessage.setValue("Record has been Saved Successfully");


                    //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("showSavedSuccessMsg","Record has been Saved Successfully");
                    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("showSavedSuccessMsg","Record has been Saved Successfully");
                    System.out.println("inside save click showSavedSuccessMsg ::"+FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("showSavedSuccessMsg"));

                    FacesContext fctx = FacesContext.getCurrentInstance();
                    ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

                    String myJavaScriptCode = "location.reload();";
                    //erks.addScript(fctx, myJavaScriptCode );
                    //refreshPage();

                    //To-DO
                    //set pfs var : showSavedSuccessMsg
                    //javascript code to refresh the page
                }

                System.out.println("Disabling submit button before returning validateanddosave true "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());


                return true;
            }
       }
        catch(Exception e) {
            e.printStackTrace();
        }finally{
        if(lineItemItr!=null) {
            try {
                lineItemItr.closeRowSetIterator();
            } catch(Exception ex) {
                ex.printStackTrace();

        }
        }
    }
    System.out.println("End: validateAndDoSaveOperation "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
    return false;

    }

    public static double customMultiply(double multiplicand, double multiplier){
        BigDecimal b1=new BigDecimal(Double.toString(multiplicand));
        BigDecimal b2=new BigDecimal(Double.toString(multiplier));
        BigDecimal a=b1.multiply(b2);
        a=a.setScale(2, RoundingMode.HALF_EVEN);
        System.out.println("CustomMultiply : "+a.doubleValue());
       return a.doubleValue();
    }

    private void dbCommit() {
        System.out.println("Start dbCommit");
        try {
            BindingContext bctx = BindingContext.getCurrent();
            BindingContainer bindings = bctx.getCurrentBindingsEntry();
            OperationBinding operationBinding =  bindings.getOperationBinding("Commit");
            operationBinding.execute();
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End dbCommit");
    }

    public static void setExpressionResetValue(String expression,
                                              Object newValue) {
        FacesContext ctx = FacesContext.getCurrentInstance();
        Application app = ctx.getApplication();
        ExpressionFactory elFactory = app.getExpressionFactory();
        ELContext elContext = ctx.getELContext();
        ValueExpression valueExp = elFactory.createValueExpression(elContext, expression, Object.class);
        valueExp.setValue(elContext, newValue);
    }




    public void onchangeCertificationBox_20thfeb(ValueChangeEvent valueChangeEvent) {
            System.out.println("Value of  onchangeCertificationBox"+valueChangeEvent.getNewValue());



            System.out.println("Invoice number :: "+invNumIt.getValue());
            String value =valueChangeEvent.getNewValue().toString();

            String certNameValue =certNameIt.getValue()!=null ? certNameIt.getValue().toString() : null ;
            String  certEmailValue =  certEmailIt.getValue()!=null ? certEmailIt.getValue().toString() : null ;
            String certifierApproveCommentsValue =    certifierApproveComments.getValue()!=null ? certifierApproveComments.getValue().toString() : null ;
            String employeeNoItValue  = employeeNoIt.getValue()!=null ? employeeNoIt.getValue().toString() : null ;
            String alternateApproverItValue = alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() : null;
            String certifier_mail=null;
            String certifier_name =null;
            /*Added on 16th jan*/





            if(value.equals("true")){
            System.out.println("Setting NO PO Invoice   ");
                invoiceTypeSoc.setValue("Non PO Invoice");
                employeeNoIt.setVisible(true);
                employeeNoIt.setRendered(true);

            }else{

            }




            BindingContext context = BindingUtils.getBindingContext();
            DCBindingContainer bindings =
                        (DCBindingContainer)context.getCurrentBindingsEntry();
            DCIteratorBinding iterator;
            RowSetIterator rowSetIterator= null;
            try{
            iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
             rowSetIterator= iterator.getViewObject().createRowSetIterator(null);



            int i = 0;
            int recDeleted = 0;
            while (rowSetIterator.hasNext())
                  {
                       Row r = rowSetIterator.next();
                String certifier_flag = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
                       //attr8 is used for certification flag
                     // r.getAttribute(arg0)

                     if(value == null || value.equals("false")){
                       System.out.println("Setting certifier related fields as disabled");
                         System.out.println("printing the value of gl no  :::::::::"+r.getAttribute("GlNo"));
                        /* r.setAttribute("GlNo", "");
                         r.setAttribute("TaskNo", "");
                         r.setAttribute("ExpinditureOrg", "");
                         r.setAttribute("ProjectNo", "");
                         r.setAttribute("ExpenditureDate", "");*/

                         /*GLCodeIT.setRendered(true);
                         projectNoIT.setRendered(true);
                         GLCodeIT.setVisible(false);
                         projectNoIT.setVisible(false);*/

                         projectNoIT.setValue("");
                         projectColumn.setVisible(false);
                         projectColumn.setRendered(false);
                         taskNoIT.setValue("");
                         taskNo_column.setVisible(false);
                         expOrgIT.setValue("");
                         expOrg_column.setVisible(false);;
                         expDate_column.setVisible(false);
                         taskNo_column.setRendered(false);
                         expOrg_column.setRendered(false);
                         expDateIT.setValue("");
                         expDate_column.setRendered(false);
                         GLCodeIT.setValue("");
                         glcode_column.setRendered(false);
                         glcode_column.setVisible(false);

                         expTypeIt.setValue("");
                         expType_column.setRendered(false);
                         expType_column.setVisible(false);


                         recCode.setValue("");
                         reccode_column.setRendered(false);
                         reccode_column.setVisible(false);
                         if(invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))
                            ||(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice"))){
                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(true);
                         poLineNum_column.setRendered(true);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(true);
                         linePoNum_column.setRendered(true);
                         }
                        /* projectNoIT.setDisabled(true);
                         GLCodeIT.setDisabled(true);
                         taskNoIT.setDisabled(true);
                         expOrgIT.setDisabled(true);
                         expDateIT.setDisabled(true);*/



                     }else{

                        /* GLCodeIT.setRendered(true);
                         projectNoIT.setRendered(true);
                         GLCodeIT.setVisible(true);
                         projectNoIT.setVisible(true);*/



                        if((
                           ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null &&
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("false")))
                            ){
                            System.out.println(" keeping glcode as it is:::");
                            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);

                           }

                        else{

                        System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                        r.setAttribute("GlNo", "");
                     r.setAttribute("TaskNo", "");
                     r.setAttribute("ExpinditureOrg", "");
                     r.setAttribute("ProjectNo", "");
                     r.setAttribute("ExpenditureDate", "");
                        }
                         System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                         GLCodeIT.setValue("");
                         projectNoIT.setValue("");
                         expDateIT.setValue("");
                         taskNoIT.setValue("");
                         expOrgIT.setValue("");
                         recCode.setValue("");

                         projectColumn.setVisible(true);
                         projectColumn.setRendered(true);

                         taskNo_column.setVisible(true);;
                         expOrg_column.setVisible(true);;
                         expDate_column.setVisible(true);
                         taskNo_column.setRendered(true);
                         expOrg_column.setRendered(true);
                         expDate_column.setRendered(true);
                         glcode_column.setRendered(true);
                         glcode_column.setVisible(true);
                         reccode_column.setRendered(true);
                         reccode_column.setVisible(true);
                         expTypeIt.setValue("");
                         expType_column.setRendered(true);
                         expType_column.setVisible(true);


                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(false);
                         poLineNum_column.setRendered(false);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(false);
                         linePoNum_column.setRendered(false);



                        System.out.println("before Setting certifier related fields as enabled" +GLCodeIT.isDisabled());
                        /* projectNoIT.setDisabled(false);
                         GLCodeIT.setDisabled(false);*/
                         System.out.println("After Setting certifier related fields as enabled" +GLCodeIT.isDisabled());


                     }

                      AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                  }
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode","true");
                System.out.println("partial trigger header fields"+certEmailIt.isRendered() +"---"+certEmailIt.isVisible());


















            }catch(Exception e){
                e.printStackTrace();

            } finally{
                if(rowSetIterator
                   !=null){
                       rowSetIterator.closeRowSetIterator();;
                   }

            }
            System.out.println("refreshing invoiceTypeSoc ");
            AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);


            if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){

                System.out.println("Setting  PO Invoice   ");
               // employeeNoIt.setVisible(false);
                //employeeNoIt.setRendered(false);
                employeeNoIt.setDisabled(true);

            }else{
                System.out.println("Setting  NO Invoice   ");
                employeeNoIt.setVisible(true);
                employeeNoIt.setRendered(true);
                //employeeNoIt.setDisabled(false);
            }

            if(value.equals("true")){
                certEmailIt.setValue("test_mail");
                employeeNoIt.setValue("1234");
                certNameIt.setValue("test_name");
                poNumIt.setDisabled(true);
                poNum_plm.setDisabled(true);

            }else{


                certEmailIt.setValue("");
                employeeNoIt.setValue("");
                certNameIt.setValue("");

                poNumIt.setDisabled(false);
                poNum_plm.setDisabled(false);
            }



            System.out.println("Refreshing certNameIt   ");

            System.out.println("certEmailIt----"+certEmailIt.getValue());
            System.out.println("employeeNoIt----"+employeeNoIt.getValue());
            System.out.println("employeeNoIt----"+certNameIt.getValue());




            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);


            AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);

        }

    public boolean getLineTypeColumnStatus(){
           if(getUrlOrg().equalsIgnoreCase("QF")){
               lineTypeColumnStatus=true;
           }
           else{
               lineTypeColumnStatus=false;
           }
           return lineTypeColumnStatus;
       }

    public boolean getBankAccountColumnStatus() {
            if (getUrlOrg().equalsIgnoreCase("QF")) {
                bankAccountColumnStatus = false;
            } else {
                bankAccountColumnStatus = true;
            }
//            System.out.println("BankAccountColumnStatus : " + bankAccountColumnStatus);
            return bankAccountColumnStatus;
        }


    public void onchangeCertificationBox(ValueChangeEvent valueChangeEvent) {
            System.out.println("Value of  onchangeCertificationBox"+valueChangeEvent.getNewValue());



            System.out.println("Invoice number :: "+invNumIt.getValue());
            String value =valueChangeEvent.getNewValue().toString();

            String certNameValue =certNameIt.getValue()!=null ? certNameIt.getValue().toString() : null ;
            String  certEmailValue =  certEmailIt.getValue()!=null ? certEmailIt.getValue().toString() : null ;
            String certifierApproveCommentsValue =    certifierApproveComments.getValue()!=null ? certifierApproveComments.getValue().toString() : null ;
            String employeeNoItValue  = employeeNoIt.getValue()!=null ? employeeNoIt.getValue().toString() : null ;
            String alternateApproverItValue = alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() : null;
            String certifier_mail=null;
            String certifier_name =null;
            GLCodeIT =( RichInputText) FacesContext.getCurrentInstance().getViewRoot().findComponent("it1"); //Added by raha for the overseseas 25 line items issue 18*12*2019
            /*Added on 16th jan*/





            if(value.equals("true")){
            System.out.println("Setting NO PO Invoice   ");
                invoiceTypeSoc.setValue("Non PO Invoice");
                employeeNoIt.setVisible(true);
                employeeNoIt.setRendered(true);

            }else{

            }




            BindingContext context = BindingUtils.getBindingContext();
            DCBindingContainer bindings =
                        (DCBindingContainer)context.getCurrentBindingsEntry();
            DCIteratorBinding iterator;
            RowSetIterator rowSetIterator= null;
            try{
            iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
             rowSetIterator= iterator.getViewObject().createRowSetIterator(null);
                if(value.equals("false") ){
                System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pageload\") "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload"));

                if(invoiceTypeSoc.getValue()!=null && !invoiceTypeSoc.getValue().toString().equals("Non PO Invoice") ){

                    poNumIt.setValue("");
                    poNumIt.setDisabled(false);
                    poNum_plm.setDisabled(false);
                }
                  /*added on 16thjan**/
                  /*  if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null){
                        System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");

                    }*/


                    if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                         &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                       ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                       && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                        ){
                        System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");


                          /* certNameIt.setValue("");
                           employeeNoIt.setValue("");
                           certEmailIt.setValue("");*/
                       }


                    else{certNameIt.setValue("");
                    certNameIt.setVisible(true);
                    certNameIt.setRendered(true);
                    certEmailIt.setValue("");
                    employeeNoIt.setValue("");

                   //employeeNoIt.setDisabled(false);
                   certEmailIt.setDisabled(false);
                   certNameIt.setDisabled(false);
                   certifier_commandImageLink.setDisabled(false);


                    //certifierApproveComments.setValue("");
                    //alternateApproverIt.setValue("");

                    }
                    //certEmailIt.setVisible(false);
                    //certEmailIt.setRendered(false);
                    //certifierApproveComments.setValue("");
                   /* certifierApproveComments.setVisible(false);
                    certifierApproveComments.setRendered(false);*/
                     //certifier_plm.setVisible(false);
                     //certifier_plm.setRendered(false);
                     //noteToApprv_plm.setRendered(false);
                     //noteToApprv_plm.setVisible(false);
                     System.out.println("Disablinf  alternateApproverIt");
                    //alternateApproverIt.setValue("");
                    //alternateApprover_plm.setVisible(false);
                    //alternateApprover_plm.setRendered(false);
                    searchAltApproverLink.setDisabled(true);
                    alternateApproverIt.setDisabled(true);
                    certifierApproveComments.setDisabled(true);
                    certifierApproveLink.setDisabled(true);
                    alternateapprovNoIt.setValue("");
                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");

                  /*  certEmailIt.setValue("");
                    employeeNoIt.setValue("");
                    certNameIt.setValue("");*/



                    System.out.println("Disabling certifier realted all kinds of header fields");
                }else{
                    //String certifier_name=null;
                    //String certifier_mail =null;
                    String certifier_emp =null;
                    System.out.println("Certifier name and certifier email");
                    if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                         &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                       ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                       && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                        ){
                        System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");
                    }
                    else{


                    //Logic for auto population
                   // certNameIt.setValue("");
                   // certEmailIt.setValue("");
                   System.out.println("User Name : " + ADFContext.getCurrent()
                                                                                     .getPageFlowScope()
                                                                                     .get("userId")
                                                                                     .toString());
                        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                        ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                        ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");

                       certifierNameVO.applyViewCriteria(vc);
                       //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                       certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                                );
                       certifierNameVO.setNamedWhereClauseParam("bindName", null);
                       certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                        certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                            System.out.println("Query : " + certifierNameVO.getQuery());
                       certifierNameVO.executeQuery();
                       System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO.getEstimatedRowCount());

                        while (certifierNameVO.hasNext()) {
                          Row row = certifierNameVO.next(); // Get the next row in the result set.
                          if(certifierNameVO.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO.getCurrentRow().getAttribute("LastName")!=null){
                              String lastname =" "+certifierNameVO.getCurrentRow().getAttribute("LastName");
                              certifier_name = certifierNameVO.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                          }

                          certifier_mail =certifierNameVO.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                          certifier_emp =certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;
                        }



                        certifierApproveComments.setValue("");
                        alternateApproverIt.setValue("");
                        certNameIt.setValue(certifier_name);
                        certEmailIt.setValue(certifier_mail);
                        employeeNoIt.setValue(certifier_emp);
                        //employeeNoIt.setDisabled(false);

                        certEmailIt.setDisabled(false);
                        certNameIt.setDisabled(false);
                         certifier_commandImageLink.setDisabled(false);


                        searchAltApproverLink.setDisabled(false);
                        //alternateApproverIt.setDisabled(false);
                        certifierApproveComments.setDisabled(false);
                        certifierApproveLink.setDisabled(false);

                        alternateapprovNoIt.setValue("");
                        certifierApproveComments.setValue("");
                        alternateApproverIt.setValue("");
                    }
                   /* certNameIt.setValue(certifier_name);
                    certEmailIt.setValue(certifier_mail);
                    employeeNoIt.setValue(certifier_emp);*/
                    certNameIt.setVisible(true);
                    certNameIt.setRendered(true);

                    certEmailIt.setVisible(true);
                    certEmailIt.setRendered(true);
                    //employeeNoIt.setDisabled(false);
                    certEmailIt.setDisabled(false);
                    certNameIt.setDisabled(false);
                    certifier_commandImageLink.setDisabled(false);
                    certifierApproveComments.setVisible(true);
                    certifierApproveComments.setRendered(true);
                    certifier_plm.setVisible(true);
                    certifier_plm.setRendered(true);
                    noteToApprv_plm.setRendered(true);
                    noteToApprv_plm.setVisible(true);

                    alternateApprover_plm.setVisible(true);
                    alternateApprover_plm.setRendered(true);

                    certifier_commandImageLink.setDisabled(false);
                    searchAltApproverLink.setDisabled(false);
                    //alternateApproverIt.setDisabled(false);
                    certifierApproveComments.setDisabled(false);
                    certifierApproveLink.setDisabled(false);
                    poNumIt.setValue("");
                    poNumIt.setDisabled(true);
                    poNum_plm.setDisabled(true);

                    alternateapprovNoIt.setValue("");
                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");
                    System.out.println("enabling certifier realted all kinds of header fields");

                }


            int i = 0;
            int recDeleted = 0;
            while (rowSetIterator.hasNext())
                  {
                       Row r = rowSetIterator.next();
                String certifier_flag = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
                       //attr8 is used for certification flag
                     // r.getAttribute(arg0)

                     if(value == null || value.equals("false")){
                       System.out.println("Setting certifier related fields as disabled");
                         System.out.println("printing the value of gl no  :::::::::"+r.getAttribute("GlNo"));
                        /* r.setAttribute("GlNo", "");
                         r.setAttribute("TaskNo", "");
                         r.setAttribute("ExpinditureOrg", "");
                         r.setAttribute("ProjectNo", "");
                         r.setAttribute("ExpenditureDate", "");*/

                         /*GLCodeIT.setRendered(true);
                         projectNoIT.setRendered(true);
                         GLCodeIT.setVisible(false);
                         projectNoIT.setVisible(false);*/

                         projectNoIT.setValue("");
                         projectColumn.setVisible(false);
                         projectColumn.setRendered(false);
                         taskNoIT.setValue("");
                         taskNo_column.setVisible(false);
                         expOrgIT.setValue("");
                         expOrg_column.setVisible(false);;
                         expDate_column.setVisible(false);
                         taskNo_column.setRendered(false);
                         expOrg_column.setRendered(false);
                         expDateIT.setValue("");
                         expDate_column.setRendered(false);
                         GLCodeIT.setValue("");
                         glcode_column.setRendered(false);
                         glcode_column.setVisible(false);

                         expTypeIt.setValue("");
                         expType_column.setRendered(false);
                         expType_column.setVisible(false);


                         recCode.setValue("");
                         reccode_column.setRendered(false);
                         reccode_column.setVisible(false);
                         if(invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))
                            ||(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice"))){
                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(true);
                         poLineNum_column.setRendered(true);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(true);
                         linePoNum_column.setRendered(true);
                         }
                        /* projectNoIT.setDisabled(true);
                         GLCodeIT.setDisabled(true);
                         taskNoIT.setDisabled(true);
                         expOrgIT.setDisabled(true);
                         expDateIT.setDisabled(true);*/



                     }else{

                        /* GLCodeIT.setRendered(true);
                         projectNoIT.setRendered(true);
                         GLCodeIT.setVisible(true);
                         projectNoIT.setVisible(true);*/



                        if((
                           ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null &&
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("false")))
                            ){
                            System.out.println(" keeping glcode as it is:::");
                            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);

                           }

                        else{

                        System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                        r.setAttribute("GlNo", "");
                     r.setAttribute("TaskNo", "");
                     r.setAttribute("ExpinditureOrg", "");
                     r.setAttribute("ProjectNo", "");
                     r.setAttribute("ExpenditureDate", "");
                        }
                         System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                         GLCodeIT.setValue("");
                         projectNoIT.setValue("");
                         expDateIT.setValue("");
                         taskNoIT.setValue("");
                         expOrgIT.setValue("");
                         recCode.setValue("");

                         projectColumn.setVisible(true);
                         projectColumn.setRendered(true);

                         taskNo_column.setVisible(true);;
                         expOrg_column.setVisible(true);;
                         expDate_column.setVisible(true);
                         taskNo_column.setRendered(true);
                         expOrg_column.setRendered(true);
                         expDate_column.setRendered(true);
                         glcode_column.setRendered(true);
                         glcode_column.setVisible(true);
                         reccode_column.setRendered(true);
                         reccode_column.setVisible(true);
                         expTypeIt.setValue("");
                         expType_column.setRendered(true);
                         expType_column.setVisible(true);


                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(false);
                         poLineNum_column.setRendered(false);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(false);
                         linePoNum_column.setRendered(false);



                        System.out.println("before Setting certifier related fields as enabled" +GLCodeIT.isDisabled());
                        /* projectNoIT.setDisabled(false);
                         GLCodeIT.setDisabled(false);*/
                         System.out.println("After Setting certifier related fields as enabled" +GLCodeIT.isDisabled());


                     }

                      AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                  }
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode","true");
                System.out.println("partial trigger header fields"+certEmailIt.isRendered() +"---"+certEmailIt.isVisible());





                if((value != null && value.equals("true")) &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){


                    if(certNameValue!=null &&  certEmailValue!=null ){
                        System.out.println("-----------------Settinggggggggggggg1----------------------1");
                        certEmailIt.setValue(certEmailValue);
                        certNameIt.setValue(certNameValue);

                        }if(certifierApproveCommentsValue!=null){
                            System.out.println("-----------------Settinggggggggggggg2----------------------1");
                           certifierApproveComments.setValue(certifierApproveCommentsValue);
                            employeeNoIt.setValue(employeeNoItValue);

                        }

                        if(employeeNoItValue!=null ){
                            System.out.println("-----------------Settinggggggggggggg3----------------------1")  ;
                           employeeNoIt.setValue(employeeNoItValue );
                        }

                       if(alternateApproverIt!=null){
                           System.out.println("-----------------Settinggggggggggggg4----------------------1");
                           alternateApproverIt.setValue(alternateApproverItValue);

                       }
                   }






                if(value != null && value.equals("true")){

                    System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
                    //String certifier_mail=null;
                    //String certifier_name =null;
                    String certifier_emp = null;
                    DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                           DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                           ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                           ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                          certifierNameVO1.applyViewCriteria(vc);
                          //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                          certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                                   );
                          certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                          certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
                    certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                    System.out.println("Query : " + certifierNameVO1.getQuery());
                          certifierNameVO1.executeQuery();
                          System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                           while (certifierNameVO1.hasNext()) {
                             Row row = certifierNameVO1.next(); // Get the next row in the result set.
                             if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                                 String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                                 certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                             }

                             certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                             certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                             System.out.println("certifier_mail---------"+certifier_mail);
                             System.out.println("certifier_name---------"+certifier_name);


                           }



                          // certifierApproveComments.setValue("");
                          // alternateApproverIt.setValue("");
                   certNameIt.setValue(certifier_name);
                   certEmailIt.setValue(certifier_mail);
                   employeeNoIt.setValue(certifier_emp);
                   //employeeNoIt.setDisabled(false);
                   //923018- Alice Yin -Start
                   // certEmailIt.setDisabled(false);
                   // certNameIt.setDisabled(false);
                    //certifier_commandImageLink.setDisabled(false);
                    certEmailIt.setDisabled(true);
                    certNameIt.setDisabled(true);
                    certifier_commandImageLink.setDisabled(true);
                    //923018- Alice Yin -End

                }



                //alternateApproverIt.setValue("");


                AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);
                AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
                 //AdfFacesContext.getCurrentInstance().addPartialTarget(pgInvoiceDets);
                 AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);

                AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
               AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
               AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
                AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);



            }catch(Exception e){
                e.printStackTrace();

            } finally{
                if(rowSetIterator
                   !=null){
                       rowSetIterator.closeRowSetIterator();;
                   }

            }
            System.out.println("refreshing invoiceTypeSoc 1 new");
            AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);


            if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){

                System.out.println("Setting  PO Invoice   ");
               // employeeNoIt.setVisible(false);
                //employeeNoIt.setRendered(false);
                employeeNoIt.setDisabled(true);

            }else{
                System.out.println("Setting  NO Invoice   ");
                employeeNoIt.setVisible(true);
                employeeNoIt.setRendered(true);
                //employeeNoIt.setDisabled(false);
            }

            if(value.equals("true")){

                poNumIt.setDisabled(true);
                poNum_plm.setDisabled(true);

            }else if(value.equals("false") && invoiceTypeSoc.getValue()!=null && !invoiceTypeSoc.getValue().toString().equals("Non PO Invoice") )
            {

                poNumIt.setDisabled(false);
                poNum_plm.setDisabled(false);

            }else if(value.equals("false") && invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("Non PO Invoice")){
                //923018- Alice Yin -Start
                //System.out.println("Setting  Disabled   ");
                certNameIt.setValue("");
                certEmailIt.setValue("");
                employeeNoIt.setValue("");
                 certEmailIt.setDisabled(false);
                 certNameIt.setDisabled(false);
                 certifier_commandImageLink.setDisabled(false);
                 //923018- Alice Yin -End
            }




          /* if(value != null && value.equals("true")){

                System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
                //String certifier_mail=null;
                //String certifier_name =null;
                String certifier_emp = null;
                DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                       DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                       ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                       ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                      certifierNameVO1.applyViewCriteria(vc);
                      //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                      certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                               );
                      certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                      certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
                      certifierNameVO1.executeQuery();
                      System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                       while (certifierNameVO1.hasNext()) {
                         Row row = certifierNameVO1.next(); // Get the next row in the result set.
                         if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                             String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                             certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                         }

                         certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                         certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                         System.out.println("certifier_mail22---------"+certifier_mail);
                         System.out.println("certifier_name 111---------"+certifier_name);


                       }
                AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);

            }
                else if(value != null && value.equals("false")){
                           System.out.println("Clearing all certifier realteed fields") ;
                            certNameIt.setValue("");
                            employeeNoIt.setValue("");
                            certEmailIt.setValue("");

                            System.out.println("Refreshing inside---------------");
                            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                        }

            System.out.println("Here it goes again23341");





            System.out.println("certifier_mail1---------"+certifier_mail);
            System.out.println("certifier_name1---------"+certifier_name);
            certNameIt.setValue(certifier_name);
            certEmailIt.setValue(certifier_mail);
            System.out.println("Refreshingggg ----------------- email and name ");*/
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);


            AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);

        }







    public void onchangeCertificationBox_27thFeb(ValueChangeEvent valueChangeEvent) {
            System.out.println("Value of  onchangeCertificationBox"+valueChangeEvent.getNewValue());



            System.out.println("Invoice number :: "+invNumIt.getValue());
            String value =valueChangeEvent.getNewValue().toString();

            String certNameValue =certNameIt.getValue()!=null ? certNameIt.getValue().toString() : null ;
            String  certEmailValue =  certEmailIt.getValue()!=null ? certEmailIt.getValue().toString() : null ;
            String certifierApproveCommentsValue =    certifierApproveComments.getValue()!=null ? certifierApproveComments.getValue().toString() : null ;
            String employeeNoItValue  = employeeNoIt.getValue()!=null ? employeeNoIt.getValue().toString() : null ;
            String alternateApproverItValue = alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() : null;
            String certifier_mail=null;
            String certifier_name =null;
            /*Added on 16th jan*/





            if(value.equals("true")){
            System.out.println("Setting NO PO Invoice   ");
                invoiceTypeSoc.setValue("Non PO Invoice");
                employeeNoIt.setVisible(true);
                employeeNoIt.setRendered(true);

            }else{

            }




            BindingContext context = BindingUtils.getBindingContext();
            DCBindingContainer bindings =
                        (DCBindingContainer)context.getCurrentBindingsEntry();
            DCIteratorBinding iterator;
            RowSetIterator rowSetIterator= null;
            try{
            iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
             rowSetIterator= iterator.getViewObject().createRowSetIterator(null);
                if(value.equals("false")){
                System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pageload\") "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload"));

                    poNumIt.setValue("");
                    poNumIt.setDisabled(false);
                    poNum_plm.setDisabled(false);

                  /*added on 16thjan**/
                  /*  if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null){
                        System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");

                    }*/


                    if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                         &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                       ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                       && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                        ){
                        System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");


                          /* certNameIt.setValue("");
                           employeeNoIt.setValue("");
                           certEmailIt.setValue("");*/
                       }


                    else{certNameIt.setValue("");
                    certNameIt.setVisible(true);
                    certNameIt.setRendered(true);
                    certEmailIt.setValue("");
                    employeeNoIt.setValue("");

                   //employeeNoIt.setDisabled(false);
                   certEmailIt.setDisabled(false);
                   certNameIt.setDisabled(false);
                   certifier_commandImageLink.setDisabled(false);


                    //certifierApproveComments.setValue("");
                    //alternateApproverIt.setValue("");

                    }
                    //certEmailIt.setVisible(false);
                    //certEmailIt.setRendered(false);
                    //certifierApproveComments.setValue("");
                   /* certifierApproveComments.setVisible(false);
                    certifierApproveComments.setRendered(false);*/
                     //certifier_plm.setVisible(false);
                     //certifier_plm.setRendered(false);
                     //noteToApprv_plm.setRendered(false);
                     //noteToApprv_plm.setVisible(false);
                     System.out.println("Disablinf  alternateApproverIt");
                    //alternateApproverIt.setValue("");
                    //alternateApprover_plm.setVisible(false);
                    //alternateApprover_plm.setRendered(false);
                    searchAltApproverLink.setDisabled(true);
                    alternateApproverIt.setDisabled(true);
                    certifierApproveComments.setDisabled(true);
                    certifierApproveLink.setDisabled(true);
                    alternateapprovNoIt.setValue("");
                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");

                  /*  certEmailIt.setValue("");
                    employeeNoIt.setValue("");
                    certNameIt.setValue("");*/



                    System.out.println("Disabling certifier realted all kinds of header fields");
                }else{
                    //String certifier_name=null;
                    //String certifier_mail =null;
                    String certifier_emp =null;
                    System.out.println("Certifier name and certifier email");
                    if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                         &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                       ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                       && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                        ){
                        System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");
                    }
                    else{


                    //Logic for auto population
                   // certNameIt.setValue("");
                   // certEmailIt.setValue("");

                        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                        ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                        ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");

                       certifierNameVO.applyViewCriteria(vc);
                       //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                       certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                                );
                       certifierNameVO.setNamedWhereClauseParam("bindName", null);
                       certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                        certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                            System.out.println("Query : " + certifierNameVO.getQuery());
                       certifierNameVO.executeQuery();
                       System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO.getEstimatedRowCount());

                        while (certifierNameVO.hasNext()) {
                          Row row = certifierNameVO.next(); // Get the next row in the result set.
                          if(certifierNameVO.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO.getCurrentRow().getAttribute("LastName")!=null){
                              String lastname =" "+certifierNameVO.getCurrentRow().getAttribute("LastName");
                              certifier_name = certifierNameVO.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                          }

                          certifier_mail =certifierNameVO.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                          certifier_emp =certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;
                        }



                        certifierApproveComments.setValue("");
                        alternateApproverIt.setValue("");
                        certNameIt.setValue(certifier_name);
                        certEmailIt.setValue(certifier_mail);
                        employeeNoIt.setValue(certifier_emp);
                        //employeeNoIt.setDisabled(false);
                        certEmailIt.setDisabled(false);
                        certNameIt.setDisabled(false);
                        certifier_commandImageLink.setDisabled(false);
                        searchAltApproverLink.setDisabled(false);
                        //alternateApproverIt.setDisabled(false);
                        certifierApproveComments.setDisabled(false);
                        certifierApproveLink.setDisabled(false);

                        alternateapprovNoIt.setValue("");
                        certifierApproveComments.setValue("");
                        alternateApproverIt.setValue("");
                    }
                   /* certNameIt.setValue(certifier_name);
                    certEmailIt.setValue(certifier_mail);
                    employeeNoIt.setValue(certifier_emp);*/
                    certNameIt.setVisible(true);
                    certNameIt.setRendered(true);

                    certEmailIt.setVisible(true);
                    certEmailIt.setRendered(true);
                    //employeeNoIt.setDisabled(false);
                    certEmailIt.setDisabled(false);
                    certNameIt.setDisabled(false);
                    certifier_commandImageLink.setDisabled(false);
                    certifierApproveComments.setVisible(true);
                    certifierApproveComments.setRendered(true);
                    certifier_plm.setVisible(true);
                    certifier_plm.setRendered(true);
                    noteToApprv_plm.setRendered(true);
                    noteToApprv_plm.setVisible(true);

                    alternateApprover_plm.setVisible(true);
                    alternateApprover_plm.setRendered(true);

                    certifier_commandImageLink.setDisabled(false);
                    searchAltApproverLink.setDisabled(false);
                    //alternateApproverIt.setDisabled(false);
                    certifierApproveComments.setDisabled(false);
                    certifierApproveLink.setDisabled(false);
                    poNumIt.setValue("");
                    poNumIt.setDisabled(true);
                    poNum_plm.setDisabled(true);

                    alternateapprovNoIt.setValue("");
                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");
                    System.out.println("enabling certifier realted all kinds of header fields");

                }


            int i = 0;
            int recDeleted = 0;
            while (rowSetIterator.hasNext())
                  {
                       Row r = rowSetIterator.next();
                String certifier_flag = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
                       //attr8 is used for certification flag
                     // r.getAttribute(arg0)

                     if(value == null || value.equals("false")){
                       System.out.println("Setting certifier related fields as disabled");
                         System.out.println("printing the value of gl no  :::::::::"+r.getAttribute("GlNo"));
                        /* r.setAttribute("GlNo", "");
                         r.setAttribute("TaskNo", "");
                         r.setAttribute("ExpinditureOrg", "");
                         r.setAttribute("ProjectNo", "");
                         r.setAttribute("ExpenditureDate", "");*/

                         /*GLCodeIT.setRendered(true);
                         projectNoIT.setRendered(true);
                         GLCodeIT.setVisible(false);
                         projectNoIT.setVisible(false);*/

                         projectNoIT.setValue("");
                         projectColumn.setVisible(false);
                         projectColumn.setRendered(false);
                         taskNoIT.setValue("");
                         taskNo_column.setVisible(false);
                         expOrgIT.setValue("");
                         expOrg_column.setVisible(false);;
                         expDate_column.setVisible(false);
                         taskNo_column.setRendered(false);
                         expOrg_column.setRendered(false);
                         expDateIT.setValue("");
                         expDate_column.setRendered(false);
                         GLCodeIT.setValue("");
                         glcode_column.setRendered(false);
                         glcode_column.setVisible(false);

                         expTypeIt.setValue("");
                         expType_column.setRendered(false);
                         expType_column.setVisible(false);


                         recCode.setValue("");
                         reccode_column.setRendered(false);
                         reccode_column.setVisible(false);
                         if(invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))
                            ||(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice"))){
                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(true);
                         poLineNum_column.setRendered(true);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(true);
                         linePoNum_column.setRendered(true);
                         }
                        /* projectNoIT.setDisabled(true);
                         GLCodeIT.setDisabled(true);
                         taskNoIT.setDisabled(true);
                         expOrgIT.setDisabled(true);
                         expDateIT.setDisabled(true);*/



                     }else{

                        /* GLCodeIT.setRendered(true);
                         projectNoIT.setRendered(true);
                         GLCodeIT.setVisible(true);
                         projectNoIT.setVisible(true);*/



                        if((
                           ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null &&
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("false")))
                            ){
                            System.out.println(" keeping glcode as it is:::");
                            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);

                           }

                        else{

                        System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                        r.setAttribute("GlNo", "");
                     r.setAttribute("TaskNo", "");
                     r.setAttribute("ExpinditureOrg", "");
                     r.setAttribute("ProjectNo", "");
                     r.setAttribute("ExpenditureDate", "");
                        }
                         System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                         GLCodeIT.setValue("");
                         projectNoIT.setValue("");
                         expDateIT.setValue("");
                         taskNoIT.setValue("");
                         expOrgIT.setValue("");
                         recCode.setValue("");

                         projectColumn.setVisible(true);
                         projectColumn.setRendered(true);

                         taskNo_column.setVisible(true);;
                         expOrg_column.setVisible(true);;
                         expDate_column.setVisible(true);
                         taskNo_column.setRendered(true);
                         expOrg_column.setRendered(true);
                         expDate_column.setRendered(true);
                         glcode_column.setRendered(true);
                         glcode_column.setVisible(true);
                         reccode_column.setRendered(true);
                         reccode_column.setVisible(true);
                         expTypeIt.setValue("");
                         expType_column.setRendered(true);
                         expType_column.setVisible(true);


                         linePONum_it.setValue("");
                         poLineNum_column.setVisible(false);
                         poLineNum_column.setRendered(false);
                         poLineNum_it.setValue("");
                         linePoNum_column.setVisible(false);
                         linePoNum_column.setRendered(false);



                        System.out.println("before Setting certifier related fields as enabled" +GLCodeIT.isDisabled());
                        /* projectNoIT.setDisabled(false);
                         GLCodeIT.setDisabled(false);*/
                         System.out.println("After Setting certifier related fields as enabled" +GLCodeIT.isDisabled());


                     }

                      AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                  }
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode","true");
                System.out.println("partial trigger header fields"+certEmailIt.isRendered() +"---"+certEmailIt.isVisible());





                if((value != null && value.equals("true")) &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){


                    if(certNameValue!=null &&  certEmailValue!=null ){
                        System.out.println("-----------------Settinggggggggggggg1----------------------1");
                        certEmailIt.setValue(certEmailValue);
                        certNameIt.setValue(certNameValue);

                        }if(certifierApproveCommentsValue!=null){
                            System.out.println("-----------------Settinggggggggggggg2----------------------1");
                           certifierApproveComments.setValue(certifierApproveCommentsValue);
                            employeeNoIt.setValue(employeeNoItValue);

                        }

                        if(employeeNoItValue!=null ){
                            System.out.println("-----------------Settinggggggggggggg3----------------------1")  ;
                           employeeNoIt.setValue(employeeNoItValue );
                        }

                       if(alternateApproverIt!=null){
                           System.out.println("-----------------Settinggggggggggggg4----------------------1");
                           alternateApproverIt.setValue(alternateApproverItValue);

                       }
                   }






                if(value != null && value.equals("true")){

                    System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
                    //String certifier_mail=null;
                    //String certifier_name =null;
                    String certifier_emp = null;
                    DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                           DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                           ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                           ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                          certifierNameVO1.applyViewCriteria(vc);
                          //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                          certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                                   );
                          certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                          certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
                    certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                    System.out.println("Query : " + certifierNameVO1.getQuery());
                          certifierNameVO1.executeQuery();
                          System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                           while (certifierNameVO1.hasNext()) {
                             Row row = certifierNameVO1.next(); // Get the next row in the result set.
                             if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                                 String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                                 certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                             }

                             certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                             certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                             System.out.println("certifier_mail---------"+certifier_mail);
                             System.out.println("certifier_name---------"+certifier_name);


                           }



                          // certifierApproveComments.setValue("");
                          // alternateApproverIt.setValue("");
                   certNameIt.setValue(certifier_name);
                   certEmailIt.setValue(certifier_mail);
                   employeeNoIt.setValue(certifier_emp);
                   //employeeNoIt.setDisabled(false);
                    certEmailIt.setDisabled(false);
                    certNameIt.setDisabled(false);
                    certifier_commandImageLink.setDisabled(false);

                }



                //alternateApproverIt.setValue("");


                AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);
                AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
                 //AdfFacesContext.getCurrentInstance().addPartialTarget(pgInvoiceDets);
                 AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);

                AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
               AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
               AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
                AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);



            }catch(Exception e){
                e.printStackTrace();

            } finally{
                if(rowSetIterator
                   !=null){
                       rowSetIterator.closeRowSetIterator();;
                   }

            }
            System.out.println("refreshing invoiceTypeSoc 1 new");
            AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);


            if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){

                System.out.println("Setting  PO Invoice   ");
               // employeeNoIt.setVisible(false);
                //employeeNoIt.setRendered(false);
                employeeNoIt.setDisabled(true);

            }else{
                System.out.println("Setting  NO Invoice   ");
                employeeNoIt.setVisible(true);
                employeeNoIt.setRendered(true);
                //employeeNoIt.setDisabled(false);
            }

            if(value.equals("true")){

                poNumIt.setDisabled(true);
                poNum_plm.setDisabled(true);

            }else{

                poNumIt.setDisabled(false);
                poNum_plm.setDisabled(false);
            }




          /* if(value != null && value.equals("true")){

                System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
                //String certifier_mail=null;
                //String certifier_name =null;
                String certifier_emp = null;
                DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                       DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                       ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                       ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                      certifierNameVO1.applyViewCriteria(vc);
                      //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                      certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                               );
                      certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                      certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
                      certifierNameVO1.executeQuery();
                      System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                       while (certifierNameVO1.hasNext()) {
                         Row row = certifierNameVO1.next(); // Get the next row in the result set.
                         if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                             String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                             certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                         }

                         certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                         certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                         System.out.println("certifier_mail22---------"+certifier_mail);
                         System.out.println("certifier_name 111---------"+certifier_name);


                       }
                AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);

            }
                else if(value != null && value.equals("false")){
                           System.out.println("Clearing all certifier realteed fields") ;
                            certNameIt.setValue("");
                            employeeNoIt.setValue("");
                            certEmailIt.setValue("");

                            System.out.println("Refreshing inside---------------");
                            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                        }

            System.out.println("Here it goes again23341");





            System.out.println("certifier_mail1---------"+certifier_mail);
            System.out.println("certifier_name1---------"+certifier_name);
            certNameIt.setValue(certifier_name);
            certEmailIt.setValue(certifier_mail);
            System.out.println("Refreshingggg ----------------- email and name ");*/
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);


            AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);

        }







    public void onchangeCertificationBox_26thFeb(ValueChangeEvent valueChangeEvent) {
        System.out.println("Value of  onchangeCertificationBox"+valueChangeEvent.getNewValue());



        System.out.println("Invoice number :: "+invNumIt.getValue());
        String value =valueChangeEvent.getNewValue().toString();

        String certNameValue =certNameIt.getValue()!=null ? certNameIt.getValue().toString() : null ;
        String  certEmailValue =  certEmailIt.getValue()!=null ? certEmailIt.getValue().toString() : null ;
        String certifierApproveCommentsValue =    certifierApproveComments.getValue()!=null ? certifierApproveComments.getValue().toString() : null ;
        String employeeNoItValue  = employeeNoIt.getValue()!=null ? employeeNoIt.getValue().toString() : null ;
        String alternateApproverItValue = alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() : null;
        String certifier_mail=null;
        String certifier_name =null;
        /*Added on 16th jan*/





        if(value.equals("true")){
        System.out.println("Setting NO PO Invoice   ");
            invoiceTypeSoc.setValue("Non PO Invoice");
            employeeNoIt.setVisible(true);
            employeeNoIt.setRendered(true);

        }else{

        }




        BindingContext context = BindingUtils.getBindingContext();
        DCBindingContainer bindings =
                    (DCBindingContainer)context.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
         rowSetIterator= iterator.getViewObject().createRowSetIterator(null);
            if(value.equals("false")){
            System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pageload\") "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload"));

                poNumIt.setValue("");
                poNumIt.setDisabled(false);
                poNum_plm.setDisabled(false);

              /*added on 16thjan**/
              /*  if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null){
                    System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");

                }*/


                if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                     &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                   ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                   && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                    ){
                    System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");


                      /* certNameIt.setValue("");
                       employeeNoIt.setValue("");
                       certEmailIt.setValue("");*/
                   }


                else{certNameIt.setValue("");
                certNameIt.setVisible(true);
                certNameIt.setRendered(true);
                certEmailIt.setValue("");
                employeeNoIt.setValue("");

               //employeeNoIt.setDisabled(false);
               certEmailIt.setDisabled(false);
               certNameIt.setDisabled(false);
               certifier_commandImageLink.setDisabled(false);


                //certifierApproveComments.setValue("");
                //alternateApproverIt.setValue("");

                }
                //certEmailIt.setVisible(false);
                //certEmailIt.setRendered(false);
                //certifierApproveComments.setValue("");
               /* certifierApproveComments.setVisible(false);
                certifierApproveComments.setRendered(false);*/
                 //certifier_plm.setVisible(false);
                 //certifier_plm.setRendered(false);
                 //noteToApprv_plm.setRendered(false);
                 //noteToApprv_plm.setVisible(false);
                 System.out.println("Disablinf  alternateApproverIt");
                //alternateApproverIt.setValue("");
                //alternateApprover_plm.setVisible(false);
                //alternateApprover_plm.setRendered(false);
                searchAltApproverLink.setDisabled(true);
                alternateApproverIt.setDisabled(true);
                certifierApproveComments.setDisabled(true);
                certifierApproveLink.setDisabled(true);
                alternateapprovNoIt.setValue("");
                certifierApproveComments.setValue("");
                alternateApproverIt.setValue("");

                certEmailIt.setValue("");
                employeeNoIt.setValue("");
                certNameIt.setValue("");



                System.out.println("Disabling certifier realted all kinds of header fields");
            }else{
                //String certifier_name=null;
                //String certifier_mail =null;
                String certifier_emp =null;
                System.out.println("Certifier name and certifier email");
                if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                     &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                   ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                   && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                    ){
                    System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");
                }
                else{


                //Logic for auto population
               // certNameIt.setValue("");
               // certEmailIt.setValue("");
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                    ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");

                   certifierNameVO.applyViewCriteria(vc);
                   //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                   certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                            );
                   certifierNameVO.setNamedWhereClauseParam("bindName", null);
                   certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                    certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                        System.out.println("Query : " + certifierNameVO.getQuery());
                   certifierNameVO.executeQuery();
                   System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO.getEstimatedRowCount());

                    while (certifierNameVO.hasNext()) {
                      Row row = certifierNameVO.next(); // Get the next row in the result set.
                      if(certifierNameVO.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO.getCurrentRow().getAttribute("LastName")!=null){
                          String lastname =" "+certifierNameVO.getCurrentRow().getAttribute("LastName");
                          certifier_name = certifierNameVO.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                      }

                      certifier_mail =certifierNameVO.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                      certifier_emp =certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;
                    }



                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");
                    certNameIt.setValue(certifier_name);
                    certEmailIt.setValue(certifier_mail);
                    employeeNoIt.setValue(certifier_emp);
                    //employeeNoIt.setDisabled(false);
                    certEmailIt.setDisabled(false);
                    certNameIt.setDisabled(false);
                    certifier_commandImageLink.setDisabled(false);
                    searchAltApproverLink.setDisabled(false);
                    //alternateApproverIt.setDisabled(false);
                    certifierApproveComments.setDisabled(false);
                    certifierApproveLink.setDisabled(false);

                    alternateapprovNoIt.setValue("");
                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");
                }
               /* certNameIt.setValue(certifier_name);
                certEmailIt.setValue(certifier_mail);
                employeeNoIt.setValue(certifier_emp);*/
                certNameIt.setVisible(true);
                certNameIt.setRendered(true);

                certEmailIt.setVisible(true);
                certEmailIt.setRendered(true);
                //employeeNoIt.setDisabled(false);
                certEmailIt.setDisabled(false);
                certNameIt.setDisabled(false);
                certifier_commandImageLink.setDisabled(false);
                certifierApproveComments.setVisible(true);
                certifierApproveComments.setRendered(true);
                certifier_plm.setVisible(true);
                certifier_plm.setRendered(true);
                noteToApprv_plm.setRendered(true);
                noteToApprv_plm.setVisible(true);

                alternateApprover_plm.setVisible(true);
                alternateApprover_plm.setRendered(true);

                certifier_commandImageLink.setDisabled(false);
                searchAltApproverLink.setDisabled(false);
                //alternateApproverIt.setDisabled(false);
                certifierApproveComments.setDisabled(false);
                certifierApproveLink.setDisabled(false);
                poNumIt.setValue("");
                poNumIt.setDisabled(true);
                poNum_plm.setDisabled(true);

                alternateapprovNoIt.setValue("");
                certifierApproveComments.setValue("");
                alternateApproverIt.setValue("");
                System.out.println("enabling certifier realted all kinds of header fields");

            }


        int i = 0;
        int recDeleted = 0;
        while (rowSetIterator.hasNext())
              {
                   Row r = rowSetIterator.next();
            String certifier_flag = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
                   //attr8 is used for certification flag
                 // r.getAttribute(arg0)

                 if(value == null || value.equals("false")){
                   System.out.println("Setting certifier related fields as disabled");
                     System.out.println("printing the value of gl no  :::::::::"+r.getAttribute("GlNo"));
                    /* r.setAttribute("GlNo", "");
                     r.setAttribute("TaskNo", "");
                     r.setAttribute("ExpinditureOrg", "");
                     r.setAttribute("ProjectNo", "");
                     r.setAttribute("ExpenditureDate", "");*/

                     /*GLCodeIT.setRendered(true);
                     projectNoIT.setRendered(true);
                     GLCodeIT.setVisible(false);
                     projectNoIT.setVisible(false);*/

                     projectNoIT.setValue("");
                     projectColumn.setVisible(false);
                     projectColumn.setRendered(false);
                     taskNoIT.setValue("");
                     taskNo_column.setVisible(false);
                     expOrgIT.setValue("");
                     expOrg_column.setVisible(false);;
                     expDate_column.setVisible(false);
                     taskNo_column.setRendered(false);
                     expOrg_column.setRendered(false);
                     expDateIT.setValue("");
                     expDate_column.setRendered(false);
                     GLCodeIT.setValue("");
                     glcode_column.setRendered(false);
                     glcode_column.setVisible(false);

                     expTypeIt.setValue("");
                     expType_column.setRendered(false);
                     expType_column.setVisible(false);


                     recCode.setValue("");
                     reccode_column.setRendered(false);
                     reccode_column.setVisible(false);
                     if(invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))
                        ||(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice"))){
                     linePONum_it.setValue("");
                     poLineNum_column.setVisible(true);
                     poLineNum_column.setRendered(true);
                     poLineNum_it.setValue("");
                     linePoNum_column.setVisible(true);
                     linePoNum_column.setRendered(true);
                     }
                    /* projectNoIT.setDisabled(true);
                     GLCodeIT.setDisabled(true);
                     taskNoIT.setDisabled(true);
                     expOrgIT.setDisabled(true);
                     expDateIT.setDisabled(true);*/



                 }else{

                    /* GLCodeIT.setRendered(true);
                     projectNoIT.setRendered(true);
                     GLCodeIT.setVisible(true);
                     projectNoIT.setVisible(true);*/



                    if((
                       ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null &&
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("false")))
                        ){
                        System.out.println(" keeping glcode as it is:::");
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);

                       }

                    else{

                    System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                    r.setAttribute("GlNo", "");
                 r.setAttribute("TaskNo", "");
                 r.setAttribute("ExpinditureOrg", "");
                 r.setAttribute("ProjectNo", "");
                 r.setAttribute("ExpenditureDate", "");
                    }
                     System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                     GLCodeIT.setValue("");
                     projectNoIT.setValue("");
                     expDateIT.setValue("");
                     taskNoIT.setValue("");
                     expOrgIT.setValue("");
                     recCode.setValue("");

                     projectColumn.setVisible(true);
                     projectColumn.setRendered(true);

                     taskNo_column.setVisible(true);;
                     expOrg_column.setVisible(true);;
                     expDate_column.setVisible(true);
                     taskNo_column.setRendered(true);
                     expOrg_column.setRendered(true);
                     expDate_column.setRendered(true);
                     glcode_column.setRendered(true);
                     glcode_column.setVisible(true);
                     reccode_column.setRendered(true);
                     reccode_column.setVisible(true);
                     expTypeIt.setValue("");
                     expType_column.setRendered(true);
                     expType_column.setVisible(true);


                     linePONum_it.setValue("");
                     poLineNum_column.setVisible(false);
                     poLineNum_column.setRendered(false);
                     poLineNum_it.setValue("");
                     linePoNum_column.setVisible(false);
                     linePoNum_column.setRendered(false);



                    System.out.println("before Setting certifier related fields as enabled" +GLCodeIT.isDisabled());
                    /* projectNoIT.setDisabled(false);
                     GLCodeIT.setDisabled(false);*/
                     System.out.println("After Setting certifier related fields as enabled" +GLCodeIT.isDisabled());


                 }

                  AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
              }
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode","true");
            System.out.println("partial trigger header fields"+certEmailIt.isRendered() +"---"+certEmailIt.isVisible());





            if((value != null && value.equals("true")) &&
               AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null &&
               AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){


                if(certNameValue!=null &&  certEmailValue!=null ){
                    System.out.println("-----------------Settinggggggggggggg1----------------------1");
                    certEmailIt.setValue(certEmailValue);
                    certNameIt.setValue(certNameValue);

                    }if(certifierApproveCommentsValue!=null){
                        System.out.println("-----------------Settinggggggggggggg2----------------------1");
                       certifierApproveComments.setValue(certifierApproveCommentsValue);
                        employeeNoIt.setValue(employeeNoItValue);

                    }

                    if(employeeNoItValue!=null ){
                        System.out.println("-----------------Settinggggggggggggg3----------------------1")  ;
                       employeeNoIt.setValue(employeeNoItValue );
                    }

                   if(alternateApproverIt!=null){
                       System.out.println("-----------------Settinggggggggggggg4----------------------1");
                       alternateApproverIt.setValue(alternateApproverItValue);

                   }
               }






            if(value != null && value.equals("true")){

                System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
                //String certifier_mail=null;
                //String certifier_name =null;
                String certifier_emp = null;
                DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                       DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                       ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                       ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                      certifierNameVO1.applyViewCriteria(vc);
                      //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                      certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                               );
                      certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                      certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
                certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                System.out.println("Query : " + certifierNameVO1.getQuery());
                      certifierNameVO1.executeQuery();
                      System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                       while (certifierNameVO1.hasNext()) {
                         Row row = certifierNameVO1.next(); // Get the next row in the result set.
                         if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                             String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                             certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                         }

                         certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                         certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                         System.out.println("certifier_mail---------"+certifier_mail);
                         System.out.println("certifier_name---------"+certifier_name);


                       }



                      // certifierApproveComments.setValue("");
                      // alternateApproverIt.setValue("");
               certNameIt.setValue(certifier_name);
               certEmailIt.setValue(certifier_mail);
               employeeNoIt.setValue(certifier_emp);
               //employeeNoIt.setDisabled(false);
                certEmailIt.setDisabled(false);
                certNameIt.setDisabled(false);
                certifier_commandImageLink.setDisabled(false);

            }



            //alternateApproverIt.setValue("");


            AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
            AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);
            AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
             //AdfFacesContext.getCurrentInstance().addPartialTarget(pgInvoiceDets);
             AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);

            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
           AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
           AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
           AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
           AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
            AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);



        }catch(Exception e){
            e.printStackTrace();

        } finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }
        System.out.println("refreshing invoiceTypeSoc ");
        AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);


        if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){

            System.out.println("Setting  PO Invoice   ");
           // employeeNoIt.setVisible(false);
            //employeeNoIt.setRendered(false);
            employeeNoIt.setDisabled(true);

        }else{
            System.out.println("Setting  NO Invoice   ");
            employeeNoIt.setVisible(true);
            employeeNoIt.setRendered(true);
            //employeeNoIt.setDisabled(false);
        }

        if(value.equals("true")){

            poNumIt.setDisabled(true);
            poNum_plm.setDisabled(true);

        }else{

            poNumIt.setDisabled(false);
            poNum_plm.setDisabled(false);
        }




        if(value != null && value.equals("true")){

            System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
            //String certifier_mail=null;
            //String certifier_name =null;
            String certifier_emp = null;
            DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                   DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                   ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                   ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                  certifierNameVO1.applyViewCriteria(vc);
                  //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                  certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                           );
                  certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                  certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
            certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                        System.out.println("Query : " + certifierNameVO1.getQuery());
                  certifierNameVO1.executeQuery();
                  System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                   while (certifierNameVO1.hasNext()) {
                     Row row = certifierNameVO1.next(); // Get the next row in the result set.
                     if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                         String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                         certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                     }

                     certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                     certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                     System.out.println("certifier_mail22---------"+certifier_mail);
                     System.out.println("certifier_name 111---------"+certifier_name);


                   }
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);

        }
            else if(value != null && value.equals("false")){
                       System.out.println("Clearing all certifier realteed fields") ;
                        certNameIt.setValue("");
                        employeeNoIt.setValue("");
                        certEmailIt.setValue("");

                        System.out.println("Refreshing inside---------------");
                        AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
                        AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
                        AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
                        AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
                    }

        System.out.println("Here it goes again23341");





        System.out.println("certifier_mail1---------"+certifier_mail);
        System.out.println("certifier_name1---------"+certifier_name);
        certNameIt.setValue(certifier_name);
        certEmailIt.setValue(certifier_mail);
        System.out.println("Refreshingggg ----------------- email and name ");
        AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
        AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);


        AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);

    }

    public void onSubmitClick1(ActionEvent actionEvent) {
    System.out.println("testing submit1");
    }




    public void onchangeCertificationBox_old(ValueChangeEvent valueChangeEvent) {
        System.out.println("Value of  onchangeCertificationBox111"+valueChangeEvent.getNewValue());



        System.out.println("Invoice number :: "+invNumIt.getValue());
        String value =valueChangeEvent.getNewValue().toString();

        String certNameValue =certNameIt.getValue()!=null ? certNameIt.getValue().toString() : null ;
        String  certEmailValue =  certEmailIt.getValue()!=null ? certEmailIt.getValue().toString() : null ;
        String certifierApproveCommentsValue =    certifierApproveComments.getValue()!=null ? certifierApproveComments.getValue().toString() : null ;
        String employeeNoItValue  = employeeNoIt.getValue()!=null ? employeeNoIt.getValue().toString() : null ;
        String alternateApproverItValue = alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() : null;
        String certifier_mail=null;
        String certifier_name =null;
        /*Added on 16th jan*/





        if(value.equals("true")){
        System.out.println("Setting NO PO Invoice   ");
            invoiceTypeSoc.setValue("Non PO Invoice");
            employeeNoIt.setVisible(true);
            employeeNoIt.setRendered(true);

        }else{

        }




        BindingContext context = BindingUtils.getBindingContext();
        DCBindingContainer bindings =
                    (DCBindingContainer)context.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
         rowSetIterator= iterator.getViewObject().createRowSetIterator(null);
            if(value.equals("false")){
            System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pageload\") "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload"));

                poNumIt.setValue("");
                poNumIt.setDisabled(false);
                poNum_plm.setDisabled(false);

              /*added on 16thjan**/
              /*  if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null){
                    System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");

                }*/


                if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                     &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                   ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                   && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                    ){
                    System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");


                      /* certNameIt.setValue("");
                       employeeNoIt.setValue("");
                       certEmailIt.setValue("");*/
                   }


                else{certNameIt.setValue("");
                certNameIt.setVisible(true);
                certNameIt.setRendered(true);
                certEmailIt.setValue("");
                employeeNoIt.setValue("");

               //employeeNoIt.setDisabled(false);
               certEmailIt.setDisabled(false);
               certNameIt.setDisabled(false);
               certifier_commandImageLink.setDisabled(false);


                //certifierApproveComments.setValue("");
                //alternateApproverIt.setValue("");

                }
                //certEmailIt.setVisible(false);
                //certEmailIt.setRendered(false);
                //certifierApproveComments.setValue("");
               /* certifierApproveComments.setVisible(false);
                certifierApproveComments.setRendered(false);*/
                 //certifier_plm.setVisible(false);
                 //certifier_plm.setRendered(false);
                 //noteToApprv_plm.setRendered(false);
                 //noteToApprv_plm.setVisible(false);
                 System.out.println("Disablinf  alternateApproverIt");
                //alternateApproverIt.setValue("");
                //alternateApprover_plm.setVisible(false);
                //alternateApprover_plm.setRendered(false);
                searchAltApproverLink.setDisabled(true);
                alternateApproverIt.setDisabled(true);
                certifierApproveComments.setDisabled(true);
                certifierApproveLink.setDisabled(true);
                alternateapprovNoIt.setValue("");
                certifierApproveComments.setValue("");
                alternateApproverIt.setValue("");

                certEmailIt.setValue("");
                employeeNoIt.setValue("");
                certNameIt.setValue("");



                System.out.println("Disabling certifier realted all kinds of header fields");
            }else{
                //String certifier_name=null;
                //String certifier_mail =null;
                String certifier_emp =null;
                System.out.println("Certifier name and certifier email");
                if(((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")==null  || (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload")!=null
                     &&AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload").toString().equals("true")))&&
                   ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null &&
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("false")))
                   && certNameIt.getValue()!=null && certEmailIt.getValue()!=null
                    ){
                    System.out.println("Certifier name and certifier email address not null 2323 :::"+certNameIt.getValue());
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox","true");
                }
                else{


                //Logic for auto population
               // certNameIt.setValue("");
               // certEmailIt.setValue("");
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                    ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");

                   certifierNameVO.applyViewCriteria(vc);
                   //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                   certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                            );
                   certifierNameVO.setNamedWhereClauseParam("bindName", null);
                   certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                    certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                        System.out.println("Query : " + certifierNameVO.getQuery());
                   certifierNameVO.executeQuery();
                   System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO.getEstimatedRowCount());

                    while (certifierNameVO.hasNext()) {
                      Row row = certifierNameVO.next(); // Get the next row in the result set.
                      if(certifierNameVO.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO.getCurrentRow().getAttribute("LastName")!=null){
                          String lastname =" "+certifierNameVO.getCurrentRow().getAttribute("LastName");
                          certifier_name = certifierNameVO.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                      }

                      certifier_mail =certifierNameVO.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                      certifier_emp =certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;
                    }



                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");
                    certNameIt.setValue(certifier_name);
                    certEmailIt.setValue(certifier_mail);
                    employeeNoIt.setValue(certifier_emp);
                    //employeeNoIt.setDisabled(false);
                    certEmailIt.setDisabled(false);
                    certNameIt.setDisabled(false);
                    certifier_commandImageLink.setDisabled(false);
                    searchAltApproverLink.setDisabled(false);
                    //alternateApproverIt.setDisabled(false);
                    certifierApproveComments.setDisabled(false);
                    certifierApproveLink.setDisabled(false);

                    alternateapprovNoIt.setValue("");
                    certifierApproveComments.setValue("");
                    alternateApproverIt.setValue("");
                }
               /* certNameIt.setValue(certifier_name);
                certEmailIt.setValue(certifier_mail);
                employeeNoIt.setValue(certifier_emp);*/
                certNameIt.setVisible(true);
                certNameIt.setRendered(true);

                certEmailIt.setVisible(true);
                certEmailIt.setRendered(true);
                //employeeNoIt.setDisabled(false);
                certEmailIt.setDisabled(false);
                certNameIt.setDisabled(false);
                certifier_commandImageLink.setDisabled(false);
                certifierApproveComments.setVisible(true);
                certifierApproveComments.setRendered(true);
                certifier_plm.setVisible(true);
                certifier_plm.setRendered(true);
                noteToApprv_plm.setRendered(true);
                noteToApprv_plm.setVisible(true);

                alternateApprover_plm.setVisible(true);
                alternateApprover_plm.setRendered(true);

                certifier_commandImageLink.setDisabled(false);
                searchAltApproverLink.setDisabled(false);
                //alternateApproverIt.setDisabled(false);
                certifierApproveComments.setDisabled(false);
                certifierApproveLink.setDisabled(false);
                poNumIt.setValue("");
                poNumIt.setDisabled(true);
                poNum_plm.setDisabled(true);

                alternateapprovNoIt.setValue("");
                certifierApproveComments.setValue("");
                alternateApproverIt.setValue("");
                System.out.println("enabling certifier realted all kinds of header fields");

            }


        int i = 0;
        int recDeleted = 0;
        while (rowSetIterator.hasNext())
              {
                   Row r = rowSetIterator.next();
            String certifier_flag = ADFContext.getCurrent().getPageFlowScope().get("certifier_flag")!=null ? ADFContext.getCurrent().getPageFlowScope().get("certifier_flag").toString() :null;
                   //attr8 is used for certification flag
                 // r.getAttribute(arg0)

                 if(value == null || value.equals("false")){
                   System.out.println("Setting certifier related fields as disabled");
                     System.out.println("printing the value of gl no  :::::::::"+r.getAttribute("GlNo"));
                    /* r.setAttribute("GlNo", "");
                     r.setAttribute("TaskNo", "");
                     r.setAttribute("ExpinditureOrg", "");
                     r.setAttribute("ProjectNo", "");
                     r.setAttribute("ExpenditureDate", "");*/

                     /*GLCodeIT.setRendered(true);
                     projectNoIT.setRendered(true);
                     GLCodeIT.setVisible(false);
                     projectNoIT.setVisible(false);*/

                     projectNoIT.setValue("");
                     projectColumn.setVisible(false);
                     projectColumn.setRendered(false);
                     taskNoIT.setValue("");
                     taskNo_column.setVisible(false);
                     expOrgIT.setValue("");
                     expOrg_column.setVisible(false);;
                     expDate_column.setVisible(false);
                     taskNo_column.setRendered(false);
                     expOrg_column.setRendered(false);
                     expDateIT.setValue("");
                     expDate_column.setRendered(false);
                     GLCodeIT.setValue("");
                     glcode_column.setRendered(false);
                     glcode_column.setVisible(false);

                     expTypeIt.setValue("");
                     expType_column.setRendered(false);
                     expType_column.setVisible(false);


                     recCode.setValue("");
                     reccode_column.setRendered(false);
                     reccode_column.setVisible(false);
                     if(invoiceTypeSoc.getValue()==null || (invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().trim().equals(""))
                        ||(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice"))){
                     linePONum_it.setValue("");
                     poLineNum_column.setVisible(true);
                     poLineNum_column.setRendered(true);
                     poLineNum_it.setValue("");
                     linePoNum_column.setVisible(true);
                     linePoNum_column.setRendered(true);
                     }
                    /* projectNoIT.setDisabled(true);
                     GLCodeIT.setDisabled(true);
                     taskNoIT.setDisabled(true);
                     expOrgIT.setDisabled(true);
                     expDateIT.setDisabled(true);*/



                 }else{

                    /* GLCodeIT.setRendered(true);
                     projectNoIT.setRendered(true);
                     GLCodeIT.setVisible(true);
                     projectNoIT.setVisible(true);*/



                    if((
                       ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null &&
                       AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("false")))
                        ){
                        System.out.println(" keeping glcode as it is:::");
                        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);

                       }

                    else{

                    System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                    r.setAttribute("GlNo", "");
                 r.setAttribute("TaskNo", "");
                 r.setAttribute("ExpinditureOrg", "");
                 r.setAttribute("ProjectNo", "");
                 r.setAttribute("ExpenditureDate", "");
                    }
                     System.out.println("newwwwwwwwwwwwwwwwwwwwwwwwww");
                     GLCodeIT.setValue("");
                     projectNoIT.setValue("");
                     expDateIT.setValue("");
                     taskNoIT.setValue("");
                     expOrgIT.setValue("");
                     recCode.setValue("");

                     projectColumn.setVisible(true);
                     projectColumn.setRendered(true);

                     taskNo_column.setVisible(true);;
                     expOrg_column.setVisible(true);;
                     expDate_column.setVisible(true);
                     taskNo_column.setRendered(true);
                     expOrg_column.setRendered(true);
                     expDate_column.setRendered(true);
                     glcode_column.setRendered(true);
                     glcode_column.setVisible(true);
                     reccode_column.setRendered(true);
                     reccode_column.setVisible(true);
                     expTypeIt.setValue("");
                     expType_column.setRendered(true);
                     expType_column.setVisible(true);


                     linePONum_it.setValue("");
                     poLineNum_column.setVisible(false);
                     poLineNum_column.setRendered(false);
                     poLineNum_it.setValue("");
                     linePoNum_column.setVisible(false);
                     linePoNum_column.setRendered(false);



                    System.out.println("before Setting certifier related fields as enabled" +GLCodeIT.isDisabled());
                    /* projectNoIT.setDisabled(false);
                     GLCodeIT.setDisabled(false);*/
                     System.out.println("After Setting certifier related fields as enabled" +GLCodeIT.isDisabled());


                 }

                  AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
              }
            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode","true");
            System.out.println("partial trigger header fields"+certEmailIt.isRendered() +"---"+certEmailIt.isVisible());





            if((value != null && value.equals("true")) &&
               AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB")!=null &&
               AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifier_flag_DB").toString().equals("true")){


                if(certNameValue!=null &&  certEmailValue!=null ){
                    System.out.println("-----------------Settinggggggggggggg1----------------------1");
                    certEmailIt.setValue(certEmailValue);
                    certNameIt.setValue(certNameValue);

                    }if(certifierApproveCommentsValue!=null){
                        System.out.println("-----------------Settinggggggggggggg2----------------------1");
                       certifierApproveComments.setValue(certifierApproveCommentsValue);
                        employeeNoIt.setValue(employeeNoItValue);

                    }

                    if(employeeNoItValue!=null ){
                        System.out.println("-----------------Settinggggggggggggg3----------------------1")  ;
                       employeeNoIt.setValue(employeeNoItValue );
                    }

                   if(alternateApproverIt!=null){
                       System.out.println("-----------------Settinggggggggggggg4----------------------1");
                       alternateApproverIt.setValue(alternateApproverItValue);

                   }
               }






            if(value != null && value.equals("true")){

                System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
                //String certifier_mail=null;
                //String certifier_name =null;
                String certifier_emp = null;
                DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                       DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                       ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                       ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                      certifierNameVO1.applyViewCriteria(vc);
                      //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                      certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                               );
                      certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                      certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
                certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                System.out.println("Query : " + certifierNameVO1.getQuery());
                      certifierNameVO1.executeQuery();
                      System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                       while (certifierNameVO1.hasNext()) {
                         Row row = certifierNameVO1.next(); // Get the next row in the result set.
                         if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                             String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                             certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                         }

                         certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                         certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                         System.out.println("certifier_mail---------"+certifier_mail);
                         System.out.println("certifier_name---------"+certifier_name);


                       }



                      // certifierApproveComments.setValue("");
                      // alternateApproverIt.setValue("");
               certNameIt.setValue(certifier_name);
               certEmailIt.setValue(certifier_mail);
               employeeNoIt.setValue(certifier_emp);
               //employeeNoIt.setDisabled(false);
                certEmailIt.setDisabled(false);
                certNameIt.setDisabled(false);
                certifier_commandImageLink.setDisabled(false);

            }



            //alternateApproverIt.setValue("");


            AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);
            AdfFacesContext.getCurrentInstance().addPartialTarget(noteToApprv_plm);
            AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApprover_plm);
             //AdfFacesContext.getCurrentInstance().addPartialTarget(pgInvoiceDets);
             AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);

            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
           AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
           AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(searchAltApproverLink);
           AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);
           AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveLink);
            AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverIt);



        }catch(Exception e){
            e.printStackTrace();

        } finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }
        System.out.println("refreshing invoiceTypeSoc ");
        AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);


        if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("PO Invoice")){

            System.out.println("Setting  PO Invoice   ");
           // employeeNoIt.setVisible(false);
            //employeeNoIt.setRendered(false);
            employeeNoIt.setDisabled(true);

        }else{
            System.out.println("Setting  NO Invoice   ");
            employeeNoIt.setVisible(true);
            employeeNoIt.setRendered(true);
            //employeeNoIt.setDisabled(false);
        }

        if(value.equals("true")){

            poNumIt.setDisabled(true);
            poNum_plm.setDisabled(true);

        }else{

            poNumIt.setDisabled(false);
            poNum_plm.setDisabled(false);
        }




        if(value != null && value.equals("true")){

            System.out.println("certNameIt.getValue()==null && (value != null && value.equals(\"true\")");
            //String certifier_mail=null;
            //String certifier_name =null;
            String certifier_emp = null;
            DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                   DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CertifierNameVO1Iterator");
                   ViewObjectImpl certifierNameVO1 = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                   ViewCriteria vc = certifierNameVO1.getViewCriteria("CertifierNameVOCriteria");

                  certifierNameVO1.applyViewCriteria(vc);
                  //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                  certifierNameVO1.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                           );
                  certifierNameVO1.setNamedWhereClauseParam("bindName", null);
                  certifierNameVO1.setNamedWhereClauseParam("bvPreferredName", null);
            certifierNameVO1.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                        System.out.println("Query : " + certifierNameVO1.getQuery());
                  certifierNameVO1.executeQuery();
                  System.out.println("Certifier query excetion auto populate row counts :: "+certifierNameVO1.getEstimatedRowCount());

                   while (certifierNameVO1.hasNext()) {
                     Row row = certifierNameVO1.next(); // Get the next row in the result set.
                     if(certifierNameVO1.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO1.getCurrentRow().getAttribute("LastName")!=null){
                         String lastname =" "+certifierNameVO1.getCurrentRow().getAttribute("LastName");
                         certifier_name = certifierNameVO1.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                     }

                     certifier_mail =certifierNameVO1.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                     certifier_emp =certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO1.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;

                     System.out.println("certifier_mail22---------"+certifier_mail);
                     System.out.println("certifier_name 111---------"+certifier_name);


                   }
            AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_plm);

        }else if(value != null && value.equals("false")){
           System.out.println("Clearing all certifier realteed fields") ;
            certNameIt.setValue("");
            employeeNoIt.setValue("");
            certEmailIt.setValue("");
        }

        System.out.println("Here it goes again1");





        System.out.println("certifier_mail1---------"+certifier_mail);
        System.out.println("certifier_name1---------"+certifier_name);
        certNameIt.setValue(certifier_name);
        certEmailIt.setValue(certifier_mail);
        System.out.println("Refreshingggg 111----------------- email and name ");
        AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_commandImageLink);
        AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);


        AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);

    }





    public boolean validateEmptyLines(){
        RowSetIterator lineItemItr = null;
        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObjectImpl lineVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        System.out.println("------------lineVO Count validateEmptyLines(): "+lineVO.getEstimatedRowCount());
        lineItemItr = lineVO.createRowSetIterator(null);
        String message= null;
        Integer line;
        boolean validateFlag = true;
        while(lineItemItr.hasNext()) {
         Row lineRow = lineItemItr.next();
         if(lineRow.getAttribute("LineTotalAmount")==null || lineRow.getAttribute("LineTotalAmount").equals("")) {
             validateFlag = false;
             line = ((oracle.jbo.domain.Number)lineRow.getAttribute("LineNumber")).intValue();
             message="Please Enter the Line total in the line "+ line +" before submitting the invoice";
             callFacesMessage(message);
             break;
         }
         else if(lineRow.getAttribute("TaxRateCode")==null || lineRow.getAttribute("TaxRateCode").equals("")){
             validateFlag = false;
             line = ((oracle.jbo.domain.Number)lineRow.getAttribute("LineNumber")).intValue();
             message="Please Enter the Tax code in the line "+ line +" before submitting the invoice";
             callFacesMessage(message);
             break;
         }
        }
        return validateFlag;
    }

    public boolean validateTaxAmount() {
        System.out.println("Inside validateTaxAmount");
        RowSetIterator lineItemItr = null;
        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObjectImpl lineVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        System.out.println("------------lineVO Count validatelineDescription(): "+lineVO.getEstimatedRowCount());
        lineItemItr = lineVO.createRowSetIterator(null);
        String message= null;
        Integer line;
        boolean flag = true;

        while(lineItemItr.hasNext()) {

         Row lineRow = lineItemItr.next();
        System.out.println("::: lineRow.getAttribute(\"TaxRateCode\")::: "+lineRow.getAttribute("TaxRateCode"));
         String taxRateCode = lineRow.getAttribute("TaxRateCode")==null?"":(String)lineRow.getAttribute("TaxRateCode");
            System.out.println("::: taxRateCode::: "+taxRateCode);
            System.out.println("::: LineTotalAmount::: "+lineRow.getAttribute("LineTotalAmount"));
         if(!((lineRow.getAttribute("LineTotalAmount")==null || lineRow.getAttribute("LineTotalAmount").equals(""))&& taxRateCode.equals(""))) {
             System.out.println("::: To call getTaxRatesMasterList with taxrate code ::: "+taxRateCode);
             BigDecimal taxRate = PropertyLoader.getInstance().getTaxRatesMasterList().get(taxRateCode);
             double taxRateVal = taxRate.doubleValue();
             System.out.println("tax rate  ======= "+ taxRateVal);

             double lineTotal = Double.parseDouble(lineRow.getAttribute("LineTotalAmount").toString().trim());
             double correctTaxAmount = (taxRateVal*lineTotal)/100;
             oracle.jbo.domain.Number taxRateLineItem = null;
             try {
                taxRateLineItem = new oracle.jbo.domain.Number(correctTaxAmount);
             } catch (SQLException e) {
                e.printStackTrace();
             }
             BigDecimal decimalValue = new BigDecimal(taxRateLineItem.doubleValue());
             decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
             correctTaxAmount = decimalValue.doubleValue();
             System.out.println("Correct Tax Amount :"+correctTaxAmount);

             if(!(lineRow.getAttribute("TaxAmountLineitem")==null || lineRow.getAttribute("TaxAmountLineitem").toString().trim().equals(""))){

                 double enteredTaxAmount = Double.parseDouble(lineRow.getAttribute("TaxAmountLineitem").toString());
                 oracle.jbo.domain.Number amount = null;
                    try {
                        amount = new oracle.jbo.domain.Number(enteredTaxAmount);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    BigDecimal decimalValue1 = new BigDecimal(amount.doubleValue());
                 decimalValue1 = decimalValue1.setScale(2, BigDecimal.ROUND_HALF_EVEN);

                 double incorrectTaxAmount = decimalValue1.doubleValue();
                 System.out.println("INcorrect Tax Amount :"+incorrectTaxAmount);
                 System.out.println("Max Range: "+(correctTaxAmount+1)+" Min Range :"+(correctTaxAmount-1));
                 if(!(incorrectTaxAmount<=correctTaxAmount+1 && incorrectTaxAmount>=correctTaxAmount-1)){
                     flag = false;
                     line = ((oracle.jbo.domain.Number)lineRow.getAttribute("LineNumber")).intValue();
                     message="The tax amount entered in "+line+" is not in line with the tax rate code. Please split the lines accordingly with tax amount and tax rates";
                     callFacesMessage(message);
                     break;
                 }
             }
         }
        }

        return flag;
    }


    public boolean validateAmountCalculation() {
        double lineTotal = Double.MIN_VALUE;
        if(lineIdIt.getValue()!=null) {
            lineTotal = Double.parseDouble((String)lineIdIt.getValue());
            System.out.println("**********lineTotal**********"+lineTotal);
        }

        double taxTotal = Double.MIN_VALUE;
        if(taxTotIt.getValue()!=null) {
            taxTotal = ((oracle.jbo.domain.Number)taxTotIt.getValue()).getValue();
            System.out.println("**********taxTotal**********"+taxTotal);
        }
        double headerTotal = Double.MIN_VALUE;
        if(headerTotIt.getValue()!=null) {
            headerTotal = ((oracle.jbo.domain.Number)headerTotIt.getValue()).getValue();
            System.out.println("**********headerTotal**********"+headerTotal);

        }
        RowSetIterator lineItemItr = null;
        RowSetIterator rs = null;
        try{

        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObjectImpl lineVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();

        ArrayList<HashMap<String, Object>> lineItems = new ArrayList<HashMap<String,Object>>();
        System.out.println("------------lineVO Count: "+lineVO.getEstimatedRowCount());


        lineItemItr = lineVO.createRowSetIterator(null);
        while(lineItemItr.hasNext()) {
            Row row = lineItemItr.next();
            System.out.println("----- Line Item ----");
            long lineItem_LineNumber = -1;
            if(row.getAttribute("LineNumber")!=null) {
                lineItem_LineNumber = (long)(((oracle.jbo.domain.Number)row.getAttribute("LineNumber")).getValue());
            }
            double lineItem_LineTotal = 0.0;
            double lineItem_TaxAmount = 0.0;
            System.out.println("-----------Amount: "+row.getAttribute("LineTotalAmount"));
            if(row.getAttribute("LineTotalAmount")!=null) {
                lineItem_LineTotal = ((oracle.jbo.domain.Number)row.getAttribute("LineTotalAmount")).getValue();
            }
            if(row.getAttribute("TaxAmountLineitem")!=null) {
                try {
                    lineItem_TaxAmount = Double.parseDouble((String)row.getAttribute("TaxAmountLineitem"));
                    System.out.println("lineItem_TaxAmount within TaxAmountLineitem: "+lineItem_TaxAmount);
                } catch(Exception e) {
                    lineItem_TaxAmount = 0.0;
                    e.printStackTrace();
                }
            }

            System.out.println("\tline item tax amount : "+lineItem_TaxAmount);

            System.out.println("\t Line Total : "+lineItem_LineTotal);
            HashMap<String, Object> lineItem = new HashMap<String, Object>();
            lineItem.put("LineNumber",          lineItem_LineNumber);
            lineItem.put("LineTotalAmount",     lineItem_LineTotal);
            lineItem.put("TaxAmountLineitem",              lineItem_TaxAmount);
            lineItems.add(lineItem);
        }

        double lineItems_TotalAmount_Sum = 0;
        double lineItems_TaxAmount_Sum = 0;

        for(int i=0; i<lineItems.size(); i++) {

            lineItems_TotalAmount_Sum += (Double)lineItems.get(i).get("LineTotalAmount");
            lineItems_TaxAmount_Sum += (Double)lineItems.get(i).get("TaxAmountLineitem");
        }

        System.out.println("-----lineItems_TotalAmount_Sum:"+lineItems_TotalAmount_Sum+", lineItems_TaxAmount_Sum:"+lineItems_TaxAmount_Sum);
        System.out.println("-----lineItems_TotalAmount_Sum+lineItems_TaxAmount_Sum:"+(lineItems_TotalAmount_Sum+lineItems_TaxAmount_Sum));

        DecimalFormat newFormat = new DecimalFormat("#.##");

        System.out.println("-----Left side : "+Double.valueOf(newFormat.format(lineItems_TotalAmount_Sum+lineItems_TaxAmount_Sum)).doubleValue());
        System.out.println("-----Right side : "+Double.valueOf(newFormat.format(headerTotal)).doubleValue());


        //if(lineItems_TotalAmount_Sum+lineItems_TaxAmount_Sum!=headerTotal) {
        if( Double.valueOf(newFormat.format(lineItems_TotalAmount_Sum+lineItems_TaxAmount_Sum)).doubleValue() != Double.valueOf(newFormat.format(headerTotal)).doubleValue() ) {
            /*ViewObjectImpl vo = Utility.getAm().getErrorCodeLookupVO1();

            vo.setNamedWhereClauseParam("bindReasonType", 5);
            vo.executeQuery();
            rs = vo.createRowSetIterator(null);
            rs.reset();
            String errorMessageLookup = null;
            while(rs.hasNext()){
                Row r = rs.next();
                errorMessageLookup = (String)r.getAttribute("ErrorMessage");
            }*/

            String poNum = poNumIt.getValue()!=null ? poNumIt.getValue().toString() : null;

            if( ( poNum==null || (poNum!=null && poNum.trim().equals("")) ) ) {
                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                validationErrorPopup.show(hints);
                this.validationErrorMessage.setValue("lineItems_TotalAmount_Sum+lineItems_TaxAmount_Sum!=headerTotal");
                return false;
            }
        }
        }catch(Exception e){
            e.printStackTrace();
        }
        finally{
                if(lineItemItr!=null) {
                    try {
                        //lineItemItr.closeRowSetIterator();
                    } catch(Exception ex) {
                        ex.printStackTrace();
                }
                }
                    if(rs!=null) {
                        try {
                            //rs.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();
                    }
                    }
                }

        return true;
    }

    public boolean validatelineDescription(){
            RowSetIterator lineItemItr = null;
            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            ViewObjectImpl lineVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
            System.out.println("------------lineVO Count validatelineDescription(): "+lineVO.getEstimatedRowCount());
            lineItemItr = lineVO.createRowSetIterator(null);
            String message= null;
            Integer line;
    //            boolean validateFlag = true;
            while(lineItemItr.hasNext()) {
             System.out.println("LineDescription within while");
             Row lineRow = lineItemItr.next();
             System.out.println("LineDescription within line row");
             if(lineRow.getAttribute("LineDescription")==null || lineRow.getAttribute("LineDescription").equals("")) {
    //                 validateFlag = false;
                 System.out.println("LineDescription is not present");
                 line = ((oracle.jbo.domain.Number)lineRow.getAttribute("LineNumber")).intValue();
                 message="Please enter the line description on the invoice line "+ line +"";
                 callFacesMessage(message);
                 return true;
             }
            }
            return false;
        }
    private void doSaveLineDetailsOperation() {
   /* 29th    try{
            System.out.println("Start : doSaveLineDetailsOperation");
            Utility.getAm().saveLineDetails();
        }
        catch(Exception e) {
            e.printStackTrace();
        }*/

   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("natureofEXP_flag" ,natureOfEXpSOC.getValue());
   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("mpa_flag",mpaC.getValue());
   // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc1",pc1.getValue());
   //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",pc2.getValue());
   //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",pc3.getValue());
   if (getUrlOrg().equalsIgnoreCase("JS")) {
               if (radio_paymentTypes.getValue() != null && radio_paymentTypes.getValue()
                                                                              .toString()
                                                                              .equals("WIRE")) {
                   AdfFacesContext.getCurrentInstance()
                                  .getPageFlowScope()
                                  .put("pc2", true);
                   AdfFacesContext.getCurrentInstance()
                                  .getPageFlowScope()
                                  .put("pc3", false);

               }
           } else {
   if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("WIRE")){
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",true);
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);

           }else  if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3","true");
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
           }
           }
   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",certifier_sbc.getValue());


        System.out.println("pc3.getValue() 2 ::"+pc3.getValue());
       BindingContext bctx = BindingContext.getCurrent();
       BindingContainer bindings = bctx.getCurrentBindingsEntry();
       OperationBinding operationBinding =  bindings.getOperationBinding("saveAllFormDetails");
       System.out.println("On saving from cert name ::"+certNameIt.getValue() +"-----supplier name  and currency -----"+supNameIt.getValue()
                          +"---curr----"+
                          currencyIt.getValue()  +"org id ::"+orgIdIt.getValue());

       operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
       operationBinding.getParamsMap().put("supName",supNameIt.getValue());
       //operationBinding.getParamsMap().put("currency", currencyIt.getValue());
       operationBinding.getParamsMap().put("currency", certifier_sbc.getValue());
       operationBinding.getParamsMap().put("employeeNo", ADFContext.getCurrent().getPageFlowScope().get("userId"));
       operationBinding.getParamsMap().put("siteId",orgIdIt.getValue());



       operationBinding.execute();

        System.out.println("End doSaveLineDetailsOperation");

    }






    public String submitFromCertifier() {
        ADFContext.getCurrent().getPageFlowScope().put("Submit","true");
        // Add event code here...
            System.out.println("Start onSubmitClick function submitFromCertifier ");


            if(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equals("true")){
                System.out.println("Certification is true");
                if(alternateApproverIt.getValue()==null ||
                   (alternateApproverIt.getValue()!=null && alternateApproverIt.getValue().toString().equals(""))){
                     System.out.println("Clearing all pageflowscope approverNo values and  alternateapprovNoIt ");
                       alternateapprovNoIt.setValue("");
                       //ADFContext.getCurrent().getPageFlowScope().put("approverID_pageLoad",null);
                       ADFContext.getCurrent().getPageFlowScope().put("approverID",null);

                   }

            }





            String poNum=null;
            try {
                String invoiceType = null;;
                if(resolveExpression("#{bindings.InvoiceType.inputValue}") != null)
                    invoiceType = resolveExpression("#{bindings.InvoiceType.inputValue}").toString();
                 poNum = poNumIt.getValue()!=null ? poNumIt.getValue().toString() : null;
                System.out.println("onSubmitClick ::::  "+ "invoiceType :: "+ invoiceType + "poNum ::: "+ poNum);
                boolean isValidedFinally=false;
                boolean isValidGLCode=true;
                boolean isValidProjectNo=true;
                boolean isNonPo = true;
                boolean isValidPoNum = true;
                boolean flagVar=true;

                /* Added validation for PONumber */

                if(!( poNum==null || (poNum!=null && poNum.trim().equals(""))) ){
                                    System.out.println("Validating PO only if PO Number is Present");
                                    DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                    DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("PoNoCertifierVO1Iterator");
                                    ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                                    ViewCriteria vc1 = poNOVO.getViewCriteria("PoNoCertifierVOCriteriaEqualsPONum");
                                    poNOVO.applyViewCriteria(vc1);
                                    poNOVO.setNamedWhereClauseParam("bindPONum", poNum);
                                    poNOVO.setNamedWhereClauseParam("bindOperatingUnit", operatingUnitIt.getValue()==null?"":operatingUnitIt.getValue().toString().trim());
                                    poNOVO.setNamedWhereClauseParam("bindSupplierName", supNameIt.getValue()==null?"":supNameIt.getValue().toString().trim());
                                    poNOVO.setNamedWhereClauseParam("bindSiteID", siteIdIt.getValue()==null?"":siteIdIt.getValue().toString().trim());

                                    poNOVO.executeQuery();
                                    System.out.println("poNOVO.getEstimatedRowCount()"+poNOVO.getEstimatedRowCount());
                                    if(poNOVO.getEstimatedRowCount() != 1)
                                        isValidPoNum = false;

                                    System.out.println("isValidPoNum"+isValidPoNum);
                }

                Integer line;

                if(!validateEmptyLines()) {
                    return null;
                }

                if(!validateTaxAmount()){
                    return null;
                }

                if(!validateAmountCalculation()) {
                    return null;
                }


                /* added line description validation */
                flagVar= validatelineDescription();
                System.out.println("afterrrr validatelineDescription call flagVar"+flagVar);
                /*  **************** */
                if(!flagVar){

                if((invoiceType!=null && invoiceType.equalsIgnoreCase("Non PO Invoice"))&&(poNum==null || poNum.trim().equals("")) && certifier_sbc.getValue().toString().equals("true")){
                    System.out.println("Inside validation block ........................");

                /* added validation on submit"*/
                BindingContext bc = BindingContext.getCurrent();
                DCBindingContainer bindings =
                    (DCBindingContainer)bc.getCurrentBindingsEntry();
                DCIteratorBinding glIter =
                    bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                if (glIter != null &&
                    glIter.getRowSetIterator().getRowCount() > 0) {
                    RowSetIterator rsi =null;
                    try{
                       rsi= glIter.getViewObject().createRowSetIterator(null);
                    Row glRow;
                    while (rsi.next() != null) {
                        glRow = rsi.getCurrentRow();
                        System.out.println("GlNo LineNo ::" + glRow.getAttribute("LineNumber"));
                        line = (glRow.getAttribute("LineNumber")==null) ? null : ((oracle.jbo.domain.Number)glRow.getAttribute("LineNumber")).intValue();
                        System.out.println(" Line ::" +line);

                        String message=null;
                       // if (glRow.getAttribute("GlNo") == null && glRow.getAttribute("ProjectNo") == null) {
                       if ((glRow.getAttribute("GlNo") == null || (glRow.getAttribute("GlNo") != null && glRow.getAttribute("GlNo").toString().trim().equals("") ))

                           && (glRow.getAttribute("ProjectNo") == null)) {
                            isValidGLCode = false;
                            message="Please Enter valid GL Account Code Combination or Project Details (Project No, Task No, Expenditure Org, Expenditure Date, and Expenditure Type) on Line No : "+line;
                            callFacesMessage(message);
                            break;
                        }
                        else if(glRow.getAttribute("GlNo") == null && glRow.getAttribute("ProjectNo") != null){
                            String orgId= null;
                            String projectNo=(String)glRow.getAttribute("ProjectNo");
                            if(orgIdIt.getValue()!=null)
                            {
                                orgId=orgIdIt.getValue().toString();
                                    System.out.println("orgIdIt: "+orgId);
                            }

                            /* validate if proper project number entered*/
                            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ProjectNumberVO1Iterator");
                            ViewObjectImpl projectNumberVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                            ViewCriteria projectNoVc = projectNumberVO.getViewCriteria("ProjectNumberVOCriteria1");
                            projectNumberVO.applyViewCriteria(projectNoVc);
                            projectNumberVO.setNamedWhereClauseParam("bindOrgID", orgId);
                            projectNumberVO.setNamedWhereClauseParam("bindProjectNo", projectNo);
//                            System.out.println("-----------Dynamic Query-----------");
//                            System.out.println(projectNumberVO.getQuery());
                            projectNumberVO.executeQuery();
                            if(projectNumberVO.getEstimatedRowCount() ==0){
                                isValidProjectNo = false;
                                FacesMessage Message =
                                    new FacesMessage("Enter valid Project Number on Line No : "+line);
                                Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                                FacesContext fc = FacesContext.getCurrentInstance();
                                fc.addMessage(null, Message);
                                break;
                            }



                            if(glRow.getAttribute("TaskNo")==null){
                                isValidGLCode = false;
                                message="Please Enter valid Task Number on Line No : "+line;
                                callFacesMessage(message);
                                break;
                            }
                            else{
                                //Task No Validation
                                String taskNo = (String)glRow.getAttribute("TaskNo");
                                String projectId = (String)glRow.getAttribute("ProjectidLine");
                                System.out.println("Project Id "+projectId);
                                System.out.println("Task Id  "+glRow.getAttribute("TaskidLine"));
                              /*  if(projectIdIt.getValue()!= null) {
                                    projectId = projectIdIt.getValue().toString();
                                    System.out.println("projectIdIt.getValue()" + projectId);
                                }*/
                                DCBindingContainer dcBindingContainerTask = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                DCIteratorBinding dcIteratorBindingTask = dcBindingContainerTask.findIteratorBinding("TaskNumberVO1Iterator");
                                ViewObjectImpl taskNumberVO = (ViewObjectImpl)dcIteratorBindingTask.getViewObject();
                                ViewCriteria vc = taskNumberVO.getViewCriteria("TaskNumberVOCriteria2");
                                taskNumberVO.applyViewCriteria(vc);
                                taskNumberVO.setNamedWhereClauseParam("bindprojectId", projectId);
                                taskNumberVO.setNamedWhereClauseParam("bindTaskNo", taskNo);
//                                System.out.println("-----------Dynamic Query-----------");
//                                System.out.println(taskNumberVO.getQuery());
                                taskNumberVO.executeQuery();
                                if(taskNumberVO.getEstimatedRowCount() ==0){
                                    isValidProjectNo = false;
                                    FacesMessage Message =
                                        new FacesMessage("Enter valid Task Number on Line No  : "+line);
                                    Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                                    FacesContext fc = FacesContext.getCurrentInstance();
                                    fc.addMessage(null, Message);
                                    break;
                                }

                            }
                            if(glRow.getAttribute("ExpinditureOrg")==null){
                                isValidGLCode = false;
                                message="Please Enter valid Expenditure Org. on Line No  : "+line;
                                callFacesMessage(message);
                                break;
                            }
                            else{
                                //Expenditure Org Validation
                                System.out.println("on submit click org added");


                                String enteredOrgIdIt=null;
                                if(orgIdIt.getValue() != null) {
                                    enteredOrgIdIt = orgIdIt.getValue().toString();
                                    System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
                                }
                                else{
                                        System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
                                    }

                                String expenditureOrg = (String)glRow.getAttribute("ExpinditureOrg");
                                DCBindingContainer dcBindingContainerOrg = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                DCIteratorBinding dcIteratorBindingOrg = dcBindingContainerOrg.findIteratorBinding("ExpenditureOrgVO1Iterator");
                                ViewObjectImpl expOrgVO = (ViewObjectImpl)dcIteratorBindingOrg.getViewObject();
                                ViewCriteria vc = expOrgVO.getViewCriteria("ExpenditureOrgVOCriteria_filterByExpOrg");
                                expOrgVO.applyViewCriteria(vc);
                                expOrgVO.setNamedWhereClauseParam("bind_expOrg", expenditureOrg);
                                expOrgVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
//                                System.out.println("-----------Dynamic Query-----------");
//                                System.out.println(expOrgVO.getQuery());
                                expOrgVO.executeQuery();
                                if(expOrgVO.getEstimatedRowCount() ==0){
                                    isValidProjectNo = false;
                                    FacesMessage Message =
                                        new FacesMessage("Enter valid Expenditure Org on Line No : "+line);
                                    Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                                    FacesContext fc = FacesContext.getCurrentInstance();
                                    fc.addMessage(null, Message);
                                    break;
                                }

                            }
                            if(glRow.getAttribute("ExpenditureDate")==null){
                                isValidGLCode = false;
                                message="Please Enter valid Expenditure Date on Line No : "+line;
                                callFacesMessage(message);
                                break;
                            }
                            else{
                                    System.out.println("on submit click Expenditure Date added");
                                    String projectId = (String)glRow.getAttribute("ProjectidLine");
                                String validexpdateError=null;
                                    System.out.println("Project Id "+projectId);
                                    String taskId = (String)glRow.getAttribute("TaskidLine");
                                    System.out.println("Task Id  "+taskId);
                                    String enteredOrgIdIt=null;
                                    if(orgIdIt.getValue() != null) {
                                        enteredOrgIdIt = orgIdIt.getValue().toString();
                                        System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
                                    }
                                    else{
                                            System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
                                        }
                                    oracle.jbo.domain.Date expDate = null;
                                    if(glRow.getAttribute("ExpenditureDate")!=null){
                                    expDate = ((oracle.jbo.domain.Date)glRow.getAttribute("ExpenditureDate"));
                                    System.out.println("Expdate "+expDate);
                                    }

                                    SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("dd-MMM-yyyy");
                                    String expeditureDate = expDate != null ? DATE_FORMAT.format(expDate.getValue()): null;
                                    System.out.println("----- Selected value for invoice date in dd-MMM-yyyy format : " + expeditureDate);

                                    DCBindingContainer dcBindingContainerEXPDate = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                    DCIteratorBinding dcIteratorBindingEXPDate = dcBindingContainerEXPDate.findIteratorBinding("ExpenditureDateVO1Iterator");
                                    ViewObjectImpl expenditureDateVO = (ViewObjectImpl)dcIteratorBindingEXPDate.getViewObject();
                                    /*   ViewCriteria vc5 = validateGLCodeVO.getViewCriteria("CounterPartyVOCriteria1");
                                    validateGLCodeVO.applyViewCriteria(vc5);*/
                                    expenditureDateVO.setNamedWhereClauseParam("bindProjectId",projectId);
                                    expenditureDateVO.setNamedWhereClauseParam("bindOrgId",enteredOrgIdIt);
                                    expenditureDateVO.setNamedWhereClauseParam("bindTaskId",taskId);
                                    expenditureDateVO.setNamedWhereClauseParam("bindExpenditureDate",expeditureDate);
//                                    System.out.println("-----------Dynamic Query-----------");
//                                    System.out.println(expenditureDateVO.getQuery());
                                    expenditureDateVO.executeQuery();
                                    while (expenditureDateVO.hasNext()) {
                                      Row row = expenditureDateVO.next(); // Get the next row in the result set.
                                      if(null != row.getAttribute("Validexpendituredatereason"))
                                      {
                                      validexpdateError = row.getAttribute("Validexpendituredatereason").toString();
                                        System.out.println("Validexpendituredatereason "+validexpdateError);
                                        }
                                    }
                                    if(validexpdateError!=null && !validexpdateError.equals(""))
                                    {
                                    System.out.println("Inside if glcode error" +validexpdateError);
                                        isValidProjectNo = false;
                                    FacesMessage Message =
                                        new FacesMessage("Please Enter valid Expenditure Date on  Line No "+line+" : "+validexpdateError);
                                    Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                                    FacesContext fc = FacesContext.getCurrentInstance();
                                    fc.addMessage(null, Message);
                                    break;
                                    }



                                }
                            if(glRow.getAttribute("Attr10")==null){
                                isValidGLCode = false;
                                message="Please Enter valid Expenditure Type on Line No----- : "+line;
                                callFacesMessage(message);
                                break;
                            }
                            else{
                                //Expenditure Type Validation

                                String expenditureType = (String)glRow.getAttribute("Attr10");
                               // String projectId = null;
                              /*  if(projectIdIt.getValue()!= null) {
                                    projectId = projectIdIt.getValue().toString();
                                    System.out.println("projectIdIt.getValue()" + projectId);
                                }*/
                              SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("dd-MMM-yyyy");
                              String projectId = (String)glRow.getAttribute("ProjectidLine");
                                System.out.println("Project Id "+projectId);
                                String taskId = (String)glRow.getAttribute("TaskidLine");
                                  System.out.println("Project Id "+taskId);
                                System.out.println("expenditureType "+expenditureType);

                                oracle.jbo.domain.Date expDate = (oracle.jbo.domain.Date)glRow.getAttribute("ExpenditureDate");
                                String expenditureDate = expDate != null ? DATE_FORMAT.format(expDate.getValue()): null;

                                System.out.println("Expenditure Date on validate type duirng submit : "+expenditureDate);


                                DCBindingContainer dcBindingContainerType = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                               DCIteratorBinding dcIteratorBindingType = dcBindingContainerType.findIteratorBinding("ExpenditureTypeVO1Iterator");
                               ViewObjectImpl expenditureTypeVo = (ViewObjectImpl)dcIteratorBindingType.getViewObject();
                               ViewCriteria vc = expenditureTypeVo.getViewCriteria("ExpenditureTypeVOCriteria2");
                               expenditureTypeVo.applyViewCriteria(vc);
                               expenditureTypeVo.setNamedWhereClauseParam("bindProjectId", projectId);
                               expenditureTypeVo.setNamedWhereClauseParam("bindExpType", expenditureType);
                                expenditureTypeVo.setNamedWhereClauseParam("bindTaskId", taskId);
                                expenditureTypeVo.setNamedWhereClauseParam("bindExpDate", expenditureDate);

//                               System.out.println("-----------Dynamic Query-----------");
//                               System.out.println("Expenditure VO ::---------------- "+expenditureTypeVo.getQuery());
                               expenditureTypeVo.executeQuery();
                                if(expenditureTypeVo.getEstimatedRowCount() ==0){
                                    isValidProjectNo = false;
                                    FacesMessage Message =
                                        new FacesMessage("Enter valid Expenditure Type on Line No : "+line);
                                    Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                                    FacesContext fc = FacesContext.getCurrentInstance();
                                    fc.addMessage(null, Message);
                                    break;
                                }

                            }
                        }


                    }
                    }catch(Exception e)
                    {
                        e.printStackTrace();
                        }
                    finally{
                                if(rsi!=null) {
                                    try {
                                        rsi.closeRowSetIterator();
                                    } catch(Exception ex) {
                                        ex.printStackTrace();

                                }
                                }
                            }
                    //rsi.closeRowSetIterator();
                }
                }
                else{
                    isNonPo = false;
                }
                System.out.println("isvalidFinally "+isValidedFinally);
                System.out.println("isValidGLCode "+isValidGLCode);
                System.out.println("isValidProjectNo "+isValidProjectNo);
                System.out.println("isValidPoNum"+isValidPoNum);
                boolean plain_NOPO = certifier_sbc.getValue().toString().equals("false")?true : false;
                //isValidedFinally=validateAndDoSaveOperation();
                if((/*isValidedFinally &&*/ isValidGLCode && isValidProjectNo &&  isValidPoNum  ) || plain_NOPO){
                    System.out.println("insie if");
                    System.out.println("isvalidFinally"+isValidedFinally);
                    System.out.println("isValidGLCode"+isValidGLCode);
                    if(isNonPo == false){


                        doSaveLineDetailsOperation();


                    }

                    validateAndDoSaveOperation();
                   /* BindingContext bctx = BindingContext.getCurrent();
                    BindingContainer bindingsContainer = bctx.getCurrentBindingsEntry();
                    OperationBinding operationBinding =  bindingsContainer.getOperationBinding("APPROVE");
                    operationBinding.execute();
                    closeCertifierWindow();*/

                /*******************Added on 26th DEC***********************/
                submit_cb.setDisabled(true);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(submit_cb);
               //18thjan closeCertifierWindow();


                }
                else{
                    if(isValidPoNum == false){
                        System.out.println("inside failed validation for PO");
                        FacesMessage Message =
                            new FacesMessage("Please Enter Valid PO Number");
                        Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                        FacesContext fc = FacesContext.getCurrentInstance();
                        fc.addMessage(null, Message);
                    }


                }
            }
                if(!( poNum==null || (poNum!=null && poNum.trim().equals(""))) ){
               System.out.println("POnumber before close111 "+poNum);
                }
                else
                {
                     //29th certifierApproverListPopUp.hide();


                    }
                    System.out.println("flagVar --------------- "+flagVar);


                }


            catch(Exception e) {
                e.printStackTrace();
            }
        //923018-For close popup issue-Start
        System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().put(\"suspenseAcc_flag\") "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("suspenseAcc_flag"));
       /* FacesContext facesContext = FacesContext.getCurrentInstance();
        ExtendedRenderKitService service =
           Service.getRenderKitService(facesContext,
                                       ExtendedRenderKitService.class);
        service.addScript(facesContext, "window.open('', '_self', ''); window.close();");*/
        //923018-For close popup issue-End
            System.out.println("End onSubmitClick from submitFromCertifier");
        return null;
    }



    public void closeCertifierWindow() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext ectx = facesContext.getExternalContext();
        ExtendedRenderKitService service = Service.getRenderKitService(facesContext, ExtendedRenderKitService.class);

        service.addScript(facesContext, "alert('Invoice Submitted Successfully');window.close();");

    }


    private boolean  validateAndDoSaveOperation() {
        System.out.println("Start : validateAndDoSaveOperation");
        try{
            boolean isValid=false;
            isValid=true;// validateRequiredField();
            String alternateApprover=null;
            if(isValid){
    //              if(poNumIt.getValue()!=null && alternateApproverIt.getValue()!=null){
                String poNum= poNumIt.getValue()==null ? "" : poNumIt.getValue().toString();
                if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID")!=null){
                    System.out.println("get Approver ID:::::"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID"));
                    //alternateApprover=alternateApproverIt.getValue()==null ? "" : alternateApproverIt.getValue().toString();
                    alternateApprover=alternateApproverIt.getValue()==null ? "" : AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString();
                }
                    doSaveOperation(poNum,alternateApprover);

                    return true;
    //                }
            }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateAndDoSaveOperation");
        return false;

    }


    private void doSaveOperation(String poNum,String alternateApprover) {
       /*29thaug try{
                Utility.getAm().saveCertifierDetails(resolveExpression("#{bindings.invoiceID.inputValue}").toString(), poNum, alternateApprover);
                System.out.println("Start : doSaveOperation");
        }
        catch(Exception e) {
            e.printStackTrace();
        }*/
       System.out.println("doSaveOperation(String poNum,String alternateApprover) : Start");
       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("natureofEXP_flag" ,natureOfEXpSOC.getValue());
       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("mpa_flag",mpaC.getValue());
       // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc1",pc1.getValue());
       //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",pc2.getValue());
       //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",pc3.getValue());
       if (getUrlOrg().equalsIgnoreCase("JS")) {
                   if (radio_paymentTypes.getValue() != null && radio_paymentTypes.getValue()
                                                                                  .toString()
                                                                                  .equals("WIRE")) {
                       AdfFacesContext.getCurrentInstance()
                                      .getPageFlowScope()
                                      .put("pc2", true);
                       AdfFacesContext.getCurrentInstance()
                                      .getPageFlowScope()
                                      .put("pc3", false);

                   }
               } else {
       if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("WIRE")){
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",true);
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);

              }else  if(radio_paymentTypes.getValue()!=null && radio_paymentTypes.getValue().toString().equals("CHEQUE")){
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",true);
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
              }
               }
       AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifier_flag_DB",certifier_sbc.getValue());
        System.out.println("pc3.getValue() 1 ::"+pc3.getValue());

       BindingContext bctx = BindingContext.getCurrent();
       BindingContainer bindings = bctx.getCurrentBindingsEntry();
       OperationBinding operationBinding =  bindings.getOperationBinding("saveAllFormDetails");
       System.out.println("doSaveOperation : Invoice Id: "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+" On saving from cert name ::"+certNameIt.getValue() +"-----supplier name  and currency -----"+supNameIt.getValue()
                          +"---curr----"+
                          currencyIt.getValue()  +"org id ::"+orgIdIt.getValue());

       operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
       operationBinding.getParamsMap().put("supName",supNameIt.getValue());
       operationBinding.getParamsMap().put("currency",certifier_sbc.getValue());
       operationBinding.getParamsMap().put("employeeNo", ADFContext.getCurrent().getPageFlowScope().get("userId"));
       operationBinding.getParamsMap().put("siteId",orgIdIt.getValue());



       operationBinding.execute();

        System.out.println("End doSaveOperation");



        if((ADFContext.getCurrent().getPageFlowScope().get("Submit")!=null && ADFContext.getCurrent().getPageFlowScope().get("Submit").toString().equals("true"))){
          System.out.println("Submit testing from flagvarrrrrrrrr");
          //File f = new File("/u02_sa_soadev/Oracle/Middleware/Upload/"+ADFContext.getCurrent().getPageFlowScope().get("userId")+"_Invoice_INPROGRESS.pdf"); //to be remove hardcoding

          // 13-07-23 2292543 Pdf issue changes
          String fileName=ADFContext.getCurrent().getPageFlowScope().get("orginal_fileName").toString();
          String extn=FilenameUtils.getExtension(fileName);
          File f = new File(resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope()
                                                                                                                                                   .get("userId")+"_Invoice_INPROGRESS."+extn); //to be remove hardcoding



         // File renamed_file = new File("/u02_sa_soadev/Oracle/Middleware/Upload/"+ADFContext.getCurrent().getPageFlowScope().get("userId")+"_Invoice_SUBMITTED_"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId") +".pdf"); //Submitted file name convention "userId_Invoice_SUBMITTED_invoiceId"  to be remove hardcoding

         //File renamed_file = new File(resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope().get("userId")+"_Invoice_SUBMITTED_"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId") +".pdf"); //Submitted file name convention "userId_Invoice_SUBMITTED_invoiceId"  to be remove hardcoding





          DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
         String date_toBePassed = dateFormat.format(new Date());

           File renamed_file = new File(resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()
                                        +ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+"_2_"
                                            +date_toBePassed+ "_" + getUrlOrg() +"_ nomail@qantas.com.au_Invoice-SUBMITTED-"+ ADFContext.getCurrent().getPageFlowScope().get("orginal_fileName")) ;//Submitted file name convention "userId_Invoice_SUBMITTED_invoiceId"  to be remove hardcoding


             if(f.exists() && !f.isDirectory()) {
              if(f.renameTo(renamed_file)){
                      System.out.println("Rename succesful");

                 // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OriginalFilename_afterSubmission", "/u02_sa_soadev/Oracle/Middleware/Upload/"+ADFContext.getCurrent().getPageFlowScope().get("userId")+"_Invoice_SUBMITTED_"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId") +".pdf");
                // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OriginalFilename_afterSubmission", resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope().get("userId")+"_Invoice_SUBMITTED_"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId") +".pdf");


                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OriginalFilename_afterSubmission",
                  resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()
                                                          +ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+"_2_"
                                                              +date_toBePassed+ "_" + getUrlOrg() +"_ nomail@qantas.com.au_Invoice-SUBMITTED-"+ ADFContext.getCurrent().getPageFlowScope().get("orginal_fileName"));



                System.out.println("File reneamed to :: "+resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()
                                                          +ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+"_2_"
                                                              +date_toBePassed+ "_" + getUrlOrg() +"_ nomail@qantas.com.au_Invoice-SUBMITTED-"+ ADFContext.getCurrent().getPageFlowScope().get("orginal_fileName"));


              }else{
                      System.out.println("Rename failed");
              }
          }

           System.out.println("Calling router Invoice Id :"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
           callRouterProcess(ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
            submit_cb.setDisabled(true);
            AdfFacesContext.getCurrentInstance().addPartialTarget(submit_cb);
        closeCertifierWindow();
       if(certifierApproverListPopUp.isRendered() && certifierApproverListPopUp.isVisible()){

           certifierApproverListPopUp.hide();
       }
       System.out.println("Show popup ");
      RichPopup.PopupHints hints = new RichPopup.PopupHints();
      validationErrorPopup.show(hints);
      this.validationErrorMessage.setValue("Invoice submitted successfully.");
            System.out.println(ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString()+" Done!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");


            //923018-For close popup issue-Start
            System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().put(\"suspenseAcc_flag\") "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("suspenseAcc_flag"));
            FacesContext facesContext = FacesContext.getCurrentInstance();
            ExtendedRenderKitService service =
               Service.getRenderKitService(facesContext,
                                           ExtendedRenderKitService.class);
            service.addScript(facesContext, "window.open('', '_self', ''); window.close();");
            //923018-For close popup issue-End

        }

    }



    public void callRouterProcess(String invoiceId){
        System.out.println("Inside router process call invoiceId: "+invoiceId);
        System.out.println("Inside router process call mpaCmpaC ::"+mpaC.getValue());

        RouterProcess_EP_ep routerProcess_EP_ep= null;
        routerProcess_EP_ep = new RouterProcess_EP_ep();
        RouterProcess routerProcess = routerProcess_EP_ep.getRouterProcess_pt();
        InvoiceImport payload = new InvoiceImport();

        //routerProcess.process(payload);jkjkkj
        //System.out.println("routerProcess called successfully");

        //ApInvoiceOverseasTableEOView1Iterator
        //ApOverseasLineitemTableEOView1Iterator

        RowSetIterator lineItemItr = null;
        RowSetIterator headerItr = null;
        DCBindingContainer dc = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();


        ViewObject headerVO= dc.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator").getViewObject();

        ViewObject lineItemVO= dc.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator").getViewObject();
        try{
            System.out.println(invoiceId+" Inside callRouterProcess :: headerVO.getEstimatedRowCount() :"+headerVO.getEstimatedRowCount());
            System.out.println(invoiceId + " Inside callRouterProcess :: lineItemVO.getEstimatedRowCount() :" +
                                           lineItemVO.getEstimatedRowCount());
           // payload.getHeader()
            if(headerVO.getEstimatedRowCount()>0){
                 headerItr=headerVO.createRowSetIterator(null);
                 while(headerItr.hasNext()) {
                     //Header headeron
                     //payload.setHeader(value);
                     InvoiceImport.Header header_obj=new InvoiceImport.Header();

                     Row headerRow=headerItr.next();

                     header_obj.setABN(headerRow.getAttribute("TaxRegNumber")!=null ? headerRow.getAttribute("TaxRegNumber").toString(): null);
                     //header_obj.setAccountNumber(headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     //header_obj.setAlternateApproverName( headerRow.getAttribute("AlternateApprover")!=null ? headerRow.getAttribute("AlternateApprover").toString(): null);
                     header_obj.setAlternateApproverName( alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString(): null);


                     header_obj.setAlternateApproverNote( headerRow.getAttribute("CertifierApproveComments")!=null ? headerRow.getAttribute("CertifierApproveComments").toString(): null);
                     //header_obj.setCertificationFlag(certifier_sbc.getValue()!=null ? certifier_sbc.getValue().toString() :null );
                     /*if(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equalsIgnoreCase("true")){

                         header_obj.setCertificationFlag("Y");
                     }
                      else if(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equalsIgnoreCase("false")){
                          header_obj.setCertificationFlag("N");

                      }*/
                     System.out.println("certifier_sbc value :"+certifier_sbc.getValue());
                                         System.out.println("invoiceTypeSoc value :"+invoiceTypeSoc.getValue());
                     if(certifier_sbc.getValue()!=null && certifier_sbc.getValue().toString().equalsIgnoreCase("true") &&
                        invoiceTypeSoc.getValue().toString().equals("Non PO Invoice")){

                                              header_obj.setCertificationFlag("N");
                          }

                     else if(invoiceTypeSoc.getValue().toString().equals("PO Invoice")) {
                         header_obj.setCertificationFlag("N");
                     }else{
                         header_obj.setCertificationFlag("Y");
                     }

                     System.out.println(invoiceId+" header_obj get certification flag :: "+header_obj.getCertificationFlag());
                      System.out.println(invoiceId + " header_obj get currency code :: " +
                                                             headerRow.getAttribute("CurrencyCode"));
                     header_obj.setCertifier( headerRow.getAttribute("CertifierName")!=null ? headerRow.getAttribute("CertifierName").toString(): null);
                     header_obj.setCertifierEmail(headerRow.getAttribute("CertifierEmailAdd")!=null ? headerRow.getAttribute("CertifierEmailAdd").toString(): null);
                     header_obj.setCertifierNumber(headerRow.getAttribute("EmployeeNumber")!=null ? headerRow.getAttribute("EmployeeNumber").toString(): null);
                     header_obj.setCurrencyCode(headerRow.getAttribute("CurrencyCode")!=null ? headerRow.getAttribute("CurrencyCode").toString(): null);
                    // header_obj.setCurrencyEquivalent( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setDocumentType(headerRow.getAttribute("DocumentType")!=null ? headerRow.getAttribute("DocumentType").toString().toUpperCase(): null);
                     if(header_obj.getDocumentType()!=null && header_obj.getDocumentType().toString().contains("CREDIT")){
                         header_obj.setDocumentType("CREDIT");
                     }



                    /* header_obj.setFreight(headerRow.getAttribute("")!=null ? (BigDecimal)headerRow.getAttribute(""): null);
                     header_obj.setHeader1( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader2(headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader3( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader4( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader5( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader6(headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader7( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader8( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader9( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setHeader10( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);*/
                     header_obj.setInvFilename(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OriginalFilename_afterSubmission").toString());
                    // header_obj.setInvalidCode( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     //header_obj.setInvalidReason( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     //header_obj.setInvoiceDate( headerRow.getAttribute("InvoiceDate")!=null ? headerRow.getAttribute("InvoiceDate").toString(): null);
                     //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("approverID"
                     //923018 -Approver_name_chage fix -start
                     if(headerRow.getAttribute("AlternateApprvrNo")!=null){
                     System.out.println(invoiceId+"--------------headerRow.getAttribute(\"AlternateApprvrNo\").toString()---------------"+headerRow.getAttribute("AlternateApprvrNo").toString());
                     }
                     if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID") !=
                        null){
                      System.out.println(invoiceId+"--------------AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"approverID\").toString()---------------"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString());
                        }
                    header_obj.setAlternateApproverName(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID") !=
                                                        null ?
                                                        AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString() :
                                                        (headerRow.getAttribute("AlternateApprvrNo") !=
                                                         null ?
                                                         headerRow.getAttribute("AlternateApprvrNo").toString() :
                                                         null));
                      //923018 -Approver_name_chage fix -End
                     header_obj.setAlternateApproverNote(certifierApproveComments.getValue()!=null ? certifierApproveComments.getValue().toString(): null);
                     String sDate1=invDateId.getValue()!=null ? invDateId.getValue().toString() : null;
                     if(sDate1!=null){
                        Date date1=new SimpleDateFormat("yyyy-MM-dd").parse(sDate1);
                        System.out.println(sDate1+"-----------------------------"+date1);
                        if(date1!=null){

                            DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
                            String strDate = dateFormat.format(date1);
                            System.out.println(invoiceId+"\"dd/MM/yyyy\" :: "+strDate);
                            header_obj.setInvoiceDate(strDate);
                        }
                     }

                   //  header_obj.setInvoiceDate( invDateId.getValue().!=null ? invDateId.getValue().toString(): null);
                     if(headerRow.getAttribute("InvoiceNumber")!=null)  {
                        System.out.println(invoiceId+" headerRow.getAttribute(\"InvoiceNumber\").toString():: "+headerRow.getAttribute("InvoiceNumber").toString());
                     }
                     header_obj.setInvoiceNumber( headerRow.getAttribute("InvoiceNumber")!=null ? headerRow.getAttribute("InvoiceNumber").toString(): null);
                     header_obj.setInvoiceSiteID( headerRow.getAttribute("SiteId")!=null ? headerRow.getAttribute("SiteId").toString(): null);
                     //header_obj.setInvoiceTotalAmount(headerRow.getAttribute("InvoiceTotAmount")!=null ? Float.parseFloat(headerRow.getAttribute("InvoiceTotAmount").toString()): null);

                     header_obj.setInvoiceTotalAmount(headerRow.getAttribute("InvoiceTotAmount")!=null ? new BigDecimal((headerRow.getAttribute("InvoiceTotAmount").toString())): null);
                     String invtype_bpm = null;
                     if(headerRow.getAttribute("InvoiceType")!=null && headerRow.getAttribute("InvoiceType").toString().contains("Non PO") ){
                         invtype_bpm="NO-PO"  ;
                             }else if(headerRow.getAttribute("InvoiceType")!=null && !headerRow.getAttribute("InvoiceType").toString().contains("Non PO")){
                                 invtype_bpm="PO" ;
                             }
                     header_obj.setInvoiceType( invtype_bpm);
                    // header_obj.setInvoiceType( headerRow.getAttribute("InvoiceType")!=null ? headerRow.getAttribute("InvoiceType").toString(): null);
                     //header_obj.setMisc( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setOperatingUnit( headerRow.getAttribute("Attr2")!=null ? headerRow.getAttribute("Attr2").toString(): null);
                     header_obj.setOrgID(headerRow.getAttribute("OrgId")!=null ? headerRow.getAttribute("OrgId").toString(): null);
                     header_obj.setOriginalfilePath(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OriginalFilename_afterSubmission").toString());
                     header_obj.setPONumber( headerRow.getAttribute("PoNumber")!=null ? headerRow.getAttribute("PoNumber").toString(): null);
                     header_obj.setPaymentAllocation( paymentAllocNo.getValue()!=null ? paymentAllocNo.getValue().toString() : null );

                     System.out.println(invoiceId+" mpaC.getValue().toString()"+mpaC.getValue().toString());
                     //header_obj.setPaymentGroup( mpaC.getValue().toString().equals("true")? "MANUAL" : "NON MANUAL");
                     header_obj.setPaymentGroup( mpaC.getValue().toString().equals("true")? "MANUAL" : "");

                     /*String paymentMethod = null;
                     if(pc3.getValue().toString().equals("true") && pc2.getValue().toString().equals("true"))
                         paymentMethod = "WIRED AND CHEQUE";
                     else if(pc2.getValue().toString().equals("true") && pc3.getValue().toString().equals("false"))
                         paymentMethod = "WIRED";
                     else if(pc2.getValue().toString().equals("false") && pc3.getValue().toString().equals("true"))
                         paymentMethod = "CHEQUE";*/
                     String paymentMethod = radio_paymentTypes.getValue()!=null ?radio_paymentTypes.getValue().toString() :null ;
                      System.out.println(invoiceId+" paymentMethod:: "+paymentMethod !=null?paymentMethod:"NULL");

                      header_obj.setPaymentMethod(paymentMethod);
                     if(paymentMethod!=null  && paymentMethod.equals("CHEQUE")){
                         header_obj.setPaymentMethod("CHECK");
                     }/*else{
                         header_obj.setPaymentMethod(paymentMethod);
                     }*/
                     System.out.println(invoiceId+"setPaymentMethod :: "+header_obj.getPaymentMethod());
                      System.out.println(invoiceId + "natureOfEXpSOC :: " + natureOfEXpSOC.getValue().toString());
                     header_obj.setPaymentWithoutInv( natureOfEXpSOC.getValue().toString().equals("true") ? "YES" : "NO" );
                     //header_obj.setSubtotal( lineIdIt.getValue()!=null ? Float.parseFloat(lineIdIt.getValue().toString()) : null);

                     header_obj.setSubtotal( lineIdIt.getValue()!=null ? new BigDecimal(lineIdIt.getValue().toString()): null);




                     header_obj.setTax( headerRow.getAttribute("TaxAmount")!=null ? new BigDecimal(headerRow.getAttribute("TaxAmount").toString()): null);
                     header_obj.setUserId( headerRow.getAttribute("UserId")!=null ? headerRow.getAttribute("UserId").toString(): null);
                      System.out.println("CallRouterProcess SupplierId Before Loop : "+headerRow.getAttribute("Attr20"));
                                          if (getUrlOrg().equalsIgnoreCase("JS")){
                                              System.out.println("CallRouterProcess SupplierId : "+headerRow.getAttribute("Attr20"));
                                          header_obj.setVendorId( headerRow.getAttribute("Attr20")!=null ? headerRow.getAttribute("Attr20").toString(): null);
                                          }
                     //header_obj.setUserName( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     //header_obj.setVendorId( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                     header_obj.setVendorName( headerRow.getAttribute("SupplierName")!=null ? headerRow.getAttribute("SupplierName").toString(): null);
                     header_obj.setVendorNumber( headerRow.getAttribute("SupplierNumber")!=null ? headerRow.getAttribute("SupplierNumber").toString(): null);
                     header_obj.setVendorSiteID(headerRow.getAttribute("SiteId")!=null ? headerRow.getAttribute("SiteId").toString(): null);
                     //header_obj.setWHTAmount( headerRow.getAttribute("")!=null ? headerRow.getAttribute("").toString(): null);
                    // header_obj.setWithholdingTax( headerRow.getAttribute("")!=null ? (Float)headerRow.getAttribute(""): null);
                    //923018 Start UI Change for New Field
                      System.out.println(invoiceId+" headerRow.getAttribute(\"ElectRemittance\")"+headerRow.getAttribute("ElectRemittance"));
                    header_obj.setElectRemittence(headerRow.getAttribute("ElectRemittance")!=null ? headerRow.getAttribute("ElectRemittance").toString(): null);
                    //923018 End UI Change for New Field
                    String certifier_name=null;
                    String  certifier_emp =null;

                     DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                     DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                     ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                     ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");

                     certifierNameVO.applyViewCriteria(vc);
                     //certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId"));
                     certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", ADFContext.getCurrent().getPageFlowScope().get("userId").toString()
                                                             );
                     certifierNameVO.setNamedWhereClauseParam("bindName", null);
                     certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                      certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                          System.out.println("Query : " + certifierNameVO.getQuery());
                     certifierNameVO.executeQuery();
                     System.out.println(invoiceId+"Certifier query excetion auto populate row counts :: "+certifierNameVO.getEstimatedRowCount());

                     while (certifierNameVO.hasNext()) {
                       Row row = certifierNameVO.next(); // Get the next row in the result set.

                      System.out.println(invoiceId+" certifierNameVO.getCurrentRow().getAttribute(\"FirstName\")"+certifierNameVO.getCurrentRow().getAttribute("FirstName"));
                       if(certifierNameVO.getCurrentRow().getAttribute("FirstName")!=null && certifierNameVO.getCurrentRow().getAttribute("LastName")!=null){

                           System.out.println(invoiceId+" insideee certifierNameVO ");
                           String lastname =" "+certifierNameVO.getCurrentRow().getAttribute("LastName");

                           certifier_name = certifierNameVO.getCurrentRow().getAttribute("FirstName").toString().concat(lastname);
                           System.out.println(invoiceId+" insideee certifierNameVO "+certifier_name);
                           header_obj.setUserName(certifier_name);
                           header_obj.setUserId(ADFContext.getCurrent().getPageFlowScope().get("userId").toString());
                       }

                       //certifier_mail =certifierNameVO.getCurrentRow().getAttribute("EmailAddress")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmailAddress").toString() :null;
                       certifier_emp =certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber")!=null ?certifierNameVO.getCurrentRow().getAttribute("EmployeeNumber").toString() :null;
                     }
                    /* if(invoiceTypeSoc!=null && invoiceTypeSoc.toString().equals("PO Invoice")){
                     System.out.println("setting certifier_name in PO Invoice ::"+ certifier_name);
                     header_obj.setUserName(certifier_name);
                     //header_obj.setUserId(certifier_emp);

                     }else if(invoiceTypeSoc!=null && invoiceTypeSoc.toString().equals("Non PO Invoice")){

                     header_obj.setUserName(certNameIt.getValue()!=null ?certNameIt.getValue().toString() : "" );
                         header_obj.setUserId(ADFContext.getCurrent().getPageFlowScope().get("userId").toString());
                     }*/


                 System.out.println(invoiceId+":::::::::::Printing all header palyload params ::::::::::");
                      System.out.println(invoiceId+" userr id ::"+header_obj.getUserId());
                      System.out.println(invoiceId+" userr id ::"+header_obj.getUserName());
                      System.out.println("Router Payload object : "+header_obj.toString());
                  payload.setHeader(header_obj);}
            }


            InvoiceImport.Additionalinfo addInfo = new InvoiceImport.Additionalinfo();

            /**Setting additionInfo object as required by BPM*/
            System.out.println(invoiceId+"Capture batch Id is :: "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
            addInfo.setBatchID(ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
            addInfo.setDocScanDate(Long.toString(new Date().getTime()));


            addInfo.setSrcSystem("INVOICE TEMPLATE " + getUrlOrg());
            addInfo.setPriority("NO");
            payload.setAdditionalinfo(addInfo);

            /**Setting additionInfo object as required by BPM*/


            InvoiceImport.LineItems lineItemsObj = new InvoiceImport.LineItems();
            //ArrayList<InvoiceImport.LineItems.LineItem> lineItemList =  (ArrayList)lineItemsObj.getLineItem();

            if(lineItemVO.getEstimatedRowCount()>0){
                 lineItemItr=lineItemVO.createRowSetIterator(null);
                 while(lineItemItr.hasNext()) {
                     Row lineItemRow=lineItemItr.next();

                     InvoiceImport.LineItems.LineItem lineItem = new InvoiceImport.LineItems.LineItem();
                     lineItem.setLineNumber(lineItemRow.getAttribute("LineNumber")!=null ? new BigInteger(lineItemRow.getAttribute("LineNumber").toString()) : null);
                     lineItem.setLinePONumber(lineItemRow.getAttribute("LinePoNum")!=null ? lineItemRow.getAttribute("LinePoNum").toString() : null);
                     lineItem.setLinePOLineNumber(lineItemRow.getAttribute("PoLineNum")!=null ? lineItemRow.getAttribute("PoLineNum").toString() : null);
                     lineItem.setDescription(lineItemRow.getAttribute("LineDescription")!=null ? lineItemRow.getAttribute("LineDescription").toString() : null);
                     lineItem.setQuantity(lineItemRow.getAttribute("Quantity")!=null ? new BigDecimal(lineItemRow.getAttribute("Quantity").toString()) : null);
                     lineItem.setMaterialNumber("to_be_known");
                     lineItem.setUOM(lineItemRow.getAttribute("Uom")!=null ? lineItemRow.getAttribute("Uom").toString() : null);
                     lineItem.setUnitPrice(lineItemRow.getAttribute("UnitPrice")!=null ? new BigDecimal(lineItemRow.getAttribute("UnitPrice").toString()) : null);
                     lineItem.setLineTotalAmount(lineItemRow.getAttribute("LineTotalAmount")!=null ? new BigDecimal(lineItemRow.getAttribute("LineTotalAmount").toString()): null);
                     lineItem.setLineType(lineItemRow.getAttribute("LineType")!=null ? lineItemRow.getAttribute("LineType").toString() : null);
                     lineItem.setTaxAmount(lineItemRow.getAttribute("TaxAmountLineitem")!=null ? new BigDecimal(lineItemRow.getAttribute("TaxAmountLineitem").toString()) : null);
                     //lineItem.setTaxRate(lineItemRow.getAttribute("TaxRate")!=null ? new BigDecimal(lineItemRow.getAttribute("TaxRate").toString()) : null);
                     lineItem.setTaxRate(null);
                     lineItem.setGLCode(lineItemRow.getAttribute("GlNo")!=null ? lineItemRow.getAttribute("GlNo").toString() : null);
                     lineItem.setProjectCode(lineItemRow.getAttribute("ProjectNo")!=null ? lineItemRow.getAttribute("ProjectNo").toString() : null);
                     lineItem.setTaskNo(lineItemRow.getAttribute("TaskNo")!=null ? lineItemRow.getAttribute("TaskNo").toString() : null);
                     lineItem.setExpDate(lineItemRow.getAttribute("ExpenditureDate")!=null ? lineItemRow.getAttribute("ExpenditureDate").toString() : null);

                     //lineItem.setExpOrg(lineItemRow.getAttribute("ExpinditureOrg")!=null ? lineItemRow.getAttribute("ExpinditureOrg").toString() : null);
                     lineItem.setExpType(lineItemRow.getAttribute("Attr10")!=null ? lineItemRow.getAttribute("Attr10").toString() : null);
                     lineItem.setRecCode(lineItemRow.getAttribute("RecCode")!=null ? lineItemRow.getAttribute("RecCode").toString() : null);
                     lineItem.setLine1(lineItemRow.getAttribute("ExpinditureOrg")!=null ? lineItemRow.getAttribute("ExpinditureOrg").toString() : null);
                     // suspense account to be passed AdfFacesContext.getCurrentInstance().getPageFlowScope().put("suspenseAcc_flag",true)
                     //Line2 -10

                     lineItem.setLine2(lineItemRow.getAttribute("TaxRateCode")!=null ? lineItemRow.getAttribute("TaxRateCode").toString() : null);
                     if(invoiceTypeSoc.getValue()!=null && invoiceTypeSoc.getValue().toString().equals("Non PO Invoice")  && certifier_sbc.getValue().toString().equals("true"))
                     {
                         System.out.println(invoiceId+"Setting suspense account");

                         //Remove whitespace and split by comma
                         ArrayList<String> result_lines=null;

                         if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("lines_suspense")!=null){

                            String comma_lineNos = AdfFacesContext.getCurrentInstance().getPageFlowScope().get("lines_suspense").toString();

                              result_lines = new ArrayList<String>(Arrays.asList(comma_lineNos.split("\\s*,\\s*")));
                            System.out.println(result_lines);
                         }

                         String lineNO =  lineItemRow.getAttribute("LineNumber").toString();
                         boolean  line_found=false;
                         if(result_lines!=null && result_lines.size()>0){
                             for(String item :result_lines ){
                                 if(lineNO.equals(item)){
                                 line_found =true;
                                 break;
                                 }
                             }
                         }
                         if((result_lines!=null &&result_lines.size()>0)&& line_found && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("suspenseAcc_flag")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("suspenseAcc_flag").toString().equals("true"))  {
                             lineItem.setSuspenseAccFlag("Y");
                         }else{
                             lineItem.setSuspenseAccFlag("N");
                         }

                         /*if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("suspenseAcc_flag")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("suspenseAcc_flag").toString().equals("true")){
                         lineItem.setSuspenseAccFlag("Y");
                         } else{

                             lineItem.setSuspenseAccFlag("N");
                         }*/

                     }

                     lineItemsObj.getLineItem().add(lineItem);

                     //lineItemList.add(lineItem);







                 }
                 payload.setLineItems(lineItemsObj);

        }


              System.out.println(invoiceId+" calling the process");
                System.out.println("Router Payload :"+payload);
              routerProcess.process(payload);
            System.out.println(invoiceId+" done calling the process");

        }catch (Exception e) {
            e.printStackTrace();
        }
        finally{
                    if(lineItemItr!=null) {
                        try {
                            lineItemItr.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();
                    }
                    }
                }

    }

    // 21-11-22 JS roundAmount same as APException
    public void roundAmount(String currencyCode,String lineAmount,String attributeName){

            System.out.println("Inside : JS roundAmount");


        try{

            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ValidateRoundingAmount1Iterator");
            ViewObjectImpl validateRoundAmountVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
            validateRoundAmountVO.setNamedWhereClauseParam("bv_p_currency",currencyCode);
            validateRoundAmountVO.setNamedWhereClauseParam("bv_p_amount",lineAmount);
            //System.out.println("-----------Dynamic Query-----------");
            //System.out.println(validateGLCodeVO.getQuery());

            validateRoundAmountVO.executeQuery();
            String roundAmount=null;
            while (validateRoundAmountVO.hasNext()) {
                //System.out.println("validateRoundAmountVO.hasNext() not null");
                Row row = validateRoundAmountVO.next(); // Get the next row in the result set.
                int attributeCount = row.getAttributeCount();
                //System.out.println("AtrributeCount :: "+attributeCount );
                String [] attributeNames =row.getAttributeNames();
                if(row.getAttribute(row.getAttributeNames()[0])!=null){
                roundAmount = row.getAttribute(attributeNames[0]).toString();
                }
            }


            DCBindingContainer bindings = getBinding();
            DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            System.out.println("lineItemIter ::"+lineItemIter);
            ViewObject empVO = lineItemIter.getViewObject();
            Row selectedRow=empVO.getCurrentRow();
            //System.out.println("selectedRow :: "+selectedRow);
            if (selectedRow!=null){

                System.out.println("set lineAmount");
                //lineTotal.setValue(roundAmount);
                //System.out.println("taxamountIt set to value"+lineTotal.getValue());

                selectedRow.setAttribute(attributeName, roundAmount);
                //System.out.println("Rounded Value of "+"attributeName :: " +selectedRow.getAttribute(attributeName));

                //LineTotalAmount

                if(attributeName!=null && attributeName.equals("LineTotalAmount")){
                AdfFacesContext.getCurrentInstance().addPartialTarget(lineTotal);
                }

                //AdfFacesContext.getCurrentInstance().addPartialTarget(lineItemsTable);

                }
        }
            catch(Exception e) {

                e.printStackTrace();
            }



            System.out.println("End : roundAmount");
        }


    public void onSubmitClick(ActionEvent actionEvent) {
        System.out.println("onSubmitClick(ActionEvent actionEvent) Start :::");
        System.out.println("On submit click orgId ::"+ADFContext.getCurrent().getPageFlowScope().get("OrgID"));
        System.out.println("On submit click orgId it::"+orgIdIt.getValue());

        if(orgIdIt.getValue()==null || (orgIdIt.getValue()!=null && orgIdIt.getValue().toString().equals("")  )){
            System.out.println("Setting orgId value on submit click as it is coming null ::: ");

            String orgId = getOrgIdFinal();
            orgIdIt.setValue(orgId);


            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
            System.out.println("Value setted in org Id i/p :::"+orgIdIt.getValue());


            //Added on 24th JAn
            AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
        }



        ADFContext.getCurrent().getPageFlowScope().put("Submit","true");
        System.out.println("Start onSubmitClick");
        //glCode
        String poNum;
        RowSetIterator lineItemItr = null;
        RowSetIterator lineItemItr_1 = null;
        boolean flagGlCodePresent=true;
        boolean flag_suspense1 = true;
        boolean flag_suspense2 = true;
      //  submitFromCertifier();
        String line_num = null;
        String lineNum=null;
        String suspenseMessage_1 = null;
        String suspenseMessage_2 = null;
        boolean first_level_flag = true;
        String first_level_validation = null;
        boolean rec_level_flag= true;
        ArrayList<String> lineNumber_list = new ArrayList<String>();
        ArrayList<String> message_list_suspense = new ArrayList<String>();


        String invNum =null;
                        if(invNumIt.getValue()!=null){
                              invNum = (String)invNumIt.getValue();
                          }
                          String enteredSiteId=null;
                          if(siteIdIt.getValue()!=null){
                          enteredSiteId = siteIdIt.getValue().toString();
                          }
                          String enteredSupName=null;
                          if(supNameIt.getValue()!=null){
                          enteredSupName = supNameIt.getValue().toString();
                          }



                          oracle.jbo.domain.Date invDate = null;
                          if(invDateId.getValue()!=null){
                          invDate = ((oracle.jbo.domain.Date)invDateId.getValue());
                          }


                          String enteredTotalAmount=null;
                          if(headerTotIt.getValue()!=null){
                          enteredTotalAmount = headerTotIt.getValue().toString();
                          }

        //923018-Duplicate change- start

        String supplier_Id=null;

        if(ADFContext.getCurrent().getPageFlowScope().get("supplier_id_value")!=null){
         supplier_Id = ADFContext.getCurrent().getPageFlowScope().get("supplier_id_value").toString();
            System.out.println("onSubmitClick method :: supplierId :: "+supplier_Id);
        }
        String inDate=null;
        if(invDateId.getValue()!=null){
            inDate=invDateId.getValue().toString();
        }
        //System.out.println(invNum+" onSubmitClick method :: Check Duplicate SP");
        //boolean flag = checkDuplicateRecordSP(invNum, enteredSiteId, supplier_Id, inDate, enteredTotalAmount, ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
        System.out.println(invNum+" onSubmitClick method :: before check duplicate invNum : "+invNum+" invoice Id: "+ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString());
        if(!checkDuplicateRecordSP(invNum, enteredSiteId, supplier_Id, inDate, enteredTotalAmount, ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString())) {
        // if(!checkDuplicateRecord(invNum,enteredSiteId,enteredSupName,invDate,enteredTotalAmount,ADFContext.getCurrent().getPageFlowScope().get("invoiceId").toString(), "SUBMIT")) {
            //923018-Duplicate change- End

      /**Check if certifier related header fields are filled and payment details validation*/
     /*   if(certifier_sbc.getValue().toString().equals("true")){



        }

        /**Check if certifier related header fields are filled and payment details validation*/

        try{
        //boolean flagGlCodePresent=true; on 1st OCt
             poNum = poNumIt.getValue()!=null ? poNumIt.getValue().toString() : null;
            System.out.println(invNum+" onSubmitClick ::::  "+ ""+ "poNum ::: "+ poNum);
              if((!( poNum==null || (poNum!=null && poNum.trim().equals("")))) ||  (
                 certifier_sbc.getValue().toString().equals("false") && invoiceTypeSoc.getValue().toString().equals("Non PO Invoice")
                 )){
             // samplecheck();
                    System.out.println(invNum+" Enering to the PO check or NO PO without certifier flag check");
                    System.out.println(invNum+" Before submitFromCertifier Call from Submit Click");
                      submitFromCertifier();
                      }

            else if(certifier_sbc.getValue().toString().equals("true")){// done on 12/12/2018

                //else{
        DCBindingContainer dc = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        ViewObject lineItemVO= dc.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator").getViewObject();

            try{
                if(lineItemVO.getEstimatedRowCount()>0){
                     lineItemItr_1=lineItemVO.createRowSetIterator(null);
                     while(lineItemItr_1.hasNext()) {

                         Row lineItemRow=lineItemItr_1.next();


                        System.out.println(invNum+" Before here");
                        System.out.println(invNum+" GLNo ::"+lineItemRow.getAttribute("GlNo"));
                        System.out.println(invNum+" TAX Rate Code ::"+lineItemRow.getAttribute("TaxRateCode"));
                        System.out.println("ProjectNo ::"+lineItemRow.getAttribute("ProjectNo"));
                        if(lineItemRow.getAttribute("GlNo")==null && lineItemRow.getAttribute("ProjectNo") == null){
                            System.out.println("inisde here");
                            System.out.println(invNum+" GLNo ::"+lineItemRow.getAttribute("GlNo"));
                            System.out.println(invNum+" ProjectNo ::"+lineItemRow.getAttribute("ProjectNo"));
                            flagGlCodePresent=false;
                            break;
                        }else if(lineItemRow.getAttribute("GlNo")==null && lineItemRow.getAttribute("ProjectNo") != null

                                 &&(lineItemRow.getAttribute("TaskNo")==null ||
                                 lineItemRow.getAttribute("ExpinditureOrg")==null || lineItemRow.getAttribute("ExpenditureDate")==null)){

                                     flagGlCodePresent=false;
                                     break;
                                 }
                        else if(lineItemRow.getAttribute("GlNo")==null && lineItemRow.getAttribute("ProjectNo") != null

                                                         && lineItemRow.getAttribute("TaskNo")!=null &&
                                                         lineItemRow.getAttribute("ExpinditureOrg")!=null && lineItemRow.getAttribute("ExpenditureDate")==null){
                                                             System.out.println("project related fie;ds present hence showing stuffs");
                                                             flagGlCodePresent=false;
                                                             break;
                                                         }

                         else if(lineItemRow.getAttribute("GlNo")!=null &&
                                 (lineItemRow.getAttribute("GlNo")!=null && !lineItemRow.getAttribute("GlNo").toString().trim().equals(""))){
                         DCBindingContainer dcBindingContainer5 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                         DCIteratorBinding dcIteratorBinding5 = dcBindingContainer5.findIteratorBinding("gl_cc_overseas_validation1Iterator");
                                        // DCIteratorBinding dcIteratorBinding5 = dcBindingContainer5.findIteratorBinding("gl_cc_overseas_validation");


                                         ViewObjectImpl validatesuspenseCheck1VO = (ViewObjectImpl)dcIteratorBinding5.getViewObject();
                                  /*   ViewCriteria vc5 = validateGLCodeVO.getViewCriteria("CounterPartyVOCriteria1");
                                         validateGLCodeVO.applyViewCriteria(vc5);*/
                                  System.out.println(invNum+" Terstinggggggggggggggggggggggggggggggggggggggggggggggg1224-666----28-");
                                         System.out.println(invNum+" Passing GL code and org id to the suspense package 1st ::"+lineItemRow.getAttribute("GlNo") +"---"+orgIdIt.getValue());
                                         validatesuspenseCheck1VO.setNamedWhereClauseParam("bindGLCode",lineItemRow.getAttribute("GlNo"));
                                         validatesuspenseCheck1VO.setNamedWhereClauseParam("bindOrgID",orgIdIt.getValue()!=null ?orgIdIt.getValue() : null);
                                         validatesuspenseCheck1VO.setNamedWhereClauseParam("bindOrg",getUrlOrg());
//                                         System.out.println("-----------Dynamic Query-----------");
//                                         System.out.println(validatesuspenseCheck1VO.getQuery());
                                         validatesuspenseCheck1VO.executeQuery();
                                    while (validatesuspenseCheck1VO.hasNext()) {
                                           Row row = validatesuspenseCheck1VO.next(); // Get the next row in the result set.
                                           System.out.println(invNum+" Validglcode ."+ row.getAttribute("Validglcode")+".");


                                        /********************Added on 28th DEc*******************************/
                                        String glCodeError =row.getAttribute("Validglcode")!=null ? row.getAttribute("Validglcode").toString() : null;
                                        System.out.println("GlCodeError : "+glCodeError);
                                        System.out.println("RecCode : "+lineItemRow.getAttribute("RecCode"));
                                        if(glCodeError!=null && glCodeError.equals("Y")) {
                                            if(lineItemRow.getAttribute("RecCode")==null || lineItemRow.getAttribute("RecCode").equals(""))
                                            {
                                                    first_level_flag=false;

                                                    System.out.println("Inside if valid glcode and checking reccodeerror" +glCodeError);
                                                    System.out.println(" Rec code is "+lineItemRow.getAttribute("RecCode"));
                                                    //first_level_flag=false;
                                                    //rec_level_flag=false;
                                                    FacesMessage Message =
                                                        new FacesMessage("Please Enter REC Code on  Line No "+lineItemRow.getAttribute("LineNumber"));
                                                    Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                                                    FacesContext fc = FacesContext.getCurrentInstance();
                                                    fc.addMessage(null, Message);
                                                    break;
                                                }

                                        }






                                        else if(row.getAttribute("Validglcode") !=null && !row.getAttribute("Validglcode").equals("Y")){

                                            first_level_flag=false;
                                            first_level_validation = row.getAttribute("Validglcode").toString();
                                            line_num = lineItemRow.getAttribute("LineNumber")!=null ? lineItemRow.getAttribute("LineNumber").toString(): null;


                                            break;
                                        }


                                        }if(first_level_validation!=null && !first_level_flag){
                                            //break from line item loop
                                             break;

                                        }

                     }
                    }

                }


            } catch (Exception e) {
                e.printStackTrace();
            }
            finally{
                        if(lineItemItr_1!=null) {
                            try {
                                lineItemItr_1.closeRowSetIterator();
                            } catch(Exception ex) {
                                ex.printStackTrace();
                        }
                        }
                    }


        if(lineItemVO.getEstimatedRowCount()>0 && first_level_flag){
             lineItemItr=lineItemVO.createRowSetIterator(null);
             while(lineItemItr.hasNext()) {
                 Row lineItemRow=lineItemItr.next();

                 if(lineItemRow.getAttribute("GlNo")==null && lineItemRow.getAttribute("ProjectNo") == null){
                     System.out.println(invNum+" GLNo ::"+lineItemRow.getAttribute("GlNo"));
                     System.out.println(invNum+" ProjectNo ::"+lineItemRow.getAttribute("ProjectNo"));
                     flagGlCodePresent=false;
                     break;
                 }/*else{

                     System.out.println("GLNo ::"+lineItemRow.getAttribute("GlNo"));
                     System.out.println("ProjectNo ::"+lineItemRow.getAttribute("ProjectNo"));
                 }*/



                 else if(lineItemRow.getAttribute("GlNo")!=null &&
                                                  (lineItemRow.getAttribute("GlNo")!=null && !lineItemRow.getAttribute("GlNo").toString().trim().equals("")) && first_level_flag){

                 //else if(lineItemRow.getAttribute("GlNo")!=null && first_level_flag){
                     /*check for suspense account */
                     DCBindingContainer dcBindingContainer5 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                     DCIteratorBinding dcIteratorBinding5 = dcBindingContainer5.findIteratorBinding("gl_cc_overseas_validation1Iterator");
                                    // DCIteratorBinding dcIteratorBinding5 = dcBindingContainer5.findIteratorBinding("gl_cc_overseas_validation");


                                     ViewObjectImpl validatesuspenseCheck1VO = (ViewObjectImpl)dcIteratorBinding5.getViewObject();
                              /*   ViewCriteria vc5 = validateGLCodeVO.getViewCriteria("CounterPartyVOCriteria1");
                                     validateGLCodeVO.applyViewCriteria(vc5);*/
                              System.out.println(invNum+" Terstinggggggggggggggggggggggggggggggggggggggggggggggg");
                                     System.out.println(invNum+" Passing GL code and org id to the suspense package 1st ::"+lineItemRow.getAttribute("GlNo") +"---"+orgIdIt.getValue());
                                     validatesuspenseCheck1VO.setNamedWhereClauseParam("bindGLCode",lineItemRow.getAttribute("GlNo"));
                                     validatesuspenseCheck1VO.setNamedWhereClauseParam("bindOrgID",orgIdIt.getValue()!=null ?orgIdIt.getValue() : null);
                                     validatesuspenseCheck1VO.setNamedWhereClauseParam("bindOrg",getUrlOrg());
//                                     System.out.println("-----------Dynamic Query-----------");
//                                     System.out.println(validatesuspenseCheck1VO.getQuery());
                                     validatesuspenseCheck1VO.executeQuery();
                                while (validatesuspenseCheck1VO.hasNext()) {
                                       Row row = validatesuspenseCheck1VO.next(); // Get the next row in the result set.
//                                    String glCodeError=null;
//                                    try{
//                                       glCodeError=row.getAttribute("Validglcode").toString();
//                                    }catch(Exception  e){
//                                        e.printStackTrace();
//                                    }
                                       System.out.println(invNum+" Validglcode ."+ row.getAttribute("Validglcode")+".");

                                    if(row.getAttribute("Validglcode") ==null){

                                      //secondCheck goes here

                                      // JS GL code check
                                      // 21-11-2022 GL Code changes as same with CertifierPage
                                      if(getUrlOrg().equalsIgnoreCase("JS")){
                                      System.out.println("Enter Gl code JS Block");
                                      //                                      flagGlCodePresent=false;
                                      System.out.println("invNum:"+invNum+"  Inside if glcode error" +row.getAttribute("Validglcode"));
                                          lineNum=lineItemRow.getAttribute("LineNumber")!=null ? lineItemRow.getAttribute("LineNumber").toString(): null;
                                      // certifierApproverListPopUp.setRendered(false);
                                      //                                           System.out.println(invNum+" if GL code is not vaild");
                                      //                                           String message=null;
                                      //                                           message="Please Enter valid GL Code Combination Line No "+lineItemRow.getAttribute("LineNumber");
                                      //                                           callFacesMessage(message);
                                      //                                       break;

                                      }else{

                                        DCBindingContainer dcBindingContainer6 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                        DCIteratorBinding dcIteratorBinding6 = dcBindingContainer6.findIteratorBinding("gl_cc_overseas_suspense_check1Iterator");
                                        //DCIteratorBinding dcIteratorBinding6 = dcBindingContainer6.findIteratorBinding("gl_cc_overseas_suspense_check");
                                        System.out.println(invNum+" Terstinggggggggggggggggggggggggggggggggggggggggggggggg11111112334");
                                        ViewObjectImpl validatesuspenseCheck2VO = (ViewObjectImpl)dcIteratorBinding6.getViewObject();
                                        /*   ViewCriteria vc5 = validateGLCodeVO.getViewCriteria("CounterPartyVOCriteria1");
                                        validateGLCodeVO.applyViewCriteria(vc5);*/
                                        System.out.println(invNum+" Passing GL code and org id to the suspense package 2nd ::"+lineItemRow.getAttribute("GlNo") +"---"+orgIdIt.getValue());
                                        validatesuspenseCheck2VO.setNamedWhereClauseParam("bind_p_code_combo",lineItemRow.getAttribute("GlNo"));
                                        validatesuspenseCheck2VO.setNamedWhereClauseParam("bind_p_org_id",orgIdIt.getValue()!=null ?orgIdIt.getValue() : null);
                                        validatesuspenseCheck2VO.setNamedWhereClauseParam("bindOrg",getUrlOrg());
//                                        System.out.println("-----------Dynamic Query-----------");
//                                        System.out.println(validatesuspenseCheck2VO.getQuery());
                                        validatesuspenseCheck2VO.executeQuery();
                                        System.out.println(invNum+" Outside validatesuspenseCheck2VO");
                                        while (validatesuspenseCheck2VO.hasNext()) {
                                            Row row1 = validatesuspenseCheck2VO.next();
                                            //for testing ::
                                            //row1.setAttribute("ValidglSuspensecheck","Error message retured from the second package");
                                            /*2nd NOV if(row1.getAttribute("ValidglSuspensecheck")!=null){
                                                flag_suspense2=false;
                                                suspenseMessage_2 = row1.getAttribute("ValidglSuspensecheck").toString();
                                                break;
                                            }*/
                                            suspenseMessage_2 = row1.getAttribute("ValidglSuspensecheck")!=null ?row1.getAttribute("ValidglSuspensecheck").toString() :null;
                                            System.out.println(invNum+" Inside validatesuspenseCheck2VO");
                                            if(row1.getAttribute("ValidglSuspensecheck")!=null){
                                                suspenseMessage_2 = row1.getAttribute("ValidglSuspensecheck").toString();
                                            //flag_suspense2=false;
                                            //suspenseMessage_2 = "Error from 2nd fuction valiadtion suspense"row1.getAttribute("ValidglSuspensecheck");
                                            line_num = lineItemRow.getAttribute("LineNumber")!=null ? lineItemRow.getAttribute("LineNumber").toString(): null;
                                            System.out.println(invNum+" Adding to lineNumber_list");
                                            lineNumber_list.add(line_num);
                                            message_list_suspense.add(suspenseMessage_2);

                                            }

                                           // break;
                                            //}
                                        }


                                        if(!flag_suspense2 && suspenseMessage_2!=null){
                                            System.out.println(invNum+" suspenseMessage_2!=null hence breaking");
                                            break;
                                        }
                                    }
                                    }else if(row.getAttribute("Validglcode") !=null  && !row.getAttribute("Validglcode").toString().equals("Y") ){
                                        flag_suspense1 =false;
                                        line_num = lineItemRow.getAttribute("LineNumber")!=null ? lineItemRow.getAttribute("LineNumber").toString(): null;
                                        //callFacesMessage("Please correct the suspense details in order to proceed");
                                        suspenseMessage_1 = row.getAttribute("Validglcode").toString();

                                        break; }
//                                }
                                }
                                if( !flag_suspense1  || !flag_suspense2 ) {
                                    System.out.println(invNum+" 222222222222222222222222222222 breaking");
                                    break;
                                }


                    // gl_cc_overseas_suspense_check1Iterator

                 }
             }
        }
        //ot76 - submit
            System.out.println("Validation started for PoNonPo");
            if(ADFContext.getCurrent().getPageFlowScope().get("PoNonPo") != null) {
                if("Y".equalsIgnoreCase(ADFContext.getCurrent().getPageFlowScope().get("PoNonPo").toString()))
                {
                String supplier_id_boolean = ADFContext.getCurrent().getPageFlowScope().get("PoNonPo").toString();
                System.out.println(supplier_id_boolean);
                if(invoiceTypeSoc.getValue() != null && !"PO Invoice".equalsIgnoreCase(invoiceTypeSoc.getValue().toString())) {

                    certifierApproverListPopUp.setRendered(false);
                    System.out.println(invNum+" if GL code is not present");
                    String message=null;
                    message="<html>This Supplier requires a valid & open Purchase Order (PO).  See Procurement SharePoint page for Qantas Group Purchasing Policy & Guidelines<br>" +
                    "You must enter the valid & approved PO number below and match PO line/s.<br>" +
                    "Ensure you receipt your PO in iProcurement to process your invoice for payment<br>" +
                    "<a href = \"mailto:procurementhelp@qantas.com.au\">Contact procurementhelp@qantas.com.au for assistance if required</a>" +
                    "</html>";
                    callFacesMessage(message);
                    System.out.println("Validation added for PoNonPo");
                    return;
                }
                }
                else {

                }
            }
            //ot76 -submit end
       System.out.println(invNum+" Out of all loops results flag_suspense1 flag_suspense2 line_num lineNumber_list :: "+flag_suspense1+","+flag_suspense2+","+line_num +lineNumber_list.size())  ;
        System.out.println(invNum+" flagGlCodePresent"+flagGlCodePresent);

            if(!flagGlCodePresent ){
                        certifierApproverListPopUp.setRendered(false);
                        String message=null;
//                        if (getUrlOrg().equalsIgnoreCase("JS")){
//                            message="Please Enter valid GL Code Combination Line No "+lineNum;
//                        }else{
                            System.out.println(invNum+" if GL code is not present");
                            message="Please enter GL code or Project Combination to show the approval details";
//                        }
                        callFacesMessage(message);
                    }

        else if(flagGlCodePresent && flag_suspense1 && flag_suspense2 &first_level_flag && lineNumber_list.size()==0){

        ApproverDetails_pttBindingQSPortClient approverDetailsClient=new ApproverDetails_pttBindingQSPortClient();
           String alternateApproverName=null;
            String alternateApproverNo=null;
            /*alternateApproverNo=AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID")!=null?AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString():
                alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() :null ;*/
            if( alternateApproverIt.getValue()!=null && !alternateApproverIt.getValue().toString().equals("")){
            alternateApproverNo=AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID")!=null?AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString():null;
                if(alternateApproverNo == null){
                    System.out.println(invNum+" Trying forthe newww time alternate");
                    alternateApproverNo  =AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID_pageLoad")!=null?
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID_pageLoad").toString():null;

                }
            }

            if(alternateApproverIt.getValue()!=null && !alternateApproverIt.getValue().toString().equals("") && alternateApproverNo==null  &&  alternateApproverIt.getValue()!=null){


                System.out.println(invNum+" Trying for the sencond time alternateapprovNoIt --------------"+alternateapprovNoIt.getValue().toString());
                alternateApproverNo =  alternateapprovNoIt.getValue().toString() ;
            }

            System.out.println(invNum+" Alternate approverrrrrr :: "+alternateApproverNo);
            /* Get the header details values */
            DCBindingContainer bindings = getBindings();
            DCIteratorBinding dcIteratorBindings =
                bindings.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator");
            ViewObject headerVO = dcIteratorBindings.getViewObject();
           Row headerRow = headerVO.getCurrentRow();
           BigDecimal orgId = null;
           String orgIDStr=null;
            BigDecimal supplierId = null;
           BigDecimal invoiceTotAmountbd =null;
            String siteId=null;
            if (headerRow != null) {
               String supplierName =
                   headerRow.getAttribute("SupplierName") != null ?
                   headerRow.getAttribute("SupplierName").toString() : null;
              System.out.println(invNum+" SupplierName ::: "+ supplierName);
               siteId =
                  headerRow.getAttribute("SiteId") != null ? headerRow.getAttribute("SiteId").toString() :
                  null;
                System.out.println(invNum+" SiteId ::: "+ siteId);
                }



       String orgIdstr= AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID")!=null?AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID").toString():null;

      // orgId=new BigDecimal(orgIdstr);
       if(orgIdstr==null && orgIdIt.getValue()!=null){
           System.out.println(invNum+" orgIdstr is coming null");
           orgIdstr =   orgIdIt.getValue()!=null ?  orgIdIt.getValue().toString() : null;

       //still nukll

       }


        else if(orgIdstr==null && orgIdIt.getValue()==null ){
                //Org ID
                System.out.println(invNum+" Here comes the boogeyman!!!!!!!!!!!!!!");
                String orgId_new=null;
                RowSetIterator rowIt =null;
                DCBindingContainer dcBindingContainer_site = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding_site = dcBindingContainer_site.findIteratorBinding("SitesVO1Iterator");
                ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding_site.getViewObject();
                ViewCriteria vc_site = suppNameVO.getViewCriteria("SitesVOCriteria");
                suppNameVO.applyViewCriteria(vc_site);
                                ViewCriteria viewCrit_site =
                                    suppNameVO.getViewCriteria("SitesVOCriteriaSupNameSiteID_orgId");
                                suppNameVO.applyViewCriteria(viewCrit_site);
                                suppNameVO.setNamedWhereClauseParam("bindVendorName",
                                                                    supNameIt.getValue());
                                suppNameVO.setNamedWhereClauseParam("bvSiteID", siteIdIt.getValue());
                                suppNameVO.setNamedWhereClauseParam("bindOperatingUnit", operatingUnitIt.getValue());
                 suppNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                             System.out.println("Query : " + suppNameVO.getQuery());
                                suppNameVO.executeQuery();
                                if (suppNameVO.getEstimatedRowCount() > 0) {
                                    System.out.println(invNum+"--- Match found for Supplier Name : " +
                                                       suppNameVO.getEstimatedRowCount() +
                                                       " records.");
                                     rowIt = suppNameVO.createRowSetIterator(null);
                                    while (rowIt.hasNext()) {
                                        Row rowData = rowIt.next();
                                        try {
                                            //System.out.println("--- Matched Supplier Number : " +rowData.getAttribute("VendorNumber"));

                                            //orgId = rowData.getAttribute("OrgId") == null ? null :(String)rowData.getAttribute("OrgId");

                                        orgId_new = rowData.getAttribute("OrgId") == null ? null : rowData.getAttribute("OrgId").toString();

                                    } catch (Exception e) {
                                            e.printStackTrace();
                                        }
                                    }
                                }
                                System.out.println(invNum+" orgId_new ::: "+ orgId_new);
                                if(rowIt!=null) {
                                    try {
                                        rowIt.closeRowSetIterator();
                                    } catch(Exception ex) {
                                        ex.printStackTrace();
                                    }
                                }

                orgIdstr= orgId_new;
                BigDecimal orgId_passed =new BigDecimal(orgIdstr);
                orgIdIt.setValue(orgId_passed);
                OperationBinding comt = (OperationBinding)bindings.getOperationBinding("Commit");
                comt.execute();

                 //Added on 24th JAn
                 AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);

             }




      orgId=new BigDecimal(orgIdstr);
       System.out.println(invNum+" orgId From pageflowscope"+orgId);

                BigDecimal invoiceTotAmount =
                    headerRow.getAttribute("InvoiceTotAmount") != null ?
                    ((Number)headerRow.getAttribute("InvoiceTotAmount")).bigDecimalValue() :
                    null;
              System.out.println(invNum+" invoiceTotAmount ::: "+ invoiceTotAmount);
                String requestorNo=null;
                //requestorNo=fetchEmployeeID();

                requestorNo =ADFContext.getCurrent().getPageFlowScope().get("userId").toString();
                //requestorNo="171323";
                System.out.println(invNum+" requestorNo :::"+requestorNo);
                List<APPSQFEQIFAPINVINVDISTINFO> invoiceLineItemdetailsList =new ArrayList<APPSQFEQIFAPINVINVDISTINFO>();
               ObjectFactory objectFactory =new ap.qantas.com.eQApprovalDetailsService.ObjectFactory();
                for(int i=0;i<lineItemVO.getEstimatedRowCount();i++){
                   BigDecimal lineNo=null;
                   String lineType=null;
                    String glCodeComb=null;


                    lineNo=new BigDecimal(lineItemVO.getCurrentRow().getAttribute("LineNumber").toString());
                    lineType="ITEM";
                    glCodeComb=lineItemVO.getCurrentRow().getAttribute("GlNo")!=null?lineItemVO.getCurrentRow().getAttribute("GlNo").toString():null;
                    System.out.println(invNum+" line item details************");
                    System.out.println(invNum+" lineNo"+lineNo);
                    System.out.println(invNum+" lineType"+lineType);
                    System.out.println(invNum+" glCodeComb"+glCodeComb);

                    APPSQFEQIFAPINVINVDISTINFO lineItemobj=new APPSQFEQIFAPINVINVDISTINFO();
                    objectFactory.createAPPSQFEQIFAPINVINVDISTINFOLINENUMBER(lineNo);
                    lineItemobj.setLINENUMBER( objectFactory.createAPPSQFEQIFAPINVINVDISTINFOLINENUMBER(lineNo));
                    lineItemobj.setLINETYPE( objectFactory.createAPPSQFEQIFAPINVINVDISTINFOLINETYPE(lineType));
                    lineItemobj.setGLCODECOMB( objectFactory.createAPPSQFEQIFAPINVINVDISTINFOGLCODECOMB(glCodeComb));
                    invoiceLineItemdetailsList.add(i, lineItemobj);

                }


                List<APPSQFEQIFAPINVAPPROVERREC> approverListheaderObj=new ArrayList<APPSQFEQIFAPINVAPPROVERREC>();
                System.out.println(invNum+" size of approverListheaderObj.size()"+approverListheaderObj.size());



                approverListheaderObj=approverDetailsClient.getApproverDetails(requestorNo, alternateApproverNo, invoiceTotAmount,orgId, invoiceLineItemdetailsList);

             if(approverListheaderObj== null){

                 FacesMessage Message = new FacesMessage("No approver details found");
                 Message.setSeverity(FacesMessage.SEVERITY_INFO);
                 FacesContext fc = FacesContext.getCurrentInstance();
                 fc.addMessage(null, Message);
                 return ;
                 }



                if(approverListheaderObj.size()>0){
                  System.out.println(invNum+" size of approverListheaderObj.size()"+approverListheaderObj.size());
                    for(int i=0;i<approverListheaderObj.size();i++){
                        String approvername =
                            approverListheaderObj.get(i).getAPPNAME().getValue();
                        String appoverEmail =
                            approverListheaderObj.get(i).getAPPEMAIL().getValue();
                        BigDecimal appempno =
                            approverListheaderObj.get(i).getAPPEMPNO().getValue();
                        String appposition =
                            approverListheaderObj.get(i).getAPPPOSITION().getValue();
                        String appfndlcategory =
                             approverListheaderObj.get(i).getAPPFNDLCATEGORY().getValue();

                        System.out.println(invNum+" approvername1" + "****" + i + "****" +
                                          approvername);
                       System.out.println(invNum+" appoverEmail1" + "****" + i + "****" +
                                          appoverEmail);
                       System.out.println(invNum+" appempno1" + "****" + i + "****" +
                                          appempno);
                        System.out.println(invNum+" appposition1" + "****" + i + "****" +
                                           appposition);
                       System.out.println(invNum+" appfndlcategory1" + "****" + i + "****" +
                                          appfndlcategory);
                   }
              }

            DCBindingContainer dcCon = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
            ViewObject eqApproverDetailsVO= dcCon.findIteratorBinding("eQApproverDetails1Iterator").getViewObject();


                eqApproverDetailsVO.clearCache();
                int lastRowIndex = eqApproverDetailsVO.getRangeIndexOf(eqApproverDetailsVO.last());
                System.out.println(invNum+" lastRowIndex :::"+lastRowIndex);
                  System.out.println(invNum+" eqApproverDetailsVO.getRangeSize()"+eqApproverDetailsVO.getRangeSize());
                  if(approverListheaderObj.size()>0){
                    System.out.println(invNum+" sizze od approverListheaderObj.size()::"+approverListheaderObj.size());
                   int newLineNumber = 1;
                    for(int i=0;i<approverListheaderObj.size();i++){

                        Row newRow = eqApproverDetailsVO.createRow();

                        newRow.setAttribute("lineSeqNumber", newLineNumber);
                        newRow.setAttribute("approverName", approverListheaderObj.get(i).getAPPNAME().getValue());
                        newRow.setAttribute("appoverEmail", approverListheaderObj.get(i).getAPPEMAIL().getValue());
                        newRow.setAttribute("appEmpNo", approverListheaderObj.get(i).getAPPEMPNO().getValue());
                        newRow.setAttribute("appPosition", approverListheaderObj.get(i).getAPPPOSITION().getValue());
                        newRow.setAttribute("appFindelCategory", approverListheaderObj.get(i).getAPPFNDLCATEGORY().getValue());

                        eqApproverDetailsVO.insertRow(newRow);
                        newLineNumber++;
                        lastRowIndex++;
                        System.out.println(invNum+" lastRowIndex-----"+lastRowIndex);
                        System.out.println(invNum+" newLineNumber-----"+newLineNumber);
                    }
                        AdfFacesContext.getCurrentInstance().addPartialTarget(eqApproverDetailsTable);

                  certifierApproverListPopUp.setRendered(true);}


         }
        /*else if(!flagGlCodePresent && flag_suspense1 && flag_suspense2 && first_level_flag && lineNumber_list.size()==0){
            certifierApproverListPopUp.setRendered(false);
            System.out.println("if GL code is not present");
            String message=null;
            message="Please enter GL code or Project No to show the approval details";
            callFacesMessage(message);

        }*/
            else if(!first_level_flag ){

                        callFacesMessage( first_level_validation+ "on line number "+line_num);
            }

        else if(!flag_suspense1) {

            callFacesMessage( suspenseMessage_1+ "on line number "+line_num);

        }else if(!flag_suspense2 || lineNumber_list.size()>0){

            StringBuilder csvBuilder = new StringBuilder();

              for(String city : lineNumber_list){
                csvBuilder.append(city);
                csvBuilder.append(",");
              }

              String csv = csvBuilder.toString();
              System.out.println(csv);

              //OUTPUT: Milan,London,New York,San Francisco,

              //Remove last comma
              csv = csv.substring(0, csv.length() - 1);

              System.out.println(csv);
              AdfFacesContext.getCurrentInstance().getPageFlowScope().put("lines_suspense", csv);
            //callFacesMessage( suspenseMessage_2+ "on line number "+csv);
            /*Construct a popup here for consent of suspense account details */
            //suspense_message_OP.setValue(suspenseMessage_2+ "on line number "+csv);


           //suspense_message_OP.setValue("This GL Combination is restricted in the Current Operating Unit select agree to replace this with a Suspense Account Or Cancel to re-enter New GL Combination "
            //                            + "on line number "+csv);

            StringBuilder csvBuilder1 = new StringBuilder();

              for(String city : message_list_suspense){
                csvBuilder1.append(city);
                csvBuilder1.append(",");
              }

              String csv1 = csvBuilder.toString();
              System.out.println(csv1);

              //OUTPUT: Milan,London,New York,San Francisco,

              //Remove last comma
              csv1 = csv1.substring(0, csv1.length() - 1);

              System.out.println(csv1);


            suspense_message_OP.setValue("This GL Combinationn on line number "+csv+" is restricted in the Current Operating Unit.Please select agree to replace this with a Suspense Account Or Cancel to re-enter New GL Combination "
                                      );


            //suspense_message_code.setValue("("+suspenseMessage_2+")"  +"------"+message_list_suspense);

           // suspense_message_code.setValue(message_list_suspense);  //---- on 7th March

            suspense_message_OP.setRendered(true);
            suspense_message_OP.setVisible(true);

            suspense_message_code.setRendered(true);
            suspense_message_code.setVisible(true);


            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            suspenseAcc_Popup.show(hints);

        }



            if(flagGlCodePresent && flag_suspense2 && flag_suspense1 &first_level_flag && lineNumber_list.size()==0 ){
                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                 certifierApproverListPopUp.show(hints);
            }

        }

        } catch (Exception e) {
            e.printStackTrace();
        }
        finally{
                    if(lineItemItr!=null) {
                        try {
                            lineItemItr.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();
                    }
                    }
                }

        System.out.println(invNum+" After checking all validations :: flagGlCodePresent ::"+flagGlCodePresent);

    if(flagGlCodePresent){




    }
       /* RichPopup.PopupHints hints = new RichPopup.PopupHints();
        certifierApproverListPopUp.show(hints);*/

        }

    }



    public void callFacesMessage(String errorMessage){
      FacesMessage Message =
          new FacesMessage(errorMessage);
      Message.setSeverity(FacesMessage.SEVERITY_ERROR);
      FacesContext fc = FacesContext.getCurrentInstance();
      fc.addMessage(null, Message);
    }
    public void onSubmitClick_old(ActionEvent actionEvent) {
        //ADFContext.getCurrent().getPageFlowScope().get("invoiceId");

        System.out.println("Submit testing");
        //File f = new File("/u02_sa_soadev/Oracle/Middleware/Upload/"+ADFContext.getCurrent().getPageFlowScope().get("userId").toString()+"_Invoice_INPROGRESS.pdf"); //to be remove hardcoding
        //File renamed_file = new File("/u02_sa_soadev/Oracle/Middleware/Upload/"+ADFContext.getCurrent().getPageFlowScope().get("userId").toString()+"_Invoice_SUBMITTED_"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId") +".pdf"); //Submitted file name convention "userId_Invoice_SUBMITTED_invoiceId"  to be remove hardcoding

        File f = new File(resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope().get("userId").toString()+"_Invoice_INPROGRESS.pdf"); //to be remove hardcoding
        File renamed_file = new File(resolveExpression("#{backing_ap_overseasPage.propertyLoader.properties['OVERSEAS_FILE_UPLOAD']}").toString()+ADFContext.getCurrent().getPageFlowScope().get("userId").toString()+"_Invoice_SUBMITTED_"+ADFContext.getCurrent().getPageFlowScope().get("invoiceId") +".pdf"); //Submitted file name convention "userId_Invoice_SUBMITTED_invoiceId"  to be remove hardcoding


        if(f.exists() && !f.isDirectory()) {
            if(f.renameTo(renamed_file)){
                    System.out.println("Rename succesful");
            }else{
                    System.out.println("Rename failed");
            }
        }

    }

    public void onremoveLineItems(ActionEvent actionEvent){

        BindingContext context = BindingUtils.getBindingContext();
        DCBindingContainer bindings =
                    (DCBindingContainer)context.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");

              //ViewObjectImpl vo1 =(ViewObjectImpl)iterator.getViewObject();
              //ViewCriteria vc1 = vo1.getViewCriteria("ApOverseasLineitemTableEOViewCriteria");
              //vo1.applyViewCriteria(vc1);
              //vo1.setNamedWhereClauseParam("bind_invoiceId", ADFContext.getCurrent().getPageFlowScope().get("invoiceId"));
              //vo1.executeQuery();

         rowSetIterator= iterator.getViewObject().createRowSetIterator(null);



        int i = 0;
        int recDeleted = 0;
            int lineNo=1;
        while (rowSetIterator.hasNext())
              {
                   Row r = rowSetIterator.next();
                   String SelectedRows =  (String)r.getAttribute("Attr11");
                   //String invoiceId =  (String)r.getAttribute("InvoiceId").toString();



                    System.out.println("i ="+i );
                    System.out.println("SelectedRows ="+SelectedRows );
                    //System.out.println("invoiceId ="+invoiceId );
                    //System.out.println("LineDescription ="+r.getAttribute("LineDescription") );


                   if(null !=  SelectedRows && SelectedRows.equals("true"))// && ("Y".equalsIgnoreCase((String)row.getAttribute("SelectTr")) ))
                      {
                          r.setAttribute("Attr11","null");
                          r.remove();
                          recDeleted++;


                      }
                   /*r.setAttribute("LineNumber",lineNo) ;
                   lineNo++;
                   System.out.println("r.getAttribute------>"+r.getAttribute("LineNumber"));*/
               }



        /*OperationBinding comt = (OperationBinding)bindings.getOperationBinding("Commit");
        comt.execute();*/
        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
        System.out.println("After partial refresh ");
        }catch(Exception e){
            e.printStackTrace();
        }
        finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }
        updateLineNo();
        OperationBinding comt = (OperationBinding)bindings.getOperationBinding("Commit");
        comt.execute();


        FacesContext fctx = FacesContext.getCurrentInstance();
        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

        String myJavaScriptCode5 = "document.getElementById('pt1:hiddenButtonID').click()";
        System.out.println("On hiddenButtonID button manual click");
        erks.addScript(fctx, myJavaScriptCode5 );

    }


    public void updateLineNo(){
        System.out.println("Update line nos ");
        BindingContext context = BindingUtils.getBindingContext();
        DCBindingContainer bindings =
                    (DCBindingContainer)context.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");



                  //ViewObjectImpl vo1 =(ViewObjectImpl)iterator.getViewObject();
                  //ViewCriteria vc1 = vo1.getViewCriteria("ApOverseasLineitemTableEOViewCriteria");
                  //vo1.applyViewCriteria(vc1);
                  //vo1.setNamedWhereClauseParam("bind_invoiceId", ADFContext.getCurrent().getPageFlowScope().get("invoiceId"));
                  //vo1.executeQuery();

             rowSetIterator= iterator.getViewObject().createRowSetIterator(null);




                int lineNo=1;
            while (rowSetIterator.hasNext())
                  {
                       Row r = rowSetIterator.next();
                      r.setAttribute("LineNumber",lineNo) ;
                     lineNo++;
                     System.out.println("r.getAttribute------>"+r.getAttribute("LineNumber"));



                  }

            AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
            System.out.println("After partial refresh ");
        }catch(Exception e){
            e.printStackTrace();
        }
        finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }

    }


    public void showPONumberTablePopup(ActionEvent actionEvent){
        System.out.println("Start showPONumberTablePopup");
        RowSetIterator lineItemRSIter =null;
        Object isLineItemPopupParam =  actionEvent.getComponent().getAttributes().get("isLineItemPopup");
        System.out.println(" ----- showPONumberPopup : "+isLineItemPopupParam);



        String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);


        if(isLineItemPopupParam!=null && isLineItemPopupParam.toString()!=null && isLineItemPopupParam.toString().equalsIgnoreCase("yes")) {
            this.isLineItemPopup.setValue("yes");
        } else {
            this.isLineItemPopup.setValue("no");
        }

        try {
           String enteredSiteId=null;
            //poNumIt
            String enteredPonumber = null;



            RowKeySet rowKeySet = t1.getSelectedRowKeys();
            Iterator rowKeySetIt = rowKeySet.iterator();
            DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
             lineItemRSIter = lineItemIter.getRowSetIterator();
             while(rowKeySetIt.hasNext()){
               Key key = (Key)((List)rowKeySetIt.next()).get(0);
               Row currentRow = lineItemRSIter.getRow(key);
                 if(currentRow!=null) {
                    System.out.println("----- typedInPONumber ----- "+currentRow.getAttribute("LinePoNum"));

                    enteredPonumber = currentRow.getAttribute("LinePoNum")==null?"":currentRow.getAttribute("LinePoNum").toString().trim();
                 }
             }
            poNumPopupIt.setValue(enteredPonumber);


            if(siteIdIt.getValue() != null) {


                    //pt1:t1:0:it35::content
                   /* enteredPonumber = poNumIt.getValue().toString();
                    System.out.println("poNumIt.getValue(): "+enteredPonumber);*/
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                    ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteria2");
                    poNOVO.applyViewCriteria(vc);
                    poNOVO.setNamedWhereClauseParam("bindPONum", enteredPonumber);
                    poNOVO.setNamedWhereClauseParam("bindSiteId", siteIdIt.getValue().toString().trim());
                poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(poNOVO.getQuery());
                    poNOVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);
                 //   AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);

            } else {
        //                  this.validationErrorMessage.setValue("Site Id must be selected first to search for a PO.");
        //                  validationErrorPopup.show(new RichPopup.PopupHints());
                    //enteredPonumber = poNumIt.getValue()==null?"":poNumIt.getValue().toString().trim();
                    System.out.println("poNumIt.getValue(): "+enteredPonumber);
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                    ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteria");
                    poNOVO.applyViewCriteria(vc);
                    poNOVO.setNamedWhereClauseParam("bindPONum", enteredPonumber);
                poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(poNOVO.getQuery());
                    poNOVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);

            }
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            poNumpopUp_Header.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        finally{
                    if(lineItemRSIter!=null) {
                        try {
                            lineItemRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        System.out.println("End showPONumberTablePopup");
    }

    public void showPOLineNumPopup(ActionEvent actionEvent) {
        // Add event code here...

        String enteredPonumber = null;
        RowKeySet rowKeySet = t1.getSelectedRowKeys();
        Iterator rowKeySetIt = rowKeySet.iterator();
        DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        RowSetIterator lineItemRSIter=null;
        try{
         lineItemRSIter = lineItemIter.getRowSetIterator();
         while(rowKeySetIt.hasNext()){
           Key key = (Key)((List)rowKeySetIt.next()).get(0);
           Row currentRow = lineItemRSIter.getRow(key);
             if(currentRow!=null) {
                System.out.println("----- typedInPONumber ----- "+currentRow.getAttribute("LinePoNum"));

                enteredPonumber = currentRow.getAttribute("LinePoNum")==null?"":currentRow.getAttribute("LinePoNum").toString().trim();

                 System.out.println("----- enteredPonumberenteredPonumberenteredPonumber ----- "+currentRow.getAttribute("LinePoNum"));
             }
         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(lineItemRSIter!=null) {
                        try {
                            lineItemRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        oracle.jbo.domain.Number supplierId = supplierID.getValue()==null ? null : (oracle.jbo.domain.Number)supplierID.getValue();



        //Populate SupplierId
        try {
            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesDetailsVO1Iterator");
            ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();

            ViewCriteria viewCrit = suppNameVO.getViewCriteria("SitesDetailsVOCriteria2");
            suppNameVO.applyViewCriteria(viewCrit);
            suppNameVO.setNamedWhereClauseParam("bindSupplierName", supNameIt.getValue()==null ? null : (String)supNameIt.getValue());
            suppNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                        System.out.println("Query : " + suppNameVO.getQuery());
            suppNameVO.executeQuery();


            if(suppNameVO.getEstimatedRowCount()>0) {
                System.out.println("--- Match found for Supplier Name : "+suppNameVO.getEstimatedRowCount()+" records.");
                RowSetIterator rowIt=null;
                try{
                    rowIt = suppNameVO.createRowSetIterator(null);
                while(rowIt.hasNext()) {
                    Row rowData = rowIt.next();
                    try {
                        System.out.println("--- Matched Supplier Number : "+rowData.getAttribute("VendorNumber"));
                        String vd_id =rowData.getAttribute("VendorId") == null ? null : rowData.getAttribute("VendorId").toString();
                        System.out.println("vd_id :: "+vd_id);
                        BigDecimal  vendorId =vd_id!=null ? new BigDecimal(vd_id):null;
                        //BigDecimal  vendorId = rowData.getAttribute("VendorId") == null ? null : (BigDecimal)rowData.getAttribute("VendorId");
                        supplierId = vendorId ==null? null : new oracle.jbo.domain.Number(vendorId.intValue());
                    } catch(Exception e) {
                        e.printStackTrace();
                    }
                }
                }catch(Exception e)
                {
                    e.printStackTrace();
                    }
                finally{
                            if(rowIt!=null) {
                                try {
                                    rowIt.closeRowSetIterator();
                                } catch(Exception ex) {
                                    ex.printStackTrace();

                            }
                            }
                        }
            }
        } catch(Exception ex) {
            ex.printStackTrace();
        }




        oracle.jbo.domain.Number siteId = siteIdIt.getValue()==null ? null : (oracle.jbo.domain.Number)siteIdIt.getValue();

        System.out.println("----- supplierId : "+supplierId+", siteId : "+siteId);


        if(!enteredPonumber.equals("")) {
            if(supplierId!=null && siteId==null) {
                System.out.println("----- Filtering line items PO by supplier ID only");
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POLineNumberDetailsVO1Iterator");
                ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = poNOVO.getViewCriteria("POLineNumberDetailsVOCriteria_filterByVendorId");
                poNOVO.applyViewCriteria(vc);
                poNOVO.setNamedWhereClauseParam("po_number", enteredPonumber);
                poNOVO.setNamedWhereClauseParam("vendor_id", supplierId);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(poNOVO.getQuery());
                poNOVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(poLineNumberTable);
            } else if(supplierId!=null && siteId!=null) {
                System.out.println("----- Filtering line items PO by supplier ID and site ID");
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POLineNumberDetailsVO1Iterator");
                ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = poNOVO.getViewCriteria("POLineNumberDetailsVOCriteria_filterByVendorIdSiteId");
                poNOVO.applyViewCriteria(vc);
                poNOVO.setNamedWhereClauseParam("po_number", enteredPonumber);
                poNOVO.setNamedWhereClauseParam("vendor_id", supplierId);
                poNOVO.setNamedWhereClauseParam("site_id",   siteId);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(poNOVO.getQuery());
                poNOVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(poLineNumberTable);
            } else {
                System.out.println("----- Filtering line items PO by typed in PO number only");
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POLineNumberDetailsVO1Iterator");
                ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                poNOVO.setNamedWhereClauseParam("po_number", enteredPonumber);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(poNOVO.getQuery());
                poNOVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(poLineNumberTable);
            }



    //             DCBindingContainer dcBindingContainer = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
    //             DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POLineDetailsVO1Iterator");
    //             ViewObjectImpl poLineNumVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
    //             ViewCriteria vc = poLineNumVO.getViewCriteria("POLineDetailsVOCriteria");
    //             poLineNumVO.applyViewCriteria(vc);
    //             poLineNumVO.setNamedWhereClauseParam("bindPoLineNum", enteredPonumber);
    //             System.out.println("-----------Dynamic Query-----------");
    //             System.out.println(poLineNumVO.getQuery());
    //             poLineNumVO.executeQuery();
    //             AdfFacesContext.getCurrentInstance().addPartialTarget(poLineNumberTable);


             String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
             System.out.println(" ----- clientID : "+clientId);
             this.clientID.setValue(clientId);

             System.out.println("Start showPOLineNumPopup");
             try {
                 RichPopup.PopupHints hints = new RichPopup.PopupHints();
                 p8.show(hints);
             }
             catch(Exception e) {
                 e.printStackTrace();
             }
         } else {
             this.validationErrorMessage.setValue("Line Item PO Number must be entered to search for PO Line Number");
             RichPopup.PopupHints hints = new RichPopup.PopupHints();
             validationErrorPopup.show(hints);
         }


        System.out.println("End showPOLineNumPopup");
    }

    public void onDescClick(ActionEvent actionEvent){

            // Add event code here...
            System.out.println("Start onDescClick");
            String commentsVal = null;
            DCBindingContainer bindings = getBinding();
            DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            System.out.println("lineItemIter ::"+lineItemIter);
            ViewObject empVO = lineItemIter.getViewObject();
            Row selectedRow=empVO.getCurrentRow();
            System.out.println("selectedRow :: "+selectedRow);
            if (selectedRow!=null){
                    try {
                        if(selectedRow.getAttribute("LineDescription")!=null)
                        commentsVal = selectedRow.getAttribute("LineDescription").toString();
                        System.out.println("commentsVal****: "+commentsVal);
                        RichPopup.PopupHints hints = new RichPopup.PopupHints();
                        descPopupIt.setValue(commentsVal);
                        AdfFacesContext.getCurrentInstance().addPartialTarget(descPopupIt);
                        descPopup.show(hints);
                    }
                    catch(Exception e) {
                        e.printStackTrace();
                    }
                    }
            System.out.println("End onDescClick");

    }



    public void openTaxRateCodePopup(ActionEvent actionEvent){
        System.out.println("Start openTaxRateCodePopup new");
        String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);

        String linePoNumber = null;
        String taxRateCode = null;

        RowKeySet rowKeySet = t1.getSelectedRowKeys();
        Iterator rowKeySetIt = rowKeySet.iterator();
        DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        RowSetIterator lineItemRSIter=null;
        try{
            lineItemRSIter = lineItemIter.getRowSetIterator();
         while(rowKeySetIt.hasNext()){
           Key key = (Key)((List)rowKeySetIt.next()).get(0);
           Row currentRow = lineItemRSIter.getRow(key);
             if(currentRow!=null) {
                System.out.println("----- linePoNumber ----- "+currentRow.getAttribute("LinePoNum"));
                linePoNumber = currentRow.getAttribute("LinePoNum")==null?"":currentRow.getAttribute("LinePoNum").toString().trim();
                taxRateCode = currentRow.getAttribute("TaxRateCode")==null?"":currentRow.getAttribute("TaxRateCode").toString().trim();
             }
         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(lineItemRSIter!=null) {
                        try {
                            lineItemRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        linePoNumber = linePoNumber==null ? "" : linePoNumber.trim();
        taxRateCode = taxRateCode==null ? "" : taxRateCode.trim();

        String invoiceType = (String)invoiceTypeSoc.getValue();

        invoiceType = invoiceType==null ? "" : invoiceType.trim();

        String poNumber = (String)poNumIt.getValue();

        poNumber = poNumber==null ? "" : poNumber.trim();

        String siteId = null;
        if(siteIdIt.getValue()!=null) {
           siteId = ""+((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue();
        }


        siteId = siteId==null ? "" : siteId.trim();
        boolean flag=true;
        if(searchTaxRateCodeLookupVO(invoiceType, siteId, poNumber, linePoNumber, taxRateCode,flag)) {
            taxRateCodePopupIt.setValue(taxRateCode);
            AdfFacesContext.getCurrentInstance().addPartialTarget(taxRateCodePopupIt);
        }

        System.out.println("End openTaxRateCodePopup");

    }

    /*
     * Business logic shared by Pinky :
     * Tax Rate code LOV
     * (PO invoice) :
     *  -- Depend on line level PO
     *  -- if not then header level PO
     *  -- if header level PO is not present then Site id .
     *  -- Nothing there then user should restricted .
     * (Non PO invoice)
     *  -- Depending on header level Site ID the tax rate code should be populated
     * and if no site ID is provided then user should be restricted.
     *
     */
    public boolean searchTaxRateCodeLookupVO(String invoiceType, String siteId, String poNumber, String linePoNum, String taxRateCode,boolean flag) {

        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaxRateCodeLookupVO1Iterator");
        ViewObjectImpl taxRateCodeLookupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        ViewCriteria vc = null;

        try {
            if (invoiceType.equalsIgnoreCase("PO Invoice")) {
                if(linePoNum!=null && !linePoNum.trim().equals("")) {//If line level PO is present
                    System.out.println("----- Condition 1 -----");
                    vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupByPoNumber");
                    taxRateCodeLookupVO.applyViewCriteria(vc);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_poNumber",linePoNum);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                        System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                    taxRateCodeLookupVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(taxRateCodeDetailsTable);
                    if(flag)
                    taxrate_popup.show(new RichPopup.PopupHints());
                } else if(poNumber!=null && !poNumber.trim().equals("")) {//If header level PO is present
                    System.out.println("----- Condition 2 -----");
                    vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupByPoNumber");
                    taxRateCodeLookupVO.applyViewCriteria(vc);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_poNumber",poNumber);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                        System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                    taxRateCodeLookupVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(taxRateCodeDetailsTable);
                    if(flag)
                    taxrate_popup.show(new RichPopup.PopupHints());
                } else if(siteId!=null && !siteId.trim().equals("")) {//If Site id is present
                    System.out.println("----- Condition 3 -----");
                    vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupBySiteId");
                    taxRateCodeLookupVO.applyViewCriteria(vc);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_siteId",siteId);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                        System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                    taxRateCodeLookupVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(taxRateCodeDetailsTable);
                    if(flag)
                    taxrate_popup.show(new RichPopup.PopupHints());
                } else {                                              //Show error popup
                    System.out.println("----- Condition 4 -----");
                    this.validationErrorMessage.setValue("PO Number or Site Id are Mandatory for a PO invoice for Tax Rate Code");        //Directly copied from Pinky's code
                    if(flag)
                    validationErrorPopup.show(new RichPopup.PopupHints());
                    return false;
                }
            } else {
                if(siteId!=null && !siteId.trim().equals("")) {       //If Site id is present
                    System.out.println("----- Condition 5 -----");
                    vc = taxRateCodeLookupVO.getViewCriteria("TaxRateCodeLookupVOCriteria_lookupBySiteId");
                    taxRateCodeLookupVO.applyViewCriteria(vc);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_siteId",siteId);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bind_taxRateCode",taxRateCode);
                    taxRateCodeLookupVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                        System.out.println("Query : " + taxRateCodeLookupVO.getQuery());
                    taxRateCodeLookupVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(taxRateCodeDetailsTable);
                    if(flag)
                    taxrate_popup.show(new RichPopup.PopupHints());
                } else {                                              //Show error popup
                    System.out.println("----- Condition 6 -----");
                    this.validationErrorMessage.setValue("Site Id is mandatory for a Non-PO Invoice for Tax Rate Code");                  //Directly copied from Pinky's code
                    if(flag)
                    validationErrorPopup.show(new RichPopup.PopupHints());
                    return false;
                }
            }
            System.out.println("taxRateCodeLookupVO.getEstimatedRowCount()"+taxRateCodeLookupVO.getEstimatedRowCount());
            String taxRate=null;
            if (taxRateCodeLookupVO.getEstimatedRowCount() > 0 && !(taxRateCode==null || (taxRateCode!=null && taxRateCode.trim().equals("")))  ) {
            //                       RowSetIterator rsi = glIter.getViewObject().createRowSetIterator(null);
               System.out.println("taxRateCodeLookupVO.getEstimatedRowCount()"+taxRateCodeLookupVO.getEstimatedRowCount());
               RowSetIterator rsi=null;
               try{
                   rsi = taxRateCodeLookupVO.createRowSetIterator(null);
               while (rsi.next() != null) {
                   Row taxRow = rsi.getCurrentRow();
                   System.out.println("TaxRate ::"+taxRow.getAttribute("TaxRate"));
                   // Add your logic here if condition
                   taxRate=taxRow.getAttribute("TaxRate").toString();
                   System.out.println("Within While taxRate"+taxRate);
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("taxRate", taxRate);
                   System.out.println("within while"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"));
               }
               }catch(Exception e)
               {
                   e.printStackTrace();
                   }
                finally{
                if(rsi!=null) {
                    try {
                        rsi.closeRowSetIterator();
                    } catch(Exception ex) {
                        ex.printStackTrace();

                            }
                            }
                        }
               //rsi.closeRowSetIterator();
            }else{
                System.out.println("***  taxRate :: ***");
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("taxRate", null);
            }
        } catch(Exception ex) {
           ex.printStackTrace();
        }

        return true;
    }



    public void numberValidator(FacesContext facesContext, UIComponent uIComponent, Object object) {
           if(object!=null){
               System.out.println("Checking");
               String name=object.toString();

               String clientId = uIComponent.getClientId(facesContext);
               System.out.println("----- clientId ----- "+clientId);


               String expression = (clientId.contains("it6") || clientId.contains("it29") || clientId.contains("it41")) ? "^[-]{0,1}[0-9]+(\\.[0-9]{1,9})?$" : "^[-]{0,1}[0-9]+(\\.[0-9]{1,2})?$" ;
               String msg = (clientId.contains("it6") || clientId.contains("it29") || clientId.contains("it41")) ? "Please enter number with maximum 9 decimal points." : "Please enter number with maximum 2 decimal points.";
               CharSequence inputStr=name;
               Pattern pattern=Pattern.compile(expression);
               Matcher matcher=pattern.matcher(inputStr);
               System.out.println("Error msg in Number Validator :"+msg);

               if(matcher.matches()){

               }
               else{
                   throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,msg,null));
               }
           }
           if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")== null ||
                      (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("true") )  ){
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox", "false");
                      }

           if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")== null ||
                     (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox").toString().equals("true") )  ){
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_payment_checkbox", "false");
                     }


           if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")== null ||
                     (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("true") )  ){
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode", "false");
                     }

           if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")== null ||
                     (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo").toString().equals("true") )  ){
                  AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_paymentAllocNo", "false");
                     }

       }

   /* public void changeTemplateValidator(FacesContext facesContext, UIComponent uIComponent, Object object) {
           if(object!=null){
               System.out.println("Checking");
               String name=object.toString();

               String clientId = uIComponent.getClientId(facesContext);
               System.out.println("----- clientId ----- "+clientId);


               String expression = (clientId.contains("it6") || clientId.contains("it29") || clientId.contains("it41")) ? "^[-]{0,1}[0-9]+(\\.[0-9]{1,9})?$" : "^[-]{0,1}[0-9]+(\\.[0-9]{1,2})?$" ;
               String msg = (clientId.contains("it6") || clientId.contains("it29") || clientId.contains("it41")) ? "Please enter number with maximum 9 decimal points." : "Please enter number with maximum 2 decimal points.";
               CharSequence inputStr=name;
               Pattern pattern=Pattern.compile(expression);
               Matcher matcher=pattern.matcher(inputStr);
               System.out.println("Error msg in Number Validator :"+msg);

               if(matcher.matches()){

               }
               else{
                   throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,msg,null));
               }
           }
       }  */


   public void onchangeTemplateName(ValueChangeEvent valueChangeEvent) {

       System.out.println("onchangeTemplateName ::"+valueChangeEvent.getNewValue().toString());
       String newTemplateName = valueChangeEvent.getNewValue().toString();

        BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings = bctx.getCurrentBindingsEntry();
        DCBindingContainer dcBindingContainer = (DCBindingContainer) bindings;
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasTemplateTableEOView1Iterator");
        ViewObjectImpl templateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        boolean template_existsFlag = false;
        boolean templateName_null = false;
        RowSetIterator rsi=null;

        if(newTemplateName==null){
            outputTemplateErrorMsg.setValue("Template name cannot be empty.Please enter a valid name in order to save");
            AdfFacesContext.getCurrentInstance().addPartialTarget(templatePgLAyout);
            return;

        }
        try {

            rsi = templateVO.createRowSetIterator(null);
            while (rsi.next() != null) {
            Row row = rsi.getCurrentRow();
                String row_tempName = row.getAttribute("TemplateName")!=null ? row.getAttribute("TemplateName").toString() : null;


                if(newTemplateName!=null && newTemplateName.equals(row_tempName)){

                    template_existsFlag = true;
                    break;
                }

            }

          }catch(Exception e){

        }

        if(template_existsFlag){
           // throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,"Template Name exists already",null));
           outputTemplateErrorMsg.setValue("Template Name exists already.Please rename in order to save");
            AdfFacesContext.getCurrentInstance().addPartialTarget(templatePgLAyout);
            return;
        }


    }
    public void onchangePaymentbox(ValueChangeEvent valueChangeEvent) {

        System.out.println("Value of  onchangePaymentbox new1--"+valueChangeEvent.getNewValue());
        String value =valueChangeEvent.getNewValue().toString();
        System.out.println("Value of  onchangePaymentbox --"+value);
        if(value.equalsIgnoreCase("true") && getUrlOrg().equalsIgnoreCase("JS")){
                    radio_paymentTypes.setValue("WIRE");
                }
        if((
                                ( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")!=null &&
                                AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox").toString().equals("false")))

                                 ){
                                 System.out.println("payment flag not updating value change event :::"+paymentAllocNo.getValue());
                                 AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pageload",false);
                                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_payment_checkbox","true");
                                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_paymentAllocNo","true");
                                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("paymentAllocNum",paymentAllocNo.getValue());
                                    /*
                                     //923018- Payment_cheque No- start
                                    //Commented below code.
                                    if((radio_paymentTypes.getValue()!=null &&  radio_paymentTypes.getValue().toString().equals("CHEQUE") )|| (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload_pc3")!=null
                                       && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("pageload_pc3").toString().equals("true"))

                                       ){
                                        System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope().get(\"pageload_pc3\") is trueee");
                                        paymentAllocNo.setDisabled(false);
                                    }else{
                                    paymentAllocNo.setValue("");
                                    paymentAllocNo.setDisabled(true);
                                    }*/
                                    //923018- Payment_cheque No- End
                                    System.out.println("Refreshing paymentPg ");
                                    System.out.println("On Load");
                                    AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
                                }

        else{
        if(value.equals("true")){
            System.out.println("Onchange true");
                if (getUrlOrg().equalsIgnoreCase("JS")) {
                                    System.out.println("JS Block radio_paymentTypes IN ONCHANGE METHOD:: true::");
                                    subpaymentPg.setVisible(true);
                                    subpaymentPg.setRendered(true);
                                    getRadio_paymentTypes().setDisabled(true);
                                    getRadio_paymentTypes().setVisible(false);
                                    System.out.println("Partial trigger adding1 visible");
                                    AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
                                } else {
            subpaymentPg.setVisible(true);
                       subpaymentPg.setRendered(true);
                      // pc1.setVisible(true);
                      // pc1.setRendered(true);
                       radio_paymentTypes.setVisible(true);
                       radio_paymentTypes.setRendered(true);


                       /*As per Pinky's requirment Oct, clearing all the previous fields on chnage event**/
                       //pc1.setValue("false");
                       System.out.println("radio_paymentTypes IN ONCHANGE METHOD:: true:: ");
                       radio_paymentTypes.setValue("");
                       radio_paymentTypes.setDisabled(false);//923018

                     //  paymentAllocNo.setDisabled(true); //923018- Payment_cheque No-


                       /*As per Pinky's requirment Oct**/

                       System.out.println("Partial trigger adding1 visible");
                       AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
            }
                      } else {
                          if (getUrlOrg().equalsIgnoreCase("JS")) {
                              System.out.println("JS Block radio_paymentTypes IN ONCHANGE METHOD:: false:: ");
                              radio_paymentTypes.setValue("");
                              getRadio_paymentTypes().setDisabled(true);
                              getRadio_paymentTypes().setVisible(false);
                              AdfFacesContext.getCurrentInstance()
                                             .getPageFlowScope()
                                             .put("pc2", false);
                              AdfFacesContext.getCurrentInstance()
                                             .getPageFlowScope()
                                             .put("pc3", false);


                              System.out.println("Partial trigger invisible");
                              AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
        }else{
            System.out.println("Onchange false");
            paymentAllocNo.setValue("");

                       //subpaymentPg.setVisible(false);
                       //subpaymentPg.setRendered(false);
                      // pc1.setVisible(false);
                      // pc1.setRendered(false);
                      //radio_paymentTypes.setVisible(false);
                      //radio_paymentTypes.setRendered(false);
                      System.out.println("radio_paymentTypes IN ONCHANGE METHOD:: false:: ");
                      radio_paymentTypes.setValue("");
                     radio_paymentTypes.setDisabled(true);
                     AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
                   AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);


                       System.out.println("Partial trigger invisible");
                       //paymentAllocNo.setDisabled();
                      // paymentAllocNo.setDisabled(true);//923018- Payment_cheque No
                       AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
        }
                      }
       //         submit_cb.setDisabled(true);
        //    validate_cb.setDisabled(false);
            AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
               AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
        }
        //923018- Payment_cheque No- Start
        System.out.println("radio_paymentTypes IN ONCHANGE METHOD value"+value);
        if(value.equals("true")){
                    System.out.println("On Load and change true");
                    if (getUrlOrg().equalsIgnoreCase("JS")) {
                                    System.out.println("JS Block radio_paymentTypes IN ONCHANGE METHOD:: true1 ::");
                                    getRadio_paymentTypes().setVisible(false);
                                    getRadio_paymentTypes().setDisabled(true);
                                    paymentAllocNo.setDisabled(false);
                                } else {
                    System.out.println("radio_paymentTypes IN ONCHANGE METHOD:: true1 ::");
                  // radio_paymentTypes.setValue("");
                   radio_paymentTypes.setDisabled(false);//923018
                    paymentAllocNo.setDisabled(false);
                                }
                    AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
                }else{
                    System.out.println("On Load and change false");
                    if (getUrlOrg().equalsIgnoreCase("JS")) {
                                    System.out.println("JS Block radio_paymentTypes IN ONCHANGE METHOD:: false 1 :: ");
                                    getRadio_paymentTypes().setVisible(false);
                                    getRadio_paymentTypes().setDisabled(true);
                                    paymentAllocNo.setDisabled(true);
                                    paymentAllocNo.setValue("");
                                } else {
                    System.out.println("radio_paymentTypes IN ONCHANGE METHOD:: false 1 :: ");
                    radio_paymentTypes.setValue("");
                    //923018
                    radio_paymentTypes.setDisabled(true);
                   // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc2",false);
                    //AdfFacesContext.getCurrentInstance().getPageFlowScope().put("pc3",false);
                    paymentAllocNo.setDisabled(true);
                    paymentAllocNo.setValue("");
                                }
                    AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
                }
        //923018- Payment_cheque No- End
        System.out.println("onchangePaymentbox End");
    }

    public void onChangePC2(ValueChangeEvent valueChangeEvent) {
        //submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }

    public void onChangePC3(ValueChangeEvent valueChangeEvent) {

       // submit_cb.setDisabled(true);
        //AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

        System.out.println("Value of  onchangePaymentbox"+valueChangeEvent.getNewValue());
        String value =valueChangeEvent.getNewValue().toString();
        //if( value.equals("false") &&  pc1.getValue().equals("false") && pc2.equals("false")){
       //if(( AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")!=null &&
       //     AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox").toString().equals("false"))){


        if( value.equals("false")){
        System.out.println("Disabling!!!!");
            paymentAllocNo.setValue("");
            paymentAllocNo.setDisabled(true);
        }else{
            System.out.println("enabling!!!!");
            //paymentAllocNo.setValue("");
            paymentAllocNo.setDisabled(false);
        }

        //submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);

        AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

            //}
    }




    public void onchangesubPaymentbox1(ValueChangeEvent valueChangeEvent) {
        System.out.println("Value of  onchangePaymentbox"+valueChangeEvent.getNewValue());
        String value =valueChangeEvent.getNewValue().toString();
        if( value.equals("false") &&  pc2.getValue().equals("false") && pc2.equals("false")){

            subpaymentPg.setVisible(false);
            subpaymentPg.setRendered(false);
            //pc1.setVisible(false);
            //pc1.setRendered(false);
            pc2.setVisible(false);
            pc2.setRendered(false);
            pc3.setVisible(false);
            pc3.setRendered(false);
            mpaC.setValue("false");

            AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);

            AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
        }

       // submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onchangesubPaymentbox2(ValueChangeEvent valueChangeEvent) {
        System.out.println("Value of  onchangePaymentbox"+valueChangeEvent.getNewValue());
        String value =valueChangeEvent.getNewValue().toString();
        if( value.equals("false") &&  pc3.getValue().equals("false") && pc3.equals("false")){

            subpaymentPg.setVisible(false);
            subpaymentPg.setRendered(false);
            //pc1.setVisible(false);
            //pc1.setRendered(false);
            pc2.setVisible(false);
            pc2.setRendered(false);
            pc3.setVisible(false);
            pc3.setRendered(false);
            mpaC.setValue("false");
            AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
            AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
        }

       // submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onchangesubPaymentbox3(ValueChangeEvent valueChangeEvent) {
        System.out.println("Value of  onchangePaymentbox"+valueChangeEvent.getNewValue());
        String value =valueChangeEvent.getNewValue().toString();
        //if( value.equals("false") &&  pc1.getValue().equals("false") && pc2.equals("false")){
        if( value.equals("false")  && pc2.equals("false")){
            subpaymentPg.setVisible(false);
            subpaymentPg.setRendered(false);
            //pc1.setVisible(false);
            //pc1.setRendered(false);
            pc2.setVisible(false);
            pc2.setRendered(false);
            pc3.setVisible(false);
            pc3.setRendered(false);
            mpaC.setValue("false");
            paymentAllocNo.setValue("");
            paymentAllocNo.setDisabled(true);
            AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);
            AdfFacesContext.getCurrentInstance().addPartialTarget(subpaymentPg);
        }else{

            paymentAllocNo.setValue("");
            paymentAllocNo.setDisabled(false);
        }

       // submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onchangePaymentChequeNo(ValueChangeEvent valueChangeEvent) {
     //   submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);

    }

    public void radio_onchangePayment(ValueChangeEvent valueChangeEvent) {

        String value =valueChangeEvent.getNewValue()!=null ?valueChangeEvent.getNewValue().toString():null;
        System.out.println("radio value :: "+value);
        //923018- Payment_cheque No- Start
        //Commented below code Changes for enableing Payment CHEQUE no
       /* if( value!=null && value.equals("WIRE")){
            System.out.println("radio value1 :: "+value);
           paymentAllocNo.setValue("");
            paymentAllocNo.setDisabled(true);

        }else if( value!=null && value.equals("CHEQUE")){
            System.out.println("radio value 2:: "+value);
            paymentAllocNo.setValue("");
             paymentAllocNo.setDisabled(false);

        }*/
        //923018- Payment_cheque No- End
       // submit_cb.setDisabled(true);
        //validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
        AdfFacesContext.getCurrentInstance().addPartialTarget(paymentPg);


    }





    public void cancelAddTemplateCodePopup(ActionEvent actionEvent){
        popUpTemplate.hide();


    }
    public void selectAddTemplateCodePopup(ActionEvent actionEvent){

        if(itTemplateName.getValue()==null || itTemplateName.getValue()!=null && itTemplateName.getValue().toString().trim().equals("")){
          System.out.println("enter a template name in order to proceed");
          ofTemplate.setValue("Please enter a template name in order to proceed");
          ofTemplate.setVisible(true);
          ofTemplate.setRendered(true);
          AdfFacesContext.getCurrentInstance().addPartialTarget(pfl2);

        return;

        }


        BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings = bctx.getCurrentBindingsEntry();
        OperationBinding operationBinding =  bindings.getOperationBinding("saveTemplate");


        DCBindingContainer dcBindingContainer = (DCBindingContainer) bindings;
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasTemplateTableEOView1Iterator");
        ViewObjectImpl templateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        ViewCriteria vc = templateVO.getViewCriteria("ApOverseasTemplateTableEOViewCriteria");;
        String bindOrg = "Jetstar";
                if (getUrlOrg().equalsIgnoreCase("JS")) {
                    // 14-12-2022 below ViewCriteria use for Jetstar
                    vc = templateVO.getViewCriteria("ApOverseasTemplateTableEOViewCriteria1");
                }
        templateVO.applyViewCriteria(vc);
                System.out.println("BindOrg : " + bindOrg);
        templateVO.setNamedWhereClauseParam("bindOrg", bindOrg);
        templateVO.setNamedWhereClauseParam("bind_userId",ADFContext.getCurrent().getPageFlowScope().get("userId").toString());
//        System.out.println("Template query :"+templateVO.getQuery());
        templateVO.executeQuery();
        RowSetIterator rsi=null;
        try {

            rsi = templateVO.createRowSetIterator(null);
            while (rsi.next() != null) {
            Row taxRow = rsi.getCurrentRow();
            System.out.println("Template name ::"+taxRow.getAttribute("TemplateName"));
            // Add your logic here if condition
                if(itTemplateName.getValue()!=null && itTemplateName.getValue().toString().equals(taxRow.getAttribute("TemplateName").toString()) ){
                ofTemplate.setValue("Template name already exists .Please choose an unique name to add the template");
                  ofTemplate.setVisible(true);
                  ofTemplate.setRendered(true);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(pfl2);

                return;

              }
            }

        operationBinding.getParamsMap().put("userId",ADFContext.getCurrent().getPageFlowScope().get("userId").toString());
        operationBinding.getParamsMap().put("supName",itTemplateSuppName.getValue());
        operationBinding.getParamsMap().put("suppNum",itTemplateSuppNo.getValue());
        operationBinding.getParamsMap().put("siteId",itTemplateSiteId.getValue());
        operationBinding.getParamsMap().put("operatingUnit",itTemplateOpUnit.getValue());
        operationBinding.getParamsMap().put("taxReg",itTemplateTaxRegNo.getValue());
        operationBinding.getParamsMap().put("invoiceType",itTemplateInvType.getValue());
        operationBinding.getParamsMap().put("docType",itTemplateDocNAme.getValue());
        operationBinding.getParamsMap().put("templateName",itTemplateName.getValue());

        System.out.println("Saving org id in template add :"+orgIdIt.getValue());
        operationBinding.getParamsMap().put("orgId",orgIdIt.getValue());
        operationBinding.getParamsMap().put("siteName",itTemplateSiteName.getValue());
        operationBinding.execute();
        popUpTemplate.hide();

        }catch(Exception e){
            e.printStackTrace();
        }

    }


    public void cancelTaxRateCodePopup(ActionEvent actionEvent){
        taxrate_popup.hide();

    }



    public void taxRateCodeValidator(FacesContext facesContext,
                                     UIComponent uIComponent, Object object) {
        System.out.println("Start : TaxRateCodeValidator");
        if(object.toString().length() > 0){
                String taxRateCode = object.toString();
                String linePoNumber = null;

                UIComponent poNumComponent = ComponentUtils.findRelativeComponent(uIComponent, "it77");
                linePoNumber = ((RichInputText)poNumComponent).getValue()!=null ? ((RichInputText)poNumComponent).getValue().toString() : "";
                System.out.println("----- linePoNumber ----- "+linePoNumber);
                System.out.println(uIComponent.getClientId(facesContext)+" --- "+poNumComponent.getClientId(facesContext));



                linePoNumber = linePoNumber==null ? "" : linePoNumber.trim();
                taxRateCode = taxRateCode==null ? "" : taxRateCode.trim();
                String invoiceType = (String)invoiceTypeSoc.getValue();

                invoiceType = invoiceType==null ? "" : invoiceType.trim();

                String poNumber = (String)poNumIt.getValue();

                poNumber = poNumber==null ? "" : poNumber.trim();

                String siteId = null;
                if(siteIdIt.getValue()!=null && !(siteIdIt.getValue().equals(""))) {
                   siteId = siteIdIt.getValue().toString();
                }


                siteId = siteId==null ? "" : siteId.trim();

                boolean valFlag = searchTaxRateCodeLookupVO(invoiceType, siteId, poNumber, linePoNumber, taxRateCode,false);
                System.out.println("Outside if case valflag ::: "+ valFlag);
                if(valFlag){
                    System.out.println("Inside if case valflag ::: "+ valFlag);
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaxRateCodeLookupVO1Iterator");
                    ViewObjectImpl taxRateCodeLookupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    System.out.println("--- taxRateCodeLookupVO.getEstimatedRowCount() --- "+taxRateCodeLookupVO.getEstimatedRowCount());
                    boolean flag = false;
                    if(taxRateCodeLookupVO.getEstimatedRowCount()>0) {
                        RowSetIterator rsi=null;
                        try{
                            rsi = taxRateCodeLookupVO.createRowSetIterator(null);
                        while(rsi.hasNext()) {

                            Row row = rsi.next();

                            if(row.getAttribute("TaxRateCode")!=null && ((String)row.getAttribute("TaxRateCode")).equals(taxRateCode)) {
                                flag = true;
                                break;
                            }

                        }
                        }catch(Exception e)
                        {
                            e.printStackTrace();
                            }
                        finally{
                                    if(rsi!=null) {
                                        try {
                                            rsi.closeRowSetIterator();
                                        } catch(Exception ex) {
                                            ex.printStackTrace();

                                    }
                                    }
                                }
                    }
                    if(!flag) {
                        throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,"Please enter valid Tax Rate Code",null));
                    }
                } else { //check from the tax-rate-code master list to decide if the taxratecode value is acceptable
                    Iterator<String> it = PropertyLoader.getInstance().getTaxRatesMasterList().keySet().iterator();
                    boolean flag = false;
                    while(it.hasNext()) {
                        String trc = it.next();
                        if(trc!=null && trc.trim().equalsIgnoreCase(taxRateCode)) {
                            flag = true;
                            break;
                        }
                    }
                    if(!flag) {
                        throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,"Please enter valid Tax Rate Code",null));
                    }

                }
        }
        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")== null ||
           (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("true") )  ){
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox", "false");
           }

        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")== null ||
           (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox").toString().equals("true") )  ){
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_payment_checkbox", "false");
           }


        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")== null ||
           (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("true") )  ){
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode", "false");
           }
        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")== null ||
                  (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo").toString().equals("true") )  ){
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_paymentAllocNo", "false");
                  }
    }


    public void selectTaxRateCodePopup(ActionEvent actionEvent){


        System.out.println("Start: selectTaxRateCodePopup");


        RowSetIterator empRSIter=null;
        String selectedTaxRate=null;
        String selectedTaxRateCode=null;
        RowSetIterator lineItemRSIter=null;
        try{
        RowKeySet selectedPONum = taxRateCodeDetailsTable.getSelectedRowKeys();
        Iterator selectedSiteIter = selectedPONum.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("TaxRateCodeLookupVO1Iterator");

            empRSIter = empIter.getRowSetIterator();
        while(selectedSiteIter.hasNext()){
           Key key = (Key)((List)selectedSiteIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println(currentRow.getAttribute("TaxRateCode"));
            if(currentRow.getAttribute("TaxRate")!=null) {
                selectedTaxRate= ((java.math.BigDecimal)currentRow.getAttribute("TaxRate")).doubleValue() +"";
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("taxRatePS", selectedTaxRate);

            }
             System.out.println("set taxRatePS***"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRatePS"));
             selectedTaxRateCode=currentRow.getAttribute("TaxRateCode").toString();
             AdfFacesContext.getCurrentInstance().getPageFlowScope().put("TaxRateCodePS", selectedTaxRateCode);
             System.out.println("set TaxRateCodePS***"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("TaxRateCodePS"));
         }
        RowKeySet rowKeySet = t1.getSelectedRowKeys();
        Iterator rowKeySetIt = rowKeySet.iterator();
        DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");

            lineItemRSIter = lineItemIter.getRowSetIterator();
         while(rowKeySetIt.hasNext()){
           Key key = (Key)((List)rowKeySetIt.next()).get(0);
           Row currentRow = lineItemRSIter.getRow(key);
             System.out.println("current row :: "+ currentRow);
             if(currentRow!=null) {
                System.out.println("current row not null ............................");
                System.out.println("line description value ::: "+ currentRow.getAttribute("LineDescription"));
                 System.out.println("TaxRate : "+selectedTaxRate);
                currentRow.setAttribute("TaxRate", selectedTaxRate);
             }
         }
        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);


            //poNumPopupIt.setValue(selectedPONumber);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                System.out.println(" ----- clientID.getValue() ----- : "+clientID.getValue());
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }


             if(selectedRowNum!=-1) {
                 String componentIDPoNumber1 = "pt1:t1:"+selectedRowNum+":it56::content";
                 String componentIDPoNumber2 = "pt1:t1:"+selectedRowNum+":it81::content";

                 String lineTotalInputText = "pt1:t1:"+selectedRowNum+":it66::content";
                 String taxAmountInputText = "pt1:t1:"+selectedRowNum+":it75::content";

                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber1+", selectedPONumber : "+selectedTaxRateCode);
                 System.out.println("lineTotalInputText : "+lineTotalInputText);
                                  System.out.println("taxAmountInputText : "+taxAmountInputText);
                 double selectedTaxRateCodeValue = 0.0;
                 try {
                     selectedTaxRateCodeValue = Double.parseDouble(selectedTaxRate)/100.0f;
                 } catch(Exception ex) {
                     ex.printStackTrace();
                 }

                 FacesContext fctx = FacesContext.getCurrentInstance();
                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                 //String myJavaScriptCode1 = "document.getElementById('"+componentIDPoNumber1+"').value = '"+selectedTaxRate+"'";
                 String myJavaScriptCode2 = "document.getElementById('"+componentIDPoNumber2+"').value = '"+selectedTaxRateCode+"'";

                 String myJavaScriptCode3 =
                 "if(!isNaN(parseFloat(document.getElementById('"+lineTotalInputText+"').value)) && "+selectedTaxRateCodeValue+">=0.0) { " +
                 "    document.getElementById('"+taxAmountInputText+"').value = (parseFloat(document.getElementById('"+lineTotalInputText+"').value) * "+selectedTaxRateCodeValue+").toFixed(2); " +
                 "}";
                 System.out.println("-----script-----"+myJavaScriptCode2);
                System.out.println("-----script-----"+myJavaScriptCode3);

                 //erks.addScript(fctx, myJavaScriptCode1 );
                 erks.addScript(fctx, myJavaScriptCode2 );
                 erks.addScript(fctx, myJavaScriptCode3 );


                 erks.addScript(fctx, "document.getElementById('"+"pt1:t1:"+selectedRowNum+":it81::content"+"').focus();");
                 erks.addScript(fctx, "AdfActionEvent.queue(AdfPage.PAGE.findComponentByAbsoluteId('" + "pt1:t1:"+selectedRowNum+":it81" + "'), true);");

                 //recalculateLineAndTaxTotal();
                 AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                 //erks.addScript(fctx, "document.getElementById('"+"pt1:t1:"+selectedRowNum+":it36::content"+"').value = document.getElementById('"+"pt1:t1:"+selectedRowNum+":it36::content"+"').value");
             }

        AdfFacesContext.getCurrentInstance().addPartialTarget(pgInvoiceDets);
        taxrate_popup.hide();
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                    if(lineItemRSIter!=null) {
                        try {
                            lineItemRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        System.out.println("End selectTaxRateCodePopup");
    }
    public void onSearchTemplateClick(ActionEvent actionEvent) {
        popUpChooseTemplate.show(new RichPopup.PopupHints());

    }

    public void deleteChooseTemplateClick(ActionEvent actionEvent) {


        BindingContext context = BindingUtils.getBindingContext();
        DCBindingContainer bindings =
                    (DCBindingContainer)context.getCurrentBindingsEntry();
        DCIteratorBinding iterator;
        RowSetIterator rowSetIterator= null;
        try{
        iterator = (DCIteratorBinding)bindings.findIteratorBinding("ApOverseasTemplateTableEOView1Iterator");

              //ViewObjectImpl vo1 =(ViewObjectImpl)iterator.getViewObject();
              //ViewCriteria vc1 = vo1.getViewCriteria("ApOverseasLineitemTableEOViewCriteria");
              //vo1.applyViewCriteria(vc1);
              //vo1.setNamedWhereClauseParam("bind_invoiceId", ADFContext.getCurrent().getPageFlowScope().get("invoiceId"));
              //vo1.executeQuery();

         rowSetIterator= iterator.getViewObject().createRowSetIterator(null);



        int i = 0;
        int recDeleted = 0;
        while (rowSetIterator.hasNext())
              {
                   Row r = rowSetIterator.next();
            System.out.println("Getting delete rows values :: "+r.getAttribute("deleteRow"));
            String SelectedRows =  r.getAttribute("deleteRow")!=null ?r.getAttribute("deleteRow").toString() :null;







                   if(null !=  SelectedRows && SelectedRows.equals("true"))// && ("Y".equalsIgnoreCase((String)row.getAttribute("SelectTr")) ))
                      {
                       System.out.println("Inside deleterows");

                          r.remove();
                          recDeleted++;


                      }

               }
        OperationBinding comt = (OperationBinding)bindings.getOperationBinding("Commit");
        comt.execute();
        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
        System.out.println("After partial refresh ");
        }catch(Exception e){
            e.printStackTrace();
        }
        finally{
            if(rowSetIterator
               !=null){
                   rowSetIterator.closeRowSetIterator();;
               }

        }

        popUpChooseTemplate.hide();

    }



    public void saveChooseTemplateClick(ActionEvent actionEvent) {


        BindingContext bctx = BindingContext.getCurrent();
        BindingContainer bindings = bctx.getCurrentBindingsEntry();
        OperationBinding comt = (OperationBinding)bindings.getOperationBinding("Commit");



       /* DCBindingContainer dcBindingContainer = (DCBindingContainer) bindings;
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ApOverseasTemplateTableEOView1Iterator");
        ViewObjectImpl templateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        ViewCriteria vc = null;

        templateVO.setNamedWhereClauseParam("bind_userId", employeeNoIt.getValue());
        templateVO.executeQuery();
        RowSetIterator rsi=null;
        try {

            rsi = templateVO.createRowSetIterator(null);
            while (rsi.next() != null) {
            Row taxRow = rsi.getCurrentRow();
            System.out.println("Template name ::"+taxRow.getAttribute("TemplateName"));
            // Add your logic here if condition
                if(itTemplateName.getValue()!=null && itTemplateName.getValue().toString().equals(taxRow.getAttribute("TemplateName").toString()) ){
                ofTemplate.setValue("Template name already exists .Please choose an unique name to add the template");
                  ofTemplate.setVisible(true);
                  ofTemplate.setRendered(true);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(pfl2);

                return;

              }
            } */

        comt.execute();
        popUpChooseTemplate.hide();

       /* }catch(Exception e){
            e.printStackTrace();
        }*/



    }
    public void selectChooseTemplateClick(ActionEvent actionEvent) {

        System.out.println("Start: selectcertifierName");
        String selectedCertifierName=null;
        String selectedEmployeeNo=null;
        String selectedtemplateName=null;
        String selecteddocumentType = null;
        String selectedInvoiceType = null;
        String selectedsupplierName = null;
        String selectedSiteId =null;
        String selectedOperatingUnit = null;
        String selectedsiteName = null;
        String selectedTaxRegNo = null;
        String selectedSupplierNo =null;
        String selectedOrgId = null;
        RowKeySet selectedCertifier = templateTable.getSelectedRowKeys();
        Iterator selectedCertifierIter = selectedCertifier.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("ApOverseasTemplateTableEOView1Iterator");
        RowSetIterator empRSIter=null;
        try{
            empRSIter = empIter.getRowSetIterator();
        while(selectedCertifierIter.hasNext()){
           Key key = (Key)((List)selectedCertifierIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println(currentRow.getAttribute("TemplateName"));
            selectedtemplateName= currentRow.getAttribute("TemplateName") !=null ? currentRow.getAttribute("TemplateName").toString() : null;
            selecteddocumentType =currentRow.getAttribute("DocumentType")!=null ? currentRow.getAttribute("DocumentType").toString() : null;
            selectedInvoiceType = currentRow.getAttribute("InvoiceType")!=null ? currentRow.getAttribute("InvoiceType").toString() : null;
            selectedsupplierName = currentRow.getAttribute("SupplierName") != null ? currentRow.getAttribute("SupplierName").toString(): null;
            selectedSiteId = currentRow.getAttribute("SiteId")!=null ? currentRow.getAttribute("SiteId").toString() : null;
            selectedOperatingUnit =currentRow.getAttribute("OperatingUnit")!=null ? currentRow.getAttribute("OperatingUnit").toString() : null;
            selectedsiteName = currentRow.getAttribute("SiteName")!=null ?currentRow.getAttribute("SiteName").toString() : null;
            selectedTaxRegNo = currentRow.getAttribute("TaxRegNumber")!=null ?currentRow.getAttribute("TaxRegNumber").toString() : null;
            selectedSupplierNo = currentRow.getAttribute("SupplierNumber")!=null ?currentRow.getAttribute("SupplierNumber").toString():null;
            selectedOrgId  = currentRow.getAttribute("OrgId")!=null ?currentRow.getAttribute("OrgId").toString():null;


         }
        }catch(Exception e)
        {e.printStackTrace();
         }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        //923018-Validation Freze Issue Start
        System.out.println("selectedtemplateName ::::" + selectedtemplateName);
        System.out.println("selecteddocumentType ::::" + selecteddocumentType);
        System.out.println("selectedInvoiceType ::::" + selectedInvoiceType);
        System.out.println("selectedsupplierName ::::" + selectedsupplierName);
        System.out.println("selectedOperatingUnit ::::" +
                           selectedOperatingUnit);
        System.out.println("selectedsiteName ::::" + selectedsiteName);
        System.out.println("selectedTaxRegNo ::::" + selectedTaxRegNo);
        System.out.println("selectedSupplierNo ::::" + selectedSupplierNo);
        System.out.println("selectedOrgId ::::" + selectedOrgId);
        System.out.println("selectedSiteId ::::" + selectedSiteId);

        DCBindingContainer dcBindingContainer =
            (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding =
            dcBindingContainer.findIteratorBinding("SitesDetailsVO1Iterator");
        ViewObjectImpl suppNameVO =
            (ViewObjectImpl)dcIteratorBinding.getViewObject();
        ViewCriteria vc = null;

        if (selectedSiteId != null) {
            vc = suppNameVO.getViewCriteria("SitesDetailsVOCriteria_bySiteId");
            suppNameVO.applyViewCriteria(vc);
            suppNameVO.setNamedWhereClauseParam("bindSiteId", selectedSiteId);
            suppNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//            System.out.println("query   ::" + suppNameVO.getQuery());
            suppNameVO.executeQuery();
            if (suppNameVO.getEstimatedRowCount() > 0) {
                System.out.println("--- Matching records :::: " +
                                   suppNameVO.getEstimatedRowCount() +
                                   " records.");
                RowSetIterator rowIt = null;
                try {
                    rowIt = suppNameVO.createRowSetIterator(null);
                    while (rowIt.hasNext()) {
                        Row rowData = rowIt.next();
                        try {

                            selectedsiteName =
                                    rowData.getAttribute("VendorSiteCode").toString();
                            selectedOrgId =
                                    rowData.getAttribute("OrgId") != null ?
                                    rowData.getAttribute("OrgId").toString() :
                                    null;
                            selectedSupplierNo =
                                    rowData.getAttribute("VendorNumber").toString();
                            selectedTaxRegNo =
                                    rowData.getAttribute("TaxRegistrationNumSuppSite") !=
                                    null ?
                                    rowData.getAttribute("TaxRegistrationNumSuppSite").toString() :
                                    "";
                            selectedOperatingUnit =
                                    rowData.getAttribute("OperatingUnit").toString();
                            System.out.println("rowData.getAttribute(\"OrgId\") :::" +
                                               selectedOrgId);
                            System.out.println("rowData.getAttribute(\"VendorName\") :::" +
                                               rowData.getAttribute("VendorName"));
                            System.out.println("currentRow.getAttribute(\"VendorNumber\").toString()  " +
                                               selectedSupplierNo);
                            System.out.println("currentRow.getAttribute(\"VendorSiteId\").toString()  " +
                                               rowData.getAttribute("VendorSiteId").toString());
                            System.out.println("currentRow.getAttribute(\"VendorSiteCode\").toString()  " +
                                               selectedsiteName);
                            System.out.println("currentRow.getAttribute(\"OperatingUnit\").toString()  " +
                                               selectedOperatingUnit);
                            System.out.println("currentRow.getAttribute(\"TaxRegistrationNumSuppSite\")  " +
                                               selectedTaxRegNo);
                            String supplierId =
                                rowData.getAttribute("VendorId") == null ?
                                null :
                                rowData.getAttribute("VendorId").toString();
                            //System.out.println("vd_id :: "+supplierId);
                            System.out.println("***** Setting Supplier ID for Supplier LOV select ***** : " +
                                               supplierId);
                            ADFContext.getCurrent().getPageFlowScope().put("supplier_id_value",
                                                                           supplierId);

                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    if (rowIt != null) {
                        try {
                            rowIt.closeRowSetIterator();
                        } catch (Exception ex) {
                            ex.printStackTrace();

                        }
                    }

                }
            }
        }

        //923018-Validation Freze Issue End
        chooseTemplateIt.setValue(selectedtemplateName);
        docTypeSoc.setValue(selecteddocumentType);
        invoiceTypeSoc.setValue(selectedInvoiceType);
        supNameIt.setValue(selectedsupplierName);
        siteIdIt.setValue(selectedSiteId);
        operatingUnitIt.setValue(selectedOperatingUnit);
        siteNameIt.setValue(selectedsiteName);
        taxRegIt.setValue(selectedTaxRegNo);
        suppNumIt.setValue(selectedSupplierNo);
        orgIdIt.setValue(selectedOrgId);



       AdfFacesContext.getCurrentInstance().addPartialTarget(chooseTemplateIt);
       AdfFacesContext.getCurrentInstance().addPartialTarget(docTypeSoc);
        AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);
        AdfFacesContext.getCurrentInstance().addPartialTarget(supNameIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(siteIdIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(operatingUnitIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(siteNameIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(taxRegIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(suppNumIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
        if(selectedOrgId!=null){
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",selectedOrgId);
        }

        /*******************On 27thDEc ***********************/

        String value = selectedInvoiceType;
        if(value!=null && value.equals("PO Invoice")){

            certNameIt.setValue("");
            certEmailIt.setValue("");
            employeeNoIt.setValue("");
            poNumIt.setDisabled(false);
            poNum_plm.setDisabled(false);
            System.out.println("Setting value  of certifier_sbc as false ");
            certifier_sbc.setValue(false);
            System.out.println("enablinggggg po");
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifier_sbc);

        }else if(value!=null && value.equals("Non PO Invoice")){
            poNumIt.setValue("");
            poNumIt.setDisabled(true);
            poNum_plm.setDisabled(true);
            System.out.println("diablinggggg po");
        }

        BindingContext context1 = BindingUtils.getBindingContext();
        DCBindingContainer bindings1 =
             (DCBindingContainer)context1.getCurrentBindingsEntry();
        DCIteratorBinding iterator1;
        RowSetIterator rowSetIterator1= null;
        try{
        iterator1 = (DCIteratorBinding)bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        rowSetIterator1= iterator1.getViewObject().createRowSetIterator(null);

        while (rowSetIterator1.hasNext())
           {
                Row r = rowSetIterator1.next();

              if(value!=null &&  value.equals("PO Invoice")){



                  //linePONum_it.setValue("");
                  poLineNum_column.setVisible(true);
                  poLineNum_column.setRendered(true);
                  //poLineNum_it.setValue("");
                  linePoNum_column.setVisible(true);
                  linePoNum_column.setRendered(true);

                  glcode_column.setVisible(false);
                  glcode_column.setRendered(false);
                  reccode_column.setVisible(false);
                  reccode_column.setRendered(false);
                  projectColumn.setVisible(false);
                  projectColumn.setRendered(false);
                  taskNo_column.setVisible(false);
                  taskNo_column.setRendered(false);
                  expOrg_column.setVisible(false);
                  expOrg_column.setRendered(false);
                  expDate_column.setVisible(false);
                  expDate_column.setRendered(false);
                  expType_column.setVisible(false);
                  expType_column.setRendered(false);



                  AdfFacesContext.getCurrentInstance().addPartialTarget(glcode_column);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(reccode_column);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(projectColumn);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(taskNo_column);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(expOrg_column);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(expDate_column);
                  AdfFacesContext.getCurrentInstance().addPartialTarget(expType_column);
                  System.out.println("visible flase certifier related fields on PO choosing") ;





              }else if(value!=null &&  value.equals("Non PO Invoice")){







                  linePONum_it.setValue("");
                  poLineNum_column.setVisible(false);
                  poLineNum_column.setRendered(false);
                  poLineNum_it.setValue("");
                  linePoNum_column.setVisible(false);
                  linePoNum_column.setRendered(false);






              }



           }




        AdfFacesContext.getCurrentInstance().addPartialTarget(certNameIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(certEmailIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(poNumIt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(poNum_plm);
        AdfFacesContext.getCurrentInstance().addPartialTarget(employeeNoIt);
               AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                      }catch(Exception e){
                          e.printStackTrace();

                      } finally{
                          if(rowSetIterator1
                             !=null){
                                 rowSetIterator1.closeRowSetIterator();;
                             }

                      }










        /*******************On 27thDEc ***********************/







        popUpChooseTemplate.hide();
        System.out.println("End selectcertifierName");

    }

    public void cancelChooseTemplate(ActionEvent actionEvent) {

        popUpChooseTemplate.hide();
    }






    public void onTaxRateCodePopupGoClick(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start onTaxRateCodePopupGoClick");


        String linePoNumber = null;
        String taxRateCode = null;

        RowKeySet rowKeySet = t1.getSelectedRowKeys();
        Iterator rowKeySetIt = rowKeySet.iterator();
        DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        RowSetIterator lineItemRSIter=null;
        try{
            lineItemRSIter = lineItemIter.getRowSetIterator();
         while(rowKeySetIt.hasNext()){
           Key key = (Key)((List)rowKeySetIt.next()).get(0);
           Row currentRow = lineItemRSIter.getRow(key);
             if(currentRow!=null) {
                System.out.println("----- linePoNumber ----- "+currentRow.getAttribute("LinePoNum"));
                linePoNumber = currentRow.getAttribute("LinePoNum")==null?"":currentRow.getAttribute("LinePoNum").toString().trim();
                taxRateCode = currentRow.getAttribute("TaxRateCode")==null?"":currentRow.getAttribute("TaxRateCode").toString().trim();
             }
         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(lineItemRSIter!=null) {
                        try {
                            lineItemRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        linePoNumber = linePoNumber==null ? "" : linePoNumber.trim();

        taxRateCode = (String)taxRateCodePopupIt.getValue();

        taxRateCode = taxRateCode==null ? "" : taxRateCode.trim();

        String invoiceType = (String)invoiceTypeSoc.getValue();

        invoiceType = invoiceType==null ? "" : invoiceType.trim();

        String poNumber = (String)poNumIt.getValue();

        poNumber = poNumber==null ? "" : poNumber.trim();

        String siteId = null;;
        if(siteIdIt.getValue()!=null) {
            siteId = ""+((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue();
        }
        siteId = siteId==null ? "" : siteId.trim();
        boolean flag=true;
        searchTaxRateCodeLookupVO(invoiceType, siteId, poNumber, linePoNumber, taxRateCode,flag);




        System.out.println("End onTaxRateCodePopupGoClick");

    }



    public void calculateLineTotal_onkeypressUnitPrice(ClientEvent clientEvent) {
        System.out.println("Start calculateLineTotal_onkeypressUnitPrice");
                RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();
                //do some work on it here (e.g. manipulating its readOnly state)
                //
                //Get access to the payloadclient
                Map  parameters = clientEvent.getParameters();
                System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
                System.out.println("LocalValue = " +parameters.get("localValue"));

                String glCodeError=null;



        DCBindingContainer bindings = getBinding();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject empVO = lineItemIter.getViewObject();
        Row selectedRow=empVO.getCurrentRow();
        oracle.jbo.domain.Number line_total=null;
        double quantity=0;
        double unitPrice=0;
        double lineTot=0;
        if (selectedRow!=null){
        System.out.println("selectedRow :: "+selectedRow);
        //        if(selectedRow.getAttribute("TaxRateCode")!=null){
        //        System.out.println("Tax Rate code from calculateLineTotalFromQuantity"+selectedRow.getAttribute("TaxRateCode"));
        //        }
                try {
                    if(parameters.get("submittedValue")!=null && selectedRow.getAttribute("UnitPrice")!=null){
                    System.out.println("Quantity****"+ selectedRow.getAttribute("Quantity"));
        //                    quantity=Long.parseLong(selectedRow.getAttribute("Quantity").toString());

                    unitPrice=Double.parseDouble(parameters.get("submittedValue").toString());
                    quantity=Double.parseDouble(selectedRow.getAttribute("Quantity").toString());
                    System.out.println("UnitPrice****"+selectedRow.getAttribute("UnitPrice"));
                    //unitPrice=Double.parseDouble(selectedRow.getAttribute("UnitPrice").toString());
//                    lineTot=quantity*unitPrice;
                    lineTot=customMultiply(quantity,unitPrice);
                    System.out.println("lineTot*******"+lineTot);
                    line_total=new oracle.jbo.domain.Number(lineTot);
                    System.out.println("line_total**************"+line_total);
                    //selectedRow.setAttribute("LineTotalAmount",line_total);

                    BigDecimal decimalValue = new BigDecimal(line_total.doubleValue());
                    decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                    selectedRow.setAttribute("LineTotalAmount",new oracle.jbo.domain.Number(decimalValue.doubleValue()));

                    calculateTaxAmount(lineTot);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(lineTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfLineTotal);
                    }
                }
                catch(Exception e) {
                    e.printStackTrace();
                }
                }
        System.out.println("End calculateLineTotal");

       // submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);


    }





    public void calculateLineTotal_onkeypress_quantity(ClientEvent clientEvent) {
        System.out.println("Start calculateLineTotal_onkeypress_quantity");
                RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();
                //do some work on it here (e.g. manipulating its readOnly state)
                //
                //Get access to the payloadclient
                Map  parameters = clientEvent.getParameters();
                System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
                System.out.println("LocalValue = " +parameters.get("localValue"));

                String glCodeError=null;



        DCBindingContainer bindings = getBinding();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject empVO = lineItemIter.getViewObject();
        Row selectedRow=empVO.getCurrentRow();
        oracle.jbo.domain.Number line_total=null;
        double quantity=0;
        double unitPrice=0;
        double lineTot=0;
        if (selectedRow!=null){
        System.out.println("selectedRow :: "+selectedRow);
        //        if(selectedRow.getAttribute("TaxRateCode")!=null){
        //        System.out.println("Tax Rate code from calculateLineTotalFromQuantity"+selectedRow.getAttribute("TaxRateCode"));
        //        }
                try {
                    if(parameters.get("submittedValue")!=null && selectedRow.getAttribute("UnitPrice")!=null){
                    System.out.println("Quantity****"+ selectedRow.getAttribute("Quantity"));
        //                    quantity=Long.parseLong(selectedRow.getAttribute("Quantity").toString());
                    quantity=Double.parseDouble(parameters.get("submittedValue").toString());
                    System.out.println("UnitPrice****"+selectedRow.getAttribute("UnitPrice"));
                    unitPrice=Double.parseDouble(selectedRow.getAttribute("UnitPrice").toString());
//                    lineTot=quantity*unitPrice;
                    lineTot=customMultiply(quantity,unitPrice);
                    System.out.println("lineTot*******"+lineTot);
                    line_total=new oracle.jbo.domain.Number(lineTot);
                    System.out.println("line_total**************"+line_total);
                    //selectedRow.setAttribute("LineTotalAmount",line_total);

                    BigDecimal decimalValue = new BigDecimal(line_total.doubleValue());
                    decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                    selectedRow.setAttribute("LineTotalAmount",new oracle.jbo.domain.Number(decimalValue.doubleValue()));

                    calculateTaxAmount(lineTot);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(lineTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfLineTotal);
                    }
                }
                catch(Exception e) {
                    e.printStackTrace();
                }
                }
        System.out.println("End calculateLineTotal");

       // submit_cb.setDisabled(true);
       // validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);


    }

    public void calculateLineTotal(ValueChangeEvent valueChangeEvent) {
        System.out.println("Within calculateLineTotal");
        System.out.println("valueChangeEvent.getNewValue()"+valueChangeEvent.getNewValue());
        System.out.println("valueChangeEvent.getOldValue()"+valueChangeEvent.getOldValue());
        String currencyCode = null;
                currencyCode = currencyIt.getValue() != null ? currencyIt.getValue().toString() : null;
                System.out.println("calculateLineTotalfromQuantity currencyCode"+currencyCode);
        DCBindingContainer bindings = getBinding();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject empVO = lineItemIter.getViewObject();
        Row selectedRow=empVO.getCurrentRow();
        oracle.jbo.domain.Number line_total=null;
        double quantity=0;
        double unitPrice=0;
        double lineTot=0;
        if (selectedRow!=null){
        System.out.println("selectedRow :: "+selectedRow);
    //        if(selectedRow.getAttribute("TaxRateCode")!=null){
    //        System.out.println("Tax Rate code from calculateLineTotalFromQuantity"+selectedRow.getAttribute("TaxRateCode"));
    //        }
                try {
                    if(valueChangeEvent.getNewValue()!=null && selectedRow.getAttribute("UnitPrice")!=null){
                    System.out.println("Quantity****"+ selectedRow.getAttribute("Quantity"));
    //                    quantity=Long.parseLong(selectedRow.getAttribute("Quantity").toString());
                    quantity=Double.parseDouble(valueChangeEvent.getNewValue().toString());
                    System.out.println("UnitPrice****"+selectedRow.getAttribute("UnitPrice"));
                    unitPrice=Double.parseDouble(selectedRow.getAttribute("UnitPrice").toString());
//                    lineTot=quantity*unitPrice;
                    lineTot=customMultiply(quantity,unitPrice);
                    System.out.println("lineTot*******"+lineTot);
                    line_total=new oracle.jbo.domain.Number(lineTot);
                    System.out.println("line_total**************"+line_total);
                    //selectedRow.setAttribute("LineTotalAmount",line_total);

                    // 21-11-22 JS changes same as APException
                    if(getUrlOrg().equalsIgnoreCase("JS")){
                        System.out.println("Calling round amount func from QUANTITY value change");
                                                roundAmount(currencyCode, Double.toString(lineTot), "LineTotalAmount");
                        getCalculatedTaxAmountFromEBS(Double.toString(lineTot),"LineTotal");
                    }else{
                    BigDecimal decimalValue = new BigDecimal(line_total.doubleValue());
                    decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                    selectedRow.setAttribute("LineTotalAmount",new oracle.jbo.domain.Number(decimalValue.doubleValue()));

                    calculateTaxAmount(lineTot);
                    }
                    AdfFacesContext.getCurrentInstance().addPartialTarget(lineTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfLineTotal);
                    }
                }
                catch(Exception e) {
                    e.printStackTrace();
                }
                }
        System.out.println("End calculateLineTotal");

      //  submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }


    public void calculateLineTotlFromUnit(ValueChangeEvent valueChangeEvent) {
        System.out.println("Within calculateLineTotlFromUnit");
        DCBindingContainer bindings = getBinding();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject empVO = lineItemIter.getViewObject();
        Row selectedRow=empVO.getCurrentRow();
        oracle.jbo.domain.Number line_total=null;
        double quantity=0;
        double unitPrice=0;
        double lineTot=0;
        String currencyCode = null;
        currencyCode = currencyIt.getValue()!=null ? currencyIt.getValue().toString() : null ;
        System.out.println("calculateLineTotlFromUnit currencyCode"+currencyCode);
        if (selectedRow!=null){
        System.out.println("selectedRow :: "+selectedRow);
    //        if(selectedRow.getAttribute("TaxRateCode")!=null){
    //        System.out.println("Tax Rate code from calculateLineTotlFromUnit"+selectedRow.getAttribute("TaxRateCode"));
    //        }
                try {
                    if(valueChangeEvent.getNewValue()!=null && selectedRow.getAttribute("Quantity")!=null){
    //                    if(selectedRow.getAttribute("Quantity")!=null && selectedRow.getAttribute("UnitPrice")!=null){
                    System.out.println("Quantity****"+ selectedRow.getAttribute("Quantity"));
                    System.out.println("UnitPrice****"+selectedRow.getAttribute("UnitPrice"));
                    quantity=Double.parseDouble(selectedRow.getAttribute("Quantity").toString());
                    unitPrice=Double.parseDouble(valueChangeEvent.getNewValue().toString());
//                    lineTot=quantity*unitPrice;
                    lineTot=customMultiply(quantity,unitPrice);
                    System.out.println("lineTot*******"+lineTot);
                    line_total=new oracle.jbo.domain.Number(lineTot);
                    System.out.println("line_total**************"+line_total);
                    //selectedRow.setAttribute("LineTotalAmount",line_total);

                    // 22-11-22 JS changes same as APException
                    if (getUrlOrg().equalsIgnoreCase("JS")){
                        System.out.println("JS Calling round amount func from QUANTITY value change");
                        roundAmount(currencyCode, Double.toString(lineTot), "LineTotalAmount");
                        getCalculatedTaxAmountFromEBS(Double.toString(lineTot),"LineTotal");
                    }else{
                    BigDecimal decimalValue = new BigDecimal(line_total.doubleValue());
                    decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                    selectedRow.setAttribute("LineTotalAmount",new oracle.jbo.domain.Number(decimalValue.doubleValue()));

                    calculateTaxAmount(lineTot);
                    }
                    AdfFacesContext.getCurrentInstance().addPartialTarget(lineTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfLineTotal);
                    }
                }
                catch(Exception e) {
                    e.printStackTrace();
                }
                }
     //   submit_cb.setDisabled(true);
     //   validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
        System.out.println("End calculateLineTotlFromUnit");
    }


    private void calculateTaxAmount(double lineTotal) {
        oracle.jbo.domain.Number taxRateLineItem=null;
        double lineTot=0;
        double taxRatecal=0;
        String linePoNumber = null;
        String taxRateCode = null;

         BindingContext bc = BindingContext.getCurrent();
         DCBindingContainer bindings = (DCBindingContainer)bc.getCurrentBindingsEntry();
         DCIteratorBinding glIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
         System.out.println("glIter ::"+glIter);
           ViewObject lineItemVO = glIter.getViewObject();
            Row selectedRow=lineItemVO.getCurrentRow();
             System.out.println("selectedRow :: "+selectedRow +"Tax rate  code of the selected row" + selectedRow.getAttribute("TaxRateCode"));

        linePoNumber = linePoNumber==null ? "" : linePoNumber.trim();
        //4th Sept taxRateCode =  AdfFacesContext.getCurrentInstance().getPageFlowScope().get("TaxRateCodePS")==null ? null :  AdfFacesContext.getCurrentInstance().getPageFlowScope().get("TaxRateCodePS").toString();

        taxRateCode =selectedRow.getAttribute("TaxRateCode")!=null ? selectedRow.getAttribute("TaxRateCode").toString() :null;
        System.out.println("b4 if taxRateCode*******"+taxRateCode);
        if(taxRateCode!=null){
        System.out.println("taxRateCode*******"+taxRateCode);
        System.out.println("linePoNumber*******"+linePoNumber);
        }
        String invoiceType = (String)invoiceTypeSoc.getValue();
        invoiceType = invoiceType==null ? "" : invoiceType.trim();
        String poNumber = (String)poNumIt.getValue();
        poNumber = poNumber==null ? "" : poNumber.trim();
        String siteId = null;
        if(siteIdIt.getValue()!=null) {
    //           siteId = ""+((oracle.jbo.domain.Number)siteIdIt.getValue()).getValue();
            siteId = ""+ siteIdIt.getValue().toString();
        }
        siteId = siteId==null ? "" : siteId.trim();
        boolean flag=false;

        if(searchTaxRateCodeLookupVO(invoiceType, siteId, poNumber, linePoNumber, taxRateCode,flag)) {
            lineTot=lineTotal;
            System.out.println("Line Total : "+lineTotal);
            System.out.println("in search tax rate**"+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"));
            if((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate"))!=null){
            try{
                taxRatecal=Double.parseDouble((AdfFacesContext.getCurrentInstance().getPageFlowScope().get("taxRate")).toString());
                taxRatecal=(lineTot*taxRatecal)/100;
                System.out.println("taxRatecal*******"+taxRatecal);
                taxRateLineItem=new oracle.jbo.domain.Number(taxRatecal);
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println("taxRateLineItem**************"+taxRateLineItem);
            if(taxRateLineItem!=null) {

                BigDecimal decimalValue = new BigDecimal(taxRateLineItem.doubleValue());
                decimalValue = decimalValue.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                try {
                    selectedRow.setAttribute("TaxAmountLineitem",new oracle.jbo.domain.Number(decimalValue.doubleValue()));
                } catch(Exception ex) {
                    ex.printStackTrace();
                }
                //selectedRow.setAttribute("Attr1",taxRateLineItem);
                AdfFacesContext.getCurrentInstance().addPartialTarget(taxAmountLine);
            }
        }
        }
    }

    public void calculateTaxAmountFromLineTot(ValueChangeEvent valueChangeEvent) {

        System.out.println("inside line total value change listener");
        double lineTotalVar=0;
        DecimalFormat df = new DecimalFormat("#0.00");


        if(valueChangeEvent.getNewValue()!=null){
        lineTotalVar=Double.parseDouble(valueChangeEvent.getNewValue().toString());

        System.out.println("lineTotalVar****"+lineTotalVar);
            // 22-11-22 JS changes same as APException
            if (getUrlOrg().equalsIgnoreCase("JS")){
                System.out.println("JS calculateTaxAmountFromLineTot");
                getCalculatedTaxAmountFromEBS(valueChangeEvent.getNewValue().toString(),"LineTotal");
            }else{
            calculateTaxAmount(lineTotalVar);
            }
        }
      //  submit_cb.setDisabled(true);
      //  validate_cb.setDisabled(false);
        AdfFacesContext.getCurrentInstance().addPartialTarget(sumOfTaxTotal);
        AdfFacesContext.getCurrentInstance().addPartialTarget(pgOperations);
    }
    public void onSupNamePopUpGoClick(ActionEvent actionEvent) {
        System.out.println("Start onSupNamePopUpGoClick");
        String enteredSupName = null;
        try {
            if(supNamePopupIt.getValue() != null) {
                enteredSupName = supNamePopupIt.getValue().toString();
                System.out.println("supNamePopupIt.getValue(): "+enteredSupName);
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesVO1Iterator");
                ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = suppNameVO.getViewCriteria("SitesVOCriteria");
                suppNameVO.applyViewCriteria(vc);
                suppNameVO.setNamedWhereClauseParam("bindVendorName", enteredSupName);
                suppNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(suppNameVO.getQuery());
                suppNameVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(supDetailsTable);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onSupNamePopUpGoClick");
    }
    public void cancelSupplierName(ActionEvent actionEvent) {
    // Add event code here...
    System.out.println("Start: cancelSupplierName");

    pop_SupplierName.hide();

    System.out.println("End: cancelSupplierName");
    }

    public void onPONumPopupGoClick(ActionEvent actionEvent) {
        System.out.println("Start onPONumPopupGoClick");
        String enteredPONum = null;
        try {
            if(siteIdIt.getValue() != null) {
                System.out.println("Inside Both Null condition ");
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteria2");
                poNOVO.applyViewCriteria(vc);
                poNOVO.setNamedWhereClauseParam("bindPONum", poNumPopupIt.getValue()==null?"":poNumPopupIt.getValue().toString().trim());
                poNOVO.setNamedWhereClauseParam("bindSiteId", siteIdIt.getValue().toString().trim());
                poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(poNOVO.getQuery());
                poNOVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);
            } else {

                enteredPONum = poNumPopupIt.getValue()==null?"":poNumPopupIt.getValue().toString().trim();
                System.out.println("poNumIt.getValue(): "+enteredPONum);
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteria");
                poNOVO.applyViewCriteria(vc);
                poNOVO.setNamedWhereClauseParam("bindPONum", enteredPONum);
                poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(poNOVO.getQuery());
                poNOVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);

            }









        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onPONumPopupGoClick");
    }

    public void selectSupplierName(ActionEvent actionEvent) {
    System.out.println("Start: selectSupplierName");
    String selectedSupplierName=null;
    String supplierNum=null;
    String selectedSiteId=null;
    String selectedSiteName=null;
    String operatingUnit=null;
    String taxRegNo=null;
    String PoNonPo=null;
    oracle.jbo.domain.Number supNo;
    RowKeySet selectedSupplier = supDetailsTable.getSelectedRowKeys();
    Iterator selectedSupIter = selectedSupplier.iterator();
    DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
    DCIteratorBinding empIter = bindings.findIteratorBinding("SitesVO1Iterator");
    RowSetIterator empRSIter=null;
    String orgId = null;
    try{
        empRSIter = empIter.getRowSetIterator();
    while(selectedSupIter.hasNext()){
       Key key = (Key)((List)selectedSupIter.next()).get(0);
       Row currentRow = empRSIter.getRow(key);
       System.out.println(currentRow.getAttribute("VendorName"));
         selectedSupplierName=currentRow.getAttribute("VendorName").toString();
         supplierNum=currentRow.getAttribute("VendorNumber").toString();
         selectedSiteId=currentRow.getAttribute("VendorSiteId").toString();
         selectedSiteName=currentRow.getAttribute("VendorSiteCode").toString();
         operatingUnit=currentRow.getAttribute("OperatingUnit").toString();

         orgId = currentRow.getAttribute("OrgId")!=null ? currentRow.getAttribute("OrgId").toString() :null;
         taxRegNo  = currentRow.getAttribute("TaxRegistrationNumSuppSite")!=null ? currentRow.getAttribute("TaxRegistrationNumSuppSite").toString() :"";

         PoNonPo = currentRow.getAttribute("NoPoNoPayFlag") != null ? currentRow.getAttribute("NoPoNoPayFlag").toString(): "N" ;

         System.out.println("taxRegNo---------------- :: "+taxRegNo);
         String supplierId = currentRow.getAttribute("VendorId").toString();
         System.out.println("***** Setting Supplier ID for Supplier LOV select ***** : "+supplierId);
         ADFContext.getCurrent().getPageFlowScope().put("supplier_id_value", supplierId);

     }
    }catch(Exception e)
    {
        e.printStackTrace();
        }
    finally{
                if(empRSIter!=null) {
                    try {
                        empRSIter.closeRowSetIterator();
                    } catch(Exception ex) {
                        ex.printStackTrace();

                }
                }
            }
    supNo = new oracle.jbo.domain.Number(Integer.parseInt(supplierNum));
    System.out.println("supNo: "+supNo);
    supNameIt.setValue(selectedSupplierName);
    suppNumIt.setValue(supNo);
    siteIdIt.setValue(selectedSiteId);
    siteNameIt.setValue(selectedSiteName);
    operatingUnitIt.setValue(operatingUnit);
    poNumIt.setValue("");
    orgIdIt.setValue(orgId);
    taxRegIt.setValue(taxRegNo);

    if(("Y").equalsIgnoreCase(PoNonPo)) {
        ot76.setVisible(true);
        invoiceTypeSoc.setValue("PO Invoice");
        System.out.println("Before Calling change event: ");
        ValueChangeEvent event = new ValueChangeEvent(invoiceTypeSoc, "Non PO Invoice","PO Invoice");
        oninvoiceTypeChange(event);
        ADFContext.getCurrent().getPageFlowScope().put("PoNonPo", PoNonPo);
    }
    else {
        ot76.setVisible(false);
        ADFContext.getCurrent().getPageFlowScope().put("PoNonPo", PoNonPo);
    }
    //        siteIdIt.setValue("");
    //        siteNameIt.setValue("");
    //Added on 24th JAn

    AdfFacesContext.getCurrentInstance().addPartialTarget(pgl1);
    AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
    AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);
    AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
    pop_SupplierName.hide();
    System.out.println("End selectSupplierName");
    }



    public void openSupNamePopup(ActionEvent actionEvent) {
        System.out.println("Start: openSupNamePopup");
        try {
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            pop_SupplierName.show(hints);

                        String enteredSupName=null;
            if(supNameIt.getValue()!=null) {
                enteredSupName = supNameIt.getValue().toString();
                System.out.println("supNameIt.getValue(): "+enteredSupName);
                System.out.println("GetUrlOrg : " + getUrlOrg());
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesVO1Iterator");
                ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = suppNameVO.getViewCriteria("SitesVOCriteria");
                suppNameVO.applyViewCriteria(vc);
                suppNameVO.setNamedWhereClauseParam("bindVendorName", enteredSupName);
                suppNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(suppNameVO.getQuery());
                suppNameVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(supDetailsTable);

            }
           else {
                System.out.println("supNameIt.getValue(): "+enteredSupName);
                enteredSupName="";
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesVO1Iterator");
                ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = suppNameVO.getViewCriteria("SitesVOCriteria");
                suppNameVO.applyViewCriteria(vc);
//                suppNameVO.setNamedWhereClauseParam("bindVendorName", enteredSupName);
                suppNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(suppNameVO.getQuery());
                suppNameVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(supDetailsTable);
           }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End: openSupNamePopup");
    }

    public void openSiteIdPopup(ActionEvent actionEvent) {
        System.out.println("Start openSiteIdPopup");
        try {
            siteNamePopupIt.setValue(siteIdIt.getValue());
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            popup_SiteID.show(hints);
            String enteredSiteId=null;
            String enteredSiteName=null;
            if(supNameIt.getValue()!=null && !supNameIt.getValue().equals("")){
                enteredSiteName=supNameIt.getValue().toString();
                System.out.println("supNameIt.getValue(): "+enteredSiteName);
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesDetailsVO1Iterator");
                ViewObjectImpl siteNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = siteNameVO.getViewCriteria("SitesDetailsVOCriteria2");
                siteNameVO.applyViewCriteria(vc);
                siteNameVO.setNamedWhereClauseParam("bindSupplierName", enteredSiteName);
                siteNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println("1----------"+siteNameVO.getQuery());
                siteNameVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(siteDetailsTable);
            }
            else if(siteIdIt.getValue() != null && !siteIdIt.getValue().equals("")) {
                enteredSiteId = siteIdIt.getValue().toString();
                System.out.println("siteIdIt.getValue(): "+enteredSiteId);
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesDetailsVO1Iterator");
                ViewObjectImpl siteNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = siteNameVO.getViewCriteria("SitesDetailsVOCriteria1");
                siteNameVO.applyViewCriteria(vc);
                siteNameVO.setNamedWhereClauseParam("bindSiteId", enteredSiteId);
                siteNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//               System.out.println("-----------Dynamic Query-----------");
//                System.out.println("2----------"+siteNameVO.getQuery());
                siteNameVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(siteDetailsTable);
            }
            else if ((supNameIt.getValue()==null || supNameIt.getValue().equals("")) && (siteIdIt.getValue()==null || siteIdIt.getValue().equals(""))){
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesDetailsVO1Iterator");
                    ViewObjectImpl siteNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    siteNameVO.removeApplyViewCriteriaName("SitesDetailsVOCriteria1");
                    siteNameVO.removeApplyViewCriteriaName("SitesDetailsVOCriteria2");
                    siteNameVO.removeApplyViewCriteriaName("SitesDetailsVOCriteria");
                    System.out.println("-----------Clearing view criteria and caches-----------");
                    //siteNameVO.clearViewCriterias();
                    //siteNameVO.clearCache();
//                    System.out.println("-----------Dynamic Query-----------");
                ViewCriteria vc = siteNameVO.getViewCriteria("SitesDetailsVOCriteriaOrg");
                                siteNameVO.appendViewCriteria(vc);
                                siteNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                    System.out.println("3----------"+siteNameVO.getQuery());
                    siteNameVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(siteDetailsTable);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openSiteIdPopup");

    }
    public void cancelSiteId(ActionEvent actionEvent) {
        System.out.println("Start: cancelSiteId");

        popup_SiteID.hide();

        System.out.println("End: cancelSiteId");
    }

    public void selectSiteId(ActionEvent actionEvent) {
    System.out.println("Start: selectSiteId");
    String selectedSiteId=null;
    String selectedSiteName=null;
    String selectedOperatingUnit=null;
    String selectedSupplierName=null;
    String supplierNum=null;
    String orgId = null;
    String taxRegNo = null;
    String selectedSupplierId = null;
    String PoNonPo=null;
    RowKeySet selectedSite = siteDetailsTable.getSelectedRowKeys();
    Iterator selectedSiteIter = selectedSite.iterator();
    DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
    DCIteratorBinding empIter = bindings.findIteratorBinding("SitesDetailsVO1Iterator");
    RowSetIterator empRSIter=null;
    oracle.jbo.domain.Number supNo;
    try{
        empRSIter = empIter.getRowSetIterator();
    while(selectedSiteIter.hasNext()){
       Key key = (Key)((List)selectedSiteIter.next()).get(0);
       Row currentRow = empRSIter.getRow(key);
       System.out.println(currentRow.getAttribute("VendorSiteId"));
         selectedSiteId=currentRow.getAttribute("VendorSiteId").toString();
         selectedSiteName=currentRow.getAttribute("VendorSiteCode").toString();
         selectedOperatingUnit=currentRow.getAttribute("OperatingUnit").toString();
         selectedSupplierName=currentRow.getAttribute("VendorName").toString();
         supplierNum=currentRow.getAttribute("VendorNumber").toString();
         orgId = currentRow.getAttribute("OrgId")!=null ? currentRow.getAttribute("OrgId").toString() :null;

         PoNonPo = currentRow.getAttribute("NoPoNoPayFlag") != null ? currentRow.getAttribute("NoPoNoPayFlag").toString(): "N" ;
         taxRegNo = currentRow.getAttribute("TaxRegistrationNumSuppSite")!=null  ? currentRow.getAttribute("TaxRegistrationNumSuppSite").toString() :"";
         System.out.println("taxRegNo--------------------------->"+taxRegNo);
         System.out.println("orgId from selectSiteId--------------------------->"+orgId);
         String supplierId = currentRow.getAttribute("VendorId").toString();
         System.out.println("***** Setting Supplier ID for Supplier LOV select ***** : "+supplierId);
         ADFContext.getCurrent().getPageFlowScope().put("supplier_id_value", supplierId);
     }
    }catch(Exception e)
    {e.printStackTrace();
     }
    finally{
            if(empRSIter!=null) {
                try {
                    empRSIter.closeRowSetIterator();
                } catch(Exception ex) {
                    ex.printStackTrace();

            }
            }
        }

    siteIdIt.setValue(selectedSiteId);
    siteNameIt.setValue(selectedSiteName);
    operatingUnitIt.setValue(selectedOperatingUnit);
    supNo = new oracle.jbo.domain.Number(Integer.parseInt(supplierNum));
    System.out.println("supNo: "+supNo);
    supNameIt.setValue(selectedSupplierName);
    suppNumIt.setValue(supNo);
    orgIdIt.setValue(orgId);
    taxRegIt.setValue(taxRegNo);

        if(("Y").equalsIgnoreCase(PoNonPo)) {
            ot76.setVisible(true);
            invoiceTypeSoc.setValue("PO Invoice");
            System.out.println("Before Calling change event: ");
            ValueChangeEvent event = new ValueChangeEvent(invoiceTypeSoc, "Non PO Invoice","PO Invoice");
            oninvoiceTypeChange(event);
            ADFContext.getCurrent().getPageFlowScope().put("PoNonPo", PoNonPo);
        }
        else {
            ot76.setVisible(false);
            ADFContext.getCurrent().getPageFlowScope().put("PoNonPo", PoNonPo);
        }
        //Added on 24th JAn
    AdfFacesContext.getCurrentInstance().addPartialTarget(pgl1);
    AdfFacesContext.getCurrentInstance().addPartialTarget(invoiceTypeSoc);
    AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
    AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
    popup_SiteID.hide();
    System.out.println("End selectSiteId");
    }

    public void onSiteNamePopUpGoClick(ActionEvent actionEvent) {
        System.out.println("Start onSiteNamePopUpGoClick 1");
        String enteredSiteName = null;
        String enteredSupplierName = null;
        String searchType = null;
        try {
            if(siteNamePopupIt.getValue() != null) {
                enteredSiteName = siteNamePopupIt.getValue().toString();
                if(supNameIt.getValue() != null){
                        enteredSupplierName = supNameIt.getValue().toString();
                        System.out.println("entered supplier name" + enteredSupplierName);

                }
                if(siteLOVSoc.getValue() != null) {
                                    searchType = siteLOVSoc.getValue().toString();
                                    System.out.println("siteLOVSoc.getValue(): "+searchType);
                 }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesDetailsVO1Iterator");
                ViewObjectImpl siteNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                //siteNameVO.clearViewCriterias();;
                //siteNameVO.clearCache();;setApplyViewCriterias(null

                //siteNameVO.reset();
                String[] applyViewCriteriaNames = siteNameVO.getApplyViewCriteriaNames();
                if(applyViewCriteriaNames!=null){
                    for(String vc_name :applyViewCriteriaNames ){
                        System.out.println("VC name :: "+vc_name);
                        siteNameVO.removeApplyViewCriteriaName(vc_name) ;

                    }
                }


                ViewCriteria vc = null;

                System.out.println("siteNamePopupIt.getValue():new "+enteredSiteName);
                if(searchType != null && searchType.equals("SiteId")){
                   vc = siteNameVO.getViewCriteria("SitesDetailsVOCriteria_bySiteId");

                   System.out.println("Inside 11");
                    //siteNameVO.putViewCriteria("SitesDetailsVOCriteria_bySiteId");

                  siteNameVO.applyViewCriteria(vc);
                    siteNameVO.setNamedWhereClauseParam("bindSiteId", enteredSiteName);
                    siteNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
                    //siteNameVO.setNamedWhereClauseParam("bindSupplierName", enteredSupplierName);
//                    System.out.println("queryyyyyy on go11 ::"+siteNameVO.getQuery());
                    siteNameVO.executeQuery();


                       /*  ViewCriteria vc1 = siteNameVO.createViewCriteria();
                         ViewCriteriaRow vcRow = vc1.createViewCriteriaRow();

                         vcRow.setAttribute("VendorSiteId", enteredSiteName);
                         vc1.addRow(vcRow);
                         /*vcRow.setAttribute("Email", email);
                         vc1.addRow(vcRow);*/

                        /* siteNameVO.applyViewCriteria(vc);
                         System.out.println("queryyyyyy on go1 ::"+siteNameVO.getQuery());
                         siteNameVO.executeQuery();

                   System.out.println("Excecuting the queryyyy");*/


                }
                // 26-12-2022 Adding BankAccount view criteria
                                else if ((searchType != null && searchType.equals("BankAccountNo")) &&
                                         siteNamePopupIt.getValue() != null) {
                                    vc = siteNameVO.getViewCriteria("SitesDetailsVOCriteria_bybankaccount");
                                    siteNameVO.applyViewCriteria(vc);

                                    siteNameVO.setNamedWhereClauseParam("bindBankAccountNo", enteredSiteName);
                                    siteNameVO.setNamedWhereClauseParam("bindSupplierName", enteredSupplierName);
                                    siteNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
                                    siteNameVO.executeQuery();
                                }
                else{
                    vc = siteNameVO.getViewCriteria("SitesDetailsVOCriteria");
                    System.out.println("Inside 2");
                    siteNameVO.applyViewCriteria(vc);
                    siteNameVO.setNamedWhereClauseParam("bindSiteName", enteredSiteName);
                    siteNameVO.setNamedWhereClauseParam("bindSupplierName", enteredSupplierName);
                    siteNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                    System.out.println("queryyyyyy on go2 ::"+siteNameVO.getQuery());
                    siteNameVO.executeQuery();
                }



                        AdfFacesContext.getCurrentInstance().addPartialTarget(siteDetailsTable);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onSiteNamePopUpGoClick");

    }
    public void cancelPONumber(ActionEvent actionEvent) {
    // Add event code here...
    System.out.println("Start: cancelSiteId");
    poNumPopupIt.setValue("");
    poNumpopUp_Header.hide();

    System.out.println("End: cancelSiteId");
    }

    public void cancelPOLineNumPopup(ActionEvent actionEvent) {

        ////
        p8.hide();
    }





    public void selectPONumber(ActionEvent actionEvent) {
    // Add event code here...dfdfdf


    System.out.println("Start: selectPONumber");

    boolean isLineItemPopup = (this.isLineItemPopup.getValue()!=null && this.isLineItemPopup.getValue().toString().equalsIgnoreCase("yes")) ? true : false;

    System.out.println("-----isLineItemPopup-----"+isLineItemPopup);

    String selectedPONumber=null;
    String selectedOperatingUnit=null;
    String selectedSiteId=null;
    String selectedSiteName=null;
    String selectedSupplierName=null;
    String selectedSupplierNum=null;
    String taxRegNo = null;
    oracle.jbo.domain.Number supNo;
    RowKeySet selectedPONum = poDetailsTable.getSelectedRowKeys();
    Iterator selectedSiteIter = selectedPONum.iterator();
    DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
    DCIteratorBinding empIter = bindings.findIteratorBinding("POVO1Iterator");
    RowSetIterator empRSIter=null;
    try{
        empRSIter = empIter.getRowSetIterator();
    while(selectedSiteIter.hasNext()){
       Key key = (Key)((List)selectedSiteIter.next()).get(0);
       Row currentRow = empRSIter.getRow(key);
       System.out.println(currentRow.getAttribute("PoNum"));
         selectedPONumber=currentRow.getAttribute("PoNum").toString();
         selectedSupplierName=currentRow.getAttribute("VendorName").toString();
         selectedSupplierNum=currentRow.getAttribute("VendorNumber").toString();
         selectedSiteId=currentRow.getAttribute("VendorSiteId").toString();
         selectedSiteName=currentRow.getAttribute("VendorSiteCode").toString();
         selectedOperatingUnit=currentRow.getAttribute("OperatingUnit").toString();
       // taxRegNo = currentRow.getAttribute("VatRegistrationNum")!=null ?currentRow.getAttribute("VatRegistrationNum").toString() :null;
       taxRegNo = currentRow.getAttribute("Vatregistrationnum")!=null ?currentRow.getAttribute("Vatregistrationnum").toString() :null;

     }
    }catch(Exception e)
    {
        e.printStackTrace();
    }
    finally{
                if(empRSIter!=null) {
                    try {
                        empRSIter.closeRowSetIterator();
                    } catch(Exception ex) {
                        ex.printStackTrace();

                }
                }
            }




                    //Added this snippet of code above to get org id







    if(isLineItemPopup) {

        int selectedRowNum = -1;

        if(clientID.getValue()!=null) {
            selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
            System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
        }


         if(selectedRowNum!=-1) {
             String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it77::content";
             System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedPONumber);

             FacesContext fctx = FacesContext.getCurrentInstance();
             ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

             String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedPONumber+"';";


             erks.addScript(fctx, myJavaScriptCode );

             erks.addScript(fctx, "document.getElementById('"+componentIDPoNumber+"').focus();");
             erks.addScript(fctx, "AdfActionEvent.queue(AdfPage.PAGE.findComponentByAbsoluteId('" + "pt1:t1:"+selectedRowNum+":it35" + "'), true);");

         }


    } else {
        poNumIt.setValue(selectedPONumber);
        System.out.println("selectedPONumber ::"+selectedPONumber);
        if(supNameIt.getValue()==null){
            supNo = new oracle.jbo.domain.Number(Integer.parseInt(selectedSupplierNum));
            supNameIt.setValue(selectedSupplierName);
            suppNumIt.setValue(supNo);
        }
        if(siteIdIt.getValue()==null){
            siteIdIt.setValue(selectedSiteId);
            siteNameIt.setValue(selectedSiteName);
            operatingUnitIt.setValue(selectedOperatingUnit);
            taxRegIt.setValue(taxRegNo);
        }
        AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);








        DCBindingContainer bindings1 =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding lineItemIter = bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject lineItemVO=     lineItemIter.getViewObject();
        System.out.println("RowCount::"+lineItemVO.getEstimatedRowCount());




        /* ********************* */

        RowSetIterator rsi=null;
        try{
            rsi = lineItemVO.createRowSetIterator(null);
        while (rsi.next() != null) {
            Row lineItemRow = rsi.getCurrentRow();

            /*10thSept*/
            //selectedProjNo=lineItemRow.getAttribute("ProjectNo")!=null ?lineItemRow.getAttribute("ProjectNo").toString() :AdfFacesContext.getCurrentInstance().getPageFlowScope().get("currentProjectId").toString();
            if(selectedPONumber!=null){
                System.out.println("selectedPONumber 2 ::"+selectedPONumber);
            lineItemRow.setAttribute("LinePoNum", selectedPONumber);
            linePONum_it.setValue(selectedPONumber);
            }

            AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

        }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
         finally{
                     if(rsi!=null) {
                         try {
                             rsi.closeRowSetIterator();
                         } catch(Exception ex) {
                             ex.printStackTrace();

                     }
                     }
                 }








        poNumpopUp_Header.hide();
    }

    AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
    poNumpopUp_Header.hide();

    poNumPopupIt.setValue("");


    System.out.println("End selectPONumber");





        //Added this snippet of code to get org id **///populate supplier ID and org ID
                        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("SitesVO1Iterator");
                        ViewObjectImpl siteVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                        ViewCriteria vc = siteVO.getViewCriteria("SitesVOCriteriaSupNameSiteID_orgId");
                        siteVO.applyViewCriteria(vc);
                        siteVO.setNamedWhereClauseParam("bindVendorName",selectedSupplierName);
                        siteVO.setNamedWhereClauseParam("bvSiteID", selectedSiteId);
                        siteVO.setNamedWhereClauseParam("bindOperatingUnit", operatingUnitIt.getValue());
        siteVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
                    System.out.println("B4 execution ORGID  ------"+"selectedSupplierName------------"+selectedSupplierName +"---selectedSiteId---"+selectedSiteId);
        System.out.println("B4 execution ORGID  ------"+"operatingUnitIt------------"+ operatingUnitIt.getValue());
//        System.out.println("Org ID query ::::"+siteVO.getQuery());
                        siteVO.executeQuery();
                    System.out.println("After esecution");
                    System.out.println("siteVO.getEstimatedRowCount() : " +siteVO.getEstimatedRowCount());
                    RowSetIterator rowIt=null;
                    String orgId = null;
                    try{
                        if (siteVO.getEstimatedRowCount() > 0) {
                                        System.out.println("--- Match found for Supplier Name : " +
                                                           siteVO.getEstimatedRowCount() +
                                                           " records.");
                                         rowIt = siteVO.createRowSetIterator(null);
                                        while (rowIt.hasNext()) {
                                            Row rowData = rowIt.next();

                                                System.out.println("--- Matched Supplier Number : " +
                                                                   rowData.getAttribute("VendorNumber"));

                                                orgId =
                                                        rowData.getAttribute("OrgId") == null ? null :rowData.getAttribute("OrgId").toString();

                                                System.out.println("orgId ::: "+ orgId);
                                            if(orgId!=null){
                                                break;
                                            }

                                            }
                                }

                    }catch (Exception e) {
                        e.printStackTrace();

                                    }

                        finally{
                                    if(rowIt!=null) {
                                        try {
                                            rowIt.closeRowSetIterator();
                                        } catch(Exception ex) {
                                            ex.printStackTrace();
                                        }
                                    }
                                }


    System.out.println("Setting the org Id on po number auto popluation------------"+orgId);
        orgIdIt.setValue(orgId);
        AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
        if(orgId!=null){
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
        }



    }


    public void showPONumberPopup(ActionEvent actionEvent) {

            Object isLineItemPopupParam =  actionEvent.getComponent().getAttributes().get("isLineItemPopup");
            System.out.println(" ----- showPONumberPopup : "+isLineItemPopupParam);

            if(isLineItemPopupParam!=null && isLineItemPopupParam.toString()!=null && isLineItemPopupParam.toString().equalsIgnoreCase("yes")) {
                this.isLineItemPopup.setValue("yes");
            } else {
                this.isLineItemPopup.setValue("no");
            }

            poNumPopupIt.setValue(poNumIt.getValue());

            System.out.println("Start showPONumberPopup");
            try {

                String enteredPonumber = null;
                String enteredSiteId=null;

                System.out.println("----- Site ID ------- : ["+siteIdIt.getValue()+"]");
                System.out.println("----- PO Number ----- : ["+poNumIt.getValue()+"]");

                if(siteIdIt.getValue() != null) {
                        System.out.println("Inside Both Null condition ");
                       /* enteredPonumber = poNumIt.getValue().toString();
                        System.out.println("poNumIt.getValue(): "+enteredPonumber);*/
                        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                        ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                        ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteria2");
                        poNOVO.applyViewCriteria(vc);
                        poNOVO.setNamedWhereClauseParam("bindPONum", poNumIt.getValue()==null?"":poNumIt.getValue().toString().trim());
                        poNOVO.setNamedWhereClauseParam("bindSiteId", siteIdIt.getValue().toString().trim());
                    poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                        System.out.println("-----------Dynamic Query-----------");
//                        System.out.println(poNOVO.getQuery());
                        poNOVO.executeQuery();
                        AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);
                     //   AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);
                     } else if ((siteIdIt.getValue() == null || siteIdIt.getValue().equals("")) &&
                                           (poNumIt.getValue() == null || poNumIt.getValue().equals(""))) {
                                    System.out.println("Inside Both Null condition ");
                                    /* enteredPonumber = poNumIt.getValue().toString();
                                            System.out.println("poNumIt.getValue(): "+enteredPonumber);*/
                                    DCBindingContainer dcBindingContainer =
                                        (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                                    ViewObjectImpl poNOVO = (ViewObjectImpl) dcIteratorBinding.getViewObject();
                                    ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteriaOrg");
                                    poNOVO.applyViewCriteria(vc);
                                    poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                    System.out.println("-----------Dynamic Query-----------");
//                                    System.out.println(poNOVO.getQuery());
                                    poNOVO.executeQuery();
                                    AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);
                } else {
    //                    this.validationErrorMessage.setValue("Site Id must be selected first to search for a PO.");
    //                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
    //                    validationErrorPopup.show(hints);
                    enteredPonumber = poNumIt.getValue()==null?"":poNumIt.getValue().toString().trim();
                    System.out.println("poNumIt.getValue(): "+enteredPonumber);
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POVO1Iterator");
                    ViewObjectImpl poNOVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = poNOVO.getViewCriteria("POVOCriteria");
                    poNOVO.applyViewCriteria(vc);
                    poNOVO.setNamedWhereClauseParam("bindPONum", enteredPonumber);
                    poNOVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                    System.out.println("-----------Dynamic Query-----------");
//                   System.out.println(poNOVO.getQuery());
                    poNOVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(poDetailsTable);


                }

                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                poNumpopUp_Header.show(hints);
            }
            catch(Exception e) {
                e.printStackTrace();
            }
            System.out.println("End showPONumberPopup");
        }


    public void openCurrencyPopup(ActionEvent actionEvent) {
        System.out.println("Start openCurrencyPopup");
        try {
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            currencyPopUp.show(hints);
            String enteredCurrCode = null;

                if(currencyIt.getValue() != null) {
                    enteredCurrCode = currencyIt.getValue().toString();
                    System.out.println("currencyIt.getValue(): "+enteredCurrCode);
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CurrencyCodeVO1Iterator");
                    ViewObjectImpl currencyCodeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = currencyCodeVO.getViewCriteria("CurrencyCodeVOCriteria");
                    currencyCodeVO.applyViewCriteria(vc);
                    currencyCodeVO.setNamedWhereClauseParam("bindCurrencyCode", enteredCurrCode);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(currencyCodeVO.getQuery());
                    currencyCodeVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(currencyCodeDetailsTable);
                }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openCurrencyPopup");
    }

    public void cancelCurrencyCode(ActionEvent actionEvent) {
       // Add event code here...
       System.out.println("Start: cancelCurrencyCode");

       currencyPopUp.hide();

       System.out.println("End: cancelCurrencyCode");
    }
    public void selectCurrencyCode(ActionEvent actionEvent) {
          System.out.println("Start: selectCurrencyCode");
          String selectedCurrencyCode=null;
          //String selectedEmployeeNo=null;
          //String selectedcertifierEmail=null;
          RowKeySet selectedCurrency = currencyCodeDetailsTable.getSelectedRowKeys();
          Iterator selectedCurrencyIter = selectedCurrency.iterator();
          DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding empIter = bindings.findIteratorBinding("CurrencyCodeVO1Iterator");
          RowSetIterator empRSIter=null;
          try{
              empRSIter = empIter.getRowSetIterator();
          while(selectedCurrencyIter.hasNext()){
             Key key = (Key)((List)selectedCurrencyIter.next()).get(0);
             Row currentRow = empRSIter.getRow(key);
             System.out.println(currentRow.getAttribute("CurrencyCode"));
               selectedCurrencyCode=currentRow.getAttribute("CurrencyCode").toString();

           }
          }catch(Exception e)
          {
              e.printStackTrace();
              }
          finally{
                      if(empRSIter!=null) {
                          try {
                              empRSIter.closeRowSetIterator();
                          } catch(Exception ex) {
                              ex.printStackTrace();

                      }
                      }
                  }
          currencyIt.setValue(selectedCurrencyCode);

          AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
          currencyPopUp.hide();
          System.out.println("End selectCurrencyCode");
      }

    public void onCurrencyCodePopUpGoClick(ActionEvent actionEvent) {
        System.out.println("Start onCurrencyCodePopUpGoClick");
        String enteredCurrCode = null;
        try {
            if(currencyCodePopupIT.getValue() != null) {
                enteredCurrCode = currencyCodePopupIT.getValue().toString();
                System.out.println("currencyCodePopupIT.getValue(): "+enteredCurrCode);
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CurrencyCodeVO1Iterator");
                ViewObjectImpl currencyCodeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = currencyCodeVO.getViewCriteria("CurrencyCodeVOCriteria");
                currencyCodeVO.applyViewCriteria(vc);
                currencyCodeVO.setNamedWhereClauseParam("bindCurrencyCode", enteredCurrCode);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(currencyCodeVO.getQuery());
                currencyCodeVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(currencyCodeDetailsTable);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onCurrencyCodePopUpGoClick");
    }

    public void cancelCertifierName(ActionEvent actionEvent) {
       // Add event code here...
       System.out.println("Start: cancelCertifierName");
       certifierNameErrorOT.setVisible(false);
       AdfFacesContext.getCurrentInstance().addPartialTarget(certifierNameErrorOT);
       popUpCertifier.hide();

       System.out.println("End: cancelCertifierName");
    }

    public void onCerNamePopUpGoClick(ActionEvent actionEvent) {
           System.out.println("Start onCerNamePopUpGoClick");
           String enteredCertifierVal = null;
           String searchType = null;
           try {
               if(certifierNamePopupIT.getValue() != null) {
                               enteredCertifierVal = certifierNamePopupIT.getValue().toString();
                               System.out.println("certifierNamePopupIT.getValue(): "+enteredCertifierVal);
                               if(searchByCertifiername.getValue() != null) {
                                       searchType = searchByCertifiername.getValue().toString();
                                       System.out.println("searchByCertifiername.getValue(): "+searchType);
                               }
                               DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                               DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                               ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                               ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");
                               if(searchType != null && searchType.equals("certName")){
                                       certifierNameVO.applyViewCriteria(vc);
                                       certifierNameVO.setNamedWhereClauseParam("bindName", enteredCertifierVal);
                                       certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", null);
                                       certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                                   certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                                       System.out.println("Query : " + certifierNameVO.getQuery());
                                       certifierNameVO.executeQuery();
                               }
                               if(searchType != null && searchType.equals("empNumber")){
                                       certifierNameVO.applyViewCriteria(vc);
                                       certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", enteredCertifierVal);
                                       certifierNameVO.setNamedWhereClauseParam("bindName", null);
                                       certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                                   certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                                       System.out.println("Query : " + certifierNameVO.getQuery());
                                       certifierNameVO.executeQuery();
                               }
                               if(searchType != null && searchType.equals("preferredName")){
                                       certifierNameVO.applyViewCriteria(vc);
                                       certifierNameVO.setNamedWhereClauseParam("bvPreferredName", enteredCertifierVal);
                                       certifierNameVO.setNamedWhereClauseParam("bindName", null);
                                       certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", null);
                                   certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                                       System.out.println("Query : " + certifierNameVO.getQuery());
                                       certifierNameVO.executeQuery();
                               }
                               AdfFacesContext.getCurrentInstance().addPartialTarget(certifierNameDetailsTable);
               }  }
           catch(Exception e) {
               e.printStackTrace();
           }
           System.out.println("End onCerNamePopUpGoClick");
       }



    public void selectcertifierName(ActionEvent actionEvent) {
              System.out.println("Start: selectcertifierName");
              String selectedCertifierName=null;
              String selectedEmployeeNo=null;
              String selectedcertifierEmail=null;
              RowKeySet selectedCertifier = certifierNameDetailsTable.getSelectedRowKeys();
              Iterator selectedCertifierIter = selectedCertifier.iterator();
              DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
              DCIteratorBinding empIter = bindings.findIteratorBinding("CertifierNameVO1Iterator");
              RowSetIterator empRSIter=null;
              try{
                  empRSIter = empIter.getRowSetIterator();
              while(selectedCertifierIter.hasNext()){
                 Key key = (Key)((List)selectedCertifierIter.next()).get(0);
                 Row currentRow = empRSIter.getRow(key);
                 System.out.println(currentRow.getAttribute("Conname"));
                   selectedCertifierName=currentRow.getAttribute("Conname").toString();
                   System.out.println(currentRow.getAttribute("EmployeeNumber"));
                   selectedEmployeeNo=currentRow.getAttribute("EmployeeNumber").toString();
                   System.out.println(currentRow.getAttribute("EmailAddress"));
                  if(currentRow.getAttribute("EmailAddress") != null)
                   selectedcertifierEmail=currentRow.getAttribute("EmailAddress").toString();
               }
              }catch(Exception e)
              {e.printStackTrace();
               }
              finally{
                          if(empRSIter!=null) {
                              try {
                                  empRSIter.closeRowSetIterator();
                              } catch(Exception ex) {
                                  ex.printStackTrace();

                          }
                          }
                      }
              certNameIt.setValue(selectedCertifierName);
              employeeNoIt.setValue(selectedEmployeeNo);
              if(selectedcertifierEmail!=null){
                    certEmailIt.setValue(selectedcertifierEmail);
              }
              else
              {
                      certEmailIt.setValue("");
                  }
              certifierFlag=1;               // for validating while clicking submit
              System.out.println("Certifier flag is "+certifierFlag);
              AdfFacesContext.getCurrentInstance().getPageFlowScope().put("certifierFlagInScope", certifierFlag);
              System.out.println("AdfFacesContext.getCurrentInstance().getPageFlowScope() "+AdfFacesContext.getCurrentInstance().getPageFlowScope().get("certifierFlagInScope"));
              chosenCertifierName=selectedCertifierName;
              chosenEmployeeId=selectedEmployeeNo;
              System.out.println("Chosencertifiername is"+chosenCertifierName);
              System.out.println("chosenEmployeeId is"+chosenEmployeeId);

              AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
              popUpCertifier.hide();
              System.out.println("End selectcertifierName");
          }


    public void cancelAlternateApprover(ActionEvent actionEvent) {
       // Add event code here...
       System.out.println("Start: cancelAlternateApprover");
        alternateAppoverPopupIT.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(alternateAppoverPopupIT);
       p14.hide();

       System.out.println("End: cancelAlternateApprover");
    }
    public void selectAlternateApprover(ActionEvent actionEvent) {
              System.out.println("Start: selectAlternateApprover");
              String selectedAlternateApprover=null;
              RowKeySet selectedAltApprover = alternateApproverDetailsTable.getSelectedRowKeys();
              Iterator selectedAltApproverIter = selectedAltApprover.iterator();
              DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
              DCIteratorBinding empIter = bindings.findIteratorBinding("CertifierNameVO_ActiveOnlyRecords1Iterator");
              RowSetIterator empRSIter=null;
              try{
                  empRSIter = empIter.getRowSetIterator();
              while(selectedAltApproverIter.hasNext()){
                 Key key = (Key)((List)selectedAltApproverIter.next()).get(0);
                 Row currentRow = empRSIter.getRow(key);
                 System.out.println(currentRow.getAttribute("Conname"));
                   selectedAlternateApprover=currentRow.getAttribute("Conname").toString();

                    if(currentRow.getAttribute("EmployeeNumber")!=null){
                      String approverPersonID=currentRow.getAttribute("EmployeeNumber").toString();
                      System.out.println("approverPersonID get Value*****"+approverPersonID);
                      AdfFacesContext.getCurrentInstance().getPageFlowScope().put("approverID", approverPersonID);

                      alternateapprovNoIt.setValue(approverPersonID);

                  }
              }
              }catch(Exception e)
              {
                  e.printStackTrace();
                  }
              finally{
                          if(empRSIter!=null) {
                              try {
                                  empRSIter.closeRowSetIterator();
                              } catch(Exception ex) {
                                  ex.printStackTrace();

                          }
                          }
                      }
              alternateApproverIt.setValue(selectedAlternateApprover);


              System.out.println("on alternate approver select click alternateapprovNoIt "+alternateapprovNoIt.getValue());
              AdfFacesContext.getCurrentInstance().addPartialTarget(alternateapprovNoIt);

              AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
              alternateAppoverPopupIT.setValue("");


              AdfFacesContext.getCurrentInstance().addPartialTarget(alternateAppoverPopupIT);
              p14.hide();
              System.out.println("End selectAlternateApprover");
          }



    public void searchAltApprover(ActionEvent actionEvent) {
        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")== null ||
                              (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("true") )  ){
                           AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox", "false");
                              }
        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")== null ||
                  (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox").toString().equals("true") )  ){
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_payment_checkbox", "false");
                  }

        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")== null ||
                   (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("true") )  ){
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode", "false");
                   }

        if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")== null ||
                  (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo").toString().equals("true") )  ){
               AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_paymentAllocNo", "false");
                  }

            System.out.println("Start searchAltApprover");

                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                p14.show(hints);

            System.out.println("End searchAltApprover");


    }



     public void searchAltApprover_old(ActionEvent actionEvent) {
         if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")== null ||
                               (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_checkbox").toString().equals("true") )  ){
                            AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_checkbox", "false");
                               }
         if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")== null ||
                   (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_payment_checkbox").toString().equals("true") )  ){
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_payment_checkbox", "false");
                   }

         if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")== null ||
                    (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_glcode").toString().equals("true") )  ){
                 AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_glcode", "false");
                    }

         if(AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")== null ||
                   (AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo")!=null && AdfFacesContext.getCurrentInstance().getPageFlowScope().get("update_paymentAllocNo").toString().equals("true") )  ){
                AdfFacesContext.getCurrentInstance().getPageFlowScope().put("update_paymentAllocNo", "false");
                   }

             System.out.println("Start searchAltApprover");
             try {
                 RichPopup.PopupHints hints = new RichPopup.PopupHints();
                 p14.show(hints);
                 String enteredAlternateApprover = null;
                 if(alternateApproverIt.getValue() != null) {
                                 enteredAlternateApprover = alternateApproverIt.getValue().toString();
                                 System.out.println("alternateApproverIt.getValue(): "+enteredAlternateApprover);
                 }

                 FacesContext context = FacesContext.getCurrentInstance();
                 String ctx = (String)context.getApplication().evaluateExpressionGet(context,"#{pageFlowScope.bpmWorklistContext}",String.class);

                 String employeeID = ADFContext.getCurrent().getPageFlowScope().get("userId").toString();


                 System.out.println("----- BPM User ID : "+employeeID);

                 DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                 DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO_ActiveOnlyRecords1Iterator");
                 ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                 ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");
                 certifierNameVO.applyViewCriteria(vc);
                 // certifierNameVO.clearCache();
                 certifierNameVO.setNamedWhereClauseParam("bindName", enteredAlternateApprover);
                     certifierNameVO.setNamedWhereClauseParam("bvEmployeeID", employeeID);
                 certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                 System.out.println("-----------Dynamic Query-----------");
//                 System.out.println(certifierNameVO.getQuery());
                 certifierNameVO.executeQuery();
                 String alterNameApproverNumber=null;
                 if(certifierNameVO.getEstimatedRowCount()>0){
                     while (certifierNameVO.hasNext()) {
                       Row row = certifierNameVO.next(); // Get the next row in the result set.
                       if(null != row.getAttribute("EmployeeNumber"))
                       {
                       alterNameApproverNumber = row.getAttribute("EmployeeNumber").toString();
                       System.out.println("alterNameApproverNumber"+alterNameApproverNumber);
                       ADFContext.getCurrent().getViewScope().put("alterNameApproverNumber", alterNameApproverNumber);
                       }
                     }
                 }
                 AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverDetailsTable);

                // }


             }
             catch(Exception e) {
                 e.printStackTrace();
             }
             System.out.println("End searchAltApprover");


     }

    public void onAlternateApproverPopUpGoClick(ActionEvent actionEvent) {
           System.out.println("Start onAlternateApproverCerNamePopUpGoClick");
           String enteredAlternateApprover = null;
           try {
               System.out.println("Operating Unit : "+operatingUnitIt.getValue().toString());
               if(alternateAppoverPopupIT.getValue() != null) {
                               enteredAlternateApprover = alternateAppoverPopupIT.getValue().toString();
                               System.out.println("certifierNamePopupIT.getValue(): "+enteredAlternateApprover);
               }
               String operatingUnit=operatingUnitIt.getValue().toString()!=null ? operatingUnitIt.getValue().toString():null;
                               DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                               DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO_ActiveOnlyRecords1Iterator");
                               ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                               ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");
                               certifierNameVO.applyViewCriteria(vc);
                             // certifierNameVO.clearCache();
                               certifierNameVO.setNamedWhereClauseParam("bindName", enteredAlternateApprover);
                               certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
               // 02-11-2022 Change Alternate approver for Jetstar adding Operating Unit in here clause
               if (getUrlOrg().equalsIgnoreCase("JS")){
                               certifierNameVO.setNamedWhereClauseParam("bindOperatingUnit", operatingUnit);
               }
//                               System.out.println("-----------Dynamic Query-----------");
//                               System.out.println(certifierNameVO.getQuery());
                               certifierNameVO.executeQuery();
                               AdfFacesContext.getCurrentInstance().addPartialTarget(alternateApproverDetailsTable);

              // }
           }
           catch(Exception e) {
               e.printStackTrace();
           }
           System.out.println("End onAlternateApproverCerNamePopUpGoClick");
       }




    public void onCertifierApproveComments(ActionEvent actionEvent) {

        System.out.println("Start onCertifierApproveComments");
         String commentsVal = null;
         try {
             if(certifierApproveComments.getValue() != null)
                 commentsVal = certifierApproveComments.getValue().toString();
             System.out.println("commentsVal: "+commentsVal);
             RichPopup.PopupHints hints = new RichPopup.PopupHints();
             certifierApprovePopupIt.setValue(commentsVal);
             AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApprovePopupIt);
             certifierApprovePopup.show(hints);
         }
         catch(Exception e) {
             e.printStackTrace();
         }
         System.out.println("End onCertifierApproveComments");

    }

    //923018 Start UI Change for New Field
    public void onElectRemittence(ActionEvent actionEvent) {

        System.out.println("Start onElectRemittence");
         String commentsVal = null;
         try {
             if(electRemittence.getValue() != null)
                 commentsVal = electRemittence.getValue().toString();
             System.out.println("commentsVal: "+commentsVal);
             RichPopup.PopupHints hints = new RichPopup.PopupHints();
             electRemittencePopUpIt.setValue(commentsVal);
             AdfFacesContext.getCurrentInstance().addPartialTarget(electRemittencePopUpIt);
             electRemittencePopup.show(hints);
         }
         catch(Exception e) {
             e.printStackTrace();
         }
         System.out.println("End onElectRemittence");

    }

    public void onElectRemittencePopupOKClick(ActionEvent actionEvent) {
        System.out.println("Start onElectRemittencePopupOKClick");
        String commentsVal = null;
        try {
            if(electRemittencePopUpIt.getValue() != null)
                commentsVal = electRemittencePopUpIt.getValue().toString();
            System.out.println("electRemittencePopUpIt: "+electRemittencePopUpIt);
            electRemittence.setValue(commentsVal);
            electRemittencePopup.hide();
            AdfFacesContext.getCurrentInstance().addPartialTarget(electRemittence);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onElectRemittencePopupOKClick");
    }
    //923018 End UI Change for New Field
    public void onCertNameClick(ActionEvent actionEvent) {
           System.out.println("Start onCertNameClick");
           try {

               RichPopup.PopupHints hints = new RichPopup.PopupHints();
               popUpCertifier.show(hints);
               String enteredCertifierName = null;
               if(certNameIt.getValue() != null) {
                               enteredCertifierName = certNameIt.getValue().toString();
                               System.out.println("certNameIt.getValue(): "+enteredCertifierName);
               }
                               DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                               DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CertifierNameVO1Iterator");
                               ViewObjectImpl certifierNameVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                               ViewCriteria vc = certifierNameVO.getViewCriteria("CertifierNameVOCriteria");
                               certifierNameVO.applyViewCriteria(vc);
                              certifierNameVO.clearCache();
                                          if (certNameIt.getValue() != null) {
                                              enteredCertifierName = certNameIt.getValue().toString();
                                              System.out.println("Value Count : " + enteredCertifierName.length());
                                              System.out.println("certNameIt.getValue(): " + enteredCertifierName);

                                          }
                                          certifierNameVO.setNamedWhereClauseParam("bindName", enteredCertifierName);
                                          certifierNameVO.setNamedWhereClauseParam("bvEmpNumber", null);
                                          certifierNameVO.setNamedWhereClauseParam("bvPreferredName", null);
                                          certifierNameVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//               System.out.println("-----------Dynamic Query-----------");
//                               System.out.println(certifierNameVO.getQuery());
                               certifierNameVO.executeQuery();
                               AdfFacesContext.getCurrentInstance().addPartialTarget(certifierNameDetailsTable);

               //}



           }
           catch(Exception e) {
               e.printStackTrace();
           }
           System.out.println("End onCertNameClick");
       }

    public void openGLCodePopup(ActionEvent actionEvent) {

        System.out.println("Start openGLCodePopup");
        try {
                    System.out.println("Start openExpenditureOrgPopup");
                    String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
                    System.out.println(" ----- clientID : "+clientId);
                    this.clientID.setValue(clientId);
                    String selectedCode = null;
                    RowKeySet selectedGLcode = t1.getSelectedRowKeys();
                    Iterator selectedGlCodeIter = selectedGLcode.iterator();
                    DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                    RowSetIterator empRSIter=null;
            try{
                        empRSIter = lineItemIter.getRowSetIterator();
                    while(selectedGlCodeIter.hasNext()){
                       Key key = (Key)((List)selectedGlCodeIter.next()).get(0);
                       Row currentRow = empRSIter.getRow(key);
                       System.out.println(currentRow.getAttribute("GlNo"));
                       selectedCode = currentRow.getAttribute("GlNo")!=null ? currentRow.getAttribute("GlNo").toString() : null;
            }
            }catch(Exception e)
            {
                e.printStackTrace();
                }
            finally{
                        if(empRSIter!=null) {
                            try {
                                empRSIter.closeRowSetIterator();
                            } catch(Exception ex) {
                                ex.printStackTrace();

                        }
                        }
                    }
                    System.out.println("Selected GL code ::: "+ selectedCode);
                    String[] temp;
                    String delimeter = "\\.";
                    String companyName = null;
                    String costCentre = null;
                    String account = null;
                    String analysisCode = null;
                    String counterParty = null;


              if(selectedCode != null){
               String selectedGlCodeWithDot=selectedCode+".";
               System.out.println("SelectedGLCode "+selectedGlCodeWithDot);
                    char[] selectedGlCodeChar=selectedGlCodeWithDot.toCharArray();
                           int startPosition=0;
                           int endPosition=0;
                           char[][] selectedGlCodeCharArray=new char[5][15];
                           int i=0;
                           int position=0;
                    for(char glCodes:selectedGlCodeChar)
                           {
                            System.out.println("glCodes "+glCodes);
                         //   String value=Character.toString(glCodes);

                            if(glCodes=='.')
                            {
                                endPosition=position;
                               selectedGlCodeWithDot.getChars(startPosition, endPosition, selectedGlCodeCharArray[i], 0);
                               position++;
                               startPosition=position;
                               i++;
                                if(i>4)
                                 break;
                            }
                            else
                            {
                                position++;
                            }

                           }
                    for(int j=0;j<i;j++)
                           {
                                System.out.println("----"+j+"----");
                               for(char w:selectedGlCodeCharArray[j]){
                               if(w!=0)
                               {
                                 System.out.println(""+w);
                               }


                               }
                           }
                     companyName=String.valueOf(selectedGlCodeCharArray[0]);
                     costCentre=String.valueOf(selectedGlCodeCharArray[1]);
                     account=String.valueOf(selectedGlCodeCharArray[2]);
                     analysisCode=String.valueOf(selectedGlCodeCharArray[3]);
                     counterParty=String.valueOf(selectedGlCodeCharArray[4]);

                     System.out.println("companyName="+companyName.trim()+".");
                     System.out.println("costCentre="+costCentre.trim()+".");
                    System.out.println("account="+account.trim()+".");
                    System.out.println("analysisCode="+analysisCode.trim()+".");
                     System.out.println("counterParty="+counterParty.trim()+".");

                    companyNameIt.setValue(companyName.trim());
                    costCentreIT.setValue(costCentre.trim());
                    accountNameIt.setValue(account.trim());
                    analysisCodeIt.setValue(analysisCode.trim());
                    counterPartyIt.setValue(counterParty.trim());

                    System.out.println("company name in first popup :::"+ companyName);
                    System.out.println("company desc in first popup :::"+ executeGLCodeCompanyVO(companyName.trim(), null, true));
                    System.out.println("cost center name in first popup :::"+ companyName);
                    System.out.println("Cost Center desc in first popup :::"+ executeGLCodeCostCentreVO(costCentre.trim(), null, true));

                    companyNameOt.setValue(executeGLCodeCompanyVO(companyName.trim(), null, true));
                    costCentreOt.setValue(executeGLCodeCostCentreVO(costCentre.trim(), null, true));
                    accountNameOt.setValue(executeGLCodeAccountVO(account.trim(), null, true));
                    analysisCodeOt.setValue(executeGLCodeAnalysisVO(analysisCode.trim(), null, true));
                    counterPartyOt.setValue(executeGLCodeCounterPartyVO(counterParty.trim(), null, true));
                }
                else{
                    companyNameIt.setValue("");
                    costCentreIT.setValue("");
                    accountNameIt.setValue("");
                    analysisCodeIt.setValue("");
                    counterPartyIt.setValue("");

                    System.out.println("company name in first popup :::"+ companyName);
                    System.out.println("company desc in first popup :::"+ executeGLCodeCompanyVO(companyName, null, true));
                    System.out.println("cost center name in first popup :::"+ companyName);
                    System.out.println("Cost Center desc in first popup :::"+ executeGLCodeCostCentreVO(costCentre, null, true));

                    companyNameOt.setValue(executeGLCodeCompanyVO(companyName, null, true));
                    costCentreOt.setValue(executeGLCodeCostCentreVO(costCentre, null, true));
                    accountNameOt.setValue(executeGLCodeAccountVO(account, null, true));
                    analysisCodeOt.setValue(executeGLCodeAnalysisVO(analysisCode, null, true));
                    counterPartyOt.setValue(executeGLCodeCounterPartyVO(counterParty, null, true));
                }


                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    glcode_popup.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodePopup");
    }

    public String executeGLCodeCompanyVO(String company, String searchType, boolean isLineGlCode) {
                            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                            ViewObjectImpl companyPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                            ViewCriteria vc = null;
                            String companyDesc = null;
                            if(searchType != null && searchType.equals("CompanyDescription")){
                                vc = companyPopupVO.getViewCriteria("CompanyDescVOCriteria");
                                companyPopupVO.applyViewCriteria(vc);
                                companyPopupVO.setNamedWhereClauseParam("bindCompanyDesc", company);
                            }
                            else{
                                vc = companyPopupVO.getViewCriteria("CompanyVOCriteria");
                                companyPopupVO.applyViewCriteria(vc);
                                companyPopupVO.setNamedWhereClauseParam("bindCompanyName", company);
                            }
//                            System.out.println("-----------Dynamic Query-----------");
//                            System.out.println(companyPopupVO.getQuery());
                            companyPopupVO.executeQuery();
                            if(isLineGlCode && companyPopupVO.getEstimatedRowCount()==1){
                                while (companyPopupVO.hasNext()) {
                                  Row row = companyPopupVO.next(); // Get the next row in the result set.
                                  if(null != row.getAttribute("CompanyDescription"))
                                  companyDesc = row.getAttribute("CompanyDescription").toString();
                                }
                            }
                            //AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                            return companyDesc;

    }


    public String executeGLCodeCostCentreVO(String costCentreName, String searchType, boolean isLineGlCode) {

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CostCentreVO1Iterator");
                ViewObjectImpl costCentreVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = null;
                String costCentreDesc = null;
                if(searchType != null && searchType.equals("Description")){
                    vc = costCentreVO.getViewCriteria("CostCentreDescVOCriteria");
                    costCentreVO.applyViewCriteria(vc);
                    costCentreVO.setNamedWhereClauseParam("bindCostCenterDesc", costCentreName);
                }
                else{
                    vc = costCentreVO.getViewCriteria("CostCentreVOCriteria");
                    costCentreVO.applyViewCriteria(vc);
                    costCentreVO.setNamedWhereClauseParam("bindCostCentre", costCentreName);
                }

//                System.out.println("-----------Dynamic Query-----------");
//        System.out.println(costCentreVO.getQuery());
                costCentreVO.executeQuery();

                if(isLineGlCode && costCentreVO.getEstimatedRowCount()==1){
                    while (costCentreVO.hasNext()) {
                      Row row = costCentreVO.next(); // Get the next row in the result set.
                      if(null != row.getAttribute("Description"))
                      costCentreDesc = row.getAttribute("Description").toString();
                    }
                }
                //AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                return costCentreDesc;

    }
    public String executeGLCodeAccountVO(String accountName, String searchType, boolean isLineGlCode) {
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AccountVO1Iterator");
                ViewObjectImpl accountPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = null;
                String accountDesc = null;
                if(searchType != null && searchType.equals("AccountDescription")){
                    vc = accountPopupVO.getViewCriteria("AccountDescVOCriteria");
                    accountPopupVO.applyViewCriteria(vc);
                    accountPopupVO.setNamedWhereClauseParam("bindAccountDesc", accountName);
                }
                else{
                    vc = accountPopupVO.getViewCriteria("AccountVOCriteria");
                    accountPopupVO.applyViewCriteria(vc);
                    accountPopupVO.setNamedWhereClauseParam("bindAccountName", accountName);
                }

//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(accountPopupVO.getQuery());
                accountPopupVO.executeQuery();

                if(isLineGlCode && accountPopupVO.getEstimatedRowCount()==1){
                    while (accountPopupVO.hasNext()) {
                      Row row = accountPopupVO.next(); // Get the next row in the result set.
                      if(null != row.getAttribute("AccountDescription"))
                      accountDesc = row.getAttribute("AccountDescription").toString();
                    }
                }
                //AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                return accountDesc;

    }
    public String executeGLCodeAnalysisVO(String analysisCode, String searchType, boolean isLineGlCode) {
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AnalysisCodeVO1Iterator");
                ViewObjectImpl analysisCodePopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = null;
                String analysisCodeDesc = null;
                if(searchType != null && searchType.equals("Description")){
                    vc = analysisCodePopupVO.getViewCriteria("AnalysisCodeDescVOCriteria");
                    analysisCodePopupVO.applyViewCriteria(vc);
                    analysisCodePopupVO.setNamedWhereClauseParam("bindAnalysiscodeDesc", analysisCode);
                }
                else{
                    vc = analysisCodePopupVO.getViewCriteria("AnalysisCodeVOCriteria");
                    analysisCodePopupVO.applyViewCriteria(vc);
                    analysisCodePopupVO.setNamedWhereClauseParam("bindAnalysisCode", analysisCode);
                }

//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(analysisCodePopupVO.getQuery());
                analysisCodePopupVO.executeQuery();

                if(isLineGlCode && analysisCodePopupVO.getEstimatedRowCount()==1){
                    while (analysisCodePopupVO.hasNext()) {
                      Row row = analysisCodePopupVO.next(); // Get the next row in the result set.
                      if(null != row.getAttribute("Description"))
                      analysisCodeDesc = row.getAttribute("Description").toString();
                    }
                }
                //AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                return analysisCodeDesc;

    }
    public String executeGLCodeCounterPartyVO(String companyName, String searchType, boolean isLineGlCode) {
                            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                            ViewObjectImpl companyPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                            ViewCriteria vc = null;
                            String companyDesc = null;
                            if(searchType != null && searchType.equals("CompanyDescription")){
                                vc = companyPopupVO.getViewCriteria("CompanyDescVOCriteria"); //CompanyVOCriteria
                                companyPopupVO.applyViewCriteria(vc);
                                companyPopupVO.setNamedWhereClauseParam("bindCompanyDesc", companyName); //bindCompanyName
                            }
                            else{
                                vc = companyPopupVO.getViewCriteria("CounterPartyVOCriteria"); //CompanyVOCriteria
                                companyPopupVO.applyViewCriteria(vc);
                                companyPopupVO.setNamedWhereClauseParam("bindCounterParty", companyName); //bindCompanyName
                            }

//                            System.out.println("-----------Dynamic Query-----------");
//                            System.out.println(companyPopupVO.getQuery());
                            companyPopupVO.executeQuery();

                            if(isLineGlCode && companyPopupVO.getEstimatedRowCount()==1){
                                while (companyPopupVO.hasNext()) {
                                  Row row = companyPopupVO.next(); // Get the next row in the result set.
                                  if(null != row.getAttribute("CompanyDescription"))
                                  companyDesc = row.getAttribute("CompanyDescription").toString();
                                }
                            }
                            //AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                            return companyDesc;

    }
    /*  public String executeGLCodeCompanyVO(String companyName, boolean isLineGlCode) {
                            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                            ViewObjectImpl companyPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                            ViewCriteria vc = companyPopupVO.getViewCriteria("CompanyVOCriteria");
                            companyPopupVO.applyViewCriteria(vc);
                            companyPopupVO.setNamedWhereClauseParam("bindCompanyName", companyName);
                            System.out.println("-----------Dynamic Query-----------");
                            //System.out.println(companyPopupVO.getQuery());
                            companyPopupVO.executeQuery();
                            String companyDesc = null;
                            if(isLineGlCode && companyPopupVO.getEstimatedRowCount()==1){
                                while (companyPopupVO.hasNext()) {
                                  Row row = companyPopupVO.next(); // Get the next row in the result set.
                                  if(null != row.getAttribute("CompanyDescription"))
                                  companyDesc = row.getAttribute("CompanyDescription").toString();
                                }
                            }
                            //AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                            return companyDesc;

    }*/

    public void cancelGLCodePopup(ActionEvent actionEvent) {
    // Add event code here...
    System.out.println("Start: cancelGLCodePopup");
        companyNameIt.setValue("");
        costCentreIT.setValue("");
        accountNameIt.setValue("");
        analysisCodeIt.setValue("");
        counterPartyIt.setValue("");

        AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
         glcode_popup.hide();

    System.out.println("End: cancelGLCodePopup");
    }

    public void cancelCompanyGLCode(ActionEvent actionEvent) {
           // Add event code here...
           System.out.println("Start: cancelCompanyGLCode");
           companyNamePopupIt.setValue("");
           AdfFacesContext.getCurrentInstance().addPartialTarget(companyNamePopupIt);
           p3.hide();

           System.out.println("End: cancelCompanyGLCode");
       }
    public void cancelAccountGLCode(ActionEvent actionEvent) {
           // Add event code here...
           System.out.println("Start: cancelAccountGLCode");
           accountNamePopupIt.setValue("");
           AdfFacesContext.getCurrentInstance().addPartialTarget(accountNamePopupIt);
           p11.hide();

           System.out.println("End: cancelAccountGLCode");
       }


    public void onProNoPopUpGoClick(ActionEvent actionEvent) {
        System.out.println("Start onProNoPopUpGoClick");
        String enteredProjNo = null;

        try {
            if(projNoPopupIt.getValue() != null) {
                enteredProjNo = projNoPopupIt.getValue().toString();
                System.out.println("projNo.getValue(): "+enteredProjNo);
            }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ProjectNumberVO1Iterator");
                ViewObjectImpl projectNumberVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = projectNumberVO.getViewCriteria("ProjectNumberVOCriteria");
                projectNumberVO.applyViewCriteria(vc);
                projectNumberVO.setNamedWhereClauseParam("bindProjectNo", enteredProjNo);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(projectNumberVO.getQuery());
                projectNumberVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(projDtlTable);
            //}
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onProNoPopUpGoClick");
    }

    public void selectProjectNoPopUP(ActionEvent actionEvent) {
        //TO KD
        System.out.println("Start: selectProjectNoPopUP");



        String selectedProjectNo="";
        String selectedProjectId="";

        RowKeySet selectedProjectNum = projDtlTable.getSelectedRowKeys();
        Iterator selectedProjectIter = selectedProjectNum.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("ProjectNumberVO1Iterator");
        RowSetIterator empRSIter=null;
        try{
            empRSIter = empIter.getRowSetIterator();
        while(selectedProjectIter.hasNext()){
           Key key = (Key)((List)selectedProjectIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println(currentRow.getAttribute("ProjectNumber"));
             selectedProjectNo=currentRow.getAttribute("ProjectNumber").toString();
             System.out.println(currentRow.getAttribute("ProjectId"));
               selectedProjectId=currentRow.getAttribute("ProjectId").toString();

         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
            //poNumPopupIt.setValue(selectedPONumber);
            System.out.println("selected project number :::" +selectedProjectId);
            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }


             if(selectedRowNum!=-1) {


                 String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it73::content";
                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedProjectNo);

                 String componentIDProjectNo = "pt1:t1:"+selectedRowNum+":it88::content";
                 System.out.println("----- componentIDProjectNo ----- "+componentIDProjectNo+", selectedProjectId : "+selectedProjectId);

                 FacesContext fctx = FacesContext.getCurrentInstance();
                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                 String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedProjectNo+"'";
                 String myJavaScriptCode1 = "document.getElementById('"+componentIDProjectNo+"').value = '"+selectedProjectId+"'";

                 String myJavaScriptCode2 = "document.getElementById('"+componentIDPoNumber+"').blur()";
                 String myJavaScriptCode3 = "document.getElementById('"+componentIDProjectNo+"').blur()";
                 String myJavaScriptCode4 = "document.getElementById('"+componentIDProjectNo+"').blur()";
                 String myJavaScriptCode5 = "document.getElementById('pt1:hiddenButtonID').click()";
                 System.out.println("On hiddenButtonID button manual click");

                 erks.addScript(fctx, myJavaScriptCode );
                 erks.addScript(fctx, myJavaScriptCode1 );
                 erks.addScript(fctx, myJavaScriptCode2 );
                 erks.addScript(fctx, myJavaScriptCode3 );
                 erks.addScript(fctx, myJavaScriptCode4 );
                 erks.addScript(fctx, myJavaScriptCode5 );
             }

        //AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
        projNoPopupIt.setValue("");









            //expTypeIt.setDisabled(false);
            AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
            System.out.println("table refreshed********************");

        AdfFacesContext.getCurrentInstance().addPartialTarget(projNoPopupIt);
        projectNo_pop.hide();

       /* DCBindingContainer bindings1 = getBinding();
        DCIteratorBinding lineItemIter = bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject empVO = lineItemIter.getViewObject();
        Row selectedRow=empVO.getCurrentRow();

        selectedRow.setAttribute("Attr4", selectedProjectId);

        System.out.println("Line No ::" +selectedRow.getAttribute("LineNumber")+":: attr4 :: "+selectedRow.getAttribute("Attr4"));
        */
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("currentProjectId",selectedProjectId );

        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

        System.out.println("End selectProjectNoPopUP");
    }

    public void selectAccountGLCode(ActionEvent actionEvent) {
          System.out.println("Start: selectAccountGLCode");
          String selectedAccount=null;
          String selectedAccountDescription = null;
       //   String selectedEmployeeNo=null;
        //  String selectedcertifierEmail=null;
          RowKeySet selectedAccountName = accountDetailsTable.getSelectedRowKeys();
          Iterator selectedCertifierIter = selectedAccountName.iterator();
          DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding accIter = bindings.findIteratorBinding("AccountVO1Iterator");
          RowSetIterator accRSIter=null;
          try{
              accRSIter = accIter.getRowSetIterator();
          while(selectedCertifierIter.hasNext()){
             Key key = (Key)((List)selectedCertifierIter.next()).get(0);
             Row currentRow = accRSIter.getRow(key);
               if(currentRow.getAttribute("Account") != null)
               {
             System.out.println(currentRow.getAttribute("Account"));
               selectedAccount=currentRow.getAttribute("Account").toString();
               accountNameIt.setValue(selectedAccount);
               }
              else
               {
                     accountNameIt.setValue("");
                   }
               if(currentRow.getAttribute("AccountDescription") != null){
                                  selectedAccountDescription=currentRow.getAttribute("AccountDescription").toString();
                                  System.out.println("company desc in inner popup ::: "+ selectedAccountDescription);
                                  accountNameOt.setValue(selectedAccountDescription);
                              }else{
                                  accountNameOt.setValue("");
                              }

           }
          }catch(Exception e)
          {
              e.printStackTrace();
              }
          finally{
                      if(accRSIter!=null) {
                          try {
                              accRSIter.closeRowSetIterator();
                          } catch(Exception ex) {
                              ex.printStackTrace();

                      }
                      }
                  }

          AdfFacesContext.getCurrentInstance().addPartialTarget(accountNameIt);
          AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
          accountNamePopupIt.setValue("");
          AdfFacesContext.getCurrentInstance().addPartialTarget(accountNamePopupIt);
          p11.hide();
          System.out.println("End selectAccountGLCode");
      }

    public void selectCompanyGLCode(ActionEvent actionEvent) {
          System.out.println("Start: selectCompanyGLCode");
          String selectedCompany=null;
          String selectedCompanyDesc = null;
          RowKeySet selectedCompanyName = companyDetailsTable.getSelectedRowKeys();
          Iterator selectedCompanyIter = selectedCompanyName.iterator();
          DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding comIter = bindings.findIteratorBinding("CompanyCounterPartyVO1Iterator");
          RowSetIterator comRSIter=null;
          try{
              comRSIter = comIter.getRowSetIterator();
          while(selectedCompanyIter.hasNext()){
             Key key = (Key)((List)selectedCompanyIter.next()).get(0);
             Row currentRow = comRSIter.getRow(key);
              if(currentRow.getAttribute("Company") != null){
             System.out.println(currentRow.getAttribute("Company"));
               selectedCompany=currentRow.getAttribute("Company").toString();
               companyNameIt.setValue(selectedCompany);
              }
              else{
                   companyNameIt.setValue("");
                  }
               if(currentRow.getAttribute("CompanyDescription") != null){
                   selectedCompanyDesc=currentRow.getAttribute("CompanyDescription").toString();
                   System.out.println("company desc in inner popup ::: "+ selectedCompanyDesc);
                   companyNameOt.setValue(selectedCompanyDesc);
               }else{
                   companyNameOt.setValue("");
               }
           }
          }catch(Exception e)
          {e.printStackTrace();
           }
          finally{
                      if(comRSIter!=null) {
                          try {
                              comRSIter.closeRowSetIterator();
                          } catch(Exception ex) {
                              ex.printStackTrace();

                      }
                      }
                  }
          System.out.println("company desc set in output text ::: "+ companyNameOt.getValue());
          AdfFacesContext.getCurrentInstance().addPartialTarget(companyNameIt);
          AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
          companyNamePopupIt.setValue("");
          AdfFacesContext.getCurrentInstance().addPartialTarget(companyNamePopupIt);
          p3.hide();
          System.out.println("End selectCompanyGLCode");
      }
    public void cancelCostCentreGLCode(ActionEvent actionEvent) {
           // Add event code here...
           System.out.println("Start: cancelCostCentreGLCode");
           costCentrePopupIt.setValue("");
           AdfFacesContext.getCurrentInstance().addPartialTarget(costCentrePopupIt);
           p10.hide();

           System.out.println("End: cancelCostCentreGLCode");
       }
    public void selectCostCentreGLCode(ActionEvent actionEvent) {
          System.out.println("Start: selectCostCentreGLCode");
          String selectedCostCentre=null;
          String costCenterDesc = null;
       //   String selectedEmployeeNo=null;
        //  String selectedcertifierEmail=null;
          RowKeySet selectedCostCentreName = costCentreDetailsTable.getSelectedRowKeys();
          Iterator selectedCostCentreIter = selectedCostCentreName.iterator();
          DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding costCentreIter = bindings.findIteratorBinding("CostCentreVO1Iterator");
          RowSetIterator costCentreRSIter=null;
          try{
              costCentreRSIter = costCentreIter.getRowSetIterator();
          while(selectedCostCentreIter.hasNext()){
             Key key = (Key)((List)selectedCostCentreIter.next()).get(0);
             Row currentRow = costCentreRSIter.getRow(key);
               if(currentRow.getAttribute("Costcentre") != null)
               {
             System.out.println(currentRow.getAttribute("Costcentre"));
               selectedCostCentre=currentRow.getAttribute("Costcentre").toString();
                   costCentreIT.setValue(selectedCostCentre);
               }
              else
               {
                   costCentreIT.setValue("");
                   }
               if(currentRow.getAttribute("Description") != null){
                                  costCenterDesc=currentRow.getAttribute("Description").toString();
                                  System.out.println("company desc in inner popup ::: "+ costCenterDesc);
                                  costCentreOt.setValue(costCenterDesc);
                              }else{
                                  costCentreOt.setValue("");
                              }

           }
          }catch(Exception e)
          {
              e.printStackTrace();
              }
          finally{
                      if(costCentreRSIter!=null) {
                          try {
                              costCentreRSIter.closeRowSetIterator();
                          } catch(Exception ex) {
                              ex.printStackTrace();

                      }
                      }
                  }
          System.out.println("cost center desc set in output text ::: "+ costCentreOt.getValue());
          AdfFacesContext.getCurrentInstance().addPartialTarget(costCentreIT);
          AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
          costCentrePopupIt.setValue("");
          AdfFacesContext.getCurrentInstance().addPartialTarget(costCentrePopupIt);
          p10.hide();
          System.out.println("End selectCostCentreGLCode");
      }


    public void selectGLCodePopUP(ActionEvent actionEvent) {
        //TO KD
        System.out.println("Start: selectGLCodePopUP");
        String selectedGLCode=null;
        String companyName=null;
        String costCentre=null;
        String analysisCode=null;
        String accountName=null;
        String counterParty=null;
        String orgId=null;
        String glCodeError=null;
        System.out.println("companyNameIt: "+companyNameIt.getValue()+".");
        if(companyNameIt.getValue()!=null)
        {
            companyName=companyNameIt.getValue().toString();
                System.out.println("companyName: "+companyName);
            }
        System.out.println("costCentreIT: "+costCentreIT.getValue()+".");
        if(costCentreIT.getValue()!=null)
        {
            costCentre=costCentreIT.getValue().toString();
                System.out.println("costCentre: "+costCentre);
            }
        System.out.println("analysisCodeIt: "+analysisCodeIt.getValue()+".");
        if(analysisCodeIt.getValue()!=null)
        {
            analysisCode=analysisCodeIt.getValue().toString();
                System.out.println("analysisCode: "+analysisCode);
            }
        System.out.println("accountNameIt: "+accountNameIt.getValue()+".");
        if(accountNameIt.getValue()!=null)
        {
            accountName=accountNameIt.getValue().toString();
                System.out.println("accountName: "+accountName);
            }
        System.out.println("counterPartyIt: "+counterPartyIt.getValue()+".");
        if(counterPartyIt.getValue()!=null)
        {
            counterParty=counterPartyIt.getValue().toString();
                System.out.println("counterParty: "+counterParty);
            }

       System.out.println("Org Id:"+orgIdIt.getValue()+".");
           if(orgIdIt.getValue()!=null)
           {
               orgId=orgIdIt.getValue().toString();
                   System.out.println("orgIdIt: "+orgId);
               }

           if(orgIdIt.getValue()==null) {

              orgId =  getOrgIdFinal();
              orgIdIt.setValue(orgId);
               //Added on 24th JAn
               AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
            System.out.println("selectGLCodePopUP orgIdIt-------------"+orgId);
           }


        if(companyName!=null && costCentre!=null && analysisCode!=null && accountName!=null && counterParty!=null
           && companyName!="" && costCentre!="" && analysisCode!="" && accountName!="" && counterParty!=""
           && companyName.trim()!=null && costCentre.trim()!=null && analysisCode.trim()!=null && accountName.trim()!=null && counterParty.trim()!=null
           && !companyName.trim().isEmpty() && !costCentre.trim().isEmpty() && !analysisCode.trim().isEmpty() && !accountName.trim().isEmpty() && !counterParty.trim().isEmpty())
        {
                System.out.println("----------------If Not Empty--------------");
                //selectedGLCode=companyNameIt.getValue().toString()+"."+costCentreIT.getValue().toString()+"."+accountNameIt.getValue().toString()+"."+analysisCodeIt.getValue().toString()+"."+counterPartyIt.getValue().toString();

                //checking whether the data exixts or not
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                ViewObjectImpl companySelectVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = companySelectVO.getViewCriteria("CompanyVOCriteria1");
                companySelectVO.applyViewCriteria(vc);
                companySelectVO.setNamedWhereClauseParam("bindCompanyName", companyName);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(companySelectVO.getQuery());
                companySelectVO.executeQuery();

                if(companySelectVO.getEstimatedRowCount()==0){

                    System.out.println("Invalid Company name");
                    String vallMsg="Please Choose a valid Company Name";
                    this.validationErrorMessage.setValue(vallMsg);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    validationErrorPopup.show(hints);
                }
                else
                {
                        DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                        DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("CostCentreVO1Iterator");
                        ViewObjectImpl costCentreSelectVO = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                        ViewCriteria vc1 = costCentreSelectVO.getViewCriteria("CostCentreVOCriteria1");
                        costCentreSelectVO.applyViewCriteria(vc1);
                        costCentreSelectVO.setNamedWhereClauseParam("bindCostCentre", costCentre);
//                        System.out.println("-----------Dynamic Query-----------");
//                        System.out.println(costCentreSelectVO.getQuery());
                        costCentreSelectVO.executeQuery();
                        if(costCentreSelectVO.getEstimatedRowCount()==0){

                            System.out.println("Invalid CostCentre name");
                            String vallMsg="Please Choose a valid Cost Centre Code";
                            this.validationErrorMessage.setValue(vallMsg);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                            RichPopup.PopupHints hints = new RichPopup.PopupHints();
                            validationErrorPopup.show(hints);
                        }
                    else
                        {
                                DCBindingContainer dcBindingContainer2 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                DCIteratorBinding dcIteratorBinding2 = dcBindingContainer2.findIteratorBinding("AccountVO1Iterator");
                                ViewObjectImpl accountCodeSelectVO = (ViewObjectImpl)dcIteratorBinding2.getViewObject();
                                ViewCriteria vc2 = accountCodeSelectVO.getViewCriteria("AccountVOCriteria1");
                                accountCodeSelectVO.applyViewCriteria(vc2);
                                accountCodeSelectVO.setNamedWhereClauseParam("bindAccountName", accountName);
//                                System.out.println("-----------Dynamic Query-----------");
//                                System.out.println(accountCodeSelectVO.getQuery());
                                accountCodeSelectVO.executeQuery();
                                if(accountCodeSelectVO.getEstimatedRowCount()==0){

                                    System.out.println("Invalid  Account name");
                                    String vallMsg="Please Choose a valid Account Code";
                                    this.validationErrorMessage.setValue(vallMsg);
                                    AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                                    validationErrorPopup.show(hints);
                                }
                            else
                                {
                                        DCBindingContainer dcBindingContainer3 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                        DCIteratorBinding dcIteratorBinding3 = dcBindingContainer3.findIteratorBinding("AnalysisCodeVO1Iterator");
                                        ViewObjectImpl analysisCodeSelectVO = (ViewObjectImpl)dcIteratorBinding3.getViewObject();
                                        ViewCriteria vc3 = analysisCodeSelectVO.getViewCriteria("AnalysisCodeVOCriteria1");
                                        analysisCodeSelectVO.applyViewCriteria(vc3);
                                        analysisCodeSelectVO.setNamedWhereClauseParam("bindAnalysisCode", analysisCode);
//                                        System.out.println("-----------Dynamic Query-----------");
//                                        System.out.println(analysisCodeSelectVO.getQuery());
                                        analysisCodeSelectVO.executeQuery();
                                        if(analysisCodeSelectVO.getEstimatedRowCount()==0){

                                            System.out.println("Invalid Analysis code");
                                            String vallMsg="Please Choose a valid Analysis Code";
                                            this.validationErrorMessage.setValue(vallMsg);
                                            AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                                            RichPopup.PopupHints hints = new RichPopup.PopupHints();
                                            validationErrorPopup.show(hints);
                                        }
                                    else
                                        {
                                                DCBindingContainer dcBindingContainer4 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                                DCIteratorBinding dcIteratorBinding4 = dcBindingContainer4.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                                                ViewObjectImpl counterPartySelectVO = (ViewObjectImpl)dcIteratorBinding4.getViewObject();
                                                ViewCriteria vc4 = counterPartySelectVO.getViewCriteria("CounterPartyVOCriteria1");
                                                counterPartySelectVO.applyViewCriteria(vc4);
                                                counterPartySelectVO.setNamedWhereClauseParam("bindCounterParty", companyName);
//                                                System.out.println("-----------Dynamic Query-----------");
//                                                System.out.println(counterPartySelectVO.getQuery());
                                                counterPartySelectVO.executeQuery();

                                                if(counterPartySelectVO.getEstimatedRowCount()==0){

                                                    System.out.println("Invalid Counter Party");
                                                    String vallMsg="Please Choose a valid Counter Party Code";
                                                    this.validationErrorMessage.setValue(vallMsg);
                                                    AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                                                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                                                    validationErrorPopup.show(hints);
                                                }
                                            else
                                                {
                                                        selectedGLCode=companyName+"."+costCentre+"."+accountName+"."+analysisCode+"."+counterParty;
                                                        System.out.println("selected gl code id"+selectedGLCode);

                                                        DCBindingContainer dcBindingContainer5 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                                        DCIteratorBinding dcIteratorBinding5 = dcBindingContainer5.findIteratorBinding("ValidateGLCodeVO1Iterator");
                                                        ViewObjectImpl validateGLCodeVO = (ViewObjectImpl)dcIteratorBinding5.getViewObject();
                                                     /*   ViewCriteria vc5 = validateGLCodeVO.getViewCriteria("CounterPartyVOCriteria1");
                                                        validateGLCodeVO.applyViewCriteria(vc5);*/
                                                        validateGLCodeVO.setNamedWhereClauseParam("bindGLCode",selectedGLCode);
                                                        validateGLCodeVO.setNamedWhereClauseParam("bindOrgID",orgId);
                                                        validateGLCodeVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                                                        System.out.println("-----------Dynamic Query-----------");
//                                                        System.out.println(validateGLCodeVO.getQuery());
                                                        validateGLCodeVO.executeQuery();
                                                        while (validateGLCodeVO.hasNext()) {
                                                          Row row = validateGLCodeVO.next(); // Get the next row in the result set.
                                                          System.out.println("Validglcode ."+ row.getAttribute("Validglcode")+".");
                                                            if(null != row.getAttribute("Validglcode"))
                                                           glCodeError = row.getAttribute("Validglcode").toString();
                                                         else
                                                            glCodeError="N";
                                                          System.out.println("glCodeError"+glCodeError);
                                                        }

                                                       if( !glCodeError.equals("Y") && !glCodeError.equals("N"))
                                                       {
                                                       System.out.println("Inside if glcode error" +glCodeError);
                                                           glCodeErrorOt.setValue(glCodeError);
                                                               AdfFacesContext.getCurrentInstance().addPartialTarget(glCodeErrorOt);
                                                               System.out.println("glCodeErrorOt.getvalue"+glCodeErrorOt.getValue());
                                                            AdfFacesContext.getCurrentInstance().addPartialTarget(pg148);
                                                           }
                                                       else{
                                                        int selectedRowNum = -1;

                                                        if(clientID.getValue()!=null) {
                                                            selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                                                            System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
                                                        }


                                                         if(selectedRowNum!=-1) {

                                                             // 21-11-2022 GL Code changes as same with CertifierPage
                                                             if(getUrlOrg().equalsIgnoreCase("QF"))
                                                             {
                                                             String componentIDRecCodeFlag = "pt1:t1:"+selectedRowNum+":it94::content";
                                                             System.out.println("----- componentIDRecCodeFlag ----- "+componentIDRecCodeFlag+", glCodeError : "+glCodeError);

                                                             String componentIDRecCode = "pt1:t1:"+selectedRowNum+":it931::content";
                                                             System.out.println("----- componentIDRecCode ----- "+componentIDRecCode);

                                                             FacesContext fctx = FacesContext.getCurrentInstance();
                                                             ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                                                             String myJavaScriptCode2 = "document.getElementById('pt1:hiddenButtonID').click()";

                                                             if(glCodeError.equals("Y")){
                                                             String myJavaScriptCode1 = "document.getElementById('"+componentIDRecCodeFlag+"').value = '"+glCodeError+"'";
                                                             erks.addScript(fctx, myJavaScriptCode1 );
                                                             System.out.println("Rec Code flag set from selectglcode ");
                                                                                                                         }
                                                             else{
                                                                 String temp="";
                                                                     String myJavaScriptCode1 = "document.getElementById('"+componentIDRecCodeFlag+"').value = '"+temp+"'";
                                                                     erks.addScript(fctx, myJavaScriptCode1 );
                                                                     String myJavaScriptCode3 = "document.getElementById('"+componentIDRecCode+"').value = '"+temp+"'";
                                                                     erks.addScript(fctx, myJavaScriptCode3 );
                                                                     System.out.println("Rec Code flag set from selectglcode as null");
                                                                 }
                                                             erks.addScript(fctx, myJavaScriptCode2 );
                                                             String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it55::content";
                                                             System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedGLCode);


                                                             String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedGLCode+"'";
                                                             erks.addScript(fctx, myJavaScriptCode );
                                                             erks.addScript(fctx, myJavaScriptCode2 );
                                                             }
                                                             // 21-11-2022 GL Code changes as same with CertifierPage
                                                             if (getUrlOrg().equalsIgnoreCase("JS")){
                                                                 System.out.println("JS selectGLCodePopUp");
                                                                 String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it55::content";
                                                                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedGLCode);

                                                                 FacesContext fctx = FacesContext.getCurrentInstance();
                                                                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

                                                                 /*4th Sept GLCODE Issue*/
                                                                 String myJavaScriptCode1 = "document.getElementById('pt1:hiddenButtonID').click()";
                                                                 erks.addScript(fctx, myJavaScriptCode1 );

                                                                 String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedGLCode+"'";
                                                                 erks.addScript(fctx, myJavaScriptCode );
                                                             }
                                                             }

                                                        //AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
                                                        companyNameIt.setValue("");
                                                        costCentreIT.setValue("");
                                                        accountNameIt.setValue("");
                                                        analysisCodeIt.setValue("");
                                                        counterPartyIt.setValue("");
                                                           glCodeErrorOt.setValue("");
                                                        AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
                                                        glcode_popup.hide();
                                                        System.out.println("End selectGLCodePopUP");
                                                       }

                                                    }
                                            }
                                    }
                            }
                    }

            }
        //if(companyName==null || costCentre==null || analysisCode==null || accountName==null || counterParty==null || companyName=="" || costCentre=="" || analysisCode=="" || accountName=="" || counterParty=="")
      else  {
               System.out.println("Invalid Case Gl code");
               String vallMsg="All Fields are Mandatory.  Please enter a valid Code in each Accounting Segment";
               this.validationErrorMessage.setValue(vallMsg);
               AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
               RichPopup.PopupHints hints = new RichPopup.PopupHints();
               validationErrorPopup.show(hints);

        }

            //poNumPopupIt.setValue(selectedPONumber);

    }

    public void openGLCodeAnalysisPopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeAnalysisPopup");
        try {


            String enteredAnalysiscode = null;

                if(analysisCodeIt.getValue() != null) {
                    enteredAnalysiscode = analysisCodeIt.getValue().toString();
                    System.out.println("analysisCodeIt.getValue(): "+enteredAnalysiscode);
                }
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AnalysisCodeVO1Iterator");
                    ViewObjectImpl analysisCodeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = analysisCodeVO.getViewCriteria("AnalysisCodeVOCriteria");
                    analysisCodeVO.applyViewCriteria(vc);
                    analysisCodeVO.setNamedWhereClauseParam("bindAnalysisCode", enteredAnalysiscode);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(analysisCodeVO.getQuery());
                    analysisCodeVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(analysisCodeDetailsTable);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    p12.show(hints);
             //   }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeAnalysisPopup");
    }


    public void openGLCodeCompanyPopupClick(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeCompanyPopupClick");
        try {

            String enteredCompany = null;
            String searchType = null;

                if(companyNamePopupIt.getValue() != null) {
                    enteredCompany = companyNamePopupIt.getValue().toString();
                    System.out.println("companyNamePopupIt.getValue(): "+enteredCompany);
                    }
                if(companySoc.getValue() != null) {
                    searchType = companySoc.getValue().toString();
                    System.out.println("companySoc.getValue(): "+searchType);
                }


                   /* DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                    ViewObjectImpl companyVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = companyVO.getViewCriteria("CompanyVOCriteria");
                    companyVO.applyViewCriteria(vc);
                    companyVO.setNamedWhereClauseParam("bindCompanyName", enteredCompany);
                    System.out.println("-----------Dynamic Query-----------");
                    System.out.println(companyVO.getQuery());
                    companyVO.executeQuery(); */
                    executeGLCodeCompanyVO(enteredCompany, searchType, false);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);

             //   }

            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            p3.show(hints);

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeCompanyPopupClick");
    }

    public void openGLCodeCostCenterPopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeCostCenterPopup");
        try {

            String enteredCostCentre = null;

                if(costCentreIT.getValue() != null) {
                    enteredCostCentre = costCentreIT.getValue().toString();
                    System.out.println("costCentreIT.getValue(): "+enteredCostCentre);
                }
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CostCentreVO1Iterator");
                    ViewObjectImpl costCentreVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = costCentreVO.getViewCriteria("CostCentreVOCriteria");
                    costCentreVO.applyViewCriteria(vc);
                    costCentreVO.setNamedWhereClauseParam("bindCostCentre", enteredCostCentre);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(costCentreVO.getQuery());
                    costCentreVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(costCentreDetailsTable);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    p10.show(hints);
              //  }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeCostCenterPopup");

    }

    public void clearGLCodePopUp(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start : clearGLCodePopUp");
        companyNameIt.setValue("");
        costCentreIT.setValue("");
        accountNameIt.setValue("");
        analysisCodeIt.setValue("");
        counterPartyIt.setValue("");

        companyNameOt.setValue(null);
        costCentreOt.setValue(null);
        accountNameOt.setValue(null);
        analysisCodeOt.setValue(null);
        counterPartyOt.setValue(null);

        AdfFacesContext.getCurrentInstance().addPartialTarget(companyNameOt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(costCentreOt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(accountNameOt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(analysisCodeOt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(counterPartyOt);
        AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);

        System.out.println("end: clearGLCodePopUp");

    }



    public void openGLCodeCompanyPopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeCompanyPopup");
        try {

            String enteredCompany = null;

                if(companyNameIt.getValue() != null) {
                    enteredCompany = companyNameIt.getValue().toString();
                    System.out.println("companyNameIt.getValue(): "+enteredCompany);
                }
                   /* DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                    ViewObjectImpl companyPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = companyPopupVO.getViewCriteria("CompanyVOCriteria");
                    companyPopupVO.applyViewCriteria(vc);
                    companyPopupVO.setNamedWhereClauseParam("bindCompanyName", enteredCompany);
                    System.out.println("-----------Dynamic Query-----------");
                    System.out.println(companyPopupVO.getQuery());
                    companyPopupVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);

                }
            else if(companyNameIt.getValue() != null) {
                    enteredCompany = companyNameIt.getValue().toString();
                    System.out.println("companyNameIt.getValue(): "+enteredCompany);*/
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                    ViewObjectImpl companyPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = companyPopupVO.getViewCriteria("CompanyVOCriteria");
                    companyPopupVO.applyViewCriteria(vc);
                    companyPopupVO.setNamedWhereClauseParam("bindCompanyName", enteredCompany);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(companyPopupVO.getQuery());
                    companyPopupVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);

             //   }
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            p3.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeCompanyPopup");
    }


    private DCBindingContainer getBinding() {
        BindingContext bc = BindingContext.getCurrent();
        DCBindingContainer bindings = (DCBindingContainer)bc.getCurrentBindingsEntry();
        return bindings;
    }
   //Rec Code issue -Start
    public void glCodeRecValueChangeEvent(ValueChangeEvent valueChangeEvent) {
        // Add event code here...
      System.out.println("STart glCodeRecValueChangeEvent");
        System.out.println("Tab Presssed "+ ADFContext.getCurrent().getPageFlowScope().get("tabPressRECCode"));

        if(!(ADFContext.getCurrent().getPageFlowScope().get("tabPressRECCode")!=null && ADFContext.getCurrent().getPageFlowScope().get("tabPressRECCode").equals("tabpressed")))
        {
        try{
       DCBindingContainer bindings = getBinding();
       DCIteratorBinding lineItemIter = bindings.findIteratorBinding("LineItemDetailsEOView1Iterator");
       ViewObject empVO = lineItemIter.getViewObject();
       Row selectedRow=empVO.getCurrentRow();
       System.out.println("line number "+selectedRow.getAttribute("LineNumber"));
        selectedRow.setAttribute("RecCodeFlag", null);
            selectedRow.setAttribute("RecCode", null);
        System.out.println("RecCodeFlag "+selectedRow.getAttribute("RecCodeFlag"));

        }catch(Exception e)
           {
               e.printStackTrace();
               }

        }
        else
        {
                ADFContext.getCurrent().getPageFlowScope().put("tabPressRECCode",null);
                System.out.println("Tab Presssed in else part"+ ADFContext.getCurrent().getPageFlowScope().get("tabPressRECCode"));
            }

        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
        System.out.println("End glCodeRecValueChangeEvent");
    }
    //Rec Code issue -End
    public void validateGLCode(ClientEvent clientEvent) {
        // Add event code here...
        System.out.println("Start validateGLCode");
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();
        //do some work on it here (e.g. manipulating its readOnly state)
        //
        //Get access to the payloadclient
        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        String glCodeError=null;

        try {
                String orgId=null;

                System.out.println("Org Id:"+orgIdIt.getValue()+".");
                    if(orgIdIt.getValue()!=null)
                    {
                        orgId=orgIdIt.getValue().toString();
                            System.out.println("orgIdIt: "+orgId);
                        }
            String enteredGLCode = null;

            enteredGLCode=(String)parameters.get("submittedValue");

            if(enteredGLCode!=null && !enteredGLCode.equals("") && enteredGLCode!="" && enteredGLCode.trim()!=null && !enteredGLCode.trim().isEmpty()){

                    System.out.println("GLCode.getValue(): "+enteredGLCode);
                  System.out.println("NOt null");
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ValidateGLCodeVO1Iterator");
                ViewObjectImpl validateGLCodeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();

                validateGLCodeVO.setNamedWhereClauseParam("bindGLCode",enteredGLCode);
                validateGLCodeVO.setNamedWhereClauseParam("bindOrgID",orgId);
                validateGLCodeVO.setNamedWhereClauseParam("bindOrg", getUrlOrg());
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(validateGLCodeVO.getQuery());
                validateGLCodeVO.executeQuery();
                while (validateGLCodeVO.hasNext()) {
                  Row row = validateGLCodeVO.next(); // Get the next row in the result set.
                  System.out.println("Validglcode ."+ row.getAttribute("Validglcode")+".");
                    if(row.getAttribute("Validglcode") != null)

                    glCodeError = row.getAttribute("Validglcode").toString();

                    else

                    glCodeError ="N";

                    System.out.println("glCodeError"+glCodeError);
                }

                DCBindingContainer bindings = getBinding();
                DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                ViewObject empVO = lineItemIter.getViewObject();
                Row selectedRow=empVO.getCurrentRow();

                if(!glCodeError.equals("Y") && !glCodeError.equals("N"))
                {

                       this.validationErrorMessage.setValue(glCodeError);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);
                       // 21-11-2022 GL Code changes as same with CertifierPage
                       if (getUrlOrg().equalsIgnoreCase("QF")){
                           System.out.println("QF validateGLCode");
                       selectedRow.setAttribute("RecCodeFlag", null);
                       selectedRow.setAttribute("RecCode", null);
                       System.out.println("rec Code value set as "+ selectedRow.getAttribute("RecCodeFlag"));
                       }
                   }
                else {

                       // 21-11-2022 GL Code changes as same with CertifierPage
                    if (getUrlOrg().equalsIgnoreCase("QF")){
                    if(glCodeError.equals("Y"))
                        selectedRow.setAttribute("RecCodeFlag", glCodeError);
                    else{
                            selectedRow.setAttribute("RecCodeFlag", null);
                        selectedRow.setAttribute("RecCode", null);
                    }
                       System.out.println("rec Code value set as "+glCodeError);
                    }
                   }
                ADFContext.getCurrent().getPageFlowScope().put("tabPressRECCode", "tabpressed");
                System.out.println("Tab Presssed "+ ADFContext.getCurrent().getPageFlowScope().get("tabPressRECCode"));
                AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

            }
            }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateGLCode");
        AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
    }

    public void validateGLCodeCompany(ClientEvent clientEvent) {
        // Add event code here...
        System.out.println("Start validateGLCodeCompany");
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();
        //do some work on it here (e.g. manipulating its readOnly state)
        //
        //Get access to the payload
        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        String selectedCompany=null;
        String selectedCompanyDesc=null;
        try {

            String enteredCompany = null;
                     // enteredCompany = companyNameIt.getValue().toString();
            enteredCompany=(String)parameters.get("submittedValue");
           //     if(companyNameIt.getValue() != null && companyNameIt.getValue().equals("")) {
            if(enteredCompany!=null && !enteredCompany.equals("") && enteredCompany!="" && enteredCompany.trim()!=null && !enteredCompany.trim().isEmpty()){
                   // enteredCompany = companyNameIt.getValue().toString();
                    System.out.println("companyNameIt.getValue(): "+enteredCompany);
                  System.out.println("NOt null");
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                    ViewObjectImpl companyValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = companyValidateVO.getViewCriteria("CompanyVOCriteria2");
                    companyValidateVO.applyViewCriteria(vc);
                    companyValidateVO.setNamedWhereClauseParam("bindCompanyName", enteredCompany);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(companyValidateVO.getQuery());
                    companyValidateVO.executeQuery();
                    boolean invalidQuery=true;
                    System.out.println("invalid query"+invalidQuery);
                  while(companyValidateVO.hasNext()){
                    Row row = companyValidateVO.next(); // Get the next row in the result set.
                    if(row.getAttribute("Company") != null){
                    System.out.println("1."+row.getAttribute("Company"));
                     selectedCompany=row.getAttribute("Company").toString();
                    // companyNameIt.setValue(selectedCompany);
                       // inputTxt.setValue(selectedCompany);
                       String componentIDGlCode = "it58::content";
                       System.out.println("----- componentIDGlCode ----- "+componentIDGlCode+", selectedGLCode : "+selectedCompany);

                       FacesContext fctx = FacesContext.getCurrentInstance();
                       ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                       String myJavaScriptCode = "document.getElementById('"+componentIDGlCode+"').value = '"+selectedCompany+"'";
                       erks.addScript(fctx, myJavaScriptCode);

                     System.out.println("selectedCompany"+selectedCompany);
                    }
                    else{
                           /* FacesMessage Message =
                                new FacesMessage("Please Enter a valid Company Name");
                            Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                            FacesContext fc = FacesContext.getCurrentInstance();
                            fc.addMessage(null, Message);*/
                           System.out.println("2.Invalid Company name");
                           String vallMsg="Please Enter a valid Company Name";
                           this.validationErrorMessage.setValue(vallMsg);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);
                            companyNameIt.setValue("");
                        }
                     if(row.getAttribute("CompanyDescription") != null){
                         selectedCompanyDesc=row.getAttribute("CompanyDescription").toString();
                         System.out.println("3.company desc in inner popup ::: "+ selectedCompanyDesc);
                         companyNameOt.setValue(selectedCompanyDesc);
                     }else{
                         companyNameOt.setValue("");
                     }

                     invalidQuery=false;
                }
                  if(invalidQuery)
                  {
                      System.out.println("Executing"+invalidQuery);

                          System.out.println("4.Invalid Company name");
                          String vallMsg="Please Enter a valid Company Name";
                          this.validationErrorMessage.setValue(vallMsg);
                          AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                          RichPopup.PopupHints hints = new RichPopup.PopupHints();
                          validationErrorPopup.show(hints);
                          companyNameOt.setValue("");
                          String componentIDGlCode = "it58::content";
                          System.out.println("----- componentIDGlCode ----- "+componentIDGlCode+", selectedGLCode : "+selectedCompany);

                          FacesContext fctx = FacesContext.getCurrentInstance();
                          ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                          String myJavaScriptCode = "document.getElementById('"+componentIDGlCode+"').value = '"+""+"'";
                          erks.addScript(fctx, myJavaScriptCode);

                        //  companyNameIt.setValue("");
                      }
                 AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);   // AdfFacesContext.getCurrentInstance().addPartialTarget(companyDetailsTable);
                }
            else{
                System.out.println("l 5");
                    companyNameIt.setValue("");
                    companyNameOt.setValue("");
                    AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
                }
                  }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateGLCodeCompany");
    }

    public void validateGLCodeCostCenter(ClientEvent clientEvent) {
    // Add event code here...

    RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();
    //do some work on it here (e.g. manipulating its readOnly state)
    //
    //Get access to the payload
    Map  parameters = clientEvent.getParameters();
    System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
    System.out.println("LocalValue = " +parameters.get("localValue"));

    System.out.println("Start validateGLCodeCostCenter");
    try {

    String enteredCostCentre = null;
    String selectedCostCentreDesc=null;
    String selectedCostCentre=null;
       // if(costCentreIT.getValue() != null) {
          //  enteredCostCentre = costCentreIT.getValue().toString();
    enteredCostCentre=(String)parameters.get("submittedValue");
            System.out.println("costCentreIT.getValue(): "+enteredCostCentre);
     //   }
     if(enteredCostCentre!=null && !enteredCostCentre.equals("") && enteredCostCentre!="" && enteredCostCentre.trim()!=null && !enteredCostCentre.trim().isEmpty()){
    //     }
              System.out.println("costCentre Entered: "+enteredCostCentre);
             System.out.println("NOt null");
            DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
            DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CostCentreVO1Iterator");
            ViewObjectImpl costCentreValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
            ViewCriteria vc = costCentreValidateVO.getViewCriteria("CostCentreVOCriteria2");
            costCentreValidateVO.applyViewCriteria(vc);
            costCentreValidateVO.setNamedWhereClauseParam("bindCostCentre", enteredCostCentre);
//            System.out.println("-----------Dynamic Query-----------");
//            System.out.println(costCentreValidateVO.getQuery());
            costCentreValidateVO.executeQuery();
        boolean invalidQuery=true;
        System.out.println("invalid query"+invalidQuery);
    while(costCentreValidateVO.hasNext()){
            Row row = costCentreValidateVO.next(); // Get the next row in the result set.
            if(row.getAttribute("Costcentre") != null)
                           {
                         System.out.println(row.getAttribute("Costcentre"));
                           selectedCostCentre=row.getAttribute("Costcentre").toString();
                               costCentreIT.setValue(selectedCostCentre);
                           }
            else{
                   /* FacesMessage Message =
                        new FacesMessage("Please Enter a valid CostCentre Code");
                    Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                    FacesContext fc = FacesContext.getCurrentInstance();
                    fc.addMessage(null, Message);*/
                   System.out.println("Invalid Cost Centre Code");
                   String vallMsg="Please Enter a valid Cost Centre Code";
                   this.validationErrorMessage.setValue(vallMsg);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                   RichPopup.PopupHints hints = new RichPopup.PopupHints();
                   validationErrorPopup.show(hints);
                    costCentreIT.setValue("");
                }
            if(row.getAttribute("Description") != null){
                                              selectedCostCentreDesc=row.getAttribute("Description").toString();
                                              System.out.println("company desc in inner popup ::: "+ selectedCostCentreDesc);
                                              costCentreOt.setValue(selectedCostCentreDesc);
                                          }else{
                                              costCentreOt.setValue("");
                                          }
               invalidQuery=false;

        }
           // AdfFacesContext.getCurrentInstance().addPartialTarget(costCentreDetailsTable);
           if(invalidQuery)
           {
               System.out.println("Executing"+invalidQuery);
                 /*  FacesMessage Message =
                       new FacesMessage("Please Enter a valid CostCentre Code");
                   Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                   FacesContext fc = FacesContext.getCurrentInstance();
                   fc.addMessage(null, Message);*/
                 System.out.println("Invalid Cost centre Code");
                 String vallMsg="Please Enter a valid CostCentre Code";
                 this.validationErrorMessage.setValue(vallMsg);
                 AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                 RichPopup.PopupHints hints = new RichPopup.PopupHints();
                 validationErrorPopup.show(hints);
                   costCentreOt.setValue("");
                   String componentIDGlCode = "it39::content";
                   System.out.println("----- componentIDGlCode ----- "+componentIDGlCode+", selectedGLCode : ");

                   FacesContext fctx = FacesContext.getCurrentInstance();
                   ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                   String myJavaScriptCode = "document.getElementById('"+componentIDGlCode+"').value = '"+""+"'";
                   erks.addScript(fctx, myJavaScriptCode);

               }
           AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
    }
    else{
        costCentreIT.setValue("");
        costCentreOt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
    }

    }
    catch(Exception e) {
    e.printStackTrace();
    }
    System.out.println("End validateGLCodeCostCenter");

    }
    public void openGLCodeCounterPartyPopupClick(ActionEvent actionEvent) {
        System.out.println("Start openGLCodeCounterPartyPopupClick");
        try {
            String enteredCounterParty = null;
            String searchType = null;
                if(counterPartyPopupIt.getValue() != null) {
                    enteredCounterParty = counterPartyPopupIt.getValue().toString();
                    System.out.println("counterPartyPopupIt.getValue(): "+enteredCounterParty);

                }
                if(counterPartySoc.getValue() != null) {
                    searchType = counterPartySoc.getValue().toString();
                    System.out.println("counterPartySoc.getValue(): "+enteredCounterParty);

                }
              /* DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                ViewObjectImpl counterPartyVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria counterPartyvc = counterPartyVO.getViewCriteria("CounterPartyVOCriteria");
                counterPartyVO.applyViewCriteria(counterPartyvc);
                counterPartyVO.setNamedWhereClauseParam("bindCounterParty", enteredCounterParty);
                System.out.println("-----------Dynamic Query-----------");
                System.out.println(counterPartyVO.getQuery());
                counterPartyVO.executeQuery();  */
                executeGLCodeCounterPartyVO(enteredCounterParty, searchType, false);
                AdfFacesContext.getCurrentInstance().addPartialTarget(counterPartyDetailsTable);
            //}
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            p13.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeCounterPartyPopupClick");
    }


    public void cancelAnalysisCodeGLCode(ActionEvent actionEvent) {
           // Add event code here...
           System.out.println("Start: cancelAnalysisCodeGLCode");
           analysisCodePopupIt.setValue("");
           AdfFacesContext.getCurrentInstance().addPartialTarget(analysisCodePopupIt);
           p12.hide();

           System.out.println("End: cancelAnalysisCodeGLCode");
       }

    public void cancelCounterPartyGLCode(ActionEvent actionEvent) {
           // Add event code here...
           System.out.println("Start: cancelCounterPartyGLCode");
           counterPartyPopupIt.setValue("");
           AdfFacesContext.getCurrentInstance().addPartialTarget(counterPartyPopupIt);
           p13.hide();

           System.out.println("End: cancelCounterPartyGLCode");
       }
    public void selectCounterPartyGLCode(ActionEvent actionEvent) {
          System.out.println("Start: selectCounterPartyGLCode");
          String selectedCompany=null;
          String selectedCounterPartDesc = null;
          RowKeySet selectedCompanyName = counterPartyDetailsTable.getSelectedRowKeys();
          Iterator selectedCompanyIter = selectedCompanyName.iterator();
          DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding comIter = bindings.findIteratorBinding("CompanyCounterPartyVO1Iterator");
          RowSetIterator comRSIter=null;
          try{
              comRSIter = comIter.getRowSetIterator();
          while(selectedCompanyIter.hasNext()){
             Key key = (Key)((List)selectedCompanyIter.next()).get(0);
             Row currentRow = comRSIter.getRow(key);
              if(currentRow.getAttribute("Company") != null){
             System.out.println(currentRow.getAttribute("Company"));
               selectedCompany=currentRow.getAttribute("Company").toString();
                  counterPartyIt.setValue(selectedCompany);
              }
              else{
                   counterPartyIt.setValue("");
                  }
               if(currentRow.getAttribute("CompanyDescription") != null){
               System.out.println(currentRow.getAttribute("CompanyDescription"));
                selectedCounterPartDesc=currentRow.getAttribute("CompanyDescription").toString();
                   counterPartyOt.setValue(selectedCounterPartDesc);
               }
               else{
                    counterPartyOt.setValue("");
                   }

           }
          }catch(Exception e){
              e.printStackTrace();
              }
          finally{
                      if(comRSIter!=null) {
                          try {
                              comRSIter.closeRowSetIterator();
                          } catch(Exception ex) {
                              ex.printStackTrace();

                      }
                      }
                  }

          AdfFacesContext.getCurrentInstance().addPartialTarget(counterPartyIt);
          AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
          counterPartyPopupIt.setValue("");
          AdfFacesContext.getCurrentInstance().addPartialTarget(counterPartyPopupIt);
          p13.hide();
          System.out.println("End selectCounterPartyGLCode");
      }



    public void selectAnalysisCodeGLCode(ActionEvent actionEvent) {
          System.out.println("Start: selectAnalysisCodeGLCode");
          String selectedAnalysisCode=null;
          String analysisDesc = null;
       //   String selectedEmployeeNo=null;
        //  String selectedcertifierEmail=null;
          RowKeySet selectedAnalysisCodeSet = analysisCodeDetailsTable.getSelectedRowKeys();
          Iterator selectedAnalysisCodeIter = selectedAnalysisCodeSet.iterator();
          DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
          DCIteratorBinding analysiscodeIter = bindings.findIteratorBinding("AnalysisCodeVO1Iterator");
          RowSetIterator analysiscodeRSIter=null;
          try{
              analysiscodeRSIter = analysiscodeIter.getRowSetIterator();
          while(selectedAnalysisCodeIter.hasNext()){
             Key key = (Key)((List)selectedAnalysisCodeIter.next()).get(0);
             Row currentRow = analysiscodeRSIter.getRow(key);
               if(currentRow.getAttribute("Analysiscode") != null)
               {
             System.out.println(currentRow.getAttribute("Analysiscode"));
               selectedAnalysisCode=currentRow.getAttribute("Analysiscode").toString();
                   analysisCodeIt.setValue(selectedAnalysisCode);
               }
              else
               {
                       analysisCodeIt.setValue("");
                   }
               if(currentRow.getAttribute("Description") != null)
               {
               System.out.println(currentRow.getAttribute("Description"));
               analysisDesc=currentRow.getAttribute("Description").toString();
                   analysisCodeOt.setValue(analysisDesc);
               }
               else
               {
                       analysisCodeOt.setValue("");
                   }

           }
          }catch(Exception e)
          {
              e.printStackTrace();
              }
          finally{
                      if(analysiscodeRSIter!=null) {
                          try {
                              analysiscodeRSIter.closeRowSetIterator();
                          } catch(Exception ex) {
                              ex.printStackTrace();

                      }
                      }
                  }
          AdfFacesContext.getCurrentInstance().addPartialTarget(analysisCodeIt);
          AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
          analysisCodePopupIt.setValue("");
          AdfFacesContext.getCurrentInstance().addPartialTarget(analysisCodePopupIt);

          p12.hide();
          System.out.println("End selectAnalysisCodeGLCode");
      }


    public void openGLCodeAccountPopupClick(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeAccountPopupClick");
        try {

            String enteredAccount = null;
            String searchType = null;
                if(accountNamePopupIt.getValue() != null) {
                    enteredAccount = accountNamePopupIt.getValue().toString();
                    System.out.println("accountNamePopupIt.getValue(): "+enteredAccount);
                }
                if(accountSoc.getValue() != null) {
                    searchType = accountSoc.getValue().toString();
                    System.out.println("accountSoc.getValue(): "+searchType);
                }
                    /*DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AccountVO1Iterator");
                    ViewObjectImpl accountPopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = accountPopupVO.getViewCriteria("AccountVOCriteria");
                    accountPopupVO.applyViewCriteria(vc);
                    accountPopupVO.setNamedWhereClauseParam("bindAccountName", enteredAccount);
                    System.out.println("-----------Dynamic Query-----------");
                    System.out.println(accountPopupVO.getQuery());
                    accountPopupVO.executeQuery();   */

                    executeGLCodeAccountVO(enteredAccount, searchType, false);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(accountDetailsTable);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    p11.show(hints);
              //  }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeAccountPopupClick");
    }

    public void validateGLCodeAccount(ClientEvent clientEvent) {
       // Add event code here...

       RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();
       //do some work on it here (e.g. manipulating its readOnly state)
       //
       //Get access to the payload
       Map  parameters = clientEvent.getParameters();
       System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
       System.out.println("LocalValue = " +parameters.get("localValue"));

       System.out.println("Start validateGLCodeAccount");
       try {

           String enteredAccount = null;
           String selectedAccount=null;
           String selectedAccountDesc=null;
              // if(accountNameIt.getValue() != null) {
                   //
                   //enteredAccount = accountNameIt.getValue().toString();
                 enteredAccount=(String)parameters.get("submittedValue");

                   System.out.println("accountNameIt.getValue(): "+enteredAccount);
            //   }
            if(enteredAccount!=null && !enteredAccount.equals("") && enteredAccount!="" && enteredAccount.trim()!=null && !enteredAccount.trim().isEmpty()){
               System.out.println("enteredAccount Entered: "+enteredAccount);
                            System.out.println("NOt null");
                   DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                   DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AccountVO1Iterator");
                   ViewObjectImpl accountValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                   ViewCriteria vc = accountValidateVO.getViewCriteria("AccountVOCriteria2");
                   accountValidateVO.applyViewCriteria(vc);
                   accountValidateVO.setNamedWhereClauseParam("bindAccountName", enteredAccount);
//                   System.out.println("-----------Dynamic Query-----------");
//                   System.out.println(accountValidateVO.getQuery());
                   accountValidateVO.executeQuery();
               boolean invalidQuery=true;
               System.out.println("invalid query"+invalidQuery);
           while(accountValidateVO.hasNext()){
                   Row row = accountValidateVO.next(); // Get th
                   if(row.getAttribute("Account") != null)
                   {
                   System.out.println(row.getAttribute("Account"));
                   selectedAccount=row.getAttribute("Account").toString();
                   accountNameIt.setValue(selectedAccount);
                   }
                   else
                   {
                        /*   FacesMessage Message =
                               new FacesMessage("Please Enter a valid Account Code");
                           Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                           FacesContext fc = FacesContext.getCurrentInstance();
                           fc.addMessage(null, Message);*/
                        System.out.println("Invalid Account Code");
                        String vallMsg="Please Enter a valid Account Code";
                        this.validationErrorMessage.setValue(vallMsg);
                        AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                        RichPopup.PopupHints hints = new RichPopup.PopupHints();
                        validationErrorPopup.show(hints);
                           accountNameIt.setValue("");
                       }
                   if(row.getAttribute("AccountDescription") != null){
                                      selectedAccountDesc=row.getAttribute("AccountDescription").toString();
                                      System.out.println("company desc in inner popup ::: "+ selectedAccountDesc);
                                      accountNameOt.setValue(selectedAccountDesc);
                                  }else{
                                      accountNameOt.setValue("");
                                  }
               invalidQuery=false;
           }
               if(invalidQuery)
               {
                   System.out.println("Executing"+invalidQuery);
                     /*  FacesMessage Message =
                           new FacesMessage("Please Enter a valid Account Code");
                       Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                       FacesContext fc = FacesContext.getCurrentInstance();
                       fc.addMessage(null, Message);*/
                     System.out.println("Invalid Account Code");
                     String vallMsg="Please Enter a valid Account Code";
                     this.validationErrorMessage.setValue(vallMsg);
                     AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                     RichPopup.PopupHints hints = new RichPopup.PopupHints();
                     validationErrorPopup.show(hints);
                       accountNameOt.setValue("");
                       String componentIDGlCode = "it38::content";
                       System.out.println("----- componentIDGlCode ----- "+componentIDGlCode+", selectedGLCode : ");

                       FacesContext fctx = FacesContext.getCurrentInstance();
                       ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                       String myJavaScriptCode = "document.getElementById('"+componentIDGlCode+"').value = '"+""+"'";
                       erks.addScript(fctx, myJavaScriptCode);
                   }
           AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
           }
           else{
               accountNameIt.setValue("");
               accountNameOt.setValue("");
               AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
           }
       }
       catch(Exception e) {
           e.printStackTrace();
       }
       System.out.println("End validateGLCodeAccount");
    }

    public void validateGLCodeAnalysis(ClientEvent clientEvent) {
        // Add event code here...
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));


        System.out.println("Start validateGLCodeAnalysis");
        try {


            String enteredAnalysiscode = null;
            String selectedAnalysisCode=null;
            String selectedAnalysisdesc=null;
               // if(analysisCodeIt.getValue() != null) {
                   // enteredAnalysiscode = analysisCodeIt.getValue().toString();
            enteredAnalysiscode=(String)parameters.get("submittedValue");
                    System.out.println("analysisCodeIt.getValue(): "+enteredAnalysiscode);
               // }
               if(enteredAnalysiscode!=null && !enteredAnalysiscode.equals("") && enteredAnalysiscode!="" && enteredAnalysiscode.trim()!=null && !enteredAnalysiscode.trim().isEmpty()){
                System.out.println("enteredAnalysiscode Entered: "+enteredAnalysiscode);
                             System.out.println("NOt null");
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AnalysisCodeVO1Iterator");
                    ViewObjectImpl analysisCodevalidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = analysisCodevalidateVO.getViewCriteria("AnalysisCodeVOCriteria2");
                    analysisCodevalidateVO.applyViewCriteria(vc);
                    analysisCodevalidateVO.setNamedWhereClauseParam("bindAnalysisCode", enteredAnalysiscode);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(analysisCodevalidateVO.getQuery());
                    analysisCodevalidateVO.executeQuery();
                boolean invalidQuery=true;
                System.out.println("invalid query"+invalidQuery);
            while(analysisCodevalidateVO.hasNext()){
                    Row row = analysisCodevalidateVO.next(); // G
                    if(row.getAttribute("Analysiscode") != null)
                    {
                    System.out.println(row.getAttribute("Analysiscode"));
                    selectedAnalysisCode=row.getAttribute("Analysiscode").toString();
                        analysisCodeIt.setValue(selectedAnalysisCode);
                    }
                    else
                    {
                         /*   FacesMessage Message =
                                new FacesMessage("Please Enter a valid Analysis Code");
                            Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                            FacesContext fc = FacesContext.getCurrentInstance();
                            fc.addMessage(null, Message);*/
                         System.out.println("Invalid Analysis Code");
                         String vallMsg="Please Enter a valid Analysis Code";
                         this.validationErrorMessage.setValue(vallMsg);
                         AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                         RichPopup.PopupHints hints = new RichPopup.PopupHints();
                         validationErrorPopup.show(hints);
                            analysisCodeIt.setValue("");
                        }
                    if(row.getAttribute("Description") != null)
                    {
                    System.out.println(row.getAttribute("Description"));
                    selectedAnalysisdesc=row.getAttribute("Description").toString();
                        analysisCodeOt.setValue(selectedAnalysisdesc);
                    }
                    else
                    {
                            analysisCodeOt.setValue("");
                        }
                  invalidQuery=false;
            }
                if(invalidQuery)
                {
                    System.out.println("Executing"+invalidQuery);
                       /* FacesMessage Message =
                            new FacesMessage("Please Enter a valid Analysis Code");
                        Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                        FacesContext fc = FacesContext.getCurrentInstance();
                        fc.addMessage(null, Message);*/
                       System.out.println("Invalid Analysis Code");
                       String vallMsg="Please Enter a valid Analysis Code";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);
                        analysisCodeOt.setValue("");
                        String componentIDGlCode = "it37::content";
                        System.out.println("----- componentIDGlCode ----- "+componentIDGlCode+", selectedGLCode : ");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                        String myJavaScriptCode = "document.getElementById('"+componentIDGlCode+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode);
                    }
            AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);

            }
            else{
                analysisCodeIt.setValue("");
                analysisCodeOt.setValue("");
                AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateGLCodeAnalysis");
    }
    public void openGLCodeAccountPopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeAccountPopup");
        try {

            String enteredAccount = null;

                if(accountNameIt.getValue() != null) {
                    enteredAccount = accountNameIt.getValue().toString();
                    System.out.println("accountNameIt.getValue(): "+enteredAccount);
                }
                    DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AccountVO1Iterator");
                    ViewObjectImpl accountVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = accountVO.getViewCriteria("AccountVOCriteria");
                    accountVO.applyViewCriteria(vc);
                    accountVO.setNamedWhereClauseParam("bindAccountName", enteredAccount);
//                    System.out.println("-----------Dynamic Query-----------");
//                    System.out.println(accountVO.getQuery());
                    accountVO.executeQuery();
                    AdfFacesContext.getCurrentInstance().addPartialTarget(accountDetailsTable);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    p11.show(hints);

             //   }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeAccountPopup");
    }

    public void openGLCodeCounterPartyPopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeCounterPartyPopup");
        try {
            String enteredCounterParty = null;

                if(counterPartyIt.getValue() != null) {
                    enteredCounterParty = counterPartyIt.getValue().toString();
                    System.out.println("counterPartyIt.getValue(): "+enteredCounterParty);

                }

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                ViewObjectImpl counterPartyVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria counterPartyvc = counterPartyVO.getViewCriteria("CounterPartyVOCriteria");
                counterPartyVO.applyViewCriteria(counterPartyvc);
                counterPartyVO.setNamedWhereClauseParam("bindCounterParty", enteredCounterParty);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(counterPartyVO.getQuery());
                counterPartyVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(counterPartyDetailsTable);
         //   }
            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            p13.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeCounterPartyPopup");
    }
    public void validateGLCodeCounterParty(ClientEvent clientEvent) {
        // Add event code here...
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        System.out.println("Start validateGLCodeCounterParty");
        try {
            String enteredCounterParty = null;
            String selectedCounterParty=null;
            String selectedCounterPartyDesc=null;


                    enteredCounterParty=(String)parameters.get("submittedValue");
                    System.out.println("counterPartyIt.getValue(): "+enteredCounterParty);

             //   }
             if(enteredCounterParty!=null && !enteredCounterParty.equals("") && enteredCounterParty!="" && enteredCounterParty.trim()!=null && !enteredCounterParty.trim().isEmpty()){
                System.out.println("enteredCounterParty Entered: "+enteredCounterParty);
                             System.out.println("NOt null");
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CompanyCounterPartyVO1Iterator");
                ViewObjectImpl counterPartyValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria counterPartyvc = counterPartyValidateVO.getViewCriteria("CounterPartyVOCriteria2");
                counterPartyValidateVO.applyViewCriteria(counterPartyvc);
                counterPartyValidateVO.setNamedWhereClauseParam("bindCounterParty", enteredCounterParty);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(counterPartyValidateVO.getQuery());
                counterPartyValidateVO.executeQuery();
                boolean invalidQuery=true;
                System.out.println("invalid query"+invalidQuery);
            while(counterPartyValidateVO.hasNext()){
                    Row row = counterPartyValidateVO.next();
                if(row.getAttribute("Company") != null){
                System.out.println(row.getAttribute("Company"));
                 selectedCounterParty=row.getAttribute("Company").toString();
                    counterPartyIt.setValue(selectedCounterParty);
                }
                else{
                       /* FacesMessage Message =
                            new FacesMessage("Please Enter a valid Counter Party");
                        Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                        FacesContext fc = FacesContext.getCurrentInstance();
                        fc.addMessage(null, Message);*/
                       System.out.println("Invalid Counter Party");
                       String vallMsg="Please Enter a valid Counter Party";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);
                        counterPartyIt.setValue("");
                    }
                 if(row.getAttribute("CompanyDescription") != null){
                 System.out.println(row.getAttribute("CompanyDescription"));
                  selectedCounterPartyDesc=row.getAttribute("CompanyDescription").toString();
                     counterPartyOt.setValue(selectedCounterPartyDesc);
                 }
                 else{
                      counterPartyOt.setValue("");
                     }
                invalidQuery=false;
            }
                if(invalidQuery)
                {
                    System.out.println("Executing"+invalidQuery);
                       /* FacesMessage Message =
                            new FacesMessage("Please Enter a valid Counter Party");
                        Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                        FacesContext fc = FacesContext.getCurrentInstance();
                        fc.addMessage(null, Message);*/
                       System.out.println("Invalid Counter Party");
                       String vallMsg="Please Enter a valid Counter Party";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);
                        counterPartyOt.setValue("");
                        String componentIDGlCode = "it36::content";
                        System.out.println("----- componentIDGlCode ----- "+componentIDGlCode+", selectedGLCode : ");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                        String myJavaScriptCode = "document.getElementById('"+componentIDGlCode+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode);
                    }
            AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
            }
            else{
                counterPartyIt.setValue("");
                counterPartyOt.setValue("");
                AdfFacesContext.getCurrentInstance().addPartialTarget(glCodePgl);
            }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateGLCodeCounterParty");
    }

    public void openGLCodeCostCenterPopupclick(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeCostCenterPopupclick");
        try {

            String enteredCostCentre = null;
            String searchType = null;
                if(costCentrePopupIt.getValue() != null) {
                    enteredCostCentre = costCentrePopupIt.getValue().toString();
                    System.out.println("costCentrePopupIt.getValue(): "+enteredCostCentre);
                }
                if(costcenterSoc.getValue() != null) {
                    searchType = costcenterSoc.getValue().toString();
                    System.out.println("costcenterSoc.getValue(): "+searchType);
                }
                    /*DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("CostCentreVO1Iterator");
                    ViewObjectImpl costCentrePopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = costCentrePopupVO.getViewCriteria("CostCentreVOCriteria");
                    costCentrePopupVO.applyViewCriteria(vc);
                    costCentrePopupVO.setNamedWhereClauseParam("bindCostCentre", enteredCostCentre);
                    System.out.println("-----------Dynamic Query-----------");
                    System.out.println(costCentrePopupVO.getQuery());
                    costCentrePopupVO.executeQuery();   */

                    executeGLCodeCostCentreVO(enteredCostCentre, searchType, false);
                    AdfFacesContext.getCurrentInstance().addPartialTarget(costCentreDetailsTable);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    p10.show(hints);
               // }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeCostCenterPopupclick");

    }

    public void openGLCodeAnalysisCodePopupClick(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openGLCodeAnalysisCodePopupClick");
        try {

            String enteredAnalysisCode = null;
            String searchType = null;
                if(analysisCodePopupIt.getValue() != null) {
                    enteredAnalysisCode = analysisCodePopupIt.getValue().toString();
                    System.out.println("analysisCodePopupIt.getValue(): "+enteredAnalysisCode);
                }
                if(analysisCodeSoc.getValue() != null) {
                    searchType = analysisCodeSoc.getValue().toString();
                    System.out.println("analysisCodeSoc.getValue(): "+searchType);
                }
                  /*  DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                    DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("AnalysisCodeVO1Iterator");
                    ViewObjectImpl analysisCodePopupVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                    ViewCriteria vc = analysisCodePopupVO.getViewCriteria("AnalysisCodeVOCriteria");
                    analysisCodePopupVO.applyViewCriteria(vc);
                    analysisCodePopupVO.setNamedWhereClauseParam("bindAnalysisCode", enteredAnalysisCode);
                    System.out.println("-----------Dynamic Query-----------");
                    System.out.println(analysisCodePopupVO.getQuery());
                    analysisCodePopupVO.executeQuery(); */
                    //executeGLCodeAccountVO(enteredAnalysisCode, false);
                    executeGLCodeAnalysisVO(enteredAnalysisCode, searchType, false);

                    AdfFacesContext.getCurrentInstance().addPartialTarget(analysisCodeDetailsTable);
                    RichPopup.PopupHints hints = new RichPopup.PopupHints();
                    p12.show(hints);
             //   }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openGLCodeAnalysisCodePopupClick");
    }


    public void openProjectNoPopUP(ActionEvent actionEvent) {

        System.out.println("Start openProjectNoPopUP");
        if(orgIdIt.getValue()==null || (orgIdIt.getValue()!=null && orgIdIt.getValue().toString().equals("")  )){
                    System.out.println("Setting orgId value on submit click as it is coming null ::: ");

                    String orgId = getOrgIdFinal();
                    orgIdIt.setValue(orgId);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
                    System.out.println("Value setted in org Id i/p :::"+orgIdIt.getValue());
                    //Added on 24th JAn
                    AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
                }
        // Add event code here...

        String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);
        try {
            String enteredProjNo=null;
            String enteredOrgIdIt=null;
            if(orgIdIt.getValue() != null) {
                enteredOrgIdIt = orgIdIt.getValue().toString();
                System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
            }
            else{
                    System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
                }
           if(projectNoIT.getValue() != null) {
                enteredProjNo = projectNoIT.getValue().toString();
                System.out.println("projectNoIT.getValue(): "+enteredProjNo);
            }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ProjectNumberVO1Iterator");
             ViewObjectImpl projectNumberVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
               ViewCriteria vc = projectNumberVO.getViewCriteria("ProjectNumberVOCriteria");
                projectNumberVO.applyViewCriteria(vc);
                projectNumberVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
                projectNumberVO.setNamedWhereClauseParam("bindProjectNo", enteredProjNo);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(projectNumberVO.getQuery());
                projectNumberVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(projDtlTable);
                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                projectNo_pop.show(hints);
           // }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openProjectNoPopUP");

    }

    public void cancelProjectNoPopUP(ActionEvent actionEvent) {
    // Add event code here...
    System.out.println("Start: cancelProjectNoPopUP");
    projNoPopupIt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(projNoPopupIt);
        projectNo_pop.hide();

    System.out.println("End: cancelProjectNoPopUP");
    }

    public void validateTaskNo(ClientEvent clientEvent) {
        // Add event code here...
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        System.out.println("Start validateTaskNo");
      //  String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
      String clientId = clientEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);

        try {
            String enteredTaskNo=null;
            String enteredProjectId=setProjectIdIt();
          //  String enteredProjectId=null;
         //   System.out.println("New Project id in openTaskNoPopup :: "+ enteredProjectId);
            String selectedTaskNo=null;
         /*   if(projectIdIt.getValue() != null) {
                enteredProjectId = projectIdIt.getValue().toString();
                System.out.println("projectIdIt.getValue(): "+enteredProjectId);
            }  */

            enteredTaskNo=(String)parameters.get("submittedValue");
            System.out.println("TaskNo.getValue(): "+enteredTaskNo);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
            selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
            System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }

            if(enteredTaskNo!=null && !enteredTaskNo.equals("") && enteredTaskNo!="" && enteredTaskNo.trim()!=null && !enteredTaskNo.trim().isEmpty() &&
            enteredProjectId!=null && !enteredProjectId.equals("") && enteredProjectId!="" && enteredProjectId.trim()!=null && !enteredProjectId.trim().isEmpty()){

              boolean invalidQuery=true;
            String selectedTaskId="";
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaskNumberVO1Iterator");
                ViewObjectImpl taskNumberValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = taskNumberValidateVO.getViewCriteria("TaskNumberVOCriteria2");
                taskNumberValidateVO.applyViewCriteria(vc);
                taskNumberValidateVO.setNamedWhereClauseParam("bindprojectId", enteredProjectId);
                taskNumberValidateVO.setNamedWhereClauseParam("bindTaskNo", enteredTaskNo);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(taskNumberValidateVO.getQuery());
                taskNumberValidateVO.executeQuery();
                System.out.println("Row Count : "+taskNumberValidateVO.getEstimatedRowCount());
//            while(taskNumberValidateVO.hasNext()){
                if (taskNumberValidateVO.getEstimatedRowCount()>0){
//                    Row row = taskNumberValidateVO.next();
                Row row = taskNumberValidateVO.first();
                if(row.getAttribute("TaskNumber") != null){
                System.out.println(row.getAttribute("TaskNumber"));
                 selectedTaskNo=row.getAttribute("TaskNumber").toString();
                    System.out.println(row.getAttribute("TaskId"));
                                                       selectedTaskId=row.getAttribute("TaskId").toString();
                                        System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
                     if(selectedRowNum!=-1) {

//                         String componentIDTaskNumber = "pt1:t1:"+selectedRowNum+":it71::content";
//                         System.out.println("----- componentIDPoNumber ----- "+componentIDTaskNumber+", selectedPONumber : "+selectedTaskNo);
//
//                         FacesContext fctx = FacesContext.getCurrentInstance();
//                         ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
//                         String myJavaScriptCode = "document.getElementById('"+componentIDTaskNumber+"').value = '"+selectedTaskNo+"'";
//                         erks.addScript(fctx, myJavaScriptCode );
                       String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it71::content";
                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedTaskNo);
                         String componentIDTaskIdNumber = "pt1:t1:"+selectedRowNum+":it85::content";
                                          System.out.println("----- componentIDTaskIdNumber ----- "+componentIDTaskIdNumber+", selectedTaskId : "+selectedTaskId);

                                          FacesContext fctx = FacesContext.getCurrentInstance();
                                          ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                                          String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedTaskNo+"'";
                                          String myJavaScriptCode1 = "document.getElementById('"+componentIDTaskIdNumber+"').value = '"+selectedTaskId+"'";
                                          String myJavaScriptCode2 = "document.getElementById('"+componentIDPoNumber+"').blur()";
                                          String myJavaScriptCode3 = "document.getElementById('"+componentIDTaskIdNumber+"').blur()";
                                          erks.addScript(fctx, myJavaScriptCode );
                                          erks.addScript(fctx, myJavaScriptCode1 );
                                          erks.addScript(fctx, myJavaScriptCode2);
                                          erks.addScript(fctx, myJavaScriptCode3);
                     }
                }
                else{

                       System.out.println("Invalid Task number");
                       String vallMsg="Please Enter a valid Task Number";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);

                        if(selectedRowNum!=-1) {


                            String componentIDTaskNumber = "pt1:t1:"+selectedRowNum+":it71::content";
                            System.out.println("----- componentIDTaskNumber ----- "+componentIDTaskNumber+", selectedTaskNo : "+"");

                            FacesContext fctx = FacesContext.getCurrentInstance();
                            ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                            String myJavaScriptCode = "document.getElementById('"+componentIDTaskNumber+"').value = '"+""+"'";
                            erks.addScript(fctx, myJavaScriptCode );

                        }

                    }

                invalidQuery=false;
            }
            if(invalidQuery)
            {
                System.out.println("Executing"+invalidQuery);

                   System.out.println("Invalid Task number");
                   String vallMsg="Please Enter a valid Task Number";
                   this.validationErrorMessage.setValue(vallMsg);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                   RichPopup.PopupHints hints = new RichPopup.PopupHints();
                   validationErrorPopup.show(hints);

                    //counterPartyOt.setValue("");
                    if(selectedRowNum!=-1) {


                        String componentIDTaskNumber = "pt1:t1:"+selectedRowNum+":it71::content";
                        System.out.println("----- componentIDTaskNumber ----- "+componentIDTaskNumber+", selectedTaskNumber : "+"");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                        String myJavaScriptCode = "document.getElementById('"+componentIDTaskNumber+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode );

                    }
                }
       //     AdfFacesContext.getCurrentInstance().addPartialTarget(lineItemsTable);
      //      System.out.println("table refreshed********************");

            // }
            }
            else{
            if(selectedRowNum!=-1) {

                String componentIDTaskNumber = "pt1:t1:"+selectedRowNum+":it71::content";
                System.out.println("----- componentIDTaskNumber ----- "+componentIDTaskNumber+", selectedTaskNo : "+"");

                FacesContext fctx = FacesContext.getCurrentInstance();
                ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                String myJavaScriptCode = "document.getElementById('"+componentIDTaskNumber+"').value = '"+""+"'";
                erks.addScript(fctx, myJavaScriptCode );

            }
            }



        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateTaskNo");
    }


    public void openTaskNoPopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start openTaskNoPopup");

        if(orgIdIt.getValue()==null || (orgIdIt.getValue()!=null && orgIdIt.getValue().toString().equals("")  )){
                    System.out.println("Setting orgId value on submit click as it is coming null ::: ");

                    String orgId = getOrgIdFinal();
                    orgIdIt.setValue(orgId);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
                    System.out.println("Value setted in org Id i/p :::"+orgIdIt.getValue());
                    //Added on 24th JAn
                    AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
                }
        String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);
        try {
            String enteredTaskNo=null;
            String enteredProjectId=setProjectIdIt();
            System.out.println("New Project id in openTaskNoPopup :: "+ enteredProjectId);

            /* if(projectIdIt.getValue() != null) {
                enteredProjectId = projectIdIt.getValue().toString();
                System.out.println("projectIdIt.getValue(): "+enteredProjectId);
            } */

            if(taskNoIT.getValue() != null) {
                enteredTaskNo = taskNoIT.getValue().toString();
                System.out.println("taskNoIT.getValue(): "+enteredTaskNo);
            }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaskNumberVO1Iterator");
                ViewObjectImpl taskNumberVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = taskNumberVO.getViewCriteria("TaskNumberVOCriteria");
                taskNumberVO.applyViewCriteria(vc);
                taskNumberVO.setNamedWhereClauseParam("bindprojectId", enteredProjectId);
                taskNumberVO.setNamedWhereClauseParam("bindTaskNo", enteredTaskNo);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(taskNumberVO.getQuery());
                taskNumberVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(taskDtlTable);

            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            p4.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openTaskNoPopup");
    }
    public String setProjectIdIt() {
        // Add event code here...
        System.out.println("Start setProjectIdIt");
        String selectedProjNo = null;
        String projectId = null;
        String enteredOrgIdIt=null;
        if(orgIdIt.getValue() != null) {
            enteredOrgIdIt = orgIdIt.getValue().toString();
            System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
        }
        /* RowKeySet rks = lineItemsTable.getSelectedRowKeys();
        Iterator lineItemsTableIter = rks.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("LineItemDetailsEOView1Iterator");
        RowSetIterator empRSIter=null;
        try{
            empRSIter = lineItemIter.getRowSetIterator();
        while(lineItemsTableIter.hasNext()){
           Key key = (Key)((List)lineItemsTableIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println("currentRow.getAttribute(\"ProjectNo\") :::  "+currentRow.getAttribute("ProjectNo"));
           selectedProjNo = currentRow.getAttribute("ProjectNo")==null?"":currentRow.getAttribute("ProjectNo").toString().trim();
        }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                } */
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject lineItemVO=     lineItemIter.getViewObject();
        System.out.println("RowCount::"+lineItemVO.getEstimatedRowCount());
       System.out.println("lineItemVO.getCurrentRow().getAttribute(\"ProjectNo\")"+lineItemVO.getCurrentRow().getAttribute("ProjectNo"));


        /* ********************* */

        RowSetIterator rsi=null;
        try{
            rsi = lineItemVO.createRowSetIterator(null);
        while (rsi.next() != null) {
            Row lineItemRow = rsi.getCurrentRow();
            System.out.println("ProjectNo ::"+lineItemRow.getAttribute("ProjectNo"));
            /*10thSept*/
            //selectedProjNo=lineItemRow.getAttribute("ProjectNo")!=null ?lineItemRow.getAttribute("ProjectNo").toString() :AdfFacesContext.getCurrentInstance().getPageFlowScope().get("currentProjectId").toString();


            selectedProjNo =lineItemVO.getCurrentRow().getAttribute("ProjectNo")!=null ?lineItemVO.getCurrentRow().getAttribute("ProjectNo").toString() :AdfFacesContext.getCurrentInstance().getPageFlowScope().get("currentProjectId").toString();
            System.out.println("Within While ProjectNo"+selectedProjNo);

        }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
         finally{
                     if(rsi!=null) {
                         try {
                             rsi.closeRowSetIterator();
                         } catch(Exception ex) {
                             ex.printStackTrace();

                     }
                     }
                 }
        /* ************** */
        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ProjectNumberVO1Iterator");
        ViewObjectImpl projectNumberVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
        //ViewCriteria vc = projectNumberVO.getViewCriteria("ProjectNumberVOCriteria1");
        ViewCriteria vc = projectNumberVO.getViewCriteria("ProjectNumberVOCriteria");

        projectNumberVO.applyViewCriteria(vc);
        projectNumberVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
        projectNumberVO.setNamedWhereClauseParam("bindProjectNo", selectedProjNo);
        projectNumberVO.executeQuery();
//        System.out.println("Get SQL  ::: "+ projectNumberVO.getQuery()   );
        System.out.println("Get SQLenteredOrgIdIt  ::: "+ enteredOrgIdIt   );
        System.out.println("Get bindProjectNo  ::: "+ selectedProjNo   );
        System.out.println("row count ::: "+ projectNumberVO.getEstimatedRowCount());
        if(projectNumberVO.getEstimatedRowCount() > 0){
//            Row row = projectNumberVO.getCurrentRow();
            // 02-12-2022 Replace getCurrentRow() to first()
            Row row = projectNumberVO.first();
            projectId = row.getAttribute("ProjectId") == null ? null : row.getAttribute("ProjectId").toString().trim();

        }
        System.out.println("project id in setProjectIdIt :: "+ projectId);
        System.out.println("End setProjectIdIt");
        return projectId;


        //implications to be checked
     // return AdfFacesContext.getCurrentInstance().getPageFlowScope().get("currentProjectId").toString();
    }


    public void validateProjectNo(ClientEvent clientEvent) {
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));


        System.out.println("Start validateProjectNo");
        //  String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        String clientId =  clientEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        //System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);

        String selectedProjectNo=null;
        String selectedProjectId=null;

        try {
            String enteredProjNo=null;
            String enteredOrgIdIt=null;
            if(orgIdIt.getValue() != null) {
                enteredOrgIdIt = orgIdIt.getValue().toString();
                System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
            }
            else{
                    System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
                }
        //
                    enteredProjNo=(String)parameters.get("submittedValue");
                    System.out.println("ProjNo.getValue(): "+enteredProjNo);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                //System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }

            if(enteredProjNo!=null && !enteredProjNo.equals("") && enteredProjNo!="" && enteredProjNo.trim()!=null && !enteredProjNo.trim().isEmpty() &&
               enteredOrgIdIt!=null && !enteredOrgIdIt.equals("") && enteredOrgIdIt!="" && enteredOrgIdIt.trim()!=null && !enteredOrgIdIt.trim().isEmpty()){

                boolean invalidQuery=true;


                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ProjectNumberVO1Iterator");
             ViewObjectImpl projectNumberValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
               ViewCriteria vc = projectNumberValidateVO.getViewCriteria("ProjectNumberVOCriteria2");
                projectNumberValidateVO.applyViewCriteria(vc);
                projectNumberValidateVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
                projectNumberValidateVO.setNamedWhereClauseParam("bindProjectNo", enteredProjNo);
                //System.out.println("-----------Dynamic Query-----------");
                //System.out.println(projectNumberValidateVO.getQuery());
                projectNumberValidateVO.executeQuery();
//                while(projectNumberValidateVO.hasNext()){
//                        Row row = projectNumberValidateVO.next();
                    // 02-12-2022 Replace next() to first()
                    if (projectNumberValidateVO.getEstimatedRowCount()>0){
                    Row row = projectNumberValidateVO.first();
                    if(row.getAttribute("ProjectNumber") != null && row.getAttribute("ProjectId") != null){
                    System.out.println(row.getAttribute("ProjectNumber"));
                     selectedProjectNo=row.getAttribute("ProjectNumber").toString();
                       // counterPartyIt.setValue(selectedProjNo);

                        System.out.println(row.getAttribute("ProjectId"));
                         selectedProjectId=row.getAttribute("ProjectId").toString();
                         //   counterPartyIt.setValue(selectedCounterParty);
                         if(selectedRowNum!=-1) {


                             String componentIDProjectNo = "pt1:t1:"+selectedRowNum+":it73::content";
                             System.out.println("----- componentIDPoNumber ----- "+componentIDProjectNo+", selectedPONumber : "+selectedProjectNo);

                             String componentIDProjectId = "pt1:t1:"+selectedRowNum+":it88::content";
                             System.out.println("----- componentIDProjectNo ----- "+componentIDProjectId+", selectedProjectId : "+selectedProjectId);

                             FacesContext fctx = FacesContext.getCurrentInstance();
                             ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                             String myJavaScriptCode = "document.getElementById('"+componentIDProjectNo+"').value = '"+selectedProjectNo+"'";
                             String myJavaScriptCode1 = "document.getElementById('"+componentIDProjectId+"').value = '"+selectedProjectId+"'";


                             erks.addScript(fctx, myJavaScriptCode );
                             erks.addScript(fctx, myJavaScriptCode1 );

                         }
                    }
                    else{

                           System.out.println("Invalid Project number");
                           String vallMsg="Please Enter a valid Project Number";
                           this.validationErrorMessage.setValue(vallMsg);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);




                            if(selectedRowNum!=-1) {


                                String componentIDProjectNo = "pt1:t1:"+selectedRowNum+":it73::content";
                                System.out.println("----- componentIDPoNumber ----- "+componentIDProjectNo+", selectedPONumber : "+"");

                                String componentIDProjectId = "pt1:t1:"+selectedRowNum+":it88::content";
                                System.out.println("----- componentIDProjectNo ----- "+componentIDProjectId+", selectedProjectId : "+"");

                                FacesContext fctx = FacesContext.getCurrentInstance();
                                ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                                String myJavaScriptCode = "document.getElementById('"+componentIDProjectNo+"').value = '"+""+"'";
                                String myJavaScriptCode1 = "document.getElementById('"+componentIDProjectId+"').value = '"+""+"'";


                                erks.addScript(fctx, myJavaScriptCode );
                                erks.addScript(fctx, myJavaScriptCode1 );

                            }
                            //counterPartyIt.setValue("");
                        }

                    invalidQuery=false;
                }
                    if(invalidQuery)
                    {
                        System.out.println("Executing"+invalidQuery);
                           /* FacesMessage Message =
                                new FacesMessage("Please Enter a valid Counter Party");
                            Message.setSeverity(FacesMessage.SEVERITY_ERROR);
                            FacesContext fc = FacesContext.getCurrentInstance();
                            fc.addMessage(null, Message);*/
                           System.out.println("Invalid Project number");
                           String vallMsg="Please Enter a valid Project Number";
                           this.validationErrorMessage.setValue(vallMsg);
                           AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                           RichPopup.PopupHints hints = new RichPopup.PopupHints();
                           validationErrorPopup.show(hints);



                            //counterPartyOt.setValue("");
                            if(selectedRowNum!=-1) {


                                String componentIDProjectNo = "pt1:t1:"+selectedRowNum+":it73::content";
                                System.out.println("----- componentIDPoNumber ----- "+componentIDProjectNo+", selectedPONumber : "+"");

                                String componentIDProjectId = "pt1:t1:"+selectedRowNum+":it88::content";
                                System.out.println("----- componentIDProjectNo ----- "+componentIDProjectId+", selectedProjectId : "+"");

                                FacesContext fctx = FacesContext.getCurrentInstance();
                                ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                                String myJavaScriptCode = "document.getElementById('"+componentIDProjectNo+"').value = '"+""+"'";
                                String myJavaScriptCode1 = "document.getElementById('"+componentIDProjectId+"').value = '"+""+"'";


                                erks.addScript(fctx, myJavaScriptCode );
                                erks.addScript(fctx, myJavaScriptCode1 );

                            }
                        }
             //   AdfFacesContext.getCurrentInstance().addPartialTarget(lineItemsTable);
             //   System.out.println("table refreshed********************");

           // }
            }
            else{
                    if(selectedRowNum!=-1) {


                        String componentIDProjectId = "pt1:t1:"+selectedRowNum+":it88::content";
                        System.out.println("----- componentIDProjectNo ----- "+componentIDProjectId+", selectedProjectId : "+"");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

                        String myJavaScriptCode1 = "document.getElementById('"+componentIDProjectId+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode1 );


                    }
                }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateProjectNo");
    }
    public void cancelTaskNoPopUp(ActionEvent actionEvent) {
    // Add event code here...
        System.out.println("Start: cancelTaskNoPopUp");
        taskNoPopupIt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(taskNoPopupIt);
        p4.hide();

    System.out.println("End: cancelTaskNoPopUp");
    }
    public void selectTaskNoPopUp(ActionEvent actionEvent) {
        //TO KD
        System.out.println("Start: selectTaskNoPopUp");



        String selectedTaskNo="";
        String selectedTaskId="";
        //RowKeySet selectedTaskNum = projDtlTable.getSelectedRowKeys();    wrong binding
        RowKeySet selectedTaskNum = taskDtlTable.getSelectedRowKeys();
        Iterator selectedTaskIter = selectedTaskNum.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("TaskNumberVO1Iterator");
        RowSetIterator empRSIter=null;
        try{
            empRSIter = empIter.getRowSetIterator();
        while(selectedTaskIter.hasNext()){
           Key key = (Key)((List)selectedTaskIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println(currentRow.getAttribute("TaskNumber"));
             selectedTaskNo=currentRow.getAttribute("TaskNumber").toString();
             System.out.println(currentRow.getAttribute("TaskId"));
               selectedTaskId=currentRow.getAttribute("TaskId").toString();

         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
            //poNumPopupIt.setValue(selectedPONumber);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }


             if(selectedRowNum!=-1) {


                 String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it71::content";
                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedTaskNo);

                 String componentIDTaskIdNumber = "pt1:t1:"+selectedRowNum+":it85::content";
                 System.out.println("----- componentIDTaskIdNumber ----- "+componentIDTaskIdNumber+", selectedTaskId : "+selectedTaskId);

                 FacesContext fctx = FacesContext.getCurrentInstance();
                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                 String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedTaskNo+"'";
                 String myJavaScriptCode1 = "document.getElementById('"+componentIDTaskIdNumber+"').value = '"+selectedTaskId+"'";
                 String myJavaScriptCode2 = "document.getElementById('"+componentIDPoNumber+"').blur()";
                 String myJavaScriptCode3 = "document.getElementById('"+componentIDTaskIdNumber+"').blur()";
                 erks.addScript(fctx, myJavaScriptCode );
                 erks.addScript(fctx, myJavaScriptCode1 );
                 erks.addScript(fctx, myJavaScriptCode2);
                 erks.addScript(fctx, myJavaScriptCode3);
             }

        //AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
        taskNoPopupIt.setValue("");
        System.out.println("selectedTaskNo selectedTaskNo selectedTaskNo selectedTaskId ::"+selectedTaskId);
       // AdfFacesContext.getCurrentInstance().getPageFlowScope().put("selected_taskNo",selectedTaskId);
        AdfFacesContext.getCurrentInstance().addPartialTarget(taskNoPopupIt);
        p4.hide();
        System.out.println("End selectTaskNoPopUp");
    }

    public void onTaskNoPopUpGoClick(ActionEvent actionEvent) {
        System.out.println("Start onTaskNoPopUpGoClick");
        String enteredTaskNo = null;
        String enteredProjectId=null;
        try {
            if(taskNoPopupIt.getValue() != null) {
                enteredTaskNo = taskNoPopupIt.getValue().toString();
                System.out.println("taskNoPopupIt.getValue(): "+enteredTaskNo);
            }
            enteredProjectId=setProjectIdIt();
                        System.out.println("New Project id in openTaskNoPopup :: "+ enteredProjectId);

    //            if(projectIdIt.getValue() != null) {
    //                enteredProjectId = projectIdIt.getValue().toString();
    //                System.out.println("projectIdIt.getValue(): "+enteredProjectId);
    //            }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("TaskNumberVO1Iterator");
                ViewObjectImpl taskNumberVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = taskNumberVO.getViewCriteria("TaskNumberVOCriteria");
                taskNumberVO.applyViewCriteria(vc);
                taskNumberVO.setNamedWhereClauseParam("bindTaskNo", enteredTaskNo);
            taskNumberVO.setNamedWhereClauseParam("bindprojectId", enteredProjectId);
                //System.out.println("-----------Dynamic Query-----------");
                //System.out.println(taskNumberVO.getQuery());
                taskNumberVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(taskDtlTable);

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onTaskNoPopUpGoClick");
    }



    public void validateExpenditureOrg(ClientEvent clientEvent) {
        // Add event code here...
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        System.out.println("Start validateExpenditureOrg");
      //  String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
      String clientId = clientEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);

        try {
            String selectedExpenditureOrg=null;
           String enteredProjectId=setProjectIdIt();
          //  String enteredProjectId=null;
         //   System.out.println("New Project id in openTaskNoPopup :: "+ enteredProjectId);
         String enteredOrgIdIt=null;
         if(orgIdIt.getValue() != null) {
             enteredOrgIdIt = orgIdIt.getValue().toString();
             System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
         }
         else{
                 System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
             }
            String enteredExpOrg=null;
          //  if(projectIdIt.getValue() != null) {
             //   enteredProjectId = projectIdIt.getValue().toString();
                System.out.println("projectIdIt.getValue(): "+enteredProjectId);
          //  }

            enteredExpOrg=(String)parameters.get("submittedValue");
            System.out.println("ExpenditureOrg.getValue(): "+enteredExpOrg);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
            selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
            System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }

            if(enteredExpOrg!=null && !enteredExpOrg.equals("") && enteredExpOrg!="" && enteredExpOrg.trim()!=null && !enteredExpOrg.trim().isEmpty() &&
            enteredOrgIdIt!=null && !enteredOrgIdIt.equals("") && enteredOrgIdIt!="" && enteredOrgIdIt.trim()!=null && !enteredOrgIdIt.trim().isEmpty()){

              boolean invalidQuery=true;
            System.out.println("orgid added"+enteredOrgIdIt);
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureOrgVO1Iterator");
                ViewObjectImpl expOrgValidateVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expOrgValidateVO.getViewCriteria("ExpenditureOrgVOCriteria1");
                expOrgValidateVO.applyViewCriteria(vc);
                expOrgValidateVO.setNamedWhereClauseParam("bind_expOrg", enteredExpOrg);
                expOrgValidateVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
                //System.out.println("-----------Dynamic Query-----------");
                //System.out.println(expOrgValidateVO.getQuery());
                expOrgValidateVO.executeQuery();
             int noOfRows= expOrgValidateVO.getRowCount();
             System.out.println(" No of Rows"+noOfRows);
             if(noOfRows==1)
             {
//                     Row row = expOrgValidateVO.next();
                     // 12-12-2022 Change next() to getCurrentRow()
                     Row row = expOrgValidateVO.getCurrentRow();
                     if(row.getAttribute("ExpenditureOrg") != null){
                     System.out.println(row.getAttribute("ExpenditureOrg"));
                     selectedExpenditureOrg=row.getAttribute("ExpenditureOrg").toString();

                      if(selectedRowNum!=-1) {


                          String componentIDExpenditureOrg = "pt1:t1:"+selectedRowNum+":it72::content";
                          System.out.println("----- componentIDExpenditureOrg ----- "+componentIDExpenditureOrg+", selectedExpenditureOrg : "+selectedExpenditureOrg);

                          FacesContext fctx = FacesContext.getCurrentInstance();
                          ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                          String myJavaScriptCode = "document.getElementById('"+componentIDExpenditureOrg+"').value = '"+selectedExpenditureOrg+"'";
                          erks.addScript(fctx, myJavaScriptCode );

                      }
                     }
                     else{

                             System.out.println("Invalid Expenditure Org");
                             String vallMsg="Please Enter a valid Expenditure Org";
                            this.validationErrorMessage.setValue(vallMsg);
                            AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                            RichPopup.PopupHints hints = new RichPopup.PopupHints();
                            validationErrorPopup.show(hints);

                             if(selectedRowNum!=-1) {

                                 String componentIDExpenditureOrg = "pt1:t1:"+selectedRowNum+":it72::content";
                                 System.out.println("----- componentIDExpenditureOrg ----- "+componentIDExpenditureOrg+", selectedExpenditureOrg : "+"");

                                 FacesContext fctx = FacesContext.getCurrentInstance();
                                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                                 String myJavaScriptCode = "document.getElementById('"+componentIDExpenditureOrg+"').value = '"+""+"'";
                                 erks.addScript(fctx, myJavaScriptCode );

                             }

                         }
                     invalidQuery=false;
                 }
             else
             {

                 System.out.println("Inside else");
                 System.out.println("org id added"+enteredOrgIdIt);
                     DCBindingContainer dcBindingContainer1 = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                     DCIteratorBinding dcIteratorBinding1 = dcBindingContainer1.findIteratorBinding("ExpenditureOrgVO1Iterator");
                     ViewObjectImpl expOrgValidatePopupVO = (ViewObjectImpl)dcIteratorBinding1.getViewObject();
                     ViewCriteria vc1 = expOrgValidatePopupVO.getViewCriteria("ExpenditureOrgVOCriteria");
                     expOrgValidatePopupVO.applyViewCriteria(vc1);
                     expOrgValidatePopupVO.setNamedWhereClauseParam("bind_expOrg", enteredExpOrg);
                     expOrgValidatePopupVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
                     //System.out.println("-----------Dynamic Query-----------");
                     //System.out.println(expOrgValidatePopupVO.getQuery());
                     expOrgValidatePopupVO.executeQuery();
                 int popupRows=expOrgValidatePopupVO.getRowCount();
                 if(popupRows>=1)
                 {
                     invalidQuery=false;
                     AdfFacesContext.getCurrentInstance().addPartialTarget(expOrgTable);

                     RichPopup.PopupHints hints = new RichPopup.PopupHints();
                     p5.show(hints);
                 }

                 }
        /*    while(expOrgValidateVO.hasNext()){
                    Row row = expOrgValidateVO.next();
                if(row.getAttribute("ExpenditureOrg") != null){
                System.out.println(row.getAttribute("ExpenditureOrg"));
                 selectedExpenditureOrg=row.getAttribute("ExpenditureOrg").toString();

                     if(selectedRowNum!=-1) {


                         String componentIDExpenditureOrg = "pt1:t1:"+selectedRowNum+":it20::content";
                         System.out.println("----- componentIDExpenditureOrg ----- "+componentIDExpenditureOrg+", selectedExpenditureOrg : "+selectedExpenditureOrg);

                         FacesContext fctx = FacesContext.getCurrentInstance();
                         ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                         String myJavaScriptCode = "document.getElementById('"+componentIDExpenditureOrg+"').value = '"+selectedExpenditureOrg+"'";
                         erks.addScript(fctx, myJavaScriptCode );

                     }
                }
                else{

                        System.out.println("Invalid Expenditure Org");
                        String vallMsg="Please Enter a valid Expenditure Org";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);

                        if(selectedRowNum!=-1) {

                            String componentIDExpenditureOrg = "pt1:t1:"+selectedRowNum+":it20::content";
                            System.out.println("----- componentIDExpenditureOrg ----- "+componentIDExpenditureOrg+", selectedExpenditureOrg : "+"");

                            FacesContext fctx = FacesContext.getCurrentInstance();
                            ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                            String myJavaScriptCode = "document.getElementById('"+componentIDExpenditureOrg+"').value = '"+""+"'";
                            erks.addScript(fctx, myJavaScriptCode );

                        }

                    }

                invalidQuery=false;
            }*/
            if(invalidQuery)
            {
                System.out.println("Executing"+invalidQuery);

                   System.out.println("Invalid Expenditure Org");
                   String vallMsg="Please Enter a valid Expenditure Org";
                   this.validationErrorMessage.setValue(vallMsg);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                   RichPopup.PopupHints hints = new RichPopup.PopupHints();
                   validationErrorPopup.show(hints);

                    //counterPartyOt.setValue("");
                    if(selectedRowNum!=-1) {


                        String componentIDExpenditureOrg = "pt1:t1:"+selectedRowNum+":it72::content";
                        System.out.println("----- componentIDExpenditureOrg ----- "+componentIDExpenditureOrg+", selectedExpenditureOrg : "+"");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                        String myJavaScriptCode = "document.getElementById('"+componentIDExpenditureOrg+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode );

                    }
                }
         //   AdfFacesContext.getCurrentInstance().addPartialTarget(lineItemsTable);
         //   System.out.println("table refreshed********************");

            // }
            }
            else{
            if(selectedRowNum!=-1) {

                String componentIDExpenditureOrg = "pt1:t1:"+selectedRowNum+":it72::content";
                System.out.println("----- componentIDExpenditureOrg ----- "+componentIDExpenditureOrg+", selectedExpenditureOrg : "+"");

                FacesContext fctx = FacesContext.getCurrentInstance();
                ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                String myJavaScriptCode = "document.getElementById('"+componentIDExpenditureOrg+"').value = '"+""+"'";
                erks.addScript(fctx, myJavaScriptCode );

            }
            }



        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateExpenditureOrg");
    }

    public void openExpenditureOrgPopup(ActionEvent actionEvent) {

        // Add event code here...
        System.out.println("Start openExpenditureOrgPopup");

        if(orgIdIt.getValue()==null || (orgIdIt.getValue()!=null && orgIdIt.getValue().toString().equals("")  )){
                    System.out.println("Setting orgId value on submit click as it is coming null ::: ");

                    String orgId = getOrgIdFinal();
                    orgIdIt.setValue(orgId);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
                    System.out.println("Value setted in org Id i/p :::"+orgIdIt.getValue());
                    //Added on 24th JAn
                    AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
                }



        String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);
        try {
            String enteredExpOrg=null;
            if(expOrgIT.getValue() != null) {
                enteredExpOrg = expOrgIT.getValue().toString();
                enteredExpOrg = enteredExpOrg + "%";
                System.out.println("enteredExpOrg: "+enteredExpOrg);
            }
            String enteredOrgIdIt=null;
                   if(orgIdIt.getValue() != null) {
                       enteredOrgIdIt = orgIdIt.getValue().toString();
                       System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
                   }
                   else{
                           System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
                       }

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureOrgVO1Iterator");
                ViewObjectImpl expOrgVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expOrgVO.getViewCriteria("ExpenditureOrgVOCriteria");
                expOrgVO.applyViewCriteria(vc);
                expOrgVO.setNamedWhereClauseParam("bind_expOrg", enteredExpOrg);
                 expOrgVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
               // System.out.println("-----------Dynamic Query-----------");
               // System.out.println(expOrgVO.getQuery());
                expOrgVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(expOrgTable);

            RichPopup.PopupHints hints = new RichPopup.PopupHints();
            p5.show(hints);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End openExpenditureOrgPopup");


    }
    public void cancelExpenditureOrgPopup(ActionEvent actionEvent) {
    // Add event code here...
        System.out.println("Start: cancelExpenditureOrgPopup");
        expOrgPopUpIt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(expOrgPopUpIt);
        p5.hide();

    System.out.println("End: cancelExpenditureOrgPopup");
    }
    public void selectExpenditureOrgPopup(ActionEvent actionEvent) {
        //TO KD
        System.out.println("Start: selectExpenditureOrgPopup");



        String selectedExpenditureOrg="";

        RowKeySet selectedExpenditureOrgUnit = expOrgTable.getSelectedRowKeys();
        Iterator selectedExpenditureIter = selectedExpenditureOrgUnit.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("ExpenditureOrgVO1Iterator");
        RowSetIterator empRSIter=null;
        try{
            empRSIter = empIter.getRowSetIterator();
        while(selectedExpenditureIter.hasNext()){
           Key key = (Key)((List)selectedExpenditureIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println(currentRow.getAttribute("ExpenditureOrg"));
             selectedExpenditureOrg=currentRow.getAttribute("ExpenditureOrg").toString();

         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }

            //poNumPopupIt.setValue(selectedPONumber);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }


             if(selectedRowNum!=-1) {


                 String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it72::content";
                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedPONumber : "+selectedExpenditureOrg);

                 FacesContext fctx = FacesContext.getCurrentInstance();
                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                 String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedExpenditureOrg+"'";
                 erks.addScript(fctx, myJavaScriptCode );
             }
       AdfFacesContext.getCurrentInstance().addPartialTarget(pgInvoiceDets);
        expOrgPopUpIt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(expOrgPopUpIt);
        p5.hide();
        System.out.println("End selectExpenditureOrgPopup");
    }

    public void onExpOrgGoClick(ActionEvent actionEvent) {
        System.out.println("Start onExpOrgGoClick");
        String enteredExpOrg = null;
        try {
            if(expOrgPopUpIt.getValue() != null) {
                enteredExpOrg = expOrgPopUpIt.getValue().toString();
                enteredExpOrg = enteredExpOrg + "%";
                System.out.println("enteredExpOrg: "+enteredExpOrg);
            }
            String enteredOrgIdIt=null;
                  if(orgIdIt.getValue() != null) {
                      enteredOrgIdIt = orgIdIt.getValue().toString();
                      System.out.println("orgIdIt.getValue(): "+enteredOrgIdIt);
                  }
                  else{
                          System.out.println("orgIdIt.getValue(): "+orgIdIt.getValue());
                      }

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureOrgVO1Iterator");
                ViewObjectImpl expOrgVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expOrgVO.getViewCriteria("ExpenditureOrgVOCriteria");
                expOrgVO.applyViewCriteria(vc);
                expOrgVO.setNamedWhereClauseParam("bind_expOrg", enteredExpOrg);
                expOrgVO.setNamedWhereClauseParam("bindOrgID", enteredOrgIdIt);
               // System.out.println("-----------Dynamic Query-----------");
                //System.out.println(expOrgVO.getQuery());
                expOrgVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(expOrgTable);
           // }
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onExpOrgGoClick");
    }

    public String validateCreditNote(){
        String flag = null;
        //Document type
        String documentType = docTypeSoc.getValue()!=null ? docTypeSoc.getValue().toString():null;
        System.out.println("----- Selected value for document type1 : "+documentType);
        double taxTotal = Double.MIN_VALUE;
        if(taxTotIt.getValue()!=null) {
            taxTotal = ((oracle.jbo.domain.Number)taxTotIt.getValue()).getValue();
            System.out.println("**********taxTotal**********"+taxTotal);
        }
        double headerTotal = Double.MIN_VALUE;
        if(headerTotIt.getValue()!=null) {
            headerTotal = ((oracle.jbo.domain.Number)headerTotIt.getValue()).getValue();
            System.out.println("**********headerTotal**********"+headerTotal);

        }
        double lineTotal = Double.MIN_VALUE;
        if(lineIdIt.getValue()!=null) {
            lineTotal = Double.parseDouble((String)lineIdIt.getValue());
            System.out.println("**********lineTotal**********"+lineTotal);
        }
        String reason = null;

            if(documentType.equalsIgnoreCase("Credit Note") && (headerTotal >= 0.0 || lineTotal >= 0.0 || taxTotal > 0.0)){
                System.out.println("inside if credit validation ....");
                flag = "credit";
            }
            else if(documentType.equalsIgnoreCase("Invoice") && (headerTotal < 0.0 || lineTotal < 0.0 || taxTotal < 0.0)){
                System.out.println("inside if invoice validation ....");
                flag = "invoice";
            }

        System.out.println("flag value in validateCreditNote() "+ flag);
        return flag;
    }
    boolean checkDuplicateRecordSP(String invNum, String siteID,
                                 String supplierId,
                                 String invoiceDate,
                                 String headerTotal,String invoiceId){

        boolean isDuplicate = false ;

        System.out.println("invNum ::checkDuplicateRecordSP "+invNum);
        System.out.println("invNum ::checkDuplicateRecordSP After trim "+(invNum !=null ? invNum.trim():null));
        System.out.println(invNum+" checkDuplicateRecordSP :: siteID "+siteID);
        System.out.println(invNum+" checkDuplicateRecordSP :: supplierId "+supplierId);
        System.out.println(invNum+" checkDuplicateRecordSP :: invoiceDate "+invoiceDate);
        System.out.println(invNum+" checkDuplicateRecordSP :: headerTotal "+headerTotal);
        System.out.println(invNum+" checkDuplicateRecordSP :: invoiceId "+invoiceId);

        DCBindingContainer bindings = getBindings();
       // System.out.println("After getting binding");
        DCIteratorBinding dcIteratorBindings =
            bindings.findIteratorBinding("overseas_dup_chk_VO1Iterator");
       // System.out.println("After finding iterator");
        ViewObjectImpl duplicateCheck1VO =(ViewObjectImpl)dcIteratorBindings.getViewObject();
        duplicateCheck1VO.setNamedWhereClauseParam("bind_invoice_no",invNum !=null ? invNum.trim():null);
        duplicateCheck1VO.setNamedWhereClauseParam("bind_supplier_id",supplierId !=null ? supplierId.trim():null);
        duplicateCheck1VO.setNamedWhereClauseParam("bind_site_id", siteID !=null ? siteID.trim():null);
        duplicateCheck1VO.setNamedWhereClauseParam("bind_invoice_dt",invoiceDate);
        duplicateCheck1VO.setNamedWhereClauseParam("bind_invoice_amt",headerTotal);
        duplicateCheck1VO.executeQuery();
        System.out.println("After execute Query  "+duplicateCheck1VO.getEstimatedRowCount());
        String flagValue=null;
        while (duplicateCheck1VO.hasNext()) {
               Row row = duplicateCheck1VO.next();
            // Get the next row in the result set.
            flagValue=row.getAttribute("Flag")!=null? row.getAttribute("Flag").toString():null;
            System.out.println(invNum+" flagValue :: "+ flagValue);
        }
       /* int i=Integer.parseInt(flagValue);
        if(i==1){
            System.out.println(invNum+" Inside if numeric :: "+ i);
        }else{
            System.out.println(invNum+" Inside else numeric :: "+ i);
        }*/
        if("1".equalsIgnoreCase(flagValue)){
            System.out.println(invNum+" Inside if char :: :: "+ flagValue);
            String validationErrorMessage =
                "Invoice already processed or pending in BPM with same set of information against the supplier and site.";
            RichPopup.PopupHints hints1 =
                new RichPopup.PopupHints();
            validationErrorPopup.show(hints1);
            this.validationErrorMessage.setValue(validationErrorMessage);
            //return true;
            isDuplicate=true;
        }
        System.out.println(invNum+" checkDuplicateRecordSP call End  ");
        return isDuplicate;
    }
    boolean checkDuplicateRecord(String invNum, String siteID,
                                 String supplierName,
                                 oracle.jbo.domain.Date invoiceDate,
                                 String headerTotal,String invoiceId, String actionTaken) {

        boolean skipCheckingLogicFlag = false;

        System.out.println("----- checkDuplicateRecord ----- START --invNum : "+invNum+" invoiceId: "+invoiceId);
        System.out.println("----- actionTaken : "+actionTaken);
        if(actionTaken.equalsIgnoreCase("SAVE")) {
            skipCheckingLogicFlag = false;
        } else {

            String invalidReason = (String)resolveExpression("#{bindings.InvalidReasonId.selectedValue ne ' ' ? bindings.InvalidReasonId.selectedValue.attributeValues[1] : ''}");
            System.out.println("----- Invalid Reason : "+invalidReason);
            if(invalidReason!=null && invalidReason.equals("REJECT")){
                skipCheckingLogicFlag = true;
            } else {
                skipCheckingLogicFlag = false;
            }
        }

        if(skipCheckingLogicFlag) {
            return false;
        }

        RowSetIterator rs = null;
        try {
            System.out.println("invNum" + invNum);
            System.out.println("siteID" + siteID);
            System.out.println("SupplierName" + supplierName);
            System.out.println("invoiceDate" + invoiceDate);
            System.out.println("headerTotal" + headerTotal);
            System.out.println("invoiceId" + invoiceId);
            DCBindingContainer bindings = getBindings();
            System.out.println("After getting binding");
            DCIteratorBinding dcIteratorBindings =
            bindings.findIteratorBinding("DuplicateRecordCheckVO1Iterator");
            System.out.println("After finding iterator");
            ViewObjectImpl duplicateRecordVO =
                (ViewObjectImpl)dcIteratorBindings.getViewObject();
            System.out.println("duplicateRecordVO b4 execute rowCount" +
                               duplicateRecordVO.getEstimatedRowCount());
    //            ViewCriteria vc =
    //                headerVO.getViewCriteria("HeaderDetailsEOViewCriteriaWithInvNo");
    //            headerVO.applyViewCriteria(vc);
            duplicateRecordVO.setNamedWhereClauseParam("bv_invoiceNumber", invNum);
            duplicateRecordVO.executeQuery();
            System.out.println("duplicateRecordVO rowCount" +
                               duplicateRecordVO.getEstimatedRowCount());
            rs = duplicateRecordVO.createRowSetIterator(null);



            ArrayList<String> exclusionList = new ArrayList<String>();
            RowSetIterator rsExclusionList = null;
            try {
                ViewObjectImpl DuplicateInvoiceExclusionStatusListVO =
                    (ViewObjectImpl)(bindings.findIteratorBinding("DuplicateInvoiceExclusionStatusListVO1Iterator1Iterator").getViewObject());
                DuplicateInvoiceExclusionStatusListVO.executeQuery();
                System.out.println("----- DuplicateInvoiceExclusionStatusListVO rowCount : " + DuplicateInvoiceExclusionStatusListVO.getEstimatedRowCount());
                rsExclusionList = DuplicateInvoiceExclusionStatusListVO.createRowSetIterator(null);
                while (rsExclusionList.hasNext()) {
                    Row r = rsExclusionList.next();
                    String internalStatus = (String)r.getAttribute("InternalStatus");
                    System.out.println("----- \tinternalStatus : "+internalStatus);
                    exclusionList.add(internalStatus);
                }

            } catch(Exception e) {
                e.printStackTrace();
            } finally {
                if (rsExclusionList != null)
                    rsExclusionList.closeRowSetIterator();
            }
            exclusionList.add("SUBMITTED");
            System.out.println("----- : "+exclusionList);



            while (rs.hasNext()) {
                Row r = rs.next();
                System.out.println("r - " + r);
                System.out.println("Attribute InvoiceNumber - " +
                                   r.getAttribute("InvoiceNumber"));
                System.out.println("InternalStatus" +
                                   r.getAttribute("InternalStatus"));
                System.out.println("invNum" + r.getAttribute("InvoiceNumber"));
                System.out.println("siteID" + r.getAttribute("SiteId"));
                System.out.println("SupplierName" +
                                   r.getAttribute("SupplierName"));
                System.out.println("invoiceDate" +
                                   r.getAttribute("InvoiceDate"));
                java.sql.Date invoiceSqlDate =invoiceDate.dateValue();
                java.sql.Date invoiceSqlDateFromDB=((oracle.jbo.domain.Date)r.getAttribute("InvoiceDate")).dateValue();
                System.out.println("headerTotal" + r.getAttribute("InvoiceTotAmount"));
                System.out.println("InvoiceId" + r.getAttribute("InvoiceId"));



                if(!(r.getAttribute("InvoiceId").equals(invoiceId))){
                     if (r.getAttribute("InvoiceNumber").equals(invNum) &&
                        r.getAttribute("SiteId").equals(siteID) &&
                        r.getAttribute("SupplierName").equals(supplierName) &&
                        invoiceSqlDateFromDB.equals(invoiceSqlDate) &&
                        r.getAttribute("InvoiceTotAmount").equals(headerTotal)) {
                        //INVOICE IN AP EXCEPTIONS
                        // INVOICE PENDING FOR CERTIFICATION
                        // INVOICE IN APINTERFACE

                        String internalStatus = (String)r.getAttribute("InternalStatus");
                        System.out.println("internalStatus  ap_overseas_table ----------------"+internalStatus);
                        //if(exclusionList.contains(internalStatus)) { //on 28th jan
                         if(exclusionList.contains("SUBMITTED")) {

                        /*if (r.getAttribute("InternalStatus").equals("INVOICE IN AP EXCEPTIONS") ||
                            r.getAttribute("InternalStatus").equals("INVOICE PENDING FOR CERTIFICATION") ||
                            r.getAttribute("InternalStatus").equals("INVOICE IN AP INTERFACE")) { */

                            System.out.println("Within if block as matched the criteria");
                            String validationErrorMessage =
                                "Invoice already processed or pending in BPM with same set of information against the supplier and site.";
                            RichPopup.PopupHints hints1 =
                                new RichPopup.PopupHints();
                            validationErrorPopup.show(hints1);
                            this.validationErrorMessage.setValue(validationErrorMessage);
                            return true;
                        }
                      }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
            return false;
        } finally {
            if (rs != null)
                rs.closeRowSetIterator();
        }
        return false;
    }

    public DCBindingContainer getBindings(){
        return (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
    }


    public void doSaveOperation(String supName,String siteId,String invNum,String taxRegNum,
                                String poNum,String lineId,String certName,String currency,
                                String invDate,String taxTotal,String headerTotal,String certEmail,
                                String rejReason,String comments,String certComments,
                                String reason,String type,String status,
                                String docType,String invoiceType,String operatingUnit,String invalidReasonType,String invalidReason, Boolean needValidation,String certNo) {
        System.out.println("Start: doSaveOperation");
        BindingContext bindingContext = null;
        BindingContainer bindingContainer = null;
        OperationBinding operationBinding = null;

        BindingContext bpmUpdatebindingContext = null;
        BindingContainer bpmUpdatebindingContainer = null;
        OperationBinding bpmUpdateoperationBinding = null;

        // Store status field value in BPM Status Attribute

       /* if(!(statusSOC.getValue()==null || (statusSOC.getValue()!=null && statusSOC.getValue().equals(""))))
        {

             bpmStatus.setValue(statusSOC.getValue().toString());
             System.out.println("BPM Status :::"+bpmStatus.getValue());
             AdfFacesContext.getCurrentInstance().addPartialTarget(bpmStatus);
        }*/
        System.out.println("----- in save invalidreasontype"+invalidReasonType);
        System.out.println("----- in save invalidreason"+invalidReason);
        try {
            if(!needValidation){
    //                bpmUpdatebindingContext = BindingContext.getCurrent();
    //                bpmUpdatebindingContainer = bpmUpdatebindingContext.getCurrentBindingsEntry();
    //                bpmUpdateoperationBinding = bpmUpdatebindingContainer.getOperationBinding("update");
    //                System.out.println("bpmUpdateoperationBinding :::"+bpmUpdateoperationBinding);
    //                bpmUpdateoperationBinding.execute();

              //  updateTask(); Commented on 24thAugust
            }

            bindingContext = BindingContext.getCurrent();
            bindingContainer = bindingContext.getCurrentBindingsEntry();
            operationBinding = bindingContainer.getOperationBinding("saveAPOperationDetails");
            operationBinding.getParamsMap().put("flag",needValidation);
            operationBinding.getParamsMap().put("invoiceId",ADFContext.getCurrent().getPageFlowScope().get("invoiceId"));
            operationBinding.getParamsMap().put("supName",supName);
            operationBinding.getParamsMap().put("siteId",siteId);
            operationBinding.getParamsMap().put("invNum",invNum);
            operationBinding.getParamsMap().put("taxRegNum",taxRegNum);
            operationBinding.getParamsMap().put("poNum",poNum);
            operationBinding.getParamsMap().put("lineTotal",lineId);
            operationBinding.getParamsMap().put("certName",certName);
            operationBinding.getParamsMap().put("currency",currency);

            operationBinding.getParamsMap().put("invDate",invDate);  //comment this and use below code when needed
         //
         // commented by santha for invoice date null check while rejecting the task

       /*  if(invDate!=null){
         System.out.println("Invoice date is not null "+invDate);
         operationBinding.getParamsMap().put("invDate",invDate);
         }
         else{
             System.out.println("Invoice date is null hence setting the default date as sys date"+ new Date());
             System.out.println("Invoice date is null hence setting the default date as sys date jbo date"+ new Date());
             operationBinding.getParamsMap().put("invDate",new oracle.jbo.domain.Date());

         }*/

            operationBinding.getParamsMap().put("taxTotal",taxTotal);
            operationBinding.getParamsMap().put("headerTotal",headerTotal);
            operationBinding.getParamsMap().put("certEmail",certEmail);

            operationBinding.getParamsMap().put("rejReason",rejReason);
            operationBinding.getParamsMap().put("comments",comments);
            operationBinding.getParamsMap().put("certComments",certComments);

            operationBinding.getParamsMap().put("reason",reason);
            operationBinding.getParamsMap().put("type",type);
            operationBinding.getParamsMap().put("status",status);
            operationBinding.getParamsMap().put("docType",docType);
            operationBinding.getParamsMap().put("invoiceType",invoiceType);
            operationBinding.getParamsMap().put("operatingUnit",operatingUnit);
            operationBinding.getParamsMap().put("invalidReasonType",invalidReasonType);
            operationBinding.getParamsMap().put("invalidReason",invalidReason);
            operationBinding.getParamsMap().put("employeeNo",certNo);
            operationBinding.execute();
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End: doSaveOperation");
    }


    public static String formattedDecimalNumber(double d) {
        String retStr = String.format("%.2f", d);

        if(retStr.endsWith(".00")) {

            retStr = retStr.substring(0, retStr.length()-3);
        }

        return retStr;
    }




    /*public String getXMLPayload() throws ParserConfigurationException {


        StringBuffer requestPayload = new StringBuffer();
                  //  requestPayload.append("<qfeq:QfeqidsOafEmpTabCollection xmlns:qfeq=\"http://xmlns.oracle.com/pcbpel/adapter/db/top/qfeqids_oaf_emp_tab_db\">");
                    requestPayload.append("<ns1:header>");

                BindingContext context1 = BindingUtils.getBindingContext();
                DCBindingContainer bindings1 =
                            (DCBindingContainer)context1.getCurrentBindingsEntry();
                DCIteratorBinding iterator_header;
                RowSetIterator rowSetIterator= null;
                try{
                iterator_header = (DCIteratorBinding)bindings1.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                 rowSetIterator= iterator_header.getViewObject().createRowSetIterator(null);
                while (rowSetIterator.hasNext())
                      {
                    Row r = rowSetIterator.next();
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                    requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");


                }

                }catch(Exception e){
                    e.printStackTrace();

                } finally{
                    if(rowSetIterator
                       !=null){
                           rowSetIterator.closeRowSetIterator();;
                       }

                }



                    requestPayload.append("</ns1:header>");

                    //requestPayload.append("<qfeq:employeeNumber>"+employeenumber+"</qfeq:employeeNumber>");
                    //requestPayload.append("<qfeq:applicationDate>"+currentTime+"</qfeq:applicationDate>");
                   /* requestPayload.append("<qfeq:applicationStatus>"+applicationLaunchStatus+"</qfeq:applicationStatus>");
                    if(createFlag!=null && createFlag.length==1 && createFlag[0]==true) {
                        requestPayload.append("<qfeq:creationDate>"+currentTime+"</qfeq:creationDate>");
                        requestPayload.append("<qfeq:createdBy>-9</qfeq:createdBy>");
                    }*/
                    /*requestPayload.append("<qfeq:lastUpdatedDate>"+currentTime+"</qfeq:lastUpdatedDate>");
                    requestPayload.append("<qfeq:lastUpdatedBy>-9</qfeq:lastUpdatedBy>");
                    requestPayload.append("</qfeq:QfeqidsOafEmpTab>");*/
                    //requestPayload.append("</qfeq:QfeqidsOafEmpTabCollection>");

                   // System.out.println(requestPayload);
                    //disabled on 19th Apr callService(requestPayload.toString());
                    //callService(requestPayload.toString());
                    /*
                                DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
                                DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

                                Document doc = docBuilder.newDocument();
                                Element rootElement = doc.createElement("UserRequest");
                                rootElement.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:ns0", "https://com.user.req");
                                rootElement.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance");
                                doc.appendChild(rootElement);

                                // user element
                                Element user = doc.createElement("User");
                                rootElement.appendChild(user);

                                // userAttributes element
                                Element userAttr = doc.createElement("UserAttributes");
                                rootElement.appendChild(userAttr);


                                // name elements
                                Element name = doc.createElement("Name");
                                name.appendChild(doc.createTextNode("hello"));
                                userAttr.appendChild(name);
                                // value elements
                                Element value = doc.createElement("Value");
                                name.appendChild(doc.createTextNode("dude"));
                                userAttr.appendChild(value);



                    return null;

    }*/


    public void setF1(RichForm f1) {
        this.f1 = f1;
    }

    public RichForm getF1() {
        return f1;
    }

    public void setDocTypeSoc(RichSelectOneChoice docTypeSoc) {
        this.docTypeSoc = docTypeSoc;
    }

    public RichSelectOneChoice getDocTypeSoc() {
        return docTypeSoc;
    }

    public void setSupNameIt(RichInputText supNameIt) {
        this.supNameIt = supNameIt;
    }

    public RichInputText getSupNameIt() {
        return supNameIt;
    }

    public void setInvoiceidIT(RichInputText invoiceidIT) {
        this.invoiceidIT = invoiceidIT;
    }

    public RichInputText getInvoiceidIT() {
        return invoiceidIT;
    }

    public void setSiteIdIt(RichInputText siteIdIt) {
        this.siteIdIt = siteIdIt;
    }

    public RichInputText getSiteIdIt() {
        return siteIdIt;
    }

    public void setPoNumIt(RichInputText poNumIt) {
        this.poNumIt = poNumIt;
    }

    public RichInputText getPoNumIt() {
        return poNumIt;
    }

    public void setTaxRegIt(RichInputText taxRegIt) {
        this.taxRegIt = taxRegIt;
    }

    public RichInputText getTaxRegIt() {
        return taxRegIt;
    }

    public void setInvNumIt(RichInputText invNumIt) {
        this.invNumIt = invNumIt;
    }

    public RichInputText getInvNumIt() {
        return invNumIt;
    }

    public void setCurrencyIt(RichInputText currencyIt) {
        this.currencyIt = currencyIt;
    }

    public RichInputText getCurrencyIt() {
        return currencyIt;
    }

    public void setCertNameIt(RichInputText certNameIt) {
        this.certNameIt = certNameIt;
    }

    public RichInputText getCertNameIt() {
        return certNameIt;
    }

    public void setCertEmailIt(RichInputText certEmailIt) {
        this.certEmailIt = certEmailIt;
    }

    public RichInputText getCertEmailIt() {
        return certEmailIt;
    }

    public void setInvoiceTypeSoc(RichSelectOneChoice invoiceTypeSoc) {
        this.invoiceTypeSoc = invoiceTypeSoc;
    }

    public RichSelectOneChoice getInvoiceTypeSoc() {
        return invoiceTypeSoc;
    }

    public void setSuppNumIt(RichInputText suppNumIt) {
        this.suppNumIt = suppNumIt;
    }

    public RichInputText getSuppNumIt() {
        return suppNumIt;
    }

    public void setSupplierID(RichInputText supplierID) {
        this.supplierID = supplierID;
    }

    public RichInputText getSupplierID() {
        return supplierID;
    }

    public void setSiteNameIt(RichInputText siteNameIt) {
        this.siteNameIt = siteNameIt;
    }

    public RichInputText getSiteNameIt() {
        return siteNameIt;
    }

    public void setOperatingUnitIt(RichInputText operatingUnitIt) {
        this.operatingUnitIt = operatingUnitIt;
    }

    public RichInputText getOperatingUnitIt() {
        return operatingUnitIt;
    }

    public void setLineIdIt(RichInputText lineIdIt) {
        this.lineIdIt = lineIdIt;
    }

    public RichInputText getLineIdIt() {
        return lineIdIt;
    }

    public void setTaxTotIt(RichInputText taxTotIt) {
        this.taxTotIt = taxTotIt;
    }

    public RichInputText getTaxTotIt() {
        return taxTotIt;
    }

    public void setHeaderTotIt(RichInputText headerTotIt) {
        this.headerTotIt = headerTotIt;
    }

    public RichInputText getHeaderTotIt() {
        return headerTotIt;
    }

    public void setEmployeeNoIt(RichInputText employeeNoIt) {
        this.employeeNoIt = employeeNoIt;
    }

    public RichInputText getEmployeeNoIt() {
        return employeeNoIt;
    }



    public void setLineTableOuterPgl(RichPanelGroupLayout lineTableOuterPgl) {
        this.lineTableOuterPgl = lineTableOuterPgl;
    }

    public RichPanelGroupLayout getLineTableOuterPgl() {
        return lineTableOuterPgl;
    }

    public void setPgFileUploader(RichPanelGroupLayout pgFileUploader) {
        this.pgFileUploader = pgFileUploader;
    }

    public RichPanelGroupLayout getPgFileUploader() {
        return pgFileUploader;
    }

    public void setInputFile(RichInputFile inputFile) {
        this.inputFile = inputFile;
    }

    public RichInputFile getInputFile() {
        return inputFile;
    }

    public void setFile(UploadedFile file) {
        this.file = file;
    }

    public UploadedFile getFile() {
        return file;
    }

    public void setFileContent(String fileContent) {
        this.fileContent = fileContent;
    }

    public String getFileContent() {
        return fileContent;
    }

    public void setFileName(String fileName) {
        this.fileName = fileName;
    }

    public String getFileName() {
        return fileName;
    }

    public void setInputstream(InputStream inputstream) {
        this.inputstream = inputstream;
    }

    public InputStream getInputstream() {
        return inputstream;
    }

    public void setFilePath(String filePath) {
        this.filePath = filePath;
    }

    public String getFilePath() {
        return filePath;
    }

    public void setIf1(RichInlineFrame if1) {
        this.if1 = if1;
    }

    public RichInlineFrame getIf1() {
        return if1;
    }

    public void setInvDateId(RichInputDate invDateId) {
        this.invDateId = invDateId;
    }

    public RichInputDate getInvDateId() {
        return invDateId;
    }

    public void setCb1(RichCommandButton cb1) {
        this.cb1 = cb1;
    }

    public RichCommandButton getCb1() {
        return cb1;
    }


    public void setP9(RichPopup p9) {
        this.p9 = p9;
    }

    public RichPopup getP9() {
        return p9;
    }

    public void setTaxRateCodePopupIt(RichInputText taxRateCodePopupIt) {
        this.taxRateCodePopupIt = taxRateCodePopupIt;
    }

    public RichInputText getTaxRateCodePopupIt() {
        return taxRateCodePopupIt;
    }

    public void setT2(RichTable t2) {


        this.t2 = t2;
    }

    public RichTable getT2() {


               return t2;


    }

    public void setTaxRateCodeDetailsTable(RichTable taxRateCodeDetailsTable) {
        this.taxRateCodeDetailsTable = taxRateCodeDetailsTable;
    }

    public RichTable getTaxRateCodeDetailsTable() {
        return taxRateCodeDetailsTable;
    }

    public void setClientID(RichInputText clientID) {
        this.clientID = clientID;
    }

    public RichInputText getClientID() {
        return clientID;
    }

    public void setValidationErrorMessage(RichOutputText validationErrorMessage) {
        this.validationErrorMessage = validationErrorMessage;
    }

    public RichOutputText getValidationErrorMessage() {
        return validationErrorMessage;
    }

    public void setValidationErrorPopup(RichPopup validationErrorPopup) {
        this.validationErrorPopup = validationErrorPopup;
    }

    public RichPopup getValidationErrorPopup() {
        return validationErrorPopup;
    }

    public void setPgInvoiceDets(RichPanelGroupLayout pgInvoiceDets) {
        this.pgInvoiceDets = pgInvoiceDets;
    }

    public RichPanelGroupLayout getPgInvoiceDets() {
        return pgInvoiceDets;
    }

    public void setTaxAmountLine(RichInputText taxAmountLine) {
        this.taxAmountLine = taxAmountLine;
    }

    public RichInputText getTaxAmountLine() {
        return taxAmountLine;
    }

    public void setLineTotal(RichInputText lineTotal) {
        this.lineTotal = lineTotal;
    }

    public RichInputText getLineTotal() {
        return lineTotal;
    }

    public void setSumOfTaxTotal(RichOutputText sumOfTaxTotal) {
        this.sumOfTaxTotal = sumOfTaxTotal;
    }

    public RichOutputText getSumOfTaxTotal() {
        return sumOfTaxTotal;
    }

    public void setSumOfLineTotal(RichOutputText sumOfLineTotal) {
        this.sumOfLineTotal = sumOfLineTotal;
    }

    public RichOutputText getSumOfLineTotal() {
        return sumOfLineTotal;
    }

    public void setG2(UIXGroup g2) {
        this.g2 = g2;
    }

    public UIXGroup getG2() {
        return g2;
    }



    public void setOt1(RichOutputText ot1) {
        this.ot1 = ot1;
    }

    public RichOutputText getOt1() {
        return ot1;
    }


    public void setG3(UIXGroup g3) {
        this.g3 = g3;
    }

    public UIXGroup getG3() {
        return g3;
    }

    public void setOt4(RichOutputText ot4) {
        this.ot4 = ot4;
    }

    public RichOutputText getOt4() {
        return ot4;
    }

    public void setPopUpTemplate(RichPopup popUpTemplate) {
        this.popUpTemplate = popUpTemplate;
    }

    public RichPopup getPopUpTemplate() {
        return popUpTemplate;
    }

    public void setPfl2(RichPanelFormLayout pfl2) {
        this.pfl2 = pfl2;
    }

    public RichPanelFormLayout getPfl2() {
        return pfl2;
    }


    public void setItTemplateName(RichInputText itTemplateName) {
        this.itTemplateName = itTemplateName;
    }

    public RichInputText getItTemplateName() {
        return itTemplateName;
    }

    public void setItTemplateDocNAme(RichInputText itTemplateDocNAme) {
        this.itTemplateDocNAme = itTemplateDocNAme;
    }

    public RichInputText getItTemplateDocNAme() {
        return itTemplateDocNAme;
    }

    public void setItTemplateInvType(RichInputText itTemplateInvType) {
        this.itTemplateInvType = itTemplateInvType;
    }

    public RichInputText getItTemplateInvType() {
        return itTemplateInvType;
    }

    public void setItTemplateSuppName(RichInputText itTemplateSuppName) {
        this.itTemplateSuppName = itTemplateSuppName;
    }

    public RichInputText getItTemplateSuppName() {
        return itTemplateSuppName;
    }

    public void setItTemplateSuppNo(RichInputText itTemplateSuppNo) {
        this.itTemplateSuppNo = itTemplateSuppNo;
    }

    public RichInputText getItTemplateSuppNo() {
        return itTemplateSuppNo;
    }

    public void setItTemplateSiteId(RichInputText itTemplateSiteId) {
        this.itTemplateSiteId = itTemplateSiteId;
    }

    public RichInputText getItTemplateSiteId() {
        return itTemplateSiteId;
    }

    public void setItTemplateOpUnit(RichInputText itTemplateOpUnit) {
        this.itTemplateOpUnit = itTemplateOpUnit;
    }

    public RichInputText getItTemplateOpUnit() {
        return itTemplateOpUnit;
    }

    public void setItTemplateTaxRegNo(RichInputText itTemplateTaxRegNo) {
        this.itTemplateTaxRegNo = itTemplateTaxRegNo;
    }

    public RichInputText getItTemplateTaxRegNo() {
        return itTemplateTaxRegNo;
    }

    public void setItTemplateSiteName(RichInputText itTemplateSiteName) {
        this.itTemplateSiteName = itTemplateSiteName;
    }

    public RichInputText getItTemplateSiteName() {
        return itTemplateSiteName;
    }
    public String getTestCreate(){
        System.out.println("inside testcreate");
        itTemplateDocNAme.setValue(docTypeSoc.getValue());
        itTemplateInvType.setValue(invoiceTypeSoc.getValue());
        itTemplateSuppName.setValue(supNameIt.getValue());
        itTemplateSuppNo.setValue(suppNumIt.getValue());
        itTemplateSiteId.setValue(siteIdIt.getValue());
        itTemplateOpUnit.setValue(operatingUnitIt.getValue());
        itTemplateTaxRegNo.setValue(taxRegIt.getValue());
        itTemplateSiteName.setValue(siteNameIt.getValue());




        AdfFacesContext.getCurrentInstance().addPartialTarget(pfl2);
        popUpTemplate.show(new RichPopup.PopupHints());
        return null;
    }



    public void setOfTemplate(RichOutputFormatted ofTemplate) {
        this.ofTemplate = ofTemplate;
    }

    public RichOutputFormatted getOfTemplate() {
        return ofTemplate;
    }

    public void setChooseTemplateIt(RichInputText chooseTemplateIt) {
        this.chooseTemplateIt = chooseTemplateIt;
    }

    public RichInputText getChooseTemplateIt() {
        return chooseTemplateIt;
    }


    public void setPopUpChooseTemplate(RichPopup popUpChooseTemplate) {
        this.popUpChooseTemplate = popUpChooseTemplate;
    }

    public RichPopup getPopUpChooseTemplate() {
        return popUpChooseTemplate;
    }


    public void setTemplateTable(RichTable templateTable) {
        this.templateTable = templateTable;
    }

    public RichTable getTemplateTable() {
        return templateTable;
    }


    public void setSubpaymentPg(RichPanelGroupLayout subpaymentPg) {
        this.subpaymentPg = subpaymentPg;
    }

    public RichPanelGroupLayout getSubpaymentPg() {
        return subpaymentPg;
    }

    public void setPaymentPg(RichPanelGroupLayout paymentPg) {
        this.paymentPg = paymentPg;
    }

    public RichPanelGroupLayout getPaymentPg() {
        return paymentPg;
    }

    /*public void setPc1(RichSelectBooleanCheckbox pc1) {
        this.pc1 = pc1;
    }

    public RichSelectBooleanCheckbox getPc1() {
        return pc1;
    }*/

    public void setPc2(RichSelectBooleanCheckbox pc2) {
        this.pc2 = pc2;
    }

    public RichSelectBooleanCheckbox getPc2() {
        return pc2;
    }

    public void setPc3(RichSelectBooleanCheckbox pc3) {
        this.pc3 = pc3;
    }

    public RichSelectBooleanCheckbox getPc3() {
        return pc3;
    }

    public void setMpaC(RichSelectBooleanCheckbox mpaC) {
        this.mpaC = mpaC;
    }

    public RichSelectBooleanCheckbox getMpaC() {
        return mpaC;
    }


    public void setPop_SupplierName(RichPopup pop_SupplierName) {
        this.pop_SupplierName = pop_SupplierName;
    }

    public RichPopup getPop_SupplierName() {
        return pop_SupplierName;
    }

    public void setSupNamePopupIt(RichInputText supNamePopupIt) {
        this.supNamePopupIt = supNamePopupIt;
    }

    public RichInputText getSupNamePopupIt() {
        return supNamePopupIt;
    }

    public void setSupDetailsTable(RichTable supDetailsTable) {
        this.supDetailsTable = supDetailsTable;
    }

    public RichTable getSupDetailsTable() {
        return supDetailsTable;
    }

    public void setHeaderOuterPgl(RichPanelGroupLayout headerOuterPgl) {
        this.headerOuterPgl = headerOuterPgl;
    }

    public RichPanelGroupLayout getHeaderOuterPgl() {
        return headerOuterPgl;
    }


    public void setSiteDetailsTable(RichTable siteDetailsTable) {
        this.siteDetailsTable = siteDetailsTable;
    }

    public RichTable getSiteDetailsTable() {
        return siteDetailsTable;
    }

    public void setSiteNamePopupIt(RichInputText siteNamePopupIt) {
        this.siteNamePopupIt = siteNamePopupIt;
    }

    public RichInputText getSiteNamePopupIt() {
        return siteNamePopupIt;
    }

    public void setPopup_SiteID(RichPopup popup_SiteID) {
        this.popup_SiteID = popup_SiteID;
    }

    public RichPopup getPopup_SiteID() {
        return popup_SiteID;
    }

    public void setSiteLOVSoc(RichSelectOneChoice siteLOVSoc) {
        this.siteLOVSoc = siteLOVSoc;
    }

    public RichSelectOneChoice getSiteLOVSoc() {
        return siteLOVSoc;
    }


    public void setPoNumpopUp_Header(RichPopup poNumpopUp_Header) {
        this.poNumpopUp_Header = poNumpopUp_Header;
    }

    public RichPopup getPoNumpopUp_Header() {
        return poNumpopUp_Header;
    }

    public void setIsLineItemPopup(RichInputText isLineItemPopup) {
        this.isLineItemPopup = isLineItemPopup;
    }

    public RichInputText getIsLineItemPopup() {
        return isLineItemPopup;
    }

    public void setPoDetailsTable(RichTable poDetailsTable) {
        this.poDetailsTable = poDetailsTable;
    }

    public RichTable getPoDetailsTable() {
        return poDetailsTable;
    }

    public void setPoNumPopupIt(RichInputText poNumPopupIt) {
        this.poNumPopupIt = poNumPopupIt;
    }

    public RichInputText getPoNumPopupIt() {
        return poNumPopupIt;
    }


    public void setCurrencyCodePopupIT(RichInputText currencyCodePopupIT) {
        this.currencyCodePopupIT = currencyCodePopupIT;
    }

    public RichInputText getCurrencyCodePopupIT() {
        return currencyCodePopupIT;
    }

    public void setCurrencyPopUp(RichPopup currencyPopUp) {
        this.currencyPopUp = currencyPopUp;
    }

    public RichPopup getCurrencyPopUp() {
        return currencyPopUp;
    }

    public void setCurrencyCodeDetailsTable(RichTable currencyCodeDetailsTable) {
        this.currencyCodeDetailsTable = currencyCodeDetailsTable;
    }

    public RichTable getCurrencyCodeDetailsTable() {
        return currencyCodeDetailsTable;
    }


    public void setPopUpCertifier(RichPopup popUpCertifier) {
        this.popUpCertifier = popUpCertifier;
    }

    public RichPopup getPopUpCertifier() {
        return popUpCertifier;
    }



    public void setCertifierNameDetailsTable(RichTable certifierNameDetailsTable) {
        this.certifierNameDetailsTable = certifierNameDetailsTable;
    }

    public RichTable getCertifierNameDetailsTable() {
        return certifierNameDetailsTable;
    }

    public void setCertifierNamePopupIT(RichInputText certifierNamePopupIT) {
        this.certifierNamePopupIT = certifierNamePopupIT;
    }

    public RichInputText getCertifierNamePopupIT() {
        return certifierNamePopupIT;
    }

    public void setChosenEmployeeId(String chosenEmployeeId) {
        this.chosenEmployeeId = chosenEmployeeId;
    }

    public String getChosenEmployeeId() {
        return chosenEmployeeId;
    }

    public void setCertifierFlag(int certifierFlag) {
        this.certifierFlag = certifierFlag;
    }

    public int getCertifierFlag() {
        return certifierFlag;
    }

    public void setChosenCertifierName(String chosenCertifierName) {
        this.chosenCertifierName = chosenCertifierName;
    }

    public String getChosenCertifierName() {
        return chosenCertifierName;
    }

    public void setSearchByCertifiername(RichSelectOneChoice searchByCertifiername) {
        this.searchByCertifiername = searchByCertifiername;
    }

    public RichSelectOneChoice getSearchByCertifiername() {
        return searchByCertifiername;
    }

    public void setCertifierNameErrorOT(RichOutputText certifierNameErrorOT) {
        this.certifierNameErrorOT = certifierNameErrorOT;
    }

    public RichOutputText getCertifierNameErrorOT() {
        return certifierNameErrorOT;
    }

    public void setOutputTemplateErrorMsg(RichOutputText outputTemplateErrorMsg) {
        this.outputTemplateErrorMsg = outputTemplateErrorMsg;
    }

    public RichOutputText getOutputTemplateErrorMsg() {
        return outputTemplateErrorMsg;
    }

    public void setTemplatePgLAyout(RichPanelGroupLayout templatePgLAyout) {
        this.templatePgLAyout = templatePgLAyout;
    }

    public RichPanelGroupLayout getTemplatePgLAyout() {
        return templatePgLAyout;
    }

    public void setGlcode_popup(RichPopup glcode_popup) {
        this.glcode_popup = glcode_popup;
    }

    public RichPopup getGlcode_popup() {
        return glcode_popup;
    }

    public void setPg148(RichPanelGroupLayout pg148) {
        this.pg148 = pg148;
    }

    public RichPanelGroupLayout getPg148() {
        return pg148;
    }

    public void setGlCodeErrorOt(RichOutputText glCodeErrorOt) {
        this.glCodeErrorOt = glCodeErrorOt;
    }

    public RichOutputText getGlCodeErrorOt() {
        return glCodeErrorOt;
    }

    public void setPg147(RichPanelGroupLayout pg147) {
        this.pg147 = pg147;
    }

    public RichPanelGroupLayout getPg147() {
        return pg147;
    }
    public void setCompanyDetailsTable(RichTable companyDetailsTable) {
        this.companyDetailsTable = companyDetailsTable;
    }

    public RichTable getCompanyDetailsTable() {
        return companyDetailsTable;
    }


    public void setAccountDetailsTable(RichTable accountDetailsTable) {
        this.accountDetailsTable = accountDetailsTable;
    }

    public RichTable getAccountDetailsTable() {
        return accountDetailsTable;
    }

    public void setAnalysisCodeDetailsTable(RichTable analysisCodeDetailsTable) {
        this.analysisCodeDetailsTable = analysisCodeDetailsTable;
    }

    public RichTable getAnalysisCodeDetailsTable() {
        return analysisCodeDetailsTable;
    }


    public void setCounterPartyDetailsTable(RichTable counterPartyDetailsTable) {
        this.counterPartyDetailsTable = counterPartyDetailsTable;
    }

    public RichTable getCounterPartyDetailsTable() {
        return counterPartyDetailsTable;
    }

    public void setCostCentreDetailsTable(RichTable costCentreDetailsTable) {
        this.costCentreDetailsTable = costCentreDetailsTable;
    }

    public RichTable getCostCentreDetailsTable() {
        return costCentreDetailsTable;
    }

    public void setCompanyNameIt(RichInputText companyNameIt) {
        this.companyNameIt = companyNameIt;
    }

    public RichInputText getCompanyNameIt() {
        return companyNameIt;
    }

    public void setCostCentreIT(RichInputText costCentreIT) {
        this.costCentreIT = costCentreIT;
    }

    public RichInputText getCostCentreIT() {
        return costCentreIT;
    }

    public void setAccountNameIt(RichInputText accountNameIt) {
        this.accountNameIt = accountNameIt;
    }

    public RichInputText getAccountNameIt() {
        return accountNameIt;
    }

    public void setAnalysisCodeIt(RichInputText analysisCodeIt) {
        this.analysisCodeIt = analysisCodeIt;
    }

    public RichInputText getAnalysisCodeIt() {
        return analysisCodeIt;
    }

    public void setCounterPartyIt(RichInputText counterPartyIt) {
        this.counterPartyIt = counterPartyIt;
    }

    public RichInputText getCounterPartyIt() {
        return counterPartyIt;
    }

    public void setCompanyNameOt(RichOutputText companyNameOt) {
        this.companyNameOt = companyNameOt;
    }

    public RichOutputText getCompanyNameOt() {
        return companyNameOt;
    }

    public void setCostCentreOt(RichOutputText costCentreOt) {
        this.costCentreOt = costCentreOt;
    }

    public RichOutputText getCostCentreOt() {
        return costCentreOt;
    }

    public void setAccountNameOt(RichOutputText accountNameOt) {
        this.accountNameOt = accountNameOt;
    }

    public RichOutputText getAccountNameOt() {
        return accountNameOt;
    }

    public void setAnalysisCodeOt(RichOutputText analysisCodeOt) {
        this.analysisCodeOt = analysisCodeOt;
    }

    public RichOutputText getAnalysisCodeOt() {
        return analysisCodeOt;
    }

    public void setCounterPartyOt(RichOutputText counterPartyOt) {
        this.counterPartyOt = counterPartyOt;
    }

    public RichOutputText getCounterPartyOt() {
        return counterPartyOt;
    }

    public void setCompanySoc(RichSelectOneChoice companySoc) {
        this.companySoc = companySoc;
    }

    public RichSelectOneChoice getCompanySoc() {
        return companySoc;
    }

    public void setCompanyNamePopupIt(RichInputText companyNamePopupIt) {
        this.companyNamePopupIt = companyNamePopupIt;
    }

    public RichInputText getCompanyNamePopupIt() {
        return companyNamePopupIt;
    }

    public void setOrgIdIt(RichInputText orgIdIt) {
        this.orgIdIt = orgIdIt;
    }

    public RichInputText getOrgIdIt() {
        return orgIdIt;
    }

    public void setP10(RichPopup p10) {
        this.p10 = p10;
    }

    public RichPopup getP10() {
        return p10;
    }

    public void setP12(RichPopup p12) {
        this.p12 = p12;
    }

    public RichPopup getP12() {
        return p12;
    }

    public void setP11(RichPopup p11) {
        this.p11 = p11;
    }

    public RichPopup getP11() {
        return p11;
    }

    public void setP13(RichPopup p13) {
        this.p13 = p13;
    }

    public RichPopup getP13() {
        return p13;
    }

    public void setCostcenterSoc(RichSelectOneChoice costcenterSoc) {
        this.costcenterSoc = costcenterSoc;
    }

    public RichSelectOneChoice getCostcenterSoc() {
        return costcenterSoc;
    }

    public void setCostCentrePopupIt(RichInputText costCentrePopupIt) {
        this.costCentrePopupIt = costCentrePopupIt;
    }

    public RichInputText getCostCentrePopupIt() {
        return costCentrePopupIt;
    }

    public void setAccountNamePopupIt(RichInputText accountNamePopupIt) {
        this.accountNamePopupIt = accountNamePopupIt;
    }

    public RichInputText getAccountNamePopupIt() {
        return accountNamePopupIt;
    }

    public void setAccountSoc(RichSelectOneChoice accountSoc) {
        this.accountSoc = accountSoc;
    }

    public RichSelectOneChoice getAccountSoc() {
        return accountSoc;
    }

    public void setAnalysisCodeSoc(RichSelectOneChoice analysisCodeSoc) {
        this.analysisCodeSoc = analysisCodeSoc;
    }

    public RichSelectOneChoice getAnalysisCodeSoc() {
        return analysisCodeSoc;
    }


    public void setAnalysisCodePopupIt(RichInputText analysisCodePopupIt) {
        this.analysisCodePopupIt = analysisCodePopupIt;
    }

    public RichInputText getAnalysisCodePopupIt() {
        return analysisCodePopupIt;
    }

    public void setCounterPartySoc(RichSelectOneChoice counterPartySoc) {
        this.counterPartySoc = counterPartySoc;
    }

    public RichSelectOneChoice getCounterPartySoc() {
        return counterPartySoc;
    }

    public void setCounterPartyPopupIt(RichInputText counterPartyPopupIt) {
        this.counterPartyPopupIt = counterPartyPopupIt;
    }

    public RichInputText getCounterPartyPopupIt() {
        return counterPartyPopupIt;
    }

    public void setGlCodePgl(RichPanelFormLayout glCodePgl) {
        this.glCodePgl = glCodePgl;
    }

    public RichPanelFormLayout getGlCodePgl() {
        return glCodePgl;
    }

    public void setP3(RichPopup p3) {
        this.p3 = p3;
    }

    public RichPopup getP3() {
        return p3;
    }

    public void setPfl3(RichPanelFormLayout pfl3) {
        this.pfl3 = pfl3;
    }

    public RichPanelFormLayout getPfl3() {
        return pfl3;
    }

    public void setPlam1(RichPanelLabelAndMessage plam1) {
        this.plam1 = plam1;
    }

    public RichPanelLabelAndMessage getPlam1() {
        return plam1;
    }

    public void setOt7(RichOutputText ot7) {
        this.ot7 = ot7;
    }

    public RichOutputText getOt7() {
        return ot7;
    }

    public void setTaxrate_popup(RichPopup taxrate_popup) {
        this.taxrate_popup = taxrate_popup;
    }

    public RichPopup getTaxrate_popup() {
        return taxrate_popup;
    }


    public void setProjectNo_pop(RichPopup projectNo_pop) {
        this.projectNo_pop = projectNo_pop;
    }

    public RichPopup getProjectNo_pop() {
        return projectNo_pop;
    }

    public void setT4(RichTable t4) {
        this.t4 = t4;
    }

    public RichTable getT4() {
        return t4;
    }

    public void setProjDtlTable(RichTable projDtlTable) {
        this.projDtlTable = projDtlTable;
    }

    public RichTable getProjDtlTable() {
        return projDtlTable;
    }

    public void setProjNoPopupIt(RichInputText projNoPopupIt) {
        this.projNoPopupIt = projNoPopupIt;
    }

    public RichInputText getProjNoPopupIt() {
        return projNoPopupIt;
    }

    public void setProjectNoIT(RichInputText projectNoIT) {
        this.projectNoIT = projectNoIT;
    }

    public RichInputText getProjectNoIT() {
        return projectNoIT;
    }

    public void setProjectIdIt(RichInputText projectIdIt) {
        this.projectIdIt = projectIdIt;
    }

    public RichInputText getProjectIdIt() {
        return projectIdIt;
    }

    public void setP4(RichPopup p4) {
        this.p4 = p4;
    }

    public RichPopup getP4() {
        return p4;
    }

    public void setTaskNoIT(RichInputText taskNoIT) {
        this.taskNoIT = taskNoIT;
    }

    public RichInputText getTaskNoIT() {
        return taskNoIT;
    }

    public void setTaskDtlTable(RichTable taskDtlTable) {
        this.taskDtlTable = taskDtlTable;
    }

    public RichTable getTaskDtlTable() {
        return taskDtlTable;
    }

    public void setTaskNoPopupIt(RichInputText taskNoPopupIt) {
        this.taskNoPopupIt = taskNoPopupIt;
    }

    public RichInputText getTaskNoPopupIt() {
        return taskNoPopupIt;
    }


    public void setTaskIdIt(RichInputText taskIdIt) {
        this.taskIdIt = taskIdIt;
    }

    public RichInputText getTaskIdIt() {
        return taskIdIt;
    }

    public void setExpDateIT(RichInputDate expDateIT) {
        this.expDateIT = expDateIT;
    }

    public RichInputDate getExpDateIT() {
        return expDateIT;
    }

    public void setExpOrgTable(RichTable expOrgTable) {
        this.expOrgTable = expOrgTable;
    }

    public RichTable getExpOrgTable() {
        return expOrgTable;
    }

    public void setP5(RichPopup p5) {
        this.p5 = p5;
    }

    public RichPopup getP5() {
        return p5;
    }



    public void setT13(RichTable t13) {
        this.t13 = t13;
    }

    public RichTable getT13() {
        return t13;
    }

    public void setExpOrgIT(RichInputText expOrgIT) {
        this.expOrgIT = expOrgIT;
    }

    public RichInputText getExpOrgIT() {
        return expOrgIT;
    }

    public void setExpOrgPopUpIt(RichInputText expOrgPopUpIt) {
        this.expOrgPopUpIt = expOrgPopUpIt;
    }

    public RichInputText getExpOrgPopUpIt() {
        return expOrgPopUpIt;
    }

    public void setCertDecSC(RichSelectBooleanCheckbox certDecSC) {
        this.certDecSC = certDecSC;
    }

    public RichSelectBooleanCheckbox getCertDecSC() {
        return certDecSC;
    }

    public void setCertDecPg(RichPanelGroupLayout certDecPg) {
        this.certDecPg = certDecPg;
    }

    public RichPanelGroupLayout getCertDecPg() {
        return certDecPg;
    }


   /* public void setCommentsIt(RichInputText commentsIt) {
        this.commentsIt = commentsIt;
    }

    public RichInputText getCommentsIt() {
        return commentsIt;
    }*/


    public void setSubmit_cb(RichCommandButton submit_cb) {
        this.submit_cb = submit_cb;
    }

    public RichCommandButton getSubmit_cb() {
        return submit_cb;
    }

    public void setPgOperations(RichPanelGroupLayout pgOperations) {
        this.pgOperations = pgOperations;
    }

    public RichPanelGroupLayout getPgOperations() {
        return pgOperations;
    }


    public void hiddenButtonClickEvent(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Button Clicked");
    }

    public void setPaymentAllocNo(RichInputText paymentAllocNo) {
        this.paymentAllocNo = paymentAllocNo;
    }

    public RichInputText getPaymentAllocNo() {
        return paymentAllocNo;
    }

    public void setProjectColumn(RichColumn projectColumn) {
        this.projectColumn = projectColumn;
    }

    public RichColumn getProjectColumn() {
        return projectColumn;
    }

    public void setGlcode_column(RichColumn glcode_column) {
        this.glcode_column = glcode_column;
    }

    public RichColumn getGlcode_column() {
        return glcode_column;
    }

    public void setTaskNo_column(RichColumn taskNo_column) {
        this.taskNo_column = taskNo_column;
    }

    public RichColumn getTaskNo_column() {
        return taskNo_column;
    }

    public void setExpOrg_column(RichColumn expOrg_column) {
        this.expOrg_column = expOrg_column;
    }

    public RichColumn getExpOrg_column() {
        return expOrg_column;
    }

    public void setExpDate_column(RichColumn expDate_column) {
        this.expDate_column = expDate_column;
    }

    public RichColumn getExpDate_column() {
        return expDate_column;
    }


    public void setCertifier_sbc(RichSelectBooleanCheckbox certifier_sbc) {
        this.certifier_sbc = certifier_sbc;
    }

    public RichSelectBooleanCheckbox getCertifier_sbc() {
        return certifier_sbc;
    }

    public void setNatureOfEXpSOC(RichSelectBooleanCheckbox natureOfEXpSOC) {
        this.natureOfEXpSOC = natureOfEXpSOC;
    }

    public RichSelectBooleanCheckbox getNatureOfEXpSOC() {
        return natureOfEXpSOC;
    }

    public void setAlternateApproverIt(RichInputText alternateApproverIt) {
        this.alternateApproverIt = alternateApproverIt;
    }

    public RichInputText getAlternateApproverIt() {
        return alternateApproverIt;
    }


    public void setCertifierApproveComments(RichInputText certifierApproveComments) {
        this.certifierApproveComments = certifierApproveComments;
    }

    public RichInputText getCertifierApproveComments() {
        return certifierApproveComments;
    }


    public void setLineTypeSOC(RichSelectOneChoice lineTypeSOC) {
        this.lineTypeSOC = lineTypeSOC;
    }

    public RichSelectOneChoice getLineTypeSOC() {
        return lineTypeSOC;
    }

    public void setP14(RichPopup p14) {
        this.p14 = p14;
    }

    public RichPopup getP14() {
        return p14;
    }

    public void setAlternateApproverDetailsTable(RichTable alternateApproverDetailsTable) {
        this.alternateApproverDetailsTable = alternateApproverDetailsTable;
    }

    public RichTable getAlternateApproverDetailsTable() {
        return alternateApproverDetailsTable;
    }


    public void setAlternateAppoverPopupIT(RichInputText alternateAppoverPopupIT) {
        this.alternateAppoverPopupIT = alternateAppoverPopupIT;
    }

    public RichInputText getAlternateAppoverPopupIT() {
        return alternateAppoverPopupIT;
    }


    public void setDeleteTemplateCheckBox(RichSelectBooleanCheckbox deleteTemplateCheckBox) {
        this.deleteTemplateCheckBox = deleteTemplateCheckBox;
    }

    public RichSelectBooleanCheckbox getDeleteTemplateCheckBox() {
        return deleteTemplateCheckBox;
    }

    public void setCertifier_plm(RichPanelLabelAndMessage certifier_plm) {
        this.certifier_plm = certifier_plm;
    }

    public RichPanelLabelAndMessage getCertifier_plm() {
        return certifier_plm;
    }

    public void setNoteToApprv_plm(RichPanelLabelAndMessage noteToApprv_plm) {
        this.noteToApprv_plm = noteToApprv_plm;
    }

    public RichPanelLabelAndMessage getNoteToApprv_plm() {
        return noteToApprv_plm;
    }


    public void setCertifierApproverListPopUp(RichPopup certifierApproverListPopUp) {
        this.certifierApproverListPopUp = certifierApproverListPopUp;
    }

    public RichPopup getCertifierApproverListPopUp() {
        return certifierApproverListPopUp;
    }

    public void setEqApproverDetailsTable(RichTable eqApproverDetailsTable) {
        this.eqApproverDetailsTable = eqApproverDetailsTable;
    }

    public RichTable getEqApproverDetailsTable() {
        return eqApproverDetailsTable;
    }
    public String cancelApprovalListPoopup() {
        // Add event code here...
        certifierApproverListPopUp.hide();
        return null;
    }

    public void setAlternateApprover_plm(RichPanelLabelAndMessage alternateApprover_plm) {
        this.alternateApprover_plm = alternateApprover_plm;
    }

    public RichPanelLabelAndMessage getAlternateApprover_plm() {
        return alternateApprover_plm;
    }

    public void setLinePoNum_column(RichColumn linePoNum_column) {
        this.linePoNum_column = linePoNum_column;
    }

    public RichColumn getLinePoNum_column() {
        return linePoNum_column;
    }

    public void setPoLineNum_column(RichColumn poLineNum_column) {
        this.poLineNum_column = poLineNum_column;
    }

    public RichColumn getPoLineNum_column() {
        return poLineNum_column;
    }

    public void setLinePONum_it(RichInputText linePONum_it) {
        this.linePONum_it = linePONum_it;
    }

    public RichInputText getLinePONum_it() {
        return linePONum_it;
    }

    public void setPoLineNum_it(RichInputText poLineNum_it) {
        this.poLineNum_it = poLineNum_it;
    }

    public RichInputText getPoLineNum_it() {
        return poLineNum_it;
    }


    public void setPoNum_plm(RichCommandImageLink poNum_plm) {
        this.poNum_plm = poNum_plm;
    }

    public RichCommandImageLink getPoNum_plm() {
        return poNum_plm;
    }


    public void setDescPopupIt(RichInputText descPopupIt) {
        this.descPopupIt = descPopupIt;
    }

    public RichInputText getDescPopupIt() {
        return descPopupIt;
    }

    public void setDescPopup(RichPopup descPopup) {
        this.descPopup = descPopup;
    }

    public RichPopup getDescPopup() {
        return descPopup;
    }

    public void cancelSuspenseAcc_Popup(ActionEvent actionEvent) {
    suspenseAcc_Popup.hide();
    }

    public void okSuspenseAcc_Popup(ActionEvent actionEvent) {
        //setting overseas suspense flag as true

        if (getUrlOrg().equalsIgnoreCase("QF")) {
        AdfFacesContext.getCurrentInstance().getPageFlowScope().put("suspenseAcc_flag",true);


        suspenseAcc_Popup.hide();
        System.out.println("Start okSuspenseAcc_Popup");
        //glCode
        String poNum;
        RowSetIterator lineItemItr = null;
        RowSetIterator lineItemItr_1 = null;
        boolean flagGlCodePresent=true;
        boolean flag_suspense1 = true;
        boolean flag_suspense2 = true;
        //  submitFromCertifier();
        String line_num = null;
        String suspenseMessage_1 = null;
        String suspenseMessage_2 = null;
        boolean first_level_flag = true;
        String first_level_validation = null;
        ArrayList<String> lineNumber_list = new ArrayList<String>();



        try{
        //boolean flagGlCodePresent=true; on 1st OCt
             poNum = poNumIt.getValue()!=null ? poNumIt.getValue().toString() : null;
            System.out.println("onSubmitClick ::::  "+ ""+ "poNum ::: "+ poNum);
              if(!( poNum==null || (poNum!=null && poNum.trim().equals(""))) ){
             // samplecheck();

                      submitFromCertifier();
                      }
                else{
        DCBindingContainer dc = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        ViewObject lineItemVO= dc.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator").getViewObject();




        if(lineItemVO.getEstimatedRowCount()>0 ){
             lineItemItr=lineItemVO.createRowSetIterator(null);
             while(lineItemItr.hasNext()) {
                 Row lineItemRow=lineItemItr.next();

                 if(lineItemRow.getAttribute("GlNo")==null && lineItemRow.getAttribute("ProjectNo") == null){
                     System.out.println("GLNo ::"+lineItemRow.getAttribute("GlNo"));
                     System.out.println("ProjectNo ::"+lineItemRow.getAttribute("ProjectNo"));
                     flagGlCodePresent=false;
                     break;
                 }


                    // gl_cc_overseas_suspense_check1Iterator

        }

        if(flagGlCodePresent ){

        ApproverDetails_pttBindingQSPortClient approverDetailsClient=new ApproverDetails_pttBindingQSPortClient();
           String alternateApproverName=null;


            String alternateApproverNo=null;
            /*alternateApproverNo=AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID")!=null?AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString():
                alternateApproverIt.getValue()!=null ? alternateApproverIt.getValue().toString() :null ;*/


             if( alternateApproverIt.getValue()!=null && !alternateApproverIt.getValue().toString().equals("")){
                            alternateApproverNo=AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID")!=null?AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID").toString():null;
                            if(alternateApproverNo == null){
                                System.out.println("Trying forthe newww time alternate");
                                alternateApproverNo  =AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID_pageLoad")!=null?
                                AdfFacesContext.getCurrentInstance().getPageFlowScope().get("approverID_pageLoad").toString():null;

                            }
                        }


            if(alternateApproverIt.getValue()!=null && !alternateApproverIt.getValue().toString().equals("") && alternateApproverNo==null  &&  alternateApproverIt.getValue()!=null && alternateapprovNoIt.getValue()!=null){


                System.out.println("Trying for the sencond time alternate --------------"+alternateapprovNoIt.getValue().toString());
                alternateApproverNo =  alternateapprovNoIt.getValue().toString() ;

                System.out.println("Alternate approverrrrrrrrrrr :: "+alternateApproverNo);
            }
            System.out.println("Alternate approverrrrrrrrrrr :: "+alternateApproverNo);
            /* Get the header details values */
            DCBindingContainer bindings = getBindings();
            DCIteratorBinding dcIteratorBindings =
                bindings.findIteratorBinding("ApInvoiceOverseasTableEOView1Iterator");
            ViewObject headerVO = dcIteratorBindings.getViewObject();
           Row headerRow = headerVO.getCurrentRow();
           BigDecimal orgId = null;
           String orgIDStr=null;
            BigDecimal supplierId = null;
           BigDecimal invoiceTotAmountbd =null;
            String siteId=null;
            if (headerRow != null) {
               String supplierName =
                   headerRow.getAttribute("SupplierName") != null ?
                   headerRow.getAttribute("SupplierName").toString() : null;
              System.out.println("SupplierName ::: "+ supplierName);
               siteId =
                  headerRow.getAttribute("SiteId") != null ? headerRow.getAttribute("SiteId").toString() :
                  null;
                System.out.println("SiteId ::: "+ siteId);
                }



        String orgIdstr= AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID")!=null?AdfFacesContext.getCurrentInstance().getPageFlowScope().get("OrgID").toString():null;
        if(orgIdstr==null){


            orgIdstr = orgIdIt.getValue()!=null ?  orgIdIt.getValue().toString() : null;
        }

        orgId=new BigDecimal(orgIdstr);
        System.out.println("orgId From pageflowscope"+orgId);

                BigDecimal invoiceTotAmount =
                    headerRow.getAttribute("InvoiceTotAmount") != null ?
                    ((Number)headerRow.getAttribute("InvoiceTotAmount")).bigDecimalValue() :
                    null;
              System.out.println("invoiceTotAmount ::: "+ invoiceTotAmount);
                String requestorNo=null;
                //requestorNo=fetchEmployeeID();

                requestorNo =ADFContext.getCurrent().getPageFlowScope().get("userId").toString();
                //requestorNo="171323";
                System.out.println("requestorNo :::"+requestorNo);
                List<APPSQFEQIFAPINVINVDISTINFO> invoiceLineItemdetailsList =new ArrayList<APPSQFEQIFAPINVINVDISTINFO>();
               ObjectFactory objectFactory =new ap.qantas.com.eQApprovalDetailsService.ObjectFactory();
                for(int i=0;i<lineItemVO.getEstimatedRowCount();i++){
                   BigDecimal lineNo=null;
                   String lineType=null;
                    String glCodeComb=null;


                    lineNo=new BigDecimal(lineItemVO.getCurrentRow().getAttribute("LineNumber").toString());
                    lineType="ITEM";
                    glCodeComb=lineItemVO.getCurrentRow().getAttribute("GlNo")!=null?lineItemVO.getCurrentRow().getAttribute("GlNo").toString():null;
                    System.out.println("line item details************");
                    System.out.println("lineNo"+lineNo);
                    System.out.println("lineType"+lineType);
                    System.out.println("glCodeComb"+glCodeComb);

                    APPSQFEQIFAPINVINVDISTINFO lineItemobj=new APPSQFEQIFAPINVINVDISTINFO();
                    objectFactory.createAPPSQFEQIFAPINVINVDISTINFOLINENUMBER(lineNo);
                    lineItemobj.setLINENUMBER( objectFactory.createAPPSQFEQIFAPINVINVDISTINFOLINENUMBER(lineNo));
                    lineItemobj.setLINETYPE( objectFactory.createAPPSQFEQIFAPINVINVDISTINFOLINETYPE(lineType));
                    lineItemobj.setGLCODECOMB( objectFactory.createAPPSQFEQIFAPINVINVDISTINFOGLCODECOMB(glCodeComb));
                    invoiceLineItemdetailsList.add(i, lineItemobj);

                }


                List<APPSQFEQIFAPINVAPPROVERREC> approverListheaderObj=new ArrayList<APPSQFEQIFAPINVAPPROVERREC>();
                System.out.println("size of approverListheaderObj.size()"+approverListheaderObj.size());



                approverListheaderObj=approverDetailsClient.getApproverDetails(requestorNo, alternateApproverNo, invoiceTotAmount,orgId, invoiceLineItemdetailsList);

                if(approverListheaderObj== null){

                    FacesMessage Message = new FacesMessage("No approver details found");
                    Message.setSeverity(FacesMessage.SEVERITY_INFO);
                    FacesContext fc = FacesContext.getCurrentInstance();
                    fc.addMessage(null, Message);
                    return ;
                }


                if(approverListheaderObj!=null && approverListheaderObj.size()>0){
                  System.out.println("size of approverListheaderObj.size()"+approverListheaderObj.size());
                    for(int i=0;i<approverListheaderObj.size();i++){
                        String approvername =
                            approverListheaderObj.get(i).getAPPNAME().getValue();
                        String appoverEmail =
                            approverListheaderObj.get(i).getAPPEMAIL().getValue();
                        BigDecimal appempno =
                            approverListheaderObj.get(i).getAPPEMPNO().getValue();
                        String appposition =
                            approverListheaderObj.get(i).getAPPPOSITION().getValue();
                        String appfndlcategory =
                             approverListheaderObj.get(i).getAPPFNDLCATEGORY().getValue();

                        System.out.println("approvername1" + "****" + i + "****" +
                                          approvername);
                       System.out.println("appoverEmail1" + "****" + i + "****" +
                                          appoverEmail);
                       System.out.println("appempno1" + "****" + i + "****" +
                                          appempno);
                        System.out.println("appposition1" + "****" + i + "****" +
                                           appposition);
                       System.out.println("appfndlcategory1" + "****" + i + "****" +
                                          appfndlcategory);
                   }
              }

            DCBindingContainer dcCon = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
            ViewObject eqApproverDetailsVO= dcCon.findIteratorBinding("eQApproverDetails1Iterator").getViewObject();


                eqApproverDetailsVO.clearCache();
                int lastRowIndex = eqApproverDetailsVO.getRangeIndexOf(eqApproverDetailsVO.last());
                System.out.println("lastRowIndex :::"+lastRowIndex);
                  System.out.println("eqApproverDetailsVO.getRangeSize()"+eqApproverDetailsVO.getRangeSize());
                  if(approverListheaderObj.size()>0){
                    System.out.println("sizze od approverListheaderObj.size()::"+approverListheaderObj.size());
                   int newLineNumber = 1;
                   int seq_no = approverListheaderObj.size();
                    for(int i=0;i<approverListheaderObj.size();i++){

                        Row newRow = eqApproverDetailsVO.createRow();

                        newRow.setAttribute("lineSeqNumber", seq_no);
                        newRow.setAttribute("approverName", approverListheaderObj.get(i).getAPPNAME().getValue());
                        newRow.setAttribute("appoverEmail", approverListheaderObj.get(i).getAPPEMAIL().getValue());
                        newRow.setAttribute("appEmpNo", approverListheaderObj.get(i).getAPPEMPNO().getValue());
                        newRow.setAttribute("appPosition", approverListheaderObj.get(i).getAPPPOSITION().getValue());
                        newRow.setAttribute("appFindelCategory", approverListheaderObj.get(i).getAPPFNDLCATEGORY().getValue());

                        eqApproverDetailsVO.insertRow(newRow);
                        newLineNumber++;
                        lastRowIndex++;
                        System.out.println("lastRowIndex======"+lastRowIndex);
                        System.out.println("newLineNumber========"+newLineNumber);
                        System.out.println("seq_no========"+seq_no);
                        seq_no--;
                    }
                        AdfFacesContext.getCurrentInstance().addPartialTarget(eqApproverDetailsTable);

                  certifierApproverListPopUp.setRendered(true);}


         }
        else if(!flagGlCodePresent){
            certifierApproverListPopUp.setRendered(false);
            System.out.println("if GL code is not present");
            String message=null;
            message="Please enter GL code or Project No to show the approval details";
            callFacesMessage(message);

        }



            if(flagGlCodePresent){
                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                 certifierApproverListPopUp.show(hints);
            }
        }
                }

        } catch (Exception e) {
            e.printStackTrace();
        }
        finally{
                    if(lineItemItr!=null) {
                        try {
                            lineItemItr.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();
                    }
                    }
                }

        System.out.println("After checking all validations :: flagGlCodePresent ::"+flagGlCodePresent);


        }
        System.out.println("End on susense Click");




    }



    public void onDescriptionPopupOKClick(ActionEvent actionEvent) {
                      System.out.println("Start onDescriptionPopupOKClick");
                      DCBindingContainer bindings = getBinding();
                      DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
                      System.out.println("lineItemIter ::"+lineItemIter);
                      ViewObject empVO = lineItemIter.getViewObject();
                      Row selectedRow=empVO.getCurrentRow();
                      System.out.println("selectedRow :: "+selectedRow);
                              if (selectedRow!=null){
                                System.out.println("**  Indise if ***");
                                String descVal = null;
                                try {
                                    if(descPopupIt.getValue() != null)
                                        descVal = descPopupIt.getValue().toString();
                                    System.out.println("Description PopupIt: "+descPopupIt);
                                    selectedRow.setAttribute("LineDescription",descVal);
    //                                    commentsIt.setValue(descVal);
                                    descPopup.hide();
                                    AdfFacesContext.getCurrentInstance().addPartialTarget(t1);
                                }
                                catch(Exception e) {
                                    e.printStackTrace();
                                }
                        }


        System.out.println("End onDescriptionPopupOKClick");
    }


    public void onPoLineNumPopUpGoClick(ActionEvent actionEvent) {
            System.out.println("Start onPoLineNumPopUpGoClick");

            String enteredPonumber = null;
            RowKeySet rowKeySet = t1.getSelectedRowKeys();
            Iterator rowKeySetIt = rowKeySet.iterator();
            DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            RowSetIterator lineItemRSIter=null;
            try{
                lineItemRSIter = lineItemIter.getRowSetIterator();
             while(rowKeySetIt.hasNext()){
               Key key = (Key)((List)rowKeySetIt.next()).get(0);
               Row currentRow = lineItemRSIter.getRow(key);
                 if(currentRow!=null) {
                    System.out.println("----- typedInPONumber ----- "+currentRow.getAttribute("LinePoNum"));

                    enteredPonumber = currentRow.getAttribute("LinePoNum")==null?"":currentRow.getAttribute("LinePoNum").toString().trim();
                 }
             }
            }catch(Exception e)
            {
                e.printStackTrace();
                }
            finally{
                        if(lineItemRSIter!=null) {
                            try {
                                lineItemRSIter.closeRowSetIterator();
                            } catch(Exception ex) {
                                ex.printStackTrace();

                        }
                        }
                    }
            String enteredPoLineNum=null;
            try {
                if(poLineNumPopupIt.getValue() != null) {
                                enteredPoLineNum = poLineNumPopupIt.getValue().toString();
                                System.out.println("poLineNumPopupIt.getValue(): "+enteredPoLineNum);
                                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POLineDetailsVO1Iterator");
                                ViewObjectImpl poLineNumVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                                ViewCriteria vc = poLineNumVO.getViewCriteria("POLineDetailsVOCriteria_lookupForLineNum");
                                poLineNumVO.applyViewCriteria(vc);
                                poLineNumVO.setNamedWhereClauseParam("bindPoLineNum", enteredPonumber);
                                poLineNumVO.setNamedWhereClauseParam("bindPoLineNumber", enteredPoLineNum);
                                //System.out.println("-----------Dynamic Query-----------");
                                //System.out.println(poLineNumVO.getQuery());
                                poLineNumVO.executeQuery();
                                AdfFacesContext.getCurrentInstance().addPartialTarget(poLineNumberTable);

                }
                else if(poLineNumPopupIt.getValue() == null) {
                                enteredPoLineNum = poLineNumPopupIt.getValue().toString();
                                System.out.println("poLineNumPopupIt.getValue(): "+enteredPoLineNum);
                                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("POLineDetailsVO1Iterator");
                                ViewObjectImpl poLineNumVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                                ViewCriteria vc = poLineNumVO.getViewCriteria("POLineDetailsVOCriteria");
                                poLineNumVO.applyViewCriteria(vc);
                                poLineNumVO.setNamedWhereClauseParam("bindPoLineNum", enteredPonumber);
                                //System.out.println("-----------Dynamic Query-----------");
                                //System.out.println(poLineNumVO.getQuery());
                                poLineNumVO.executeQuery();
                                AdfFacesContext.getCurrentInstance().addPartialTarget(poLineNumberTable);

                }

                }
            catch(Exception e) {
                e.printStackTrace();
            }
            System.out.println("End onPoLineNumPopUpGoClick");
        }

    public void selectPOLineNumPopup(ActionEvent actionEvent) {

        System.out.println("Start: selectPOLineNumPopup");



        BigDecimal poLineNumber = null;
        BigDecimal quantity = null;
        String uom = null;
        BigDecimal unitPrice = null;
        String lineDesctiption = null;

        String taxRateCode = null;
        BigDecimal taxAmount = null;

        RowSetIterator lineItemRSIter = null;
        RowSetIterator empRSIter =null;
        try{
        RowKeySet selectedPONum = poLineNumberTable.getSelectedRowKeys();
        Iterator selectedSiteIter = selectedPONum.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("POLineNumberDetailsVO1Iterator");
         empRSIter = empIter.getRowSetIterator();
        while(selectedSiteIter.hasNext()){
           Key key = (Key)((List)selectedSiteIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);

           /* poLineNumber = currentRow.getAttribute("LineNum") == null ? null : (BigDecimal)currentRow.getAttribute("LineNum");
            quantity = currentRow.getAttribute("Quantity") == null ? null : (BigDecimal)currentRow.getAttribute("Quantity");
            uom = currentRow.getAttribute("Uom") == null ? null : (String)currentRow.getAttribute("Uom");
            unitPrice = currentRow.getAttribute("UnitPrice") == null ? null : (BigDecimal)currentRow.getAttribute("UnitPrice");
            lineDesctiption = currentRow.getAttribute("ItemDescription") == null ? null : (String)currentRow.getAttribute("ItemDescription");
            taxRateCode = currentRow.getAttribute("TaxRateCode") == null ? null : (String)currentRow.getAttribute("TaxRateCode");
            taxAmount = currentRow.getAttribute("TaxRate") == null ? null : (BigDecimal)currentRow.getAttribute("TaxRate");*/

           poLineNumber = currentRow.getAttribute("LineNum") == null ? null : new BigDecimal(currentRow.getAttribute("LineNum").toString());
           quantity = currentRow.getAttribute("Quantity") == null ? null : new BigDecimal(currentRow.getAttribute("Quantity").toString());
           uom = currentRow.getAttribute("Uom") == null ? null : (String)currentRow.getAttribute("Uom");
           unitPrice = currentRow.getAttribute("UnitPrice") == null ? null : new BigDecimal(currentRow.getAttribute("UnitPrice").toString());
           lineDesctiption = currentRow.getAttribute("ItemDescription") == null ? null : (String)currentRow.getAttribute("ItemDescription");
           taxRateCode = currentRow.getAttribute("TaxRateCode") == null ? null : (String)currentRow.getAttribute("TaxRateCode");
           taxAmount = currentRow.getAttribute("TaxRate") == null ? null :  new BigDecimal(currentRow.getAttribute("TaxRate").toString());


            System.out.println("----- poLineNumber : "+poLineNumber+", quantity : "+quantity+", uom : "+uom+", unitPrice : "+unitPrice+", lineDesctiption : "+lineDesctiption+", taxRateCode : "+taxRateCode+", taxAmount : "+taxAmount);
         }




            //poNumPopupIt.setValue(selectedPONumber);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }


             if(selectedRowNum!=-1) {
                 FacesContext fctx = FacesContext.getCurrentInstance();
                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);

                 //Tax Rate
                 RowKeySet rowKeySet = t1.getSelectedRowKeys();
                 Iterator rowKeySetIt = rowKeySet.iterator();
                 DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");

                     lineItemRSIter = lineItemIter.getRowSetIterator();
                  while(rowKeySetIt.hasNext()){
                    Key key = (Key)((List)rowKeySetIt.next()).get(0);
                    Row currentRow = lineItemRSIter.getRow(key);
                      System.out.println("current row :: "+ currentRow);
                      if(currentRow!=null) {
                         System.out.println("current row not null ............................");
                         System.out.println("line description value ::: "+ currentRow.getAttribute("LineDescription"));
                         try {
                             currentRow.setAttribute("TaxRate", taxAmount == null ? null : new oracle.jbo.domain.Number(taxAmount.doubleValue()));
                         } catch(Exception ex) {
                             ex.printStackTrace();
                         }
                      }
                  }
                 AdfFacesContext.getCurrentInstance().addPartialTarget(t1);

                 //PO Line Number
                 if(poLineNumber!=null) {
                     erks.addScript(fctx, "document.getElementById('" + ("pt1:t1:"+selectedRowNum+":it62::content") + "').value = '"+poLineNumber.intValue()+"'");
                 }


                 //Quantity
                 if(quantity!=null) {
                     quantity = quantity.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                     erks.addScript(fctx,
                         "if("+ getJavascriptStringEmptyCheckExpressionStr( "pt1:t1:"+selectedRowNum+":it67::content" ) + " || " + getJavascriptStringValueCheckExpressionStr ( "pt1:t1:"+selectedRowNum+":it67::content", "0" ) + " ) {" +
                                getJavascriptElementSetValueExpressionStr(  "pt1:t1:"+selectedRowNum+":it67::content", "'"+quantity.doubleValue()+"'") +
                         "}"
                     );
                 }

                 //UOM
                 /*if(uom!=null) {
                     erks.addScript(fctx,
                        "if("+ getJavascriptStringEmptyCheckExpressionStr( "pt1:t1:"+selectedRowNum+":it42::content" ) + ") {" +
                               getJavascriptElementSetValueExpressionStr(  "pt1:t1:"+selectedRowNum+":it42::content", "'"+uom+"'") +
                        "}"
                     );
                 }*/
                 if(uom!=null) {
                     erks.addScript(fctx,
                        getJavascriptElementSetValueExpressionStr(  "pt1:t1:"+selectedRowNum+":it64::content", "'"+uom+"'")
                     );
                 }



                 //Unit Price
                 /*if(unitPrice!=null) {
                     unitPrice = unitPrice.setScale(2, BigDecimal.ROUND_HALF_EVEN);
                     erks.addScript(fctx,
                        "if("+ getJavascriptStringEmptyCheckExpressionStr( "pt1:t1:"+selectedRowNum+":it6::content" ) + ") {" +
                               getJavascriptElementSetValueExpressionStr(  "pt1:t1:"+selectedRowNum+":it6::content", "'"+unitPrice.doubleValue()+"'") +
                        "}"
                     );
                 }*/
                 if(unitPrice!=null) {
                     unitPrice = unitPrice.setScale(5, BigDecimal.ROUND_HALF_EVEN);
                     erks.addScript(fctx,
                        getJavascriptElementSetValueExpressionStr(  "pt1:t1:"+selectedRowNum+":it70::content", "'"+unitPrice.doubleValue()+"'")
                     );
                 }


                 //Line Description
                 if(lineDesctiption!=null) {
                     erks.addScript(fctx,
                         "if("+ getJavascriptStringEmptyCheckExpressionStr( "pt1:t1:"+selectedRowNum+":it69::content" ) + ") {" +
                                getJavascriptElementSetValueExpressionStr(  "pt1:t1:"+selectedRowNum+":it69::content", "'"+lineDesctiption+"'") +
                         "}"
                    );
                 }

                 //Tax Rate Code
                 if(taxRateCode!=null) {
                     erks.addScript(fctx,
                        getJavascriptElementSetValueExpressionStr("pt1:t1:"+selectedRowNum+":it81::content", "'"+taxRateCode+"'")
                     );
                 }


                 //Line Total
                 if(unitPrice!=null) {
                     //double lineTotal = quantity.doubleValue()*unitPrice.doubleValue();
                     //erks.addScript(fctx, "document.getElementById('" + ("pt1:t1:"+selectedRowNum+":it34::content") + "').value = parseFloat('"+ lineTotal +"').toFixed(2)");

                     String quantityValue = "pt1:t1:"+selectedRowNum+":it67::content";
                     String unitPriceValue = "pt1:t1:"+selectedRowNum+":it70::content";

                     String lineTotalAmount = "pt1:t1:"+selectedRowNum+":it66::content";
                     erks.addScript(fctx,
                         "if(!"+getJavascriptIsNaNExpressionStr(quantityValue)+" && !"+getJavascriptIsNaNExpressionStr(unitPriceValue)+") { " +
                         " document.getElementById('"+lineTotalAmount+"').value = (parseFloat(document.getElementById('"+quantityValue+"').value) * parseFloat(document.getElementById('" + unitPriceValue + "').value)).toFixed(2);" +
                         "}"
                     );

    //                     System.out.println(
    //                         "if(!"+getJavascriptIsNaNExpressionStr(quantityValue)+" && !"+getJavascriptIsNaNExpressionStr(unitPriceValue)+") { " +
    //                         " document.getElementById('"+lineTotalAmount+"').value = (parseFloat(document.getElementById('"+quantityValue+"').value) * parseFloat(document.getElementById('" + unitPriceValue + "').value)).toFixed(2);" +
    //                         "}");


                     if(taxAmount!=null) {
                         double calculatedTaxAmount = taxAmount.doubleValue()*0.01;
                         System.out.println("calculatedTaxAmount : "+calculatedTaxAmount);
                         //erks.addScript(fctx, "document.getElementById('" + ("pt1:t1:"+selectedRowNum+":ot7::content") + "').value = parseFloat('"+ taxAmount +"').toFixed(2)");


                         String script =
                         "if( !isNaN(parseFloat(document.getElementById('"+lineTotalAmount+"').value)) && "+calculatedTaxAmount+">=0.0) { " +
                          "    document.getElementById('"+"pt1:t1:"+selectedRowNum+":it75::content"+"').value = (parseFloat(document.getElementById('"+lineTotalAmount+"').value) * "+calculatedTaxAmount+").toFixed(2)" +
                         "}";

                         erks.addScript(fctx, script);

                     }
                 }


                 erks.addScript(fctx, "document.getElementById('"+"pt1:t1:"+selectedRowNum+":it62::content"+"').focus();");
                 erks.addScript(fctx, "AdfActionEvent.queue(AdfPage.PAGE.findComponentByAbsoluteId('" + "pt1:t1:"+selectedRowNum+":it62" + "'), true);");

                 //erks.addScript(fctx, "document.getElementById('"+"pt1:t1:"+selectedRowNum+":it36::content"+"').value = document.getElementById('"+"pt1:t1:"+selectedRowNum+":it36::content"+"').value");



             }

        AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
        p8.hide();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(lineItemRSIter!=null) {
                        try {
                            lineItemRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
        System.out.println("End selectPOLineNumPopup");
    }



    private static String getJavascriptElementByIdExpressionStr(String componentId) {
        return "document.getElementById('" + componentId + "').value";
    }

    private static String getJavascriptStringEmptyCheckExpressionStr(String componentId) {
        String str = getJavascriptElementByIdExpressionStr(componentId);
        return str + "==null || " + str + "==''";
    }

    private static String getJavascriptStringValueCheckExpressionStr(String componentId, String value) {
        String str = getJavascriptElementByIdExpressionStr(componentId);
        return str + "=='"+value+"'";
    }

    private static String getJavascriptElementSetValueExpressionStr(String componentId, String value) {
        return getJavascriptElementByIdExpressionStr(componentId) + " = " + value + ";";
    }

    private static String getJavascriptIsNaNExpressionStr(String componentId) {
        String str = getJavascriptElementByIdExpressionStr(componentId);
        return "isNaN( parseFloat(" + str + ") )";
    }


    public void setT14(RichTable t14) {
        this.t14 = t14;
    }

    public RichTable getT14() {
        return t14;
    }

    public void setP4_po(RichPopup p4_po) {
        this.p4_po = p4_po;
    }

    public RichPopup getP4_po() {
        return p4_po;
    }


    public void setP8(RichPopup p8) {
        this.p8 = p8;
    }

    public RichPopup getP8() {
        return p8;
    }

    public void setPoLineNumberTable(RichTable poLineNumberTable) {
        this.poLineNumberTable = poLineNumberTable;
    }

    public RichTable getPoLineNumberTable() {
        return poLineNumberTable;
    }

    public void setSelectPOLineNumPopup(RichCommandButton selectPOLineNumPopup) {
        this.selectPOLineNumPopup = selectPOLineNumPopup;
    }

    public RichCommandButton getSelectPOLineNumPopup() {
        return selectPOLineNumPopup;
    }

    public void setPoLineNumPopupIt(RichInputText poLineNumPopupIt) {
        this.poLineNumPopupIt = poLineNumPopupIt;
    }

    public RichInputText getPoLineNumPopupIt() {
        return poLineNumPopupIt;
    }

    public void setRadio_paymentTypes(RichSelectOneRadio radio_paymentTypes) {
        this.radio_paymentTypes = radio_paymentTypes;
    }

    public RichSelectOneRadio getRadio_paymentTypes() {
        return radio_paymentTypes;
    }

    public void setSuspenseAcc_Popup(RichPopup suspenseAcc_Popup) {
        this.suspenseAcc_Popup = suspenseAcc_Popup;
    }

    public RichPopup getSuspenseAcc_Popup() {
        return suspenseAcc_Popup;
    }

    public void setSuspense_message_OP(RichOutputText suspense_message_OP) {
        this.suspense_message_OP = suspense_message_OP;
    }

    public RichOutputText getSuspense_message_OP() {
        return suspense_message_OP;
    }

    public void setGLCodeIT(RichInputText GLCodeIT) {
        this.GLCodeIT = GLCodeIT;
    }

    public RichInputText getGLCodeIT() {
        return GLCodeIT;
    }

    public void setRecCode(RichInputText recCode) {
        this.recCode = recCode;
    }

    public RichInputText getRecCode() {
        return recCode;
    }

    public void setReccode_column(RichColumn reccode_column) {
        this.reccode_column = reccode_column;
    }

    public RichColumn getReccode_column() {
        return reccode_column;
    }


    public void setVendorIdIt(RichInputText vendorIdIt) {
        this.vendorIdIt = vendorIdIt;
    }

    public RichInputText getVendorIdIt() {
        return vendorIdIt;
    }

    public void setEbsErrorMessage(RichOutputText ebsErrorMessage) {
        this.ebsErrorMessage = ebsErrorMessage;
    }

    public RichOutputText getEbsErrorMessage() {
        return ebsErrorMessage;
    }

    public void setCertifierApprovePopup(RichPopup certifierApprovePopup) {
        this.certifierApprovePopup = certifierApprovePopup;
    }

    public RichPopup getCertifierApprovePopup() {
        return certifierApprovePopup;
    }

    public void setCertifierApprovePopupIt(RichInputText certifierApprovePopupIt) {
        this.certifierApprovePopupIt = certifierApprovePopupIt;
    }

    public RichInputText getCertifierApprovePopupIt() {
        return certifierApprovePopupIt;
    }

    public void oncertifierApprovePopupOKClick(ActionEvent actionEvent) {
        System.out.println("Start oncertifierApprovePopupOKClick");
        String commentsVal = null;
        try {
            if(certifierApprovePopupIt.getValue() != null)
                commentsVal = certifierApprovePopupIt.getValue().toString();
            System.out.println("commentsPopupIt: "+certifierApprovePopupIt);
            certifierApproveComments.setValue(commentsVal);
            certifierApprovePopup.hide();
            AdfFacesContext.getCurrentInstance().addPartialTarget(certifierApproveComments);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End oncertifierApprovePopupOKClick");
    }

    public void setPgParent(RichPanelGroupLayout pgParent) {
        this.pgParent = pgParent;
    }

    public RichPanelGroupLayout getPgParent() {
        return pgParent;
    }


    public void setValidate_cb(RichCommandButton validate_cb) {
        this.validate_cb = validate_cb;
    }

    public RichCommandButton getValidate_cb() {
        return validate_cb;
    }



    public void openExpenditureTypePopup(ActionEvent actionEvent) {
        // Add event code here...

        System.out.println("Start openExpenditureTypePopup");

        if(orgIdIt.getValue()==null || (orgIdIt.getValue()!=null && orgIdIt.getValue().toString().equals("")  )){
                    System.out.println("Setting orgId value on submit click as it is coming null ::: ");

                    String orgId = getOrgIdFinal();
                    orgIdIt.setValue(orgId);
                    AdfFacesContext.getCurrentInstance().getPageFlowScope().put("OrgID",orgId);
                    System.out.println("Value setted in org Id i/p :::"+orgIdIt.getValue());
                    //Added on 24th JAn
                    AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);
                }


        String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);
        String enteredProjectId=null;
        String enteredTaskId=null;
        String expenditureDate = null; //Exp Date Change : 18th August : Sourav
        try{
            RowKeySet rowKeySet = t1.getSelectedRowKeys();
            Iterator rowKeySetIt = rowKeySet.iterator();
            DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            RowSetIterator lineItemRSIter=null;
            try{
                lineItemRSIter = lineItemIter.getRowSetIterator();
             while(rowKeySetIt.hasNext()){
               Key key = (Key)((List)rowKeySetIt.next()).get(0);
               Row currentRow = lineItemRSIter.getRow(key);
                 if(currentRow!=null) {
                    System.out.println("----- Project ID ----- "+currentRow.getAttribute("ProjectidLine"));
                    enteredProjectId = currentRow.getAttribute("ProjectidLine")==null?"":currentRow.getAttribute("ProjectidLine").toString().trim();

                     System.out.println("----- Task ID ----- "+currentRow.getAttribute("TaskidLine"));
                     enteredTaskId = currentRow.getAttribute("TaskidLine")==null?"":currentRow.getAttribute("TaskidLine").toString().trim();

                    /*** Exp Date change : 18th August : Sourav ***/

                    System.out.println("----- Expenditure Date in openExpenditureTypePopup----- "+currentRow.getAttribute("ExpenditureDate"));

                    oracle.jbo.domain.Date expDate = null;
                    if(currentRow.getAttribute("ExpenditureDate") == null) {

                       System.out.println("Expenditure Date empty hence exp type popup does not open");
                       String vallMsg="Please enter Expenditure Date in line no "+ currentRow.getAttribute("LineNumber") +" for Expenditure Type";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);
                       return;
                    }

                    expDate = ((oracle.jbo.domain.Date)currentRow.getAttribute("ExpenditureDate"));
                    SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("dd-MMM-yyyy");
                    expenditureDate = expDate != null ? DATE_FORMAT.format(expDate.getValue()): null;



    }
             }
            }catch(Exception e)
            {e.printStackTrace();
             }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        try{
               // String enteredProjectId = setProjectIdIt();
               enteredProjectId=setProjectIdIt();
                String enteredExpenditureType = null;
                System.out.println("New Project id in openExpenditureTypePopup :: "+ enteredProjectId);

                //enteredTaskId =AdfFacesContext.getCurrentInstance().getPageFlowScope().get("selected_taskNo")!=null ?
                //    AdfFacesContext.getCurrentInstance().getPageFlowScope().get("selected_taskNo").toString() : null;

                System.out.println("New Project id in selected_taskNo :: "+ enteredTaskId);
                   /* if(projectIdIt.getValue() != null) {
                        enteredProjectId = projectIdIt.getValue().toString();
                        System.out.println("projectIdIt.getValue(): "+enteredProjectId);
                    }*/
                    if(expTypeIt.getValue() != null){
                        enteredExpenditureType = expTypeIt.getValue().toString();
                        System.out.println("expTypeIt.getValue(): "+enteredExpenditureType);
                    }
                        DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                        DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureTypeVO1Iterator");
                        ViewObjectImpl expenditureTypeVo = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                        ViewCriteria vc = expenditureTypeVo.getViewCriteria("ExpenditureTypeVOCriteria");
                        expenditureTypeVo.applyViewCriteria(vc);
                        expenditureTypeVo.setNamedWhereClauseParam("bindProjectId", enteredProjectId);
                        expenditureTypeVo.setNamedWhereClauseParam("bindExpType", enteredExpenditureType);
                expenditureTypeVo.setNamedWhereClauseParam("bindExpDate", expenditureDate);
                expenditureTypeVo.setNamedWhereClauseParam("bindTaskId", enteredTaskId);
                        //System.out.println("-----------Dynamic Query-----------");
                        //System.out.println(expenditureTypeVo.getQuery());
                        expenditureTypeVo.executeQuery();
                        AdfFacesContext.getCurrentInstance().addPartialTarget(expTypeDetailsTable);

                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                p18.show(hints);
            }
        catch(Exception e){
                e.printStackTrace();
            }

        System.out.println("End: openExpenditureTypePopup");
    }




    public void onExpTypeGoClick(ActionEvent actionEvent) {
        // Add event code here...

        System.out.println("Start onExpTypeGoClick");
        String enteredExpType = null;
        String enteredProjectId=null;
        String enteredTaskId=null;

        oracle.jbo.domain.Date expDate = null;
        String expenditureDate = null;
        SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("dd-MMM-yyyy");

        try{
            RowKeySet rowKeySet = t1.getSelectedRowKeys();
            Iterator rowKeySetIt = rowKeySet.iterator();
            DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            RowSetIterator lineItemRSIter=null;
            try{
                lineItemRSIter = lineItemIter.getRowSetIterator();
             while(rowKeySetIt.hasNext()){
               Key key = (Key)((List)rowKeySetIt.next()).get(0);
               Row currentRow = lineItemRSIter.getRow(key);
                 if(currentRow!=null) {
            System.out.println("----- Project ID ----- "+currentRow.getAttribute("ProjectidLine"));
            enteredProjectId = currentRow.getAttribute("ProjectidLine")==null?"":currentRow.getAttribute("ProjectidLine").toString().trim();

             System.out.println("----- Task ID ----- "+currentRow.getAttribute("TaskidLine"));
             enteredTaskId = currentRow.getAttribute("TaskidLine")==null?"":currentRow.getAttribute("TaskidLine").toString().trim();

                    expDate = (oracle.jbo.domain.Date)currentRow.getAttribute("ExpenditureDate");
                    expenditureDate = expDate != null ? DATE_FORMAT.format(expDate.getValue()): null;

                    System.out.println("----- Expenditure Date ----- "+expenditureDate);
        }
             }
            }catch(Exception e)
            {e.printStackTrace();
             }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        try {
            if(expTypePopUpIt.getValue() != null) {
                enteredExpType = expTypePopUpIt.getValue().toString();
                System.out.println("expTypePopUpIt.getValue(): "+enteredExpType);
            }

    //
    //                if(projectIdIt.getValue() != null) {
    //                    enteredProjectId = projectIdIt.getValue().toString();
    //                    System.out.println("projectIdIt.getValue(): "+enteredProjectId);
    //                }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureTypeVO1Iterator");
                ViewObjectImpl expenditureTypeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expenditureTypeVO.getViewCriteria("ExpenditureTypeVOCriteria");
                expenditureTypeVO.applyViewCriteria(vc);
                expenditureTypeVO.setNamedWhereClauseParam("bindExpType", enteredExpType);
                expenditureTypeVO.setNamedWhereClauseParam("bindProjectId", enteredProjectId);
                expenditureTypeVO.setNamedWhereClauseParam("bindTaskId", enteredTaskId);
                expenditureTypeVO.setNamedWhereClauseParam("bindExpDate", expenditureDate);
                expenditureTypeVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(expTypeDetailsTable);
            //}
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onExpTypeGoClick");
    }

    public void onExpTypeGoClick_old(ActionEvent actionEvent) {
        // Add event code here...

        System.out.println("Start onExpTypeGoClick");
        String enteredExpType = null;
        String enteredProjectId=null;
        String enteredTaskId=null;
        try{
            RowKeySet rowKeySet = t1.getSelectedRowKeys();
            Iterator rowKeySetIt = rowKeySet.iterator();
            DCIteratorBinding lineItemIter = ((DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry()).findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
            RowSetIterator lineItemRSIter=null;
            try{
                lineItemRSIter = lineItemIter.getRowSetIterator();
             while(rowKeySetIt.hasNext()){
               Key key = (Key)((List)rowKeySetIt.next()).get(0);
               Row currentRow = lineItemRSIter.getRow(key);
                 if(currentRow!=null) {
                    System.out.println("----- Project ID ----- "+currentRow.getAttribute("ProjectidLine"));
                    enteredProjectId = currentRow.getAttribute("ProjectidLine")==null?"":currentRow.getAttribute("ProjectidLine").toString().trim();

                     System.out.println("----- Task ID ----- "+currentRow.getAttribute("TaskidLine"));
                     enteredTaskId = currentRow.getAttribute("TaskidLine")==null?"":currentRow.getAttribute("TaskidLine").toString().trim();
        }
             }
            }catch(Exception e)
            {e.printStackTrace();
             }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        try {
            if(expTypePopUpIt.getValue() != null) {
                enteredExpType = expTypePopUpIt.getValue().toString();
                System.out.println("expTypePopUpIt.getValue(): "+enteredExpType);
            }

    //
    //                if(projectIdIt.getValue() != null) {
    //                    enteredProjectId = projectIdIt.getValue().toString();
    //                    System.out.println("projectIdIt.getValue(): "+enteredProjectId);
    //                }
                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureTypeVO1Iterator");
                ViewObjectImpl expenditureTypeVO = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expenditureTypeVO.getViewCriteria("ExpenditureTypeVOCriteria");
                expenditureTypeVO.applyViewCriteria(vc);
                expenditureTypeVO.setNamedWhereClauseParam("bindExpType", enteredExpType);
            expenditureTypeVO.setNamedWhereClauseParam("bindProjectId", enteredProjectId);
            expenditureTypeVO.setNamedWhereClauseParam("bindTaskId", enteredTaskId);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(expenditureTypeVO.getQuery());
                expenditureTypeVO.executeQuery();
                AdfFacesContext.getCurrentInstance().addPartialTarget(expTypeDetailsTable);
            //}
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End onExpTypeGoClick");
    }

    public void cancelExpenditureTypePopup(ActionEvent actionEvent) {
        // Add event code here...

        System.out.println("Start: cancelExpenditureTypePopup");
        expTypePopUpIt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(expTypePopUpIt);
        p18.hide();

        System.out.println("End: cancelExpenditureTypePopup");
    }

    public void selectExpenditureTypePopup(ActionEvent actionEvent) {
        // Add event code here...
        System.out.println("Start: selectExpenditureTypePopup");



        String selectedExpType="";

        RowKeySet selectedExp = expTypeDetailsTable.getSelectedRowKeys();
        Iterator selectedExpTypeIter = selectedExp.iterator();
        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding empIter = bindings.findIteratorBinding("ExpenditureTypeVO1Iterator");
        RowSetIterator empRSIter=null;
        try{
            empRSIter = empIter.getRowSetIterator();
        while(selectedExpTypeIter.hasNext()){
           Key key = (Key)((List)selectedExpTypeIter.next()).get(0);
           Row currentRow = empRSIter.getRow(key);
           System.out.println(currentRow.getAttribute("ExpenditureType"));
             selectedExpType=currentRow.getAttribute("ExpenditureType").toString();

         }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
        finally{
                    if(empRSIter!=null) {
                        try {
                            empRSIter.closeRowSetIterator();
                        } catch(Exception ex) {
                            ex.printStackTrace();

                    }
                    }
                }
            //poNumPopupIt.setValue(selectedPONumber);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }


             if(selectedRowNum!=-1) {


                 String componentIDPoNumber = "pt1:t1:"+selectedRowNum+":it281::content";
                 System.out.println("----- componentIDPoNumber ----- "+componentIDPoNumber+", selectedExpType : "+selectedExpType);

                 FacesContext fctx = FacesContext.getCurrentInstance();
                 ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                 String myJavaScriptCode = "document.getElementById('"+componentIDPoNumber+"').value = '"+selectedExpType+"'";
                 erks.addScript(fctx, myJavaScriptCode );
             }

        //AdfFacesContext.getCurrentInstance().addPartialTarget(headerOuterPgl);
        expTypePopUpIt.setValue("");
        AdfFacesContext.getCurrentInstance().addPartialTarget(expTypePopUpIt);
        p18.hide();
        System.out.println("End selectExpenditureTypePopup");
    }

    public void validateExpenditureType(ClientEvent clientEvent) {
        // Add event code here...
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        oracle.jbo.domain.Date expDate = null;
        String expenditureDate = null;

        System.out.println("Start validateExpenditureType");
        String clientId = clientEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);

        int selectedRowNum = -1;

        if(clientID.getValue()!=null) {
                selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
                System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
        }

        try {
            String enteredExpenditureType=null;
            String enteredProjectId=setProjectIdIt();

            expDate = getExpenditureDate ();

            System.out.println("Expenditure Date value : "+expDate);

            /**** Check whether expenditure date is present or not ****/


            if(expDate == null){

                System.out.println("Expenditure Date blank");
                String vallMsg="Please Enter Expenditure Date before entering Expenditure Type";
                this.validationErrorMessage.setValue(vallMsg);
                AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                RichPopup.PopupHints hints = new RichPopup.PopupHints();
                validationErrorPopup.show(hints);

                 if(selectedRowNum!=-1) {

                     String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                     System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");
                     FacesContext fctx = FacesContext.getCurrentInstance();
                     ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                     String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                     erks.addScript(fctx, myJavaScriptCode );

                 }

                    System.out.println("returning from Validate method on null date");
            }


            else{

            SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("dd-MMM-yyyy");
            expenditureDate = expDate != null ? DATE_FORMAT.format(expDate.getValue()): null;

            System.out.println("printing even after return");

            String selectedExpType=null;
            System.out.println("projectIdIt.getValue(): "+enteredProjectId);


            enteredExpenditureType=(String)parameters.get("submittedValue");
            System.out.println("ExpType.getValue(): "+enteredExpenditureType);



            if(enteredExpenditureType!=null && !enteredExpenditureType.equals("") && enteredExpenditureType!="" && enteredExpenditureType.trim()!=null && !enteredExpenditureType.trim().isEmpty() &&
            enteredProjectId!=null && !enteredProjectId.equals("") && enteredProjectId!="" && enteredProjectId.trim()!=null && !enteredProjectId.trim().isEmpty()){

              boolean invalidQuery=true;

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureTypeVO1Iterator");
                ViewObjectImpl expenditureTypeValidateVo = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expenditureTypeValidateVo.getViewCriteria("ExpenditureTypeVOCriteria2");
                expenditureTypeValidateVo.applyViewCriteria(vc);
                expenditureTypeValidateVo.setNamedWhereClauseParam("bindProjectId", enteredProjectId);
                expenditureTypeValidateVo.setNamedWhereClauseParam("bindExpType", enteredExpenditureType);
                expenditureTypeValidateVo.setNamedWhereClauseParam("bindExpDate", expenditureDate);
                expenditureTypeValidateVo.executeQuery();
System.out.println("Expenditure Type Row Count : "+expenditureTypeValidateVo.getEstimatedRowCount());
                //            while(expenditureTypeValidateVo.hasNext()){
                               if (expenditureTypeValidateVo.getEstimatedRowCount()>0){
                //                    Row row = expenditureTypeValidateVo.next();
                               Row row = expenditureTypeValidateVo.getCurrentRow();

                if(row.getAttribute("ExpenditureType") != null){
                System.out.println(row.getAttribute("ExpenditureType"));
                 selectedExpType=row.getAttribute("ExpenditureType").toString();

                     if(selectedRowNum!=-1) {

                         String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                         System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+selectedExpType);

                         FacesContext fctx = FacesContext.getCurrentInstance();
                         ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                         String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+selectedExpType+"'";
                         erks.addScript(fctx, myJavaScriptCode );

                     }
                }
                else{

                       System.out.println("Invalid Expenditure type");
                       String vallMsg="Please Enter a valid Expenditure Type";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);

                        if(selectedRowNum!=-1) {


                            String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                            System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");

                            FacesContext fctx = FacesContext.getCurrentInstance();
                            ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                            String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                            erks.addScript(fctx, myJavaScriptCode );

                        }

                    }

                invalidQuery=false;
            }
            if(invalidQuery)
            {
                System.out.println("Executing"+invalidQuery);

                   System.out.println("Invalid ExpenditureType");
                   String vallMsg="Please Enter a valid Expenditure Type";
                   this.validationErrorMessage.setValue(vallMsg);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                   RichPopup.PopupHints hints = new RichPopup.PopupHints();
                   validationErrorPopup.show(hints);

                    //counterPartyOt.setValue("");
                    if(selectedRowNum!=-1) {

                        String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                        System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                        String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode );

                    }
                }
            }
            else{
            if(selectedRowNum!=-1) {

                String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");

                FacesContext fctx = FacesContext.getCurrentInstance();
                ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                erks.addScript(fctx, myJavaScriptCode );
            }
            }

            }

        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateExpenditureType");
    }









    public void validateExpenditureType_old(ClientEvent clientEvent) {
        // Add event code here...
        RichInputText inputTxt =  (RichInputText) clientEvent.getComponent();

        Map  parameters = clientEvent.getParameters();
        System.out.println("SubmittedValue = "+parameters.get("submittedValue"));
        System.out.println("LocalValue = " +parameters.get("localValue"));

        oracle.jbo.domain.Date expDate = null;
        String expenditureDate = null;

        System.out.println("Start validateExpenditureType");
      //  String clientId = actionEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
      String clientId = clientEvent.getComponent().getClientId(FacesContext.getCurrentInstance());
        System.out.println(" ----- clientID : "+clientId);
        this.clientID.setValue(clientId);

        try {
            String enteredExpenditureType=null;
            String enteredProjectId=setProjectIdIt();
           // String enteredProjectId=null;
         //   System.out.println("New Project id in openTaskNoPopup :: "+ enteredProjectId);
            String selectedExpType=null;
           //if(projectIdIt.getValue() != null) {
             //   enteredProjectId = projectIdIt.getValue().toString();
                System.out.println("projectIdIt.getValue(): "+enteredProjectId);
          //  }

            enteredExpenditureType=(String)parameters.get("submittedValue");
            System.out.println("ExpType.getValue(): "+enteredExpenditureType);

            int selectedRowNum = -1;

            if(clientID.getValue()!=null) {
            selectedRowNum = Integer.parseInt(clientID.getValue().toString().split(":")[2]);
            System.out.println(" ----- Selected row has client id pattern : "+selectedRowNum);
            }

            if(enteredExpenditureType!=null && !enteredExpenditureType.equals("") && enteredExpenditureType!="" && enteredExpenditureType.trim()!=null && !enteredExpenditureType.trim().isEmpty() &&
            enteredProjectId!=null && !enteredProjectId.equals("") && enteredProjectId!="" && enteredProjectId.trim()!=null && !enteredProjectId.trim().isEmpty()){

              boolean invalidQuery=true;

                DCBindingContainer dcBindingContainer = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
                DCIteratorBinding dcIteratorBinding = dcBindingContainer.findIteratorBinding("ExpenditureTypeVO1Iterator");
                ViewObjectImpl expenditureTypeValidateVo = (ViewObjectImpl)dcIteratorBinding.getViewObject();
                ViewCriteria vc = expenditureTypeValidateVo.getViewCriteria("ExpenditureTypeVOCriteria2");
                expenditureTypeValidateVo.applyViewCriteria(vc);
                expenditureTypeValidateVo.setNamedWhereClauseParam("bindProjectId", enteredProjectId);
                expenditureTypeValidateVo.setNamedWhereClauseParam("bindExpType", enteredExpenditureType);
                expenditureTypeValidateVo.setNamedWhereClauseParam("bindExpDate", expenditureDate);
//                System.out.println("-----------Dynamic Query-----------");
//                System.out.println(expenditureTypeValidateVo.getQuery());
                expenditureTypeValidateVo.executeQuery();
            while(expenditureTypeValidateVo.hasNext()){
                    Row row = expenditureTypeValidateVo.next();
                if(row.getAttribute("ExpenditureType") != null){
                System.out.println(row.getAttribute("ExpenditureType"));
                 selectedExpType=row.getAttribute("ExpenditureType").toString();

                     if(selectedRowNum!=-1) {

                         String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                         System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+selectedExpType);

                         FacesContext fctx = FacesContext.getCurrentInstance();
                         ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                         String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+selectedExpType+"'";
                         erks.addScript(fctx, myJavaScriptCode );

                     }
                }
                else{

                       System.out.println("Invalid Expenditure type");
                       String vallMsg="Please Enter a valid Expenditure Type";
                       this.validationErrorMessage.setValue(vallMsg);
                       AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                       RichPopup.PopupHints hints = new RichPopup.PopupHints();
                       validationErrorPopup.show(hints);

                        if(selectedRowNum!=-1) {


                            String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                            System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");

                            FacesContext fctx = FacesContext.getCurrentInstance();
                            ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                            String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                            erks.addScript(fctx, myJavaScriptCode );

                        }

                    }

                invalidQuery=false;
            }
            if(invalidQuery)
            {
                System.out.println("Executing"+invalidQuery);

                   System.out.println("Invalid ExpenditureType");
                   String vallMsg="Please Enter a valid Expenditure Type";
                   this.validationErrorMessage.setValue(vallMsg);
                   AdfFacesContext.getCurrentInstance().addPartialTarget(validationErrorMessage);
                   RichPopup.PopupHints hints = new RichPopup.PopupHints();
                   validationErrorPopup.show(hints);

                    //counterPartyOt.setValue("");
                    if(selectedRowNum!=-1) {

                        String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                        System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");

                        FacesContext fctx = FacesContext.getCurrentInstance();
                        ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                        String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                        erks.addScript(fctx, myJavaScriptCode );

                    }
                }
       //     AdfFacesContext.getCurrentInstance().addPartialTarget(lineItemsTable);
           // System.out.println("table refreshed********************");

            // }
            }
            else{
            if(selectedRowNum!=-1) {

                String componentIDExpType = "pt1:t1:"+selectedRowNum+":it281::content";
                System.out.println("----- componentIDExpType ----- "+componentIDExpType+", selectedExpType : "+"");

                FacesContext fctx = FacesContext.getCurrentInstance();
                ExtendedRenderKitService erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
                String myJavaScriptCode = "document.getElementById('"+componentIDExpType+"').value = '"+""+"'";
                erks.addScript(fctx, myJavaScriptCode );
            }
            }



        }
        catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("End validateExpenditureType");
    }


    public void setP18(RichPopup p18) {
        this.p18 = p18;
    }

    public RichPopup getP18() {
        return p18;
    }

    public void setExpTypePopUpIt(RichInputText expTypePopUpIt) {
        this.expTypePopUpIt = expTypePopUpIt;
    }

    public RichInputText getExpTypePopUpIt() {
        return expTypePopUpIt;
    }

    public void setExpTypeDetailsTable(RichTable expTypeDetailsTable) {
        this.expTypeDetailsTable = expTypeDetailsTable;
    }

    public RichTable getExpTypeDetailsTable() {
        return expTypeDetailsTable;
    }

    public void setExpTypeIt(RichInputText expTypeIt) {
        this.expTypeIt = expTypeIt;
    }

    public RichInputText getExpTypeIt() {
        return expTypeIt;
    }


    public void setExpType_column(RichColumn expType_column) {
        this.expType_column = expType_column;
    }

    public RichColumn getExpType_column() {
        return expType_column;
    }

    private oracle.jbo.domain.Date getExpenditureDate() {

        System.out.println("getExpenditureDate : starts");


        DCBindingContainer bindings =(DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding lineItemIter = bindings.findIteratorBinding("ApOverseasLineitemTableEOView1Iterator");
        ViewObject lineItemVO=     lineItemIter.getViewObject();
        System.out.println("RowCount::"+lineItemVO.getEstimatedRowCount());

        oracle.jbo.domain.Date expDate = null;
        /* ********************* */

        RowSetIterator rsi=null;
        try{
            rsi = lineItemVO.createRowSetIterator(null);
            while (rsi.next() != null) {
            Row lineItemRow = rsi.getCurrentRow();
                System.out.println("Expenditure Date ::"+lineItemRow.getAttribute("ExpenditureDate"));
                expDate = (oracle.jbo.domain.Date)lineItemRow.getAttribute("ExpenditureDate");

        }
        }catch(Exception e)
        {
            e.printStackTrace();
            }
         finally{
                     if(rsi!=null) {
                         try {
                             rsi.closeRowSetIterator();
                         } catch(Exception ex) {
                             ex.printStackTrace();

                     }
                     }
                 }

        SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("dd-MMM-yyyy");
        String expenditureDate = expDate != null ? DATE_FORMAT.format(expDate.getValue()): null;
        System.out.println("date value in GetExpenditureDate : "+expenditureDate);
        System.out.println("GetExpenditureDate : ends");
        return expDate;
    }


    public void setAlternateapprovNoIt(RichInputText alternateapprovNoIt) {
        this.alternateapprovNoIt = alternateapprovNoIt;
    }

    public RichInputText getAlternateapprovNoIt() {
        return alternateapprovNoIt;
    }


    public String getOrgIdFinal(){

        String orgIdstr=null;
        String orgId_new=null;
        RowSetIterator rowIt =null;
        DCBindingContainer bindings = getBindings();
        DCBindingContainer dcBindingContainer_site = (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
        DCIteratorBinding dcIteratorBinding_site = dcBindingContainer_site.findIteratorBinding("SitesVO1Iterator");
        ViewObjectImpl suppNameVO = (ViewObjectImpl)dcIteratorBinding_site.getViewObject();
        ViewCriteria vc_site = suppNameVO.getViewCriteria("SitesVOCriteria");
        suppNameVO.applyViewCriteria(vc_site);
                        ViewCriteria viewCrit_site =
                            suppNameVO.getViewCriteria("SitesVOCriteriaSupNameSiteID_orgId");
                        suppNameVO.applyViewCriteria(viewCrit_site);
                        suppNameVO.setNamedWhereClauseParam("bindVendorName",
                                                            supNameIt.getValue());
                        suppNameVO.setNamedWhereClauseParam("bvSiteID", siteIdIt.getValue());
                        suppNameVO.setNamedWhereClauseParam("bindOperatingUnit", operatingUnitIt.getValue());
        suppNameVO.setNamedWhereClauseParam("bindOrg", (String) ADFContext.getCurrent()
                                                                                  .getPageFlowScope()
                                                                                  .get("ORG"));
                System.out.println("-----------Dynamic Query getOrgIdFinal----------- supNameIt.getValue()"+supNameIt.getValue());
        System.out.println("-----------Dynamic Query getOrgIdFinal-----------siteIdIt.getValue()"+siteIdIt.getValue());
        System.out.println("-----------Dynamic Query getOrgIdFinal-----------operatingUnitIt.getValue()"+operatingUnitIt.getValue());
//                        System.out.println("-----------Dynamic Query getOrgIdFinal-----------");
//                        System.out.println(suppNameVO.getQuery());


                        suppNameVO.executeQuery();
                        if (suppNameVO.getEstimatedRowCount() > 0) {
                            System.out.println("--- Match found for Supplier Name : " +
                                               suppNameVO.getEstimatedRowCount() +
                                               " records.");
                             rowIt = suppNameVO.createRowSetIterator(null);
                            while (rowIt.hasNext()) {
                                Row rowData = rowIt.next();
                                try {
                                    //System.out.println("--- Matched Supplier Number : " +rowData.getAttribute("VendorNumber"));

                                    //orgId = rowData.getAttribute("OrgId") == null ? null :(String)rowData.getAttribute("OrgId");

                                orgId_new = rowData.getAttribute("OrgId") == null ? null : rowData.getAttribute("OrgId").toString();

                            } catch (Exception e) {
                                    e.printStackTrace();
                                }
                            }
                        }
                        System.out.println("orgId_new ::: "+ orgId_new);
                        if(rowIt!=null) {
                            try {
                                rowIt.closeRowSetIterator();
                            } catch(Exception ex) {
                                ex.printStackTrace();
                            }
                        }

        orgIdstr= orgId_new;
        BigDecimal orgId_passed =new BigDecimal(orgIdstr);
        orgIdIt.setValue(orgId_passed);
        OperationBinding comt = (OperationBinding)bindings.getOperationBinding("Commit");
        comt.execute();
        //Added on 24th JAn
        AdfFacesContext.getCurrentInstance().addPartialTarget(orgIdIt);

        return (orgIdIt.getValue()!=null ?orgIdIt.getValue().toString() : null) ;

    }


    public void setIframePGLayout(RichPanelGroupLayout iframePGLayout) {
        this.iframePGLayout = iframePGLayout;
    }

    public RichPanelGroupLayout getIframePGLayout() {
        return iframePGLayout;
    }

    public void setCertifierPG(RichPanelGroupLayout certifierPG) {
        this.certifierPG = certifierPG;
    }

    public RichPanelGroupLayout getCertifierPG() {
        return certifierPG;
    }

    public void setCertifier_commandImageLink(RichCommandImageLink certifier_commandImageLink) {
        this.certifier_commandImageLink = certifier_commandImageLink;
    }

    public RichCommandImageLink getCertifier_commandImageLink() {
        return certifier_commandImageLink;
    }

    public void setSearchAltApproverLink(RichCommandImageLink searchAltApproverLink) {
        this.searchAltApproverLink = searchAltApproverLink;
    }

    public RichCommandImageLink getSearchAltApproverLink() {
        return searchAltApproverLink;
    }

    public void setCertifierApproveLink(RichCommandImageLink certifierApproveLink) {
        this.certifierApproveLink = certifierApproveLink;
    }

    public RichCommandImageLink getCertifierApproveLink() {
        return certifierApproveLink;
    }

    public void setPgFileIFrame(RichPanelGroupLayout pgFileIFrame) {
        this.pgFileIFrame = pgFileIFrame;
    }

    public RichPanelGroupLayout getPgFileIFrame() {
        return pgFileIFrame;
    }

    public void setSuspense_message_code(RichOutputText suspense_message_code) {
        this.suspense_message_code = suspense_message_code;
    }

    public RichOutputText getSuspense_message_code() {
        return suspense_message_code;
    }
    public static String getNextDate(String  curDate) throws ParseException {
    //  final SimpleDateFormat format = new SimpleDateFormat("yyyy/MM/dd");
    final SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");
      final Date date = format.parse(curDate);
      final Calendar calendar = Calendar.getInstance();
      calendar.setTime(date);
      calendar.add(Calendar.DAY_OF_YEAR, 1);
      return format.format(calendar.getTime());
    }

    public String futuredatevalidation() throws ParseException {
     String abc=null;
          SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
          Date currDAte = new Date();
         String cur_DAte=  sdf.format(currDAte);
          try {
              abc = getNextDate(cur_DAte);
              System.out.println("abc----->"+abc);
          } catch (ParseException e) {
          }

          //SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
          Date date1 =sdf.parse(abc) ;
          SimpleDateFormat inv = new SimpleDateFormat("yyyy-MM-dd");
          Date date2 = inv.parse(invDateId.getValue().toString());


          if (date1.compareTo(date2) == 0 || date1.compareTo(date2)>0 ) {
                     return "Allowed ";
                  }

          else if (date1.compareTo(date2) < 0) {
                      return "Not allowed";
                  }

      return null;

      }


    public void setEbsPanelGroupLaylout(RichPanelGroupLayout ebsPanelGroupLaylout) {
        this.ebsPanelGroupLaylout = ebsPanelGroupLaylout;
    }

    public RichPanelGroupLayout getEbsPanelGroupLaylout() {
        return ebsPanelGroupLaylout;
    }

    public void setPropertyLoader(PropertyLoader propertyLoader) {
        this.propertyLoader = propertyLoader;
    }

    public PropertyLoader getPropertyLoader() {
        return propertyLoader;
    }


    //923018 Start UI Change for New Field
    public void setElectRemittence(RichInputText electRemittence) {
        this.electRemittence = electRemittence;
    }

    public RichInputText getElectRemittence() {
        return electRemittence;
    }

    public void setIt100(RichInputText it100) {
        this.it100 = it100;
    }

    public RichInputText getIt100() {
        return it100;
    }

    public void setElectRemittenceLink(RichCommandImageLink electRemittenceLink) {
        this.electRemittenceLink = electRemittenceLink;
    }

    public RichCommandImageLink getElectRemittenceLink() {
        return electRemittenceLink;
    }

    public void setElectRemittencePopup(RichPopup electRemittencePopup) {
        this.electRemittencePopup = electRemittencePopup;
    }

    public RichPopup getElectRemittencePopup() {
        return electRemittencePopup;
    }

    public void setElectRemittencePopUpIt(RichInputText electRemittencePopUpIt) {
        this.electRemittencePopUpIt = electRemittencePopUpIt;
    }

    public RichInputText getElectRemittencePopUpIt() {
        return electRemittencePopUpIt;
    }
    //923018 End UI Change for New Field

   /* public void setT14(RichTable t14) {
        this.t14 = t14;
    }

    public RichTable getT14() {
        return t14;
    }

    public void setIt26(RichInputText it26) {
        this.it26 = it26;
    }

    public RichInputText getIt26() {
        return it26;
    }*/

    public void setCb5(RichCommandButton cb5) {
        this.cb5 = cb5;
    }

    public RichCommandButton getCb5() {
        return cb5;
    }

    public void setOt76(RichOutputText ot76) {
        this.ot76 = ot76;
    }

    public RichOutputText getOt76() {
        return ot76;
    }

    public void setPgl1(RichPanelGroupLayout pgl1) {
        this.pgl1 = pgl1;
    }

    public RichPanelGroupLayout getPgl1() {
        return pgl1;
    }


}
