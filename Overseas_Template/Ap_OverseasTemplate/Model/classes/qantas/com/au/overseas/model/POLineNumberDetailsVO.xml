<?xml version="1.0" encoding="windows-1252" ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!---->
<ViewObject
  xmlns="http://xmlns.oracle.com/bc4j"
  Name="POLineNumberDetailsVO"
  Version="11.1.1.64.93"
  InheritPersonalization="true"
  BindingStyle="OracleName"
  CustomQuery="true"
  PageIterMode="Full"
  UseGlueCode="false">
  <DesignTime>
    <Attr Name="_isExpertMode" Value="true"/>
  </DesignTime>
  <Properties>
    <SchemaBasedProperties>
      <LABEL
        ResId="qantas.com.au.overseas.model.POLineNumberDetailsVO_LABEL"/>
    </SchemaBasedProperties>
  </Properties>
  <Variable
    Name="po_number"
    Kind="viewcriteria"
    Type="java.lang.String"/>
  <Variable
    Name="vendor_id"
    Kind="viewcriteria"
    Type="java.lang.String"/>
  <Variable
    Name="site_id"
    Kind="viewcriteria"
    Type="java.lang.String"/>
  <Variable
    Name="po_line_number"
    Kind="viewcriteria"
    Type="java.lang.String"/>
  <SQLQuery>
    <![CDATA[SELECT *
  FROM (SELECT tab.po_number
              ,tab.line_num
              ,SUM(nvl(tab.quantity
                      ,0)) quantity
              ,tab.uom
              ,SUM(nvl(tab.unit_price
                      ,0)) unit_price
              ,tab.vendor_id
              ,tab.vendor_site_id
              ,tab.org_id
              ,tab.item_description
              ,tab.closed_code po_line_status
              ,decode(tab.cancel_flag
                     ,NULL
                     ,'NO'
                     ,'N'
                     ,'NO'
                     ,'YES') line_cancelled_status
              ,tab.tax_rate_code
              ,tab.tax_rate
          FROM (SELECT pha.segment1 po_number
                      ,pha.vendor_id
                      ,pha.vendor_site_id
                      ,pha.org_id
                      ,pla.line_num
                      ,pla.quantity line_quantity
                      ,pla.amount
                      ,pla.matching_basis
                      ,pla.item_description
                      ,pla.closed_code
                      ,pha.cancel_flag
                      ,pha.po_header_id
                      , CASE
                          WHEN pla.matching_basis = 'AMOUNT' THEN
                           (CASE
                          WHEN ((plla.amount - plla.amount_cancelled) -
                               plla.amount_billed) < 0 THEN
                           0
                          ELSE
                           ((plla.amount - plla.amount_cancelled) -
                           plla.amount_billed)
                        END) WHEN pla.matching_basis = 'QUANTITY' THEN(CASE
                         WHEN ((plla.quantity -
                              plla.quantity_cancelled) -
                              plla.quantity_billed) < 0 THEN
                          0
                         ELSE
                          ((plla.quantity -
                          plla.quantity_cancelled) -
                          plla.quantity_billed)
                       END) END quantity
                      ,CASE
                         WHEN pla.matching_basis = 'QUANTITY' THEN
                          pla.unit_price
                         WHEN pla.matching_basis = 'AMOUNT' THEN
                          1
                       END unit_price
                      ,pla.unit_meas_lookup_code uom
                      ,(SELECT NAME
                          FROM apps.hr_organization_units
                         WHERE organization_id = pla.org_id) operating_unit
                      ,zl.tax_rate_code
                      ,zl.tax_rate
                  FROM apps.po_headers_all        pha
                      ,apps.po_lines_all          pla
                      ,apps.po_line_locations_all plla
                      ,(SELECT b.tax_rate_code
                                        ,c.trx_id
                                        ,c.trx_line_id
                                        ,b.percentage_rate tax_rate
                                    FROM apps.zx_accounts           zacc
                                        ,apps.zx_rates_b            b
                                        ,apps.zx_lines_det_factors  c
                                        ,apps.zx_rates_tl           zt
                                        ,apps.zx_id_tcc_mapping_all zov
                                   WHERE c.input_tax_classification_code =
                                         b.tax_rate_code
                                     AND b.active_flag = 'Y'
                                     AND b.tax_rate_id = zt.tax_rate_id
                                     AND zov.tax_rate_code_id = b.tax_rate_id
                                     AND zacc.internal_organization_id =
                                         c.internal_organization_id
                                     AND zov.org_id =
                                         c.internal_organization_id
                                     AND b.tax_rate_id =
                                         zacc.tax_account_entity_id
                                     AND trunc(SYSDATE) BETWEEN
                                         b.effective_from AND
                                         nvl(b.effective_to
                                            ,trunc(SYSDATE) + 1)
                                     AND decode(b.record_type_code
                                               ,'MIGRATED'
                                               ,'INPUT'
                                               ,'USER_DEFINED'
                                               ,zov.tax_type) =
                                         nvl(b.tax_class
                                            ,'GST')
                                     AND c.application_id = 201) zl
                 WHERE pha.po_header_id = pla.po_header_id
                   AND plla.po_header_id = pha.po_header_id
                   AND plla.po_line_id = pla.po_line_id
                   AND pha.authorization_status NOT IN
                       ('INCOMPLETE', 'REQUIRES REAPPROVAL')
                   AND nvl(pha.attribute_category
                  ,'XXXXX') NOT IN ('AVIATION FUEL', 'EINVOICE')
                   AND pha.type_lookup_code = 'STANDARD'    
                   AND nvl(zl.trx_line_id ,plla.line_location_id) = plla.line_location_id
                   AND zl.trx_id(+) = pha.po_header_id
                   ) tab
         WHERE 1 = 1
           AND tab.po_number = :po_number
         GROUP BY tab.po_number
                 ,tab.line_num
                 ,tab.uom
                 ,tab.line_quantity
                 ,unit_price
                 ,org_id
                 ,tab.vendor_id
                 ,tab.vendor_site_id
                 ,tab.item_description
                 ,tab.cancel_flag
                 ,tab.closed_code
                 ,tab.tax_rate_code
                 ,tab.tax_rate
         ORDER BY tab.line_num)]]>
  </SQLQuery>
  <ViewAttribute
    Name="PoNumber"
    IsUpdateable="false"
    IsPersistent="false"
    IsNotNull="true"
    PrecisionRule="true"
    Precision="255"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="PO_NUMBER"
    Expression="PO_NUMBER"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="20"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="LineNum"
    IsUpdateable="false"
    IsPersistent="false"
    IsNotNull="true"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="LINE_NUM"
    Expression="LINE_NUM"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="Quantity"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="QUANTITY"
    Expression="QUANTITY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="Uom"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="25"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="UOM"
    Expression="UOM"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="25"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="UnitPrice"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="UNIT_PRICE"
    Expression="UNIT_PRICE"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="VendorId"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="VENDOR_ID"
    Expression="VENDOR_ID"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="VendorSiteId"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="VENDOR_SITE_ID"
    Expression="VENDOR_SITE_ID"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="OrgId"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="ORG_ID"
    Expression="ORG_ID"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="ItemDescription"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="240"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="ITEM_DESCRIPTION"
    Expression="ITEM_DESCRIPTION"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="240"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="PoLineStatus"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="25"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="PO_LINE_STATUS"
    Expression="PO_LINE_STATUS"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="25"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="LineCancelledStatus"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="3"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="LINE_CANCELLED_STATUS"
    Expression="LINE_CANCELLED_STATUS"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="3"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="TaxRateCode"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="50"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="TAX_RATE_CODE"
    Expression="TAX_RATE_CODE"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="50"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="TaxRate"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TAX_RATE"
    Expression="TAX_RATE"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewCriteria
    Name="POLineNumberDetailsVOCriteria_filterByVendorIdSiteId"
    ViewObjectName="qantas.com.au.overseas.model.POLineNumberDetailsVO"
    Conjunction="AND">
    <Properties>
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="allowConjunctionOverride"
          Value="true"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="vcrow361"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="PoNumber"
        ViewAttribute="PoNumber"
        Operator="STARTSWITH"
        Conjunction="AND"
        Value=":po_number"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="VendorId"
        ViewAttribute="VendorId"
        Operator="="
        Conjunction="AND"
        Value=":vendor_id"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="VendorSiteId"
        ViewAttribute="VendorSiteId"
        Operator="="
        Conjunction="AND"
        Value=":site_id"
        IsBindVarValue="true"
        Required="Optional"/>
    </ViewCriteriaRow>
  </ViewCriteria>
  <ViewCriteria
    Name="POLineNumberDetailsVOCriteria_filterByVendorId"
    ViewObjectName="qantas.com.au.overseas.model.POLineNumberDetailsVO"
    Conjunction="AND">
    <Properties>
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="allowConjunctionOverride"
          Value="true"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="vcrow431"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="PoNumber"
        ViewAttribute="PoNumber"
        Operator="STARTSWITH"
        Conjunction="AND"
        Value=":po_number"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="VendorId"
        ViewAttribute="VendorId"
        Operator="="
        Conjunction="AND"
        Value=":vendor_id"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="VendorSiteId"
        ViewAttribute="VendorSiteId"
        Operator="="
        Conjunction="AND"
        Value=":site_id"
        IsBindVarValue="true"
        Required="Optional"/>
    </ViewCriteriaRow>
  </ViewCriteria>
  <ViewCriteria
    Name="POLineNumberDetailsVOCriteria"
    ViewObjectName="qantas.com.au.overseas.model.POLineNumberDetailsVO"
    Conjunction="AND">
    <Properties>
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="allowConjunctionOverride"
          Value="true"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="vcrow460"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="PoNumber"
        ViewAttribute="PoNumber"
        Operator="="
        Conjunction="AND"
        Value=":po_number"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="LineNum"
        ViewAttribute="LineNum"
        Operator="="
        Conjunction="AND"
        Value=":po_line_number"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="VendorId"
        ViewAttribute="VendorId"
        Operator="="
        Conjunction="AND"
        Value=":vendor_id"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="VendorSiteId"
        ViewAttribute="VendorSiteId"
        Operator="="
        Conjunction="AND"
        Value=":site_id"
        IsBindVarValue="true"
        Required="Optional"/>
    </ViewCriteriaRow>
  </ViewCriteria>
  <ViewCriteria
    Name="POLineDetailsVOCriteria_lookupForLineNum"
    ViewObjectName="qantas.com.au.overseas.model.POLineNumberDetailsVO"
    Conjunction="AND">
    <Properties>
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="allowConjunctionOverride"
          Value="true"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="vcrow509"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="PoNumber"
        ViewAttribute="PoNumber"
        Operator="="
        Conjunction="AND"
        Value=":po_number"
        IsBindVarValue="true"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="LineNum"
        ViewAttribute="LineNum"
        Operator="="
        Conjunction="AND"
        Value=":po_line_number"
        IsBindVarValue="true"
        Required="Optional"/>
    </ViewCriteriaRow>
  </ViewCriteria>
  <ViewCriteria
    Name="POLineDetailsVOCriteria"
    ViewObjectName="qantas.com.au.overseas.model.POLineNumberDetailsVO"
    Conjunction="AND">
    <Properties>
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="allowConjunctionOverride"
          Value="true"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="vcrow564"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="PoNumber"
        ViewAttribute="PoNumber"
        Operator="="
        Conjunction="AND"
        Value=":po_number"
        IsBindVarValue="true"
        Required="Optional"/>
    </ViewCriteriaRow>
  </ViewCriteria>
  <ResourceBundle>
    <PropertiesBundle
      PropertiesFile="qantas.com.au.overseas.model.ModelBundle"/>
  </ResourceBundle>
</ViewObject>
